// ==UserScript==
// @name         SwordWorld2.5
// @author       木落
// @version      1.0.0
// @description  在海豹中使用剑世界2.5规则，请使用.sw help查看指令说明。大概需要30MB内存
// @timestamp    1676821025
// 2023/1/23
// @license      MIT
// @homepageURL  https://github.com/sealdice/seal-swordworld
// ==/UserScript==

(()=>{var Er=Object.create;var Ye=Object.defineProperty;var xr=Object.getOwnPropertyDescriptor;var Rr=Object.getOwnPropertyNames;var Sr=Object.getPrototypeOf,qr=Object.prototype.hasOwnProperty;var Ie=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(C,z)=>(typeof require!="undefined"?require:C)[z]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var pe=(e,C)=>()=>(C||e((C={exports:{}}).exports,C),C.exports);var Ar=(e,C,z,g)=>{if(C&&typeof C=="object"||typeof C=="function")for(let y of Rr(C))!qr.call(e,y)&&y!==z&&Ye(e,y,{get:()=>C[y],enumerable:!(g=xr(C,y))||g.enumerable});return e};var je=(e,C,z)=>(z=e!=null?Er(Sr(e)):{},Ar(C||!e||!e.__esModule?Ye(z,"default",{value:e,enumerable:!0}):z,e));var Ee=pe(Xe=>{(function(e){"use strict";var C;if(typeof globalThis!="undefined"?e=globalThis:typeof global!="undefined"?e=global:typeof window!="undefined"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?C=e.console:C={},"log"in C||(C.log=function(){}),"warn"in C||(C.warn=C.log),typeof e.Opal!="undefined")return C.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var z,g,y,M,D,X,j,b=e.Opal={};b.global=e,b.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var U=Function.prototype.call,F=Function.prototype.bind,J=Object.hasOwn||U.bind(Object.prototype.hasOwnProperty),H=Object.setPrototypeOf,B=U.bind(Array.prototype.slice),K=U.bind(Array.prototype.splice),k=4,I=k;function V(){return I+=2,I}b.uid=V,b.id=function(_){return _.$$is_number?_*2+1:(_.$$id==null&&w(_,"$$id",V()),_.$$id)};var v=b.gvars={};b.exit=function(_){v.DEBUG&&C.log("Exited with status "+_)},b.exceptions=[],b.pop_exception=function(){var _=b.exceptions.pop();_?(v["!"]=_,v["@"]=_.$backtrace()):v["!"]=v["@"]=z};function x(_,q){if(_||(_=b.Exception||Error),j&&j.$raise)arguments.length>2?j.$raise(_.$new.apply(_,B(arguments,1))):j.$raise(_,q);else throw _.$new?_.$new(q):new _(q)}function w(_,q,Y){typeof _=="string"?_[q]=Y:Object.defineProperty(_,q,{value:Y,enumerable:!1,configurable:!0,writable:!0})}b.prop=w,b.defineProperty=b.prop,b.slice=B;var T=b.truthy=function(_){return _!==!1&&z!==_&&_!==void 0&&_!==null&&(!(_ instanceof Boolean)||_.valueOf()===!0)};b.falsy=function(_){return!T(_)},b.type_error=function(_,q,Y,Q){_=_.$$class,Q&&Y?(Q=Q.$$class,x(b.TypeError,"can't convert "+_+" into "+q+" ("+_+"#"+Y+" gives "+Q+")")):x(b.TypeError,"no implicit conversion of "+_+" into "+q)},b.coerce_to=function(_,q,Y,Q){var ae;return Y==="to_int"&&q===b.Integer&&_.$$is_number?_<0?Math.ceil(_):Math.floor(_):Y==="to_str"&&q===b.String&&_.$$is_string||b.is_a(_,q)?_:_["$respond_to?"].$$pristine&&_.$method_missing.$$pristine?(ae=_[O(Y)],(ae==null||ae.$$stub)&&b.type_error(_,q),ae.apply(_,Q)):(_["$respond_to?"](Y)||b.type_error(_,q),Q==null&&(Q=[]),b.send(_,Y,Q))},b.respond_to=function(_,q,Y){if(_==null||!_.$$class)return!1;Y=!!Y;var Q=_[q];if(_["$respond_to?"].$$pristine){if(typeof Q=="function"&&!Q.$$stub)return!0;if(!_["$respond_to_missing?"].$$pristine)return b.send(_,_["$respond_to_missing?"],[q.substr(1),Y])}else return b.send(_,_["$respond_to?"],[q.substr(1),Y])},b.trace_class=!1,b.tracers_for_class=[];function o(_){var q,Y,Q;for(q=0,Y=b.tracers_for_class.length;q<Y;q++)Q=b.tracers_for_class[q],Q.trace_object=_,Q.block.$call(Q)}function A(_,q){if(_.$$autoload[q].loaded){if(_.$$autoload[q].loaded&&!_.$$autoload[q].required&&_.$$autoload[q].exception)throw _.$$autoload[q].exception}else{_.$$autoload[q].loaded=!0;try{b.Kernel.$require(_.$$autoload[q].path)}catch(Y){throw _.$$autoload[q].exception=Y,Y}if(_.$$autoload[q].required=!0,_.$$const[q]!=null)return _.$$autoload[q].success=!0,_.$$const[q]}}function N(_,q){if(_){if(_.$$const[q]!=null)return _.$$const[q];if(_.$$autoload&&_.$$autoload[q])return A(_,q)}}function L(_,q){var Y,Q,ae;if(_.length!==0)for(Y=0,Q=_.length;Y<Q;Y++){if(ae=_[Y].$$const[q],ae!=null)return ae;if(_[Y].$$autoload&&_[Y].$$autoload[q])return A(_[Y],q)}}function S(_,q){var Y,Q,ae;if(_!=null)for(ae=Z(_),Y=0,Q=ae.length;Y<Q;Y++){if(ae[Y].$$const&&J(ae[Y].$$const,q))return ae[Y].$$const[q];if(ae[Y].$$autoload&&ae[Y].$$autoload[q])return A(ae[Y],q)}}function c(_,q){if(_==null||_.$$is_module)return S(y,q)}function E(_,q){return(_||y).$const_missing(q)}b.const_get_local=function(_,q,Y){var Q;if(_!=null)return _==="::"&&(_=y),!_.$$is_module&&!_.$$is_class&&x(b.TypeError,_.toString()+" is not a class/module"),Q=N(_,q),Q!=null||Y?Q:E(_,q)},b.const_get_qualified=function(_,q,Y){var Q,ae,le,ce=b.const_cache_version;if(q==null)return Q=N(y,_),Q!=null?Q:b.const_get_qualified(y,_,Y);if(_!=null)return _==="::"&&(_=y),!_.$$is_module&&!_.$$is_class&&x(b.TypeError,_.toString()+" is not a class/module"),(ae=_.$$const_cache)==null&&(w(_,"$$const_cache",Object.create(null)),ae=_.$$const_cache),le=ae[q],le==null||le[0]!==ce?((Q=N(_,q))!=null||(Q=S(_,q))!=null,ae[q]=[ce,Q]):Q=le[1],Q!=null||Y?Q:E(_,q)},b.const_cache_version=1,b.const_get_relative=function(_,q,Y){var Q=_[0],ae,le=b.const_cache_version,ce,_e;return(ce=_.$$const_cache)==null&&(w(_,"$$const_cache",Object.create(null)),ce=_.$$const_cache),_e=ce[q],_e==null||_e[0]!==le?((ae=N(Q,q))!=null||(ae=L(_,q))!=null||(ae=S(Q,q))!=null||(ae=c(Q,q))!=null,ce[q]=[le,ae]):ae=_e[1],ae!=null||Y?ae:E(Q,q)};function m(_,q,Y){var Q=!0;return(_==null||_==="::")&&(_=y),Y.$$is_a_module&&((Y.$$name==null||Y.$$name===z)&&(Y.$$name=q),Y.$$base_module==null&&(Y.$$base_module=_)),_.$$const=_.$$const||Object.create(null),(q in _.$$const||"$$autoload"in _&&q in _.$$autoload)&&(Q=!1),_.$$const[q]=Y,_.$$=_.$$const,b.const_cache_version++,_===y&&(b[q]=Y),w(_,q,Y),Q&&_.$const_added&&!_.$const_added.$$pristine&&_.$const_added(q),Y}b.const_set=m,b.constants=function(_,q){q==null&&(q=!0);var Y,Q=[_],ae,le,ce={},_e;for(q&&(Q=Q.concat(Z(_))),q&&_.$$is_module&&(Q=Q.concat([b.Object]).concat(Z(b.Object))),ae=0,le=Q.length;ae<le&&(Y=Q[ae],!(_!==y&&Y==y));ae++){for(_e in Y.$$const)ce[_e]=!0;if(Y.$$autoload)for(_e in Y.$$autoload)ce[_e]=!0}return Object.keys(ce)},b.const_remove=function(_,q){if(b.const_cache_version++,_.$$const[q]!=null){var Y=_.$$const[q];return delete _.$$const[q],Y}if(_.$$autoload&&_.$$autoload[q])return delete _.$$autoload[q],z;x(b.NameError,"constant "+_+"::"+_.$name()+" not defined")},b.const_get_relative_factory=function(_){return function(q,Y){return b.$$(_,q,Y)}},b.$$=b.const_get_relative,b.$$$=b.const_get_qualified,b.$r=b.const_get_relative_factory;function f(_,q,Y){var Q;if(q!=null&&q.$$bridge?Q=function(){var _e=B(arguments),fe=new(F.apply(q.$$constructor,[null].concat(_e)));return H(fe,Q.$$prototype),fe}:Q=function(){},_&&_!==z&&w(Q,"displayName","::"+_),w(Q,"$$name",_),w(Q,"$$constructor",Q),w(Q,"$$prototype",Q.prototype),w(Q,"$$const",{}),w(Q,"$$is_class",!0),w(Q,"$$is_a_module",!0),w(Q,"$$super",q),w(Q,"$$cvars",{}),w(Q,"$$own_included_modules",[]),w(Q,"$$own_prepended_modules",[]),w(Q,"$$ancestors",[]),w(Q,"$$ancestors_cache_version",null),w(Q,"$$subclasses",[]),w(Q.$$prototype,"$$class",Q),b.Class&&H(Q,b.Class.prototype),q!=null){if(H(Q.$$prototype,q.$$prototype),Y!==!0)if(typeof WeakRef!="undefined"){var ae,le,ce=[];for(ae=0;ae<q.$$subclasses.length;ae++)le=q.$$subclasses[ae],le.deref()!==void 0&&ce.push(le);ce.push(new WeakRef(Q)),q.$$subclasses=ce}else q.$$subclasses.push(Q);q.$$meta&&b.build_class_singleton_class(Q)}return Q}b.allocate_class=f;function h(_,q){var Y=N(_,q);if(Y)return Y.$$is_class||x(b.TypeError,q+" is not a class"),Y}function R(_,q){_.$$super!==q&&x(b.TypeError,"superclass mismatch for class "+_.$$name)}b.klass=function(_,q,Y){var Q;_==null||_=="::"?_=y:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),q!=null&&(!q.hasOwnProperty||q.hasOwnProperty&&!q.hasOwnProperty("$$is_class"))&&(q.constructor&&q.constructor.name=="Function"?(Q=q,q=y):x(b.TypeError,"superclass must be a Class ("+(q.constructor&&(q.constructor.name||q.constructor.$$name)||typeof q)+" given)"));var ae=h(_,Y);return ae!=null?q&&R(ae,q):(q==null&&(q=y),ae=f(Y,q),m(_,Y,ae),q.$inherited&&q.$inherited(ae),Q&&b.bridge(Q,ae)),b.trace_class&&o(ae),ae};function d(_){var q=function(){},Y=q;return _&&w(q,"displayName",_+".constructor"),w(Y,"$$name",_),w(Y,"$$prototype",q.prototype),w(Y,"$$const",{}),w(Y,"$$is_module",!0),w(Y,"$$is_a_module",!0),w(Y,"$$cvars",{}),w(Y,"$$iclasses",[]),w(Y,"$$own_included_modules",[]),w(Y,"$$own_prepended_modules",[]),w(Y,"$$ancestors",[Y]),w(Y,"$$ancestors_cache_version",null),H(Y,b.Module.prototype),Y}b.allocate_module=d;function l(_,q){var Y=N(_,q);return Y==null&&_===y&&(Y=S(y,q)),Y&&!Y.$$is_module&&Y!==y&&x(b.TypeError,q+" is not a module"),Y}b.module=function(_,q){var Y;return _==null||_=="::"?_=y:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),Y=l(_,q),Y==null&&(Y=d(q),m(_,q,Y)),b.trace_class&&o(Y),Y},b.get_singleton_class=function(_){return _.$$meta?_.$$meta:_.hasOwnProperty("$$is_class")?b.build_class_singleton_class(_):_.hasOwnProperty("$$is_module")?b.build_module_singleton_class(_):b.build_object_singleton_class(_)};function u(_,q){_.hasOwnProperty("$$meta")?_.$$meta=q:w(_,"$$meta",q),_.$$frozen?_.$$meta.$freeze():H(_,q.$$prototype)}b.build_class_singleton_class=function(_){if(_.$$meta)return _.$$meta;var q=_===g?D:b.get_singleton_class(_.$$super),Y=f(null,q,!0);return w(Y,"$$is_singleton",!0),w(Y,"$$singleton_of",_),u(_,Y),w(_,"$$class",b.Class),Y},b.build_module_singleton_class=function(_){if(_.$$meta)return _.$$meta;var q=f(null,b.Module,!0);return w(q,"$$is_singleton",!0),w(q,"$$singleton_of",_),u(_,q),w(_,"$$class",b.Module),q},b.build_object_singleton_class=function(_){var q=_.$$class,Y=f(z,q,!0);return w(Y,"$$is_singleton",!0),w(Y,"$$singleton_of",_),delete Y.$$prototype.$$class,u(_,Y),Y},b.is_method=function(_){return _[0]==="$"&&_[1]!=="$"},b.instance_methods=function(_){for(var q=[],Y=[],Q=Z(_),ae=0,le=Q.length;ae<le;ae++){var ce=Q[ae],_e=ce.$$prototype;_e.hasOwnProperty("$$dummy")&&(_e=_e.$$define_methods_on);for(var fe=Object.getOwnPropertyNames(_e),de=0,he=fe.length;de<he;de++){var me=fe[de];if(b.is_method(me)){var ge=me.slice(1),ve=_e[me];ve.$$stub&&q.indexOf(ge)===-1&&q.push(ge),!ve.$$stub&&Y.indexOf(ge)===-1&&q.indexOf(ge)===-1&&Y.push(ge)}}}return Y},b.own_instance_methods=function(_){var q=[],Y=_.$$prototype;Y.hasOwnProperty("$$dummy")&&(Y=Y.$$define_methods_on);for(var Q=Object.getOwnPropertyNames(Y),ae=0,le=Q.length;ae<le;ae++){var ce=Q[ae];if(b.is_method(ce)){var _e=Y[ce];if(!_e.$$stub){var fe=ce.slice(1);q.push(fe)}}}return q},b.methods=function(_){return b.instance_methods(_.$$meta||_.$$class)},b.own_methods=function(_){return _.$$meta?b.own_instance_methods(_.$$meta):[]},b.receiver_methods=function(_){var q=b.get_singleton_class(_),Y=b.own_instance_methods(q),Q=b.own_instance_methods(q.$$super);return Y.concat(Q)},b.class_variables=function(_){var q=Z(_),Y,Q=q.length,ae={};for(Y=Q-1;Y>=0;Y--){var le=q[Y];for(var ce in le.$$cvars)ae[ce]=le.$$cvars[ce]}return ae},b.class_variable_set=function(_,q,Y){var Q=Z(_),ae,le=Q.length;for(ae=le-2;ae>=0;ae--){var ce=Q[ae];if(J(ce.$$cvars,q))return ce.$$cvars[q]=Y,Y}return _.$$cvars[q]=Y,Y},b.class_variable_get=function(_,q,Y){if(J(_.$$cvars,q))return _.$$cvars[q];var Q=Z(_),ae,le=Q.length;for(ae=0;ae<le;ae++){var ce=Q[ae];if(J(ce.$$cvars,q))return ce.$$cvars[q]}return Y||x(b.NameError,"uninitialized class variable "+q+" in "+_.$name()),z};function i(_){return _.hasOwnProperty("$$iclass")&&_.hasOwnProperty("$$root")}function n(_){for(var q=[],Y,Q=Object.getPrototypeOf(_.$$prototype);Q&&!Q.hasOwnProperty("$$class");)Y=p(Q),Y&&q.push(Y),Q=Object.getPrototypeOf(Q);return q}function t(_){var q=[],Y,Q=Object.getPrototypeOf(_.$$prototype);if(_.$$prototype.hasOwnProperty("$$dummy"))for(;Q&&Q!==_.$$prototype.$$define_methods_on;)Y=p(Q),Y&&q.push(Y),Q=Object.getPrototypeOf(Q);return q}b.append_features=function(_,q){var Y=Z(_),Q=[];Y.indexOf(q)!==-1&&x(b.ArgumentError,"cyclic include detected");for(var ae=0,le=Y.length;ae<le;ae++){var ce=Y[ae],_e=r(ce);w(_e,"$$included",!0),Q.push(_e)}var fe=Z(q),de=s(Q),he,me;if(fe.indexOf(_)===-1)he=q.$$prototype,me=Object.getPrototypeOf(q.$$prototype);else{for(var ge=q.$$prototype,ve=Object.getPrototypeOf(ge);ve!=null&&!(ve.$$module===_&&i(ve));)ge=ve,ve=Object.getPrototypeOf(ve);if(ve){for(var ke=Object.getPrototypeOf(ve);ke.hasOwnProperty("$$iclass")&&!i(ke);)ke=Object.getPrototypeOf(ke);he=ge,me=ke}else he=q.$$prototype,me=Object.getPrototypeOf(q.$$prototype)}H(he,de.first),H(de.last,me),q.$$own_included_modules=n(q),b.const_cache_version++},b.prepend_features=function(_,q){var Y=Z(_),Q=[];Y.indexOf(q)!==-1&&x(b.ArgumentError,"cyclic prepend detected");for(var ae=0,le=Y.length;ae<le;ae++){var ce=Y[ae],_e=r(ce);w(_e,"$$prepended",!0),Q.push(_e)}var fe=s(Q),de=q.$$prototype,he=Object.getPrototypeOf(de),me,ge,ve;de.hasOwnProperty("$$dummy")?me=de.$$define_methods_on:(me=a(q),$(q),w(de,"$$dummy",!0),w(de,"$$define_methods_on",me),H(de,me),H(me,he));var ke=Z(q);if(ke.indexOf(_)===-1)for(ge=de,ve=Object.getPrototypeOf(de);ve!=null&&!(ve.hasOwnProperty("$$root")||ve===me||!ve.hasOwnProperty("$$iclass"));)ve=Object.getPrototypeOf(ve);else x(b.RuntimeError,"Prepending a module multiple times is not supported");H(ge,fe.first),H(fe.last,ve),q.$$own_prepended_modules=t(q),b.const_cache_version++};function $(_){for(var q=_.$$prototype,Y=Object.getOwnPropertyNames(q),Q=0;Q<Y.length;Q++){var ae=Y[Q];b.is_method(ae)&&delete q[ae]}}function r(_){var q=a(_);return _.$$is_module&&_.$$iclasses.push(q),q}function a(_){var q={},Y=_.$$prototype;Y.hasOwnProperty("$$dummy")&&(Y=Y.$$define_methods_on);var Q=Object.getOwnPropertyNames(Y),ae=Q.length,le;for(le=0;le<ae;le++){var ce=Q[le];w(q,ce,Y[ce])}return w(q,"$$iclass",!0),w(q,"$$module",_),q}function s(_){var q=_.length,Y=_[0];if(w(Y,"$$root",!0),q===1)return{first:Y,last:Y};for(var Q=Y,ae=1;ae<q;ae++){var le=_[ae];H(Q,le),Q=le}return{first:_[0],last:_[q-1]}}b.bridge=function(_,q){_.hasOwnProperty("$$bridge")&&x(b.ArgumentError,"already bridged"),w(_,"$$bridge",q),H(_.prototype,(q.$$super||b.Object).$$prototype),w(q,"$$prototype",_.prototype),w(q.$$prototype,"$$class",q),w(q,"$$constructor",_),w(q,"$$bridge",!0)};function p(_){if(!_.hasOwnProperty("$$dummy")){if(_.hasOwnProperty("$$iclass"))return _.$$module;if(_.hasOwnProperty("$$class"))return _.$$class}}function G(_){return _.$$own_prepended_modules.concat([_]).concat(_.$$own_included_modules)}function Z(_){if(!_)return[];if(_.$$ancestors_cache_version===b.const_cache_version)return _.$$ancestors;var q=[],Y,Q,ae;for(Y=0,Q=G(_),ae=Q.length;Y<ae;Y++)q.push(Q[Y]);if(_.$$super)for(Y=0,Q=Z(_.$$super),ae=Q.length;Y<ae;Y++)q.push(Q[Y]);return _.$$ancestors_cache_version=b.const_cache_version,_.$$ancestors=q,q}b.ancestors=Z,b.included_modules=function(_){for(var q=[],Y=null,Q=Object.getPrototypeOf(_.$$prototype);Q&&Object.getPrototypeOf(Q);Q=Object.getPrototypeOf(Q))Y=p(Q),Y&&Y.$$is_module&&Q.$$iclass&&Q.$$included&&q.push(Y);return q},b.add_stubs=function(_){var q=b.BasicObject.$$prototype,Y,Q;_=_.split(",");for(var ae=0,le=_.length;ae<le;ae++)Y=O(_[ae]),Q=q[Y],(Q==null||Q.$$stub)&&b.add_stub_for(q,Y)},b.add_stub_for=function(_,q){w(_,q,b.stub_for(q))},b.stub_for=function(_){function q(){this.$method_missing.$$p=q.$$p,q.$$p=null;for(var Y=new Array(arguments.length),Q=0,ae=Y.length;Q<ae;Q++)Y[Q]=arguments[Q];return this.$method_missing.apply(this,[_.slice(1)].concat(Y))}return q.$$stub=!0,q},b.ac=function(_,q,Y,Q){var ae="";Y.$$is_a_module?ae+=Y.$$name+".":ae+=Y.$$class.$$name+"#",ae+=Q,x(b.ArgumentError,"["+ae+"] wrong number of arguments (given "+_+", expected "+q+")")},b.block_ac=function(_,q,Y){var Q="`block in "+Y+"'";x(b.ArgumentError,Q+": wrong number of arguments (given "+_+", expected "+q+")")};function ie(_){return _.hasOwnProperty("$$meta")&&_.$$meta!==null?Z(_.$$meta):Z(_.$$class)}b.find_super=function(_,q,Y,Q,ae){var le=O(q),ce,_e;ce=ie(_);for(var fe=ce.indexOf(Y.$$owner),de=fe+1;de<ce.length;de++){var he=ce[de],me=he.$$prototype;if(me.hasOwnProperty("$$dummy")&&(me=me.$$define_methods_on),me.hasOwnProperty(le)){_e=me[le];break}}return!Q&&_e&&_e.$$stub&&_.$method_missing.$$pristine&&x(b.NoMethodError,"super: no superclass method `"+q+"' for "+_,q),_e.$$stub&&!ae?null:_e},b.find_block_super=function(_,q,Y,Q,ae){var le=q;return Y||x(b.RuntimeError,"super called outside of method"),ae&&Y.$$define_meth&&x(b.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),Y.$$def&&(le=Y.$$jsid),b.find_super(_,le,Y,Q)},b.find_super_dispatcher=b.find_super,b.find_iter_super_dispatcher=b.find_block_super,b.yield1=function(_,q){typeof _!="function"&&x(b.LocalJumpError,"no block given");var Y=_.$$has_top_level_mlhs_arg,Q=_.$$has_trailing_comma_in_args;return(_.length>1||(Y||Q)&&_.length===1)&&(q=b.to_ary(q)),(_.length>1||Q&&_.length===1)&&q.$$is_array?_.apply(null,q):_(q)},b.yieldX=function(_,q){if(typeof _!="function"&&x(b.LocalJumpError,"no block given"),_.length>1&&q.length===1&&q[0].$$is_array)return _.apply(null,q[0]);if(!q.$$is_array){for(var Y=new Array(q.length),Q=0,ae=Y.length;Q<ae;Q++)Y[Q]=q[Q];return _.apply(null,Y)}return _.apply(null,q)},b.rescue=function(_,q){for(var Y=0;Y<q.length;Y++){var Q=q[Y];if(Q.$$is_array){var ae=b.rescue(_,Q);if(ae)return ae}else if(Q===b.JS.Error||Q["$==="](_))return Q}return null},b.is_a=function(_,q){if(q!=null&&_.$$meta===q||_.$$class===q)return!0;if(_.$$is_number&&q.$$is_number_class)return q.$$is_integer_class?_%1===0:!0;var Y=Z(_.$$is_class?b.get_singleton_class(_):_.$$meta||_.$$class);return Y.indexOf(q)!==-1},b.to_hash=function(_){if(_.$$is_hash)return _;if(_["$respond_to?"]("to_hash",!0)){var q=_.$to_hash();if(q.$$is_hash)return q;x(b.TypeError,"Can't convert "+_.$$class+" to Hash ("+_.$$class+"#to_hash gives "+q.$$class+")")}else x(b.TypeError,"no implicit conversion of "+_.$$class+" into Hash")},b.to_ary=function(_){if(_.$$is_array)return _;if(_["$respond_to?"]("to_ary",!0)){var q=_.$to_ary();if(q===z)return[_];if(q.$$is_array)return q;x(b.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_ary gives "+q.$$class+")")}else return[_]},b.to_a=function(_){if(_.$$is_array)return _.slice();if(_["$respond_to?"]("to_a",!0)){var q=_.$to_a();if(q===z)return[_];if(q.$$is_array)return q;x(b.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_a gives "+q.$$class+")")}else return[_]},b.extract_kwargs=function(_){var q=_[_.length-1];if(q!=null&&b.respond_to(q,"$to_hash",!0))return K(_,_.length-1),q},b.kwrestargs=function(_,q){var Y=[],Q={},ae,le=_.$$smap;for(ae in le)q[ae]||(Y.push(ae),Q[ae]=le[ae]);return b.hash2(Y,Q)};function ne(_,q){typeof q=="number"?_.$$arity=q:typeof q=="object"&&Object.assign(_,q)}var se={};function O(_){return se[_]||(se[_]="$"+_)}b.jsid=O,b.send=function(_,q,Y,Q,ae){var le;return typeof q=="function"?(le=q,q=null):typeof q=="string"?le=_[O(q)]:x(b.NameError,"Passed method should be a string or a function"),b.send2(_,le,q,Y,Q,ae)},b.send2=function(_,q,Y,Q,ae,le){return q==null&&Y!=null&&_.$method_missing&&(q=_.$method_missing,Q=[Y].concat(Q)),ne(ae,le),typeof ae=="function"&&(q.$$p=ae),q.apply(_,Q)},b.refined_send=function(_,q,Y,Q,ae,le){var ce,_e,fe,de,he,me,ge,ve,ke,We;for(de=ie(q),ce=0;ce<de.length;ce++)for(he=b.id(de[ce]),_e=0;_e<_.length;_e++)for(me=_[_e],fe=me.length-1;fe>=0;fe--)if(ge=me[fe],typeof ge.$$refine_modules!="undefined"&&(ve=ge.$$refine_modules,typeof ve[he]!="undefined"&&(ke=ve[he],typeof ke.$$prototype[O(Y)]!="undefined")))return We=ke.$$prototype[O(Y)],b.send2(q,We,Y,Q,ae,le);return b.send(q,Y,Q,ae,le)},b.lambda=function(_,q){return _.$$is_lambda=!0,ne(_,q),_},b.def=function(_,q,Y,Q){return ne(Y,Q),_===b.top?b.defn(b.Object,q,Y):!_.$$eval&&_.$$is_a_module?b.defn(_,q,Y):b.defs(_,q,Y)},b.defn=function(_,q,Y){te(_),Y.displayName=q,Y.$$owner=_;var Q=q.substr(1),ae=_.$$prototype;if(ae.hasOwnProperty("$$dummy")&&(ae=ae.$$define_methods_on),w(ae,q,Y),_.$$is_module){_.$$module_function&&b.defs(_,q,Y);for(var le=0,ce=_.$$iclasses,_e=ce.length;le<_e;le++){var fe=ce[le];w(fe,q,Y)}}var de=_.$$singleton_of;return _.$method_added&&!_.$method_added.$$stub&&!de?_.$method_added(Q):de&&de.$singleton_method_added&&!de.$singleton_method_added.$$stub&&de.$singleton_method_added(Q),Q},b.defs=function(_,q,Y,Q){return ne(Y,Q),(_.$$is_string||_.$$is_number)&&x(b.TypeError,"can't define singleton"),b.defn(b.get_singleton_class(_),q,Y)},b.rdef=function(_,q){J(_.$$prototype,q)||x(b.NameError,"method '"+q.substr(1)+"' not defined in "+_.$name()),delete _.$$prototype[q],_.$$is_singleton?_.$$prototype.$singleton_method_removed&&!_.$$prototype.$singleton_method_removed.$$stub&&_.$$prototype.$singleton_method_removed(q.substr(1)):_.$method_removed&&!_.$method_removed.$$stub&&_.$method_removed(q.substr(1))},b.udef=function(_,q){(!_.$$prototype[q]||_.$$prototype[q].$$stub)&&x(b.NameError,"method '"+q.substr(1)+"' not defined in "+_.$name()),b.add_stub_for(_.$$prototype,q),_.$$is_singleton?_.$$prototype.$singleton_method_undefined&&!_.$$prototype.$singleton_method_undefined.$$stub&&_.$$prototype.$singleton_method_undefined(q.substr(1)):_.$method_undefined&&!_.$method_undefined.$$stub&&_.$method_undefined(q.substr(1))};function oe(_){return typeof _=="function"&&!_.$$stub}b.alias=function(_,q,Y){var Q=O(q),ae=O(Y),le,ce;if(typeof _.$$prototype=="undefined"&&(_=b.Object),le=_.$$prototype[ae],_.$$eval)return b.alias(b.get_singleton_class(_),q,Y);if(!oe(le)){for(var _e=_.$$super;typeof le!="function"&&_e;)le=_e[ae],_e=_e.$$super;!oe(le)&&_.$$is_module&&(le=b.Object.$$prototype[ae]),oe(le)||x(b.NameError,"undefined method `"+Y+"' for class `"+_.$name()+"'")}le.$$alias_of&&(le=le.$$alias_of),ce=function(){var fe=ce.$$p,de,he,me;for(de=new Array(arguments.length),he=0,me=arguments.length;he<me;he++)de[he]=arguments[he];return ce.$$p=null,b.send(this,le,de,fe)};try{Object.defineProperty(ce,"length",{value:le.length})}catch(fe){}return ce.displayName=q,ce.$$arity=le.$$arity==null?le.length:le.$$arity,ce.$$parameters=le.$$parameters,ce.$$source_location=le.$$source_location,ce.$$alias_of=le,ce.$$alias_name=q,b.defn(_,Q,ce),_},b.alias_gvar=function(_,q){return Object.defineProperty(v,_,{configurable:!0,enumerable:!0,get:function(){return v[q]},set:function(Y){v[q]=Y}}),z},b.alias_native=function(_,q,Y){var Q=O(q),ae=_.$$prototype[Y];return(typeof ae!="function"||ae.$$stub)&&x(b.NameError,"undefined native method `"+Y+"' for class `"+_.$name()+"'"),b.defn(_,Q,ae),_},b.hash_init=function(_){_.$$smap=Object.create(null),_.$$map=Object.create(null),_.$$keys=[]},b.hash_clone=function(_,q){q.$$none=_.$$none,q.$$proc=_.$$proc;for(var Y=0,Q=_.$$keys,ae=_.$$smap,le=Q.length,ce,_e;Y<le;Y++)ce=Q[Y],ce.$$is_string?_e=ae[ce]:(_e=ce.value,ce=ce.key),b.hash_put(q,ce,_e)},b.hash_put=function(_,q,Y){if(q.$$is_string){J(_.$$smap,q)||_.$$keys.push(q),_.$$smap[q]=Y;return}var Q,ae,le;if(Q=_.$$by_identity?b.id(q):q.$hash(),!J(_.$$map,Q)){ae={key:q,key_hash:Q,value:Y},_.$$keys.push(ae),_.$$map[Q]=ae;return}for(ae=_.$$map[Q];ae;){if(q===ae.key||q["$eql?"](ae.key)){le=void 0,ae.value=Y;break}le=ae,ae=ae.next}le&&(ae={key:q,key_hash:Q,value:Y},_.$$keys.push(ae),le.next=ae)},b.hash_get=function(_,q){if(q.$$is_string)return J(_.$$smap,q)?_.$$smap[q]:void 0;var Y,Q;if(Y=_.$$by_identity?b.id(q):q.$hash(),J(_.$$map,Y))for(Q=_.$$map[Y];Q;){if(q===Q.key||q["$eql?"](Q.key))return Q.value;Q=Q.next}},b.hash_delete=function(_,q){var Y,Q=_.$$keys,ae=Q.length,le,ce;if(q.$$is_string){if(typeof q!="string"&&(q=q.valueOf()),!J(_.$$smap,q))return;for(Y=0;Y<ae;Y++)if(ce=Q[Y],ce.$$is_string&&typeof ce!="string"&&(ce=ce.valueOf()),ce===q){Q.splice(Y,1);break}return le=_.$$smap[q],delete _.$$smap[q],le}var _e=q.$hash();if(J(_.$$map,_e))for(var fe=_.$$map[_e],de;fe;){if(q===fe.key||q["$eql?"](fe.key)){for(le=fe.value,Y=0;Y<ae;Y++)if(Q[Y]===fe){Q.splice(Y,1);break}return de&&fe.next?de.next=fe.next:de?delete de.next:fe.next?_.$$map[_e]=fe.next:delete _.$$map[_e],le}de=fe,fe=fe.next}},b.hash_rehash=function(_){for(var q=0,Y=_.$$keys.length,Q,ae,le;q<Y;q++)if(!_.$$keys[q].$$is_string&&(Q=_.$$keys[q].key.$hash(),Q!==_.$$keys[q].key_hash)){for(ae=_.$$map[_.$$keys[q].key_hash],le=void 0;ae;){if(ae===_.$$keys[q]){le&&ae.next?le.next=ae.next:le?delete le.next:ae.next?_.$$map[_.$$keys[q].key_hash]=ae.next:delete _.$$map[_.$$keys[q].key_hash];break}le=ae,ae=ae.next}if(_.$$keys[q].key_hash=Q,!J(_.$$map,Q)){_.$$map[Q]=_.$$keys[q];continue}for(ae=_.$$map[Q],le=void 0;ae;){if(ae===_.$$keys[q]){le=void 0;break}le=ae,ae=ae.next}le&&(le.next=_.$$keys[q])}},b.hash=function(){var _=arguments.length,q,Y,Q,ae,le,ce;if(_===1&&arguments[0].$$is_hash)return arguments[0];if(Y=new b.Hash,b.hash_init(Y),_===1)if(q=arguments[0],arguments[0].$$is_array){for(ae=q.length,Q=0;Q<ae;Q++)q[Q].length!==2&&x(b.ArgumentError,"value not of length 2: "+q[Q].$inspect()),le=q[Q][0],ce=q[Q][1],b.hash_put(Y,le,ce);return Y}else{q=arguments[0];for(le in q)J(q,le)&&(ce=q[le],b.hash_put(Y,le,ce));return Y}for(_%2!==0&&x(b.ArgumentError,"odd number of arguments for Hash"),Q=0;Q<_;Q+=2)le=arguments[Q],ce=arguments[Q+1],b.hash_put(Y,le,ce);return Y},b.hash2=function(_,q){var Y=new b.Hash;return Y.$$smap=q,Y.$$map=Object.create(null),Y.$$keys=_,Y},b.range=function(_,q,Y){var Q=new b.Range;return Q.begin=_,Q.end=q,Q.excl=Y,Q};var ue=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];b.ivar=function(_){return ue.indexOf(_)!==-1&&(_+="$"),_};function te(_){_.$$frozen&&x(b.FrozenError,"can't modify frozen "+_.$class()+": "+_,b.hash2(["receiver"],{receiver:_}))}b.deny_frozen_access=te,b.freeze=function(_){return w(_,"$$frozen",!0),_.hasOwnProperty("$$id")||w(_,"$$id",V()),_.hasOwnProperty("$$meta")?_.$$meta.$freeze():w(_,"$$meta",null),_.hasOwnProperty("$$comparable")||w(_,"$$comparable",null),Object.seal(_),_},b.freeze_props=function(_){var q,Y,Q;for(q in _)Y=typeof q,!((Y==="string"||Y==="object")&&q[0]==="$")&&(Q=Object.getOwnPropertyDescriptor(_,q),Q&&Q.enumerable&&Q.writable&&function(){var ae=_[q];Object.defineProperty(_,q,{get:function(){return ae},set:function(le){te(_)},enumerable:!0})}())},b.escape_regexp=function(_){return _.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},b.global_regexp=function(_){return _.global?_:(_.$$g==null?_.$$g=new RegExp(_.source,(_.multiline?"gm":"g")+(_.ignoreCase?"i":"")):_.$$g.lastIndex=null,_.$$g)},b.global_multiline_regexp=function(_){var q,Y;return _.global&&_.multiline?_:(Y="gm"+(_.ignoreCase?"i":""),_.multiline?(_.$$g==null&&(_.$$g=new RegExp(_.source,Y)),q=_.$$g):(_.$$gm==null&&(_.$$gm=new RegExp(_.source,Y)),q=_.$$gm),q.lastIndex=null,q)},b.regexp=function(_,q){for(var Y,Q=typeof q!="undefined"&&q&&q.indexOf("i")>=0,ae=0,le=_.length;ae<le;ae++)Y=_[ae],Y instanceof RegExp&&(Y.ignoreCase!==Q&&b.Kernel.$warn("ignore case doesn't match for "+Y.source.$inspect(),b.hash({uplevel:1})),Y=Y.source),Y===""&&(Y="(?:"+Y+")"),_[ae]=Y;return q?new RegExp(_.join(""),q):new RegExp(_.join(""))},b.modules={},b.loaded_features=["corelib/runtime"],b.current_dir=".",b.require_table={"corelib/runtime":!0},b.normalize=function(_){var q,Y,Q=[],ae="/";b.current_dir!=="."&&(_=b.current_dir.replace(/\/*$/,"/")+_),_=_.replace(/^\.\//,""),_=_.replace(/\.(rb|opal|js)$/,""),q=_.split(ae);for(var le=0,ce=q.length;le<ce;le++)Y=q[le],Y!==""&&(Y===".."?Q.pop():Q.push(Y));return Q.join(ae)},b.loaded=function(_){var q,Y,Q;for(q=0,Y=_.length;q<Y;q++)Q=b.normalize(_[q]),!b.require_table[Q]&&(b.loaded_features.push(Q),b.require_table[Q]=!0)},b.load_normalized=function(_){b.loaded([_]);var q=b.modules[_];if(q){var Y=q(b);if(typeof Promise!="undefined"&&Y instanceof Promise)return Y.then(W(!0))}else{var Q=b.config.missing_require_severity,ae="cannot load such file -- "+_;Q==="error"?x(b.LoadError,ae):Q==="warning"&&C.warn("WARNING: LoadError: "+ae)}return!0},b.load=function(_){return _=b.normalize(_),b.load_normalized(_)},b.require=function(_){return _=b.normalize(_),b.require_table[_]?!1:b.load_normalized(_)},b.encodings=Object.create(null),b.set_encoding=function(_,q,Y){typeof Y=="undefined"&&(Y="encoding"),(typeof _=="string"||_.$$frozen===!0)&&x(b.FrozenError,"can't modify frozen String");var Q=b.find_encoding(q);return Q===_[Y]||(_[Y]=Q),_},b.find_encoding=function(_){var q=b.encodings,Y=q[_]||q[_.toUpperCase()];return Y||x(b.ArgumentError,"unknown encoding name - "+_),Y},b.enc=function(_,q){var Y=new String(_);return Y=b.set_encoding(Y,q),Y.internal_encoding=Y.encoding,Y},b.binary=function(_){var q=new String(_);return b.set_encoding(q,"binary","internal_encoding")},b.last_promise=null,b.promise_unhandled_exception=!1,b.queue=function(_){if(b.last_promise)return b.last_promise=b.last_promise.then(function(){if(!b.promise_unhandled_exception)return _(b)}).catch(function(Y){b.respond_to(Y,"$full_message")&&(Y=Y.$full_message()),C.error(Y),b.promise_unhandled_exception=!0,b.exit(1)}),b.last_promise;var q=_(b);return typeof Promise=="function"&&typeof q=="object"&&q instanceof Promise&&(b.last_promise=q),q};function $e(_,q){return typeof _=="number"&&typeof q=="number"}b.rb_plus=function(_,q){return $e(_,q)?_+q:_["$+"](q)},b.rb_minus=function(_,q){return $e(_,q)?_-q:_["$-"](q)},b.rb_times=function(_,q){return $e(_,q)?_*q:_["$*"](q)},b.rb_divide=function(_,q){return $e(_,q)?_/q:_["$/"](q)},b.rb_lt=function(_,q){return $e(_,q)?_<q:_["$<"](q)},b.rb_gt=function(_,q){return $e(_,q)?_>q:_["$>"](q)},b.rb_le=function(_,q){return $e(_,q)?_<=q:_["$<="](q)},b.rb_ge=function(_,q){return $e(_,q)?_>=q:_["$>="](q)};function re(_,q){return typeof _=="number"&&typeof q=="number"||typeof _=="string"&&typeof q=="string"}function P(_,q){return re(_,q)?_===q:T(_["$=="](q))}b.eqeq=P,b.eqeqeq=function(_,q){return re(_,q)?_===q:T(_["$==="](q))},b.neqeq=function(_,q){return re(_,q)?_!==q:T(_["$!="](q))},b.not=function(_){return _==null||_===!1||z===_?!0:_===!0||_["$!"].$$pristine?!1:T(_["$!"]())};function W(_){return function(){return _}}b.return_val=W,b.return_self=function(){return this},b.return_ivar=function(_){return function(){return this[_]==null?z:this[_]}},b.assign_ivar=function(_){return function(q){return te(this),this[_]=q}},b.assign_ivar_val=function(_,q){return function(){return te(this),this[_]=q}},b.ensure_kwargs=function(_){if(_==null)return b.hash2([],{});if(_.$$is_hash)return _;x(b.ArgumentError,"expected kwargs")},b.get_kwarg=function(_,q){return J(_.$$smap,q)||x(b.ArgumentError,"missing keyword: "+q),_.$$smap[q]},b.large_array_unpack=function(_){var q=_.split(","),Y=q.length,Q;for(Q=0;Q<Y;Q++)switch(q[Q][0]){case void 0:q[Q]=z;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":q[Q]=+q[Q]}return q},b.BasicObject=g=f("BasicObject",null),b.Object=y=f("Object",b.BasicObject),b.Module=M=f("Module",b.Object),b.Class=D=f("Class",b.Module),b.Opal=X=d("Opal"),b.Kernel=j=d("Kernel"),H(b.BasicObject,b.Class.$$prototype),H(b.Object,b.Class.$$prototype),H(b.Module,b.Class.$$prototype),H(b.Class,b.Class.$$prototype),g.$$const.BasicObject=g,m(y,"BasicObject",g),m(y,"Object",y),m(y,"Module",M),m(y,"Class",D),m(y,"Opal",X),m(y,"Kernel",j),g.$$class=D,y.$$class=D,M.$$class=D,D.$$class=D,X.$$class=M,j.$$class=M,w(y.$$prototype,"toString",function(){var _=this.$to_s();return _.$$is_string&&typeof _=="object"?_.valueOf():_}),w(y.$$prototype,"$require",b.require),b.top=new y,b.top.$to_s=b.top.$inspect=W("main"),b.top.$define_method=ee;function ee(){var _=B(arguments),q=ee.$$p;return ee.$$p=null,b.send(y,"define_method",_,q)}b.NilClass=f("NilClass",b.Object),m(y,"NilClass",b.NilClass),z=b.nil=new b.NilClass,z.$$id=k,z.call=z.apply=function(){x(b.LocalJumpError,"no block given")},z.$$frozen=!0,z.$$comparable=!1,Object.seal(z),b.thrower=function(_){var q=new Error("unexpected "+_);return q.$thrower_type=_,q.$throw=function(Y){throw Y==null&&(Y=z),q.$v=Y,q},q},b.t_eval_return=b.thrower("return"),TypeError.$$super=Error,b.file_sources={}}).call(Xe);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var C=e.type_error,z=e.coerce_to,g=e.module,y=e.defs,M=e.slice,D=e.eqeqeq,X=e.Kernel,j=e.truthy,b=e.Opal,U=e.nil,F=e.$$$;return function(J){var H=g(J,"Opal");y(H,"$bridge",function(k,I){return e.bridge(k,I)}),y(H,"$coerce_to!",function(k,I,V,v){var x,w,T=U;return x=M(arguments,3),w=x,T=z(k,I,V,w),D(I,T)||X.$raise(C(k,I,V,T)),T},-4),y(H,"$coerce_to?",function(k,I,V,v){var x,w,T=U;return x=M(arguments,3),w=x,!j(k["$respond_to?"](V))||(T=z(k,I,V,w),j(T["$nil?"]()))?U:(D(I,T)||X.$raise(C(k,I,V,T)),T)},-4),y(H,"$try_convert",function(k,I,V){return D(I,k)?k:j(k["$respond_to?"](V))?k.$__send__(V):U}),y(H,"$compare",function(k,I){var V=U;return V=k["$<=>"](I),j(V===U)&&X.$raise(F("ArgumentError"),"comparison of "+k.$class()+" with "+I.$class()+" failed"),V}),y(H,"$destructure",function(k){if(k.length==1)return k[0];if(k.$$is_array)return k;for(var I=new Array(k.length),V=0,v=I.length;V<v;V++)I[V]=k[V];return I}),y(H,"$respond_to?",function(k,I,V){return V==null&&(V=!1),k==null||!k.$$class?!1:k["$respond_to?"](I,V)},-3),y(H,"$instance_variable_name!",function(k){return k=b["$coerce_to!"](k,F("String"),"to_str"),j(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(k))||X.$raise(F("NameError").$new("'"+k+"' is not allowed as an instance variable name",k)),k}),y(H,"$class_variable_name!",function(k){return k=b["$coerce_to!"](k,F("String"),"to_str"),j(k.length<3||k.slice(0,2)!=="@@")&&X.$raise(F("NameError").$new("`"+k+"' is not allowed as a class variable name",k)),k}),y(H,"$const_name?",function(k){return typeof k!="string"&&(k=b["$coerce_to!"](k,F("String"),"to_str")),k[0]===k[0].toUpperCase()}),y(H,"$const_name!",function(k){var I,V=this;return j((I=F("::","String","skip_raise"))?"constant":U)&&(k=b["$coerce_to!"](k,F("String"),"to_str")),(!k||k[0]!=k[0].toUpperCase())&&V.$raise(F("NameError"),"wrong constant name "+k),k}),y(H,"$pristine",function(k,I){var V,v;V=M(arguments,1),v=V;for(var x,w,T=v.length-1;T>=0;T--)x=v[T],w=k.$$prototype[e.jsid(x)],w&&!w.$$stub&&(w.$$pristine=!0);return U},-2);var B=[];return y(H,"$inspect",function(k){var I=U,V=!1;return function(){try{try{return k===null?"null":k===void 0?"undefined":typeof k.$$class=="undefined"?Object.prototype.toString.apply(k):typeof k.$inspect!="function"||k.$inspect.$$stub||B.indexOf(k.$__id__())!==-1?"#<"+k.$$class+":0x"+k.$__id__().$to_s(16)+">":(B.push(k.$__id__()),V=!0,k.$inspect())}catch(v){if(e.rescue(v,[F("Exception")])){I=v;try{return"#<"+k.$$class+":0x"+k.$__id__().$to_s(16)+">"}finally{e.pop_exception()}}else throw v}}finally{V&&B.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var C=e.truthy,z=e.coerce_to,g=e.const_set,y=e.Object,M=e.return_ivar,D=e.assign_ivar,X=e.ivar,j=e.deny_frozen_access,b=e.freeze,U=e.prop,F=e.jsid,J=e.klass,H=e.defs,B=e.send,K=e.def,k=e.eqeqeq,I=e.Module,V=e.Kernel,v=e.rb_lt,x=e.rb_gt,w=e.slice,T=e.to_a,o=e.hash2,A=e.Opal,N=e.return_val,L=e.eqeq,S=e.lambda,c=e.range,E=e.send2,m=e.find_super,f=e.alias,h=[],R=e.nil,d=e.$$$;return function(l,u,i){var n=J(l,u,"Module"),t=[n].concat(i),$=e.$r(t);return H(n,"$allocate",function(){var a=this,s=e.allocate_module(R,function(){});return a!==e.Module&&Object.setPrototypeOf(s,a.$$prototype),s}),K(n,"$initialize",function r(){var a=r.$$p||R,s=this;return r.$$p=null,a!==R?B(s,"module_eval",[],a.$to_proc()):R}),K(n,"$===",function(a){var s=this;return C(a==null)?!1:e.is_a(a,s)}),K(n,"$<",function(a){var s=this;k(I,a)||V.$raise(d("TypeError"),"compared with non class/module");var p=s,G,Z,ie;if(p===a)return!1;for(Z=0,G=e.ancestors(s),ie=G.length;Z<ie;Z++)if(G[Z]===a)return!0;for(Z=0,G=e.ancestors(a),ie=G.length;Z<ie;Z++)if(G[Z]===s)return!1;return R}),K(n,"$<=",function(a){var s=this,p=R;return C(p=s["$equal?"](a))?p:v(s,a)}),K(n,"$>",function(a){var s=this;return k(I,a)||V.$raise(d("TypeError"),"compared with non class/module"),v(a,s)}),K(n,"$>=",function(a){var s=this,p=R;return C(p=s["$equal?"](a))?p:x(s,a)}),K(n,"$<=>",function(a){var s=this,p=R;return s===a?0:!k(I,a)||(p=v(s,a),C(p["$nil?"]()))?R:C(p)?-1:1}),K(n,"$alias_method",function(a,s){var p=this;return j(p),a=z(a,d("String"),"to_str"),s=z(s,d("String"),"to_str"),e.alias(p,a,s),p}),K(n,"$alias_native",function(a,s){var p=this;return s==null&&(s=a),j(p),e.alias_native(p,a,s),p},-2),K(n,"$ancestors",function(){var a=this;return e.ancestors(a)}),K(n,"$append_features",function(a){var s=this;return j(a),e.append_features(s,a),s}),K(n,"$attr_accessor",function(a){var s,p,G=this;return s=w(arguments),p=s,B(G,"attr_reader",T(p)),B(G,"attr_writer",T(p))},-1),K(n,"$attr",function(a){var s,p,G=this;return s=w(arguments),p=s,p.length==2&&(p[1]===!0||p[1]===!1)?(G.$warn("optional boolean argument is obsoleted",o(["uplevel"],{uplevel:1})),p[1]?G.$attr_accessor(p[0]):G.$attr_reader(p[0]),R):B(G,"attr_reader",T(p))},-1),K(n,"$attr_reader",function(a){var s,p,G=this;s=w(arguments),p=s,j(G);for(var Z=G.$$prototype,ie=p.length-1;ie>=0;ie--){var ne=p[ie],se=F(ne),O=X(ne),oe=M(O);e.prop(Z,O,R),oe.$$parameters=[],oe.$$arity=0,e.defn(G,se,oe)}return R},-1),K(n,"$attr_writer",function(a){var s,p,G=this;s=w(arguments),p=s,j(G);for(var Z=G.$$prototype,ie=p.length-1;ie>=0;ie--){var ne=p[ie],se=F(ne+"="),O=X(ne),oe=D(O);oe.$$parameters=[["req"]],oe.$$arity=1,e.prop(Z,O,R),e.defn(G,se,oe)}return R},-1),K(n,"$autoload",function(a,s){var p=this;return j(p),$("Opal")["$const_name?"](a)||V.$raise(d("NameError"),"autoload must be constant name: "+a),s==""&&V.$raise(d("ArgumentError"),"empty file name"),p.$$const.hasOwnProperty(a)||(p.$$autoload||(p.$$autoload={}),e.const_cache_version++,p.$$autoload[a]={path:s,loaded:!1,required:!1,success:!1,exception:!1},p.$const_added&&!p.$const_added.$$pristine&&p.$const_added(a)),R}),K(n,"$autoload?",function(a){var s=this;if(s.$$autoload&&s.$$autoload[a]&&!s.$$autoload[a].required&&!s.$$autoload[a].success)return s.$$autoload[a].path;for(var p=s.$ancestors(),G=0,Z=p.length;G<Z;G++)if(p[G].$$autoload&&p[G].$$autoload[a]&&!p[G].$$autoload[a].required&&!p[G].$$autoload[a].success)return p[G].$$autoload[a].path;return R}),K(n,"$class_variables",function(){var a=this;return Object.keys(e.class_variables(a))}),K(n,"$class_variable_get",function(a){var s=this;return a=A["$class_variable_name!"](a),e.class_variable_get(s,a,!1)}),K(n,"$class_variable_set",function(a,s){var p=this;return j(p),a=A["$class_variable_name!"](a),e.class_variable_set(p,a,s)}),K(n,"$class_variable_defined?",function(a){var s=this;return a=A["$class_variable_name!"](a),e.class_variables(s).hasOwnProperty(a)}),K(n,"$const_added",N(R)),A.$pristine(n,"const_added"),K(n,"$remove_class_variable",function(a){var s=this;if(j(s),a=A["$class_variable_name!"](a),e.hasOwnProperty.call(s.$$cvars,a)){var p=s.$$cvars[a];return delete s.$$cvars[a],p}else V.$raise(d("NameError"),"cannot remove "+a+" for "+s)}),K(n,"$constants",function(a){var s=this;return a==null&&(a=!0),e.constants(s,a)},-1),H(n,"$constants",function(a){var s=this;if(a==null){var p=(s.$$nesting||[]).concat(y),G,Z={},ie,ne;for(ie=0,ne=p.length;ie<ne;ie++)for(G in p[ie].$$const)Z[G]=!0;return Object.keys(Z)}else return e.constants(s,a)},-1),H(n,"$nesting",function(){var a=this;return a.$$nesting||[]}),K(n,"$const_defined?",function(a,s){var p=this;s==null&&(s=!0),a=$("Opal")["$const_name!"](a),C(a["$=~"](d(A,"CONST_NAME_REGEXP")))||V.$raise(d("NameError").$new("wrong constant name "+a,a));var G,Z=[p],ie,ne,se;for(s&&(Z=Z.concat(e.ancestors(p)),p.$$is_module&&(Z=Z.concat([y]).concat(e.ancestors(y)))),ne=0,se=Z.length;ne<se;ne++)if(G=Z[ne],G.$$const[a]!=null||G.$$autoload&&G.$$autoload[a]&&!G.$$autoload[a].required&&!G.$$autoload[a].success)return!0;return!1},-2),K(n,"$const_get",function(a,s){var p=this;return s==null&&(s=!0),a=$("Opal")["$const_name!"](a),a.indexOf("::")===0&&a!=="::"&&(a=a.slice(2)),C(a.indexOf("::")!=-1&&a!="::")?B(a.$split("::"),"inject",[p],function(Z,ie){return Z==null&&(Z=R),ie==null&&(ie=R),Z.$const_get(ie)}):(C(a["$=~"](d(A,"CONST_NAME_REGEXP")))||V.$raise(d("NameError").$new("wrong constant name "+a,a)),s?e.$$([p],a):e.const_get_local(p,a))},-2),K(n,"$const_missing",function(a){var s=this,p=R;return p=L(s,y)?a:""+s+"::"+a,V.$raise(d("NameError").$new("uninitialized constant "+p,a))}),K(n,"$const_set",function(a,s){var p=this;return j(p),a=A["$const_name!"](a),(C(a["$!~"](d(A,"CONST_NAME_REGEXP")))||C(a["$start_with?"]("::")))&&V.$raise(d("NameError").$new("wrong constant name "+a,a)),g(p,a,s),s}),K(n,"$public_constant",N(R)),K(n,"$define_method",function r(a,s){var p=r.$$p||R,G=this,Z=R,ie=R;if(r.$$p=null,j(G),s===void 0&&p===R&&V.$raise(d("ArgumentError"),"tried to create a Proc object without a block"),p=C(Z=p)?Z:k(d("Proc"),ie=s)?s:k(d("Method"),ie)?s.$to_proc().$$unbound:k(d("UnboundMethod"),ie)?S(function se(O){var oe,ue,te=se.$$s==null?this:se.$$s,$e=R;return oe=w(arguments),ue=oe,$e=s.$bind(te),B($e,"call",T(ue))},{$$arity:-1,$$s:G}):V.$raise(d("TypeError"),"wrong argument type "+p.$class()+" (expected Proc/Method)"),typeof Proxy!="undefined"){var ne=Object.create(null);p.$$proxy_target=p,p=new Proxy(p,{apply:function(se,O,oe){var ue=se.$$jsid;se.$$jsid=a;try{return se.apply(O,oe)}catch(te){if(te===se.$$brk||te===se.$$ret)return te.$v;throw te}finally{se.$$jsid=ue}}})}return p.$$jsid=a,p.$$s=null,p.$$def=p,p.$$define_meth=!0,e.defn(G,F(a),p)},-2),K(n,"$freeze",function(){var a=this;return C(a["$frozen?"]())?a:(a.hasOwnProperty("$$base_module")||U(a,"$$base_module",null),b(a))}),K(n,"$remove_method",function(a){var s,p,G=this;s=w(arguments),p=s;for(var Z=0;Z<p.length;Z++){var ie=p[Z];typeof ie=="string"||ie.$$is_string||G.$raise(d("TypeError"),""+G.$name()+" is not a symbol nor a string"),j(G),e.rdef(G,"$"+ie)}return G},-1),K(n,"$singleton_class?",function(){var a=this;return!!a.$$is_singleton}),K(n,"$include",function(a){var s,p,G=this;s=w(arguments),p=s;for(var Z=p.length-1;Z>=0;Z--){var ie=p[Z];ie.$$is_module||V.$raise(d("TypeError"),"wrong argument type "+ie.$class()+" (expected Module)"),ie.$append_features(G),ie.$included(G)}return G},-1),K(n,"$included_modules",function(){var a=this;return e.included_modules(a)}),K(n,"$include?",function(a){var s=this;a.$$is_module||V.$raise(d("TypeError"),"wrong argument type "+a.$class()+" (expected Module)");var p,G,Z,ie=e.ancestors(s);for(p=0,G=ie.length;p<G;p++)if(Z=ie[p],Z===a&&Z!==s)return!0;return!1}),K(n,"$instance_method",function(a){var s=this,p=s.$$prototype[F(a)];return(!p||p.$$stub)&&V.$raise(d("NameError").$new("undefined method `"+a+"' for class `"+s.$name()+"'",a)),d("UnboundMethod").$new(s,p.$$owner||s,p,a)}),K(n,"$instance_methods",function(a){var s=this;return a==null&&(a=!0),C(a)?e.instance_methods(s):e.own_instance_methods(s)},-1),K(n,"$included",N(R)),K(n,"$extended",N(R)),K(n,"$extend_object",function(a){return j(a),R}),K(n,"$method_added",function(a){var s,p;return s=w(arguments),p=s,R},-1),K(n,"$method_removed",function(a){var s,p;return s=w(arguments),p=s,R},-1),K(n,"$method_undefined",function(a){var s,p;return s=w(arguments),p=s,R},-1),K(n,"$module_eval",function r(a){var s=r.$$p||R,p,G,Z,ie=this,ne=R,se=R,O=R,oe=R,ue=R,te=R,$e=R;r.$$p=null,p=w(arguments),G=p,C(s["$nil?"]())&&C(!!e.compile)?(C(c(1,3,!1)["$cover?"](G.$size()))||V.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1..3)"),Z=[].concat(T(G)),ne=Z[0]==null?R:Z[0],se=Z[1]==null?R:Z[1],O=Z[2]==null?R:Z[2],oe=o(["file","eval"],{file:C(ue=se)?ue:"(eval)",eval:!0}),te=e.hash({arity_check:!1}).$merge(oe),$e=A.$compile(ne,te),s=B(V,"proc",[],function W(){var ee=W.$$s==null?this:W.$$s;return new Function("Opal,self","return "+$e)(e,ee)},{$$s:ie})):C(G["$any?"]())&&V.$raise(d("ArgumentError"),"wrong number of arguments ("+G.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var re=s.$$s,P;return s.$$s=null,P=s.apply(ie,[ie]),s.$$s=re,P},-1),K(n,"$module_exec",function r(a){var s=r.$$p||R,p,G,Z=this;r.$$p=null,p=w(arguments),G=p,s===R&&V.$raise(d("LocalJumpError"),"no block given");var ie=s.$$s,ne;return s.$$s=null,ne=s.apply(Z,G),s.$$s=ie,ne},-1),K(n,"$method_defined?",function(a){var s=this,p=s.$$prototype[F(a)];return!!p&&!p.$$stub}),K(n,"$module_function",function(a){var s,p,G=this;if(s=w(arguments),p=s,j(G),p.length===0)return G.$$module_function=!0,R;for(var Z=0,ie=p.length;Z<ie;Z++){var ne=p[Z],se=F(ne),O=G.$$prototype[se];e.defs(G,se,O)}return p.length===1?p[0]:p;return G},-1),K(n,"$name",function(){var a=this;if(a.$$full_name)return a.$$full_name;for(var s=[],p=a;p;){if(p.$$name===R||p.$$name==null)return R;if(s.unshift(p.$$name),p=p.$$base_module,p===y)break}return s.length===0?R:a.$$full_name=s.join("::")}),K(n,"$prepend",function(a){var s,p,G=this;s=w(arguments),p=s,p.length===0&&V.$raise(d("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var Z=p.length-1;Z>=0;Z--){var ie=p[Z];ie.$$is_module||V.$raise(d("TypeError"),"wrong argument type "+ie.$class()+" (expected Module)"),ie.$prepend_features(G),ie.$prepended(G)}return G},-1),K(n,"$prepend_features",function(a){var s=this;return j(a),s.$$is_module||V.$raise(d("TypeError"),"wrong argument type "+s.$class()+" (expected Module)"),e.prepend_features(s,a),s}),K(n,"$prepended",N(R)),K(n,"$remove_const",function(a){var s=this;return j(s),e.const_remove(s,a)}),K(n,"$to_s",function(){var a=this,s=R;return C(s=e.Module.$name.call(a))?s:"#<"+(a.$$is_module?"Module":"Class")+":0x"+a.$__id__().$to_s(16)+">"}),K(n,"$undef_method",function(a){var s,p,G=this;s=w(arguments),p=s;for(var Z=0;Z<p.length;Z++){var ie=p[Z];typeof ie=="string"||ie.$$is_string||G.$raise(d("TypeError"),""+G.$name()+" is not a symbol nor a string"),j(G),e.udef(G,"$"+p[Z])}return G},-1),K(n,"$instance_variables",function(){var a=this,s=R;s=(e.Module.$$nesting=t,a.$constants());var p=[];for(var G in a)a.hasOwnProperty(G)&&G.charAt(0)!=="$"&&G!=="constructor"&&!s["$include?"](G)&&p.push("@"+G);return p}),K(n,"$dup",function r(){var a=r.$$p||R,s=this,p=R;return r.$$p=null,p=E(s,m(s,"dup",r,!1,!0),"dup",[],a),p.$copy_class_variables(s),p.$copy_constants(s),p}),K(n,"$copy_class_variables",function(a){var s=this;for(var p in a.$$cvars)s.$$cvars[p]=a.$$cvars[p]}),K(n,"$copy_constants",function(a){var s=this,p,G=a.$$const;for(p in G)g(s,p,G[p])}),K(n,"$refine",function r(a){var s=r.$$p||R,p,G=this,Z=R,ie=R,ne=R;return r.$$p=null,p=[G,R,R],Z=p[0],ie=p[1],ne=p[2],ne=e.id(a),typeof G.$$refine_modules=="undefined"&&(G.$$refine_modules=Object.create(null)),typeof G.$$refine_modules[ne]=="undefined"?ie=G.$$refine_modules[ne]=d("Refinement").$new():ie=G.$$refine_modules[ne],ie.refinement_module=Z,ie.refined_class=a,B(ie,"class_exec",[],s.$to_proc()),ie}),K(n,"$refinements",function(){var a=this,s=a.$$refine_modules,p=o([],{});if(typeof s=="undefined")return p;for(var G in s)p["$[]="](s[G].refined_class,s[G]);return p}),K(n,"$using",function(a){return V.$raise("Module#using is not permitted in methods")}),f(n,"class_eval","module_eval"),f(n,"class_exec","module_exec"),f(n,"inspect","to_s")}("::",null,h),function(l,u){var i=J(l,u,"Refinement"),n=i.$$prototype;return n.refinement_module=n.refined_class=R,i.$attr_reader("refined_class"),K(i,"$inspect",function t(){var $=t.$$p||R,r=this;return t.$$p=null,C(r.refinement_module)?"#<refinement:"+r.refined_class.$inspect()+"@"+r.refinement_module.$inspect()+">":E(r,m(r,"inspect",t,!1,!0),"inspect",[],$)})}("::",I)};Opal.modules["corelib/class"]=function(e){var C=e.klass,z=e.send,g=e.defs,y=e.def,M=e.rb_plus,D=e.return_val,X=e.slice,j=e.send2,b=e.find_super,U=e.Kernel,F=e.alias,J=e.top,H=[],B=e.nil,K=e.$$$;return J.$require("corelib/module"),function(k,I,V){var v=C(k,I,"Class"),x=[v].concat(V),w=e.$r(x);return g(v,"$new",function T(o){var A=T.$$p||B;if(T.$$p=null,o==null&&(o=w("Object")),!o.$$is_class)throw e.TypeError.$new("superclass must be a Class");var N=e.allocate_class(B,o);return o.$inherited(N),A!==B&&z(N,"class_eval",[],A.$to_proc()),N},-1),y(v,"$allocate",function(){var o=this,A=new o.$$constructor;return A.$$id=e.uid(),A}),y(v,"$descendants",function(){var o=this;return M(o.$subclasses(),z(o.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),y(v,"$inherited",D(B)),y(v,"$initialize_dup",function(o){var A=this;A.$initialize_copy(o),A.$$name=null,A.$$full_name=null}),y(v,"$new",function T(o){var A=T.$$p||B,N,L,S=this;T.$$p=null,N=X(arguments),L=N;var c=S.$allocate();return e.send(c,c.$initialize,L,A),c},-1),y(v,"$subclasses",function(){var o=this;if(typeof WeakRef!="undefined"){var A,N,L=[];for(A=0;A<o.$$subclasses.length;A++)N=o.$$subclasses[A].deref(),N!==void 0&&L.push(N);return L}else return o.$$subclasses}),y(v,"$superclass",function(){var o=this;return o.$$super||B}),y(v,"$to_s",function T(){var o=T.$$p||B,A=this;T.$$p=null;var N=A.$$singleton_of;return N&&N.$$is_a_module?"#<Class:"+N.$name()+">":N?"#<Class:#<"+N.$$class.$name()+":0x"+e.id(N).$to_s(16)+">>":j(A,b(A,"to_s",T,!1,!0),"to_s",[],null)}),y(v,"$attached_object",function(){var o=this;if(o.$$singleton_of!=null)return o.$$singleton_of;U.$raise(K("TypeError"),"`"+o+"' is not a singleton class")}),F(v,"inspect","to_s")}("::",null,H)};Opal.modules["corelib/basic_object"]=function(e){"use strict";var C=e.klass,z=e.slice,g=e.def,y=e.alias,M=e.return_val,D=e.Opal,X=e.truthy,j=e.range,b=e.Kernel,U=e.to_a,F=e.hash2,J=e.send,H=e.eqeq,B=e.rb_ge,K=e.nil,k=e.$$$;return function(I,V){var v=C(I,V,"BasicObject");return g(v,"$initialize",function(w){var T,o;return T=z(arguments),o=T,K},-1),g(v,"$==",function(w){var T=this;return T===w}),g(v,"$eql?",function(w){var T=this;return T["$=="](w)}),y(v,"equal?","=="),g(v,"$__id__",function(){var w=this;return w.$$id!=null||e.prop(w,"$$id",e.uid()),w.$$id}),g(v,"$__send__",function x(w,T){var o=x.$$p||K,A,N,L=this;x.$$p=null,A=z(arguments,1),N=A,w.$$is_string||L.$raise(k("TypeError"),""+L.$inspect()+" is not a symbol nor a string");var S=L[e.jsid(w)];return S?(o!==K&&(S.$$p=o),S.apply(L,N)):(o!==K&&(L.$method_missing.$$p=o),L.$method_missing.apply(L,[w].concat(N)))},-2),g(v,"$!",M(!1)),D.$pristine("!"),g(v,"$!=",function(w){var T=this;return T["$=="](w)["$!"]()}),g(v,"$instance_eval",function x(w){var T=x.$$p||K,o,A,N,L=this,S=K,c=K,E=K,m=K,f=K,h=K,R=K;if(x.$$p=null,o=z(arguments),A=o,X(T["$nil?"]())&&X(!!e.compile))X(j(1,3,!1)["$cover?"](A.$size()))||b.$raise(k("ArgumentError"),"wrong number of arguments (0 for 1..3)"),N=[].concat(U(A)),S=N[0]==null?K:N[0],c=N[1]==null?K:N[1],E=N[2]==null?K:N[2],m=F(["file","eval"],{file:X(f=c)?f:"(eval)",eval:!0}),h=e.hash({arity_check:!1}).$merge(m),R=D.$compile(S,h),T=J(b,"proc",[],function u(){var i=u.$$s==null?this:u.$$s;return new Function("Opal,self","return "+R)(e,i)},{$$s:L});else{if(X(T["$nil?"]())&&X(B(A.$length(),1))&&H(A.$first()["$[]"](0),"@"))return L.$instance_variable_get(A.$first());X(A["$any?"]())&&b.$raise(k("ArgumentError"),"wrong number of arguments ("+A.$size()+" for 0)")}var d=T.$$s,l;if(T.$$s=null,L.$$is_a_module){L.$$eval=!0;try{l=T.call(L,L)}finally{L.$$eval=!1}}else l=T.call(L,L);return T.$$s=d,l},-1),g(v,"$instance_exec",function x(w){var T=x.$$p||K,o,A,N=this;x.$$p=null,o=z(arguments),A=o,X(T)||b.$raise(k("ArgumentError"),"no block given");var L=T.$$s,S;if(T.$$s=null,N.$$is_a_module){N.$$eval=!0;try{S=T.apply(N,A)}finally{N.$$eval=!1}}else S=T.apply(N,A);return T.$$s=L,S},-1),g(v,"$singleton_method_added",function(w){var T,o;return T=z(arguments),o=T,K},-1),g(v,"$singleton_method_removed",function(w){var T,o;return T=z(arguments),o=T,K},-1),g(v,"$singleton_method_undefined",function(w){var T,o;return T=z(arguments),o=T,K},-1),g(v,"$method_missing",function x(w,T){var o=x.$$p||K,A,N,L=this,S=K;return x.$$p=null,A=z(arguments,1),N=A,S=D.$inspect(L),b.$raise(k("NoMethodError").$new("undefined method `"+w+"' for "+S,w,N),K,b.$caller(1))},-2),D.$pristine(v,"method_missing"),g(v,"$respond_to_missing?",function(w,T){return T==null&&(T=!1),!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){"use strict";var C=e.truthy,z=e.coerce_to,g=e.respond_to,y=e.Opal,M=e.deny_frozen_access,D=e.freeze,X=e.freeze_props,j=e.jsid,b=e.module,U=e.return_val,F=e.def,J=e.Kernel,H=e.gvars,B=e.slice,K=e.send,k=e.to_a,I=e.ensure_kwargs,V=e.eqeq,v=e.hash2,x=e.rb_plus,w=e.eqeqeq,T=e.return_self,o=e.rb_le,A=e.extract_kwargs,N=e.rb_lt,L=e.Object,S=e.alias,c=e.klass,E=[],m=e.nil,f=e.$$$;return function(h,R){var d=b(h,"Kernel"),l=[d].concat(R),u=e.$r(l);F(d,"$=~",U(!1)),F(d,"$!~",function(t){var $=this;return $["$=~"](t)["$!"]()}),F(d,"$===",function(t){var $=this,r=m;return C(r=$.$object_id()["$=="](t.$object_id()))?r:$["$=="](t)}),F(d,"$<=>",function(t){var $=this;$.$$comparable=!0;var r=$["$=="](t);return r&&r!==m?0:m}),F(d,"$method",function(t){var $=this,r=$[j(t)];return(!r||r.$$stub)&&J.$raise(f("NameError").$new("undefined method `"+t+"' for class `"+$.$class()+"'",t)),f("Method").$new($,r.$$owner||$.$class(),r,t)}),F(d,"$methods",function(t){var $=this;return t==null&&(t=!0),C(t)?e.methods($):e.own_methods($)},-1),F(d,"$public_methods",function(t){var $=this;return t==null&&(t=!0),C(t)?e.methods($):e.receiver_methods($)},-1),F(d,"$Array",function(t){var $;return t===m?[]:t.$$is_array?t:($=y["$coerce_to?"](t,f("Array"),"to_ary"),$!==m||($=y["$coerce_to?"](t,f("Array"),"to_a"),$!==m)?$:[t])}),F(d,"$at_exit",function n(){var t=n.$$p||m,$=m;return H.__at_exit__==null&&(H.__at_exit__=m),n.$$p=null,H.__at_exit__=C($=H.__at_exit__)?$:[],H.__at_exit__["$<<"](t),t}),F(d,"$caller",function(t,$){t==null&&(t=1),$==null&&($=m);var r,a;r=new Error().$backtrace(),a=[];for(var s=t+1,p=r.length;s<p;s++)r[s].match(/runtime\.js/)||a.push(r[s]);return $!=m&&(a=a.slice(0,$)),a},-1),F(d,"$caller_locations",function(t){var $,r,a=this;return $=B(arguments),r=$,K(K(a,"caller",k(r)),"map",[],function(p){return p==null&&(p=m),f(f(f("Thread"),"Backtrace"),"Location").$new(p)})},-1),F(d,"$class",function(){var t=this;return t.$$class}),F(d,"$copy_instance_variables",function(t){var $=this,r=Object.keys(t),a,s,p;for(a=0,s=r.length;a<s;a++)p=r[a],p.charAt(0)!=="$"&&t.hasOwnProperty(p)&&($[p]=t[p])}),F(d,"$copy_singleton_methods",function(t){var $=this,r,a,s,p;if(t.hasOwnProperty("$$meta")&&t.$$meta!==null){var G=e.get_singleton_class(t),Z=e.get_singleton_class($);for(s=Object.getOwnPropertyNames(G.$$prototype),r=0,p=s.length;r<p;r++)a=s[r],e.is_method(a)&&(Z.$$prototype[a]=G.$$prototype[a]);Z.$$const=Object.assign({},G.$$const),Object.setPrototypeOf(Z.$$prototype,Object.getPrototypeOf(G.$$prototype))}for(r=0,s=Object.getOwnPropertyNames(t),p=s.length;r<p;r++)a=s[r],a.charAt(0)==="$"&&a.charAt(1)!=="$"&&t.hasOwnProperty(a)&&($[a]=t[a])}),F(d,"$clone",function(t){var $,r=this,a=m;return t=I(t),$=t.$$smap.freeze,$==null&&($=m),C($["$nil?"]())||V($,!0)||V($,!1)||r.$raise(u("ArgumentError"),"unexpected value for freeze: "+$.$class()),a=r.$class().$allocate(),a.$copy_instance_variables(r),a.$copy_singleton_methods(r),a.$initialize_clone(r,v(["freeze"],{freeze:$})),(V($,!0)||C($["$nil?"]())&&C(r["$frozen?"]()))&&a.$freeze(),a},-1),F(d,"$initialize_clone",function(t,$){var r,a=this;return $=I($),r=$.$$smap.freeze,r==null&&(r=m),a.$initialize_copy(t),a},-2),F(d,"$define_singleton_method",function n(t,$){var r=n.$$p||m,a=this;return n.$$p=null,K(a.$singleton_class(),"define_method",[t,$],r.$to_proc())},-2),F(d,"$dup",function(){var t=this,$=m;return $=t.$class().$allocate(),$.$copy_instance_variables(t),$.$initialize_dup(t),$}),F(d,"$initialize_dup",function(t){var $=this;return $.$initialize_copy(t)}),F(d,"$enum_for",function n(t,$){var r=n.$$p||m,a,s,p,G=this;return n.$$p=null,a=B(arguments),a.length>0&&(s=a.shift()),s==null&&(s="each"),p=a,K(f("Enumerator"),"for",[G,s].concat(k(p)),r.$to_proc())},-1),F(d,"$equal?",function(t){var $=this;return $===t}),F(d,"$exit",function(t){var $=m,r=m;for(H.__at_exit__==null&&(H.__at_exit__=m),t==null&&(t=!0),H.__at_exit__=C($=H.__at_exit__)?$:[];!C(H.__at_exit__["$empty?"]());)r=H.__at_exit__.$pop(),r.$call();return t.$$is_boolean?t=t?0:1:t=z(t,f("Integer"),"to_int"),e.exit(t),m},-1),F(d,"$extend",function(t){var $,r,a=this;$=B(arguments),r=$,r.length==0&&a.$raise(f("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),M(a);for(var s=a.$singleton_class(),p=r.length-1;p>=0;p--){var G=r[p];G.$$is_module||J.$raise(f("TypeError"),"wrong argument type "+G.$class()+" (expected Module)"),G.$append_features(s),G.$extend_object(a),G.$extended(a)}return a},-1),F(d,"$freeze",function(){var t=this;return C(t["$frozen?"]())?t:typeof t=="object"?(X(t),D(t)):t}),F(d,"$frozen?",function(){var t=this;switch(typeof t){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return t.$$frozen||!1;default:return!1}}),F(d,"$gets",function(t){var $,r;return H.stdin==null&&(H.stdin=m),$=B(arguments),r=$,K(H.stdin,"gets",k(r))},-1),F(d,"$hash",function(){var t=this;return t.$__id__()}),F(d,"$initialize_copy",U(m));var i=[];return F(d,"$inspect",function(){var t=this,$=m,r=m,a=m,s=m;return function(){try{try{return $="",r=t.$__id__(),C(i["$include?"](r))?$=" ...":(i["$<<"](r),a=!0,K(t.$instance_variables(),"each",[],function p(G){var Z=p.$$s==null?this:p.$$s,ie=m,ne=m;return G==null&&(G=m),ie=Z.$instance_variable_get(G),ne=u("Opal").$inspect(ie),$=x($," "+G+"="+ne)},{$$s:t})),"#<"+t.$class()+":0x"+r.$to_s(16)+$+">"}catch(p){if(e.rescue(p,[u("StandardError")])){s=p;try{return"#<"+t.$class()+":0x"+r.$to_s(16)+">"}finally{e.pop_exception()}}else throw p}}finally{C(a)&&i.$pop()}}()}),F(d,"$instance_of?",function(t){var $=this;return!t.$$is_class&&!t.$$is_module&&J.$raise(f("TypeError"),"class or module required"),$.$$class===t}),F(d,"$instance_variable_defined?",function(t){var $=this;return t=y["$instance_variable_name!"](t),e.hasOwnProperty.call($,t.substr(1))}),F(d,"$instance_variable_get",function(t){var $=this;t=y["$instance_variable_name!"](t);var r=$[e.ivar(t.substr(1))];return r==null?m:r}),F(d,"$instance_variable_set",function(t,$){var r=this;return M(r),t=y["$instance_variable_name!"](t),r[e.ivar(t.substr(1))]=$}),F(d,"$remove_instance_variable",function(t){var $=this;t=y["$instance_variable_name!"](t);var r=e.ivar(t.substr(1)),a;return $.hasOwnProperty(r)?(a=$[r],delete $[r],a):J.$raise(f("NameError"),"instance variable "+t+" not defined")}),F(d,"$instance_variables",function(){var t=this,$=[],r;for(var a in t)t.hasOwnProperty(a)&&a.charAt(0)!=="$"&&(a.substr(-1)==="$"?r=a.slice(0,a.length-1):r=a,$.push("@"+r));return $}),F(d,"$Integer",function(t,$){var r,a,s;return t.$$is_string?t==="0"?0:($===void 0?$=0:($=z($,f("Integer"),"to_int"),($===1||$<0||$>36)&&J.$raise(f("ArgumentError"),"invalid radix "+$)),a=t.toLowerCase(),a=a.replace(/(\d)_(?=\d)/g,"$1"),a=a.replace(/^(\s*[+-]?)(0[bodx]?)/,function(p,G,Z){switch(Z){case"0b":if($===0||$===2)return $=2,G;case"0":case"0o":if($===0||$===8)return $=8,G;case"0d":if($===0||$===10)return $=10,G;case"0x":if($===0||$===16)return $=16,G}J.$raise(f("ArgumentError"),'invalid value for Integer(): "'+t+'"')}),$=$===0?10:$,s="0-"+($<=10?$-1:"9a-"+String.fromCharCode(97+($-11))),new RegExp("^\\s*[+-]?["+s+"]+\\s*$").test(a)||J.$raise(f("ArgumentError"),'invalid value for Integer(): "'+t+'"'),r=parseInt(a,$),isNaN(r)&&J.$raise(f("ArgumentError"),'invalid value for Integer(): "'+t+'"'),r):($!==void 0&&J.$raise(f("ArgumentError"),"base specified for non string value"),t===m&&J.$raise(f("TypeError"),"can't convert nil into Integer"),t.$$is_number?((t===1/0||t===-1/0||isNaN(t))&&J.$raise(f("FloatDomainError"),t),Math.floor(t)):t["$respond_to?"]("to_int")&&(r=t.$to_int(),r!==m)?r:y["$coerce_to!"](t,f("Integer"),"to_i"))},-2),F(d,"$Float",function(t){var $;return t===m&&J.$raise(f("TypeError"),"can't convert nil into Float"),t.$$is_string?($=t.toString(),$=$.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test($)?J.$Integer($):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test($)||J.$raise(f("ArgumentError"),'invalid value for Float(): "'+t+'"'),parseFloat($))):y["$coerce_to!"](t,f("Float"),"to_f")}),F(d,"$Hash",function(t){return C(t["$nil?"]())||V(t,[])?v([],{}):w(f("Hash"),t)?t:y["$coerce_to!"](t,f("Hash"),"to_hash")}),F(d,"$is_a?",function(t){var $=this;return!t.$$is_class&&!t.$$is_module&&J.$raise(f("TypeError"),"class or module required"),e.is_a($,t)}),F(d,"$itself",T),F(d,"$lambda",function n(){var t=n.$$p||m;return n.$$p=null,e.lambda(t)}),F(d,"$load",function(t){return t=y["$coerce_to!"](t,f("String"),"to_str"),e.load(t)}),F(d,"$loop",function n(){var t=n.$$p||m,$=this,r=m;if(n.$$p=null,t===m)return K($,"enum_for",["loop"],function(){return f(f("Float"),"INFINITY")});for(;C(!0);)try{e.yieldX(t,[])}catch(a){if(e.rescue(a,[f("StopIteration")])){r=a;try{return r.$result()}finally{e.pop_exception()}}else throw a}return $}),F(d,"$nil?",U(!1)),F(d,"$printf",function(t){var $,r,a=this;return $=B(arguments),r=$,C(r["$any?"]())&&a.$print(K(a,"format",k(r))),m},-1),F(d,"$proc",function n(){var t=n.$$p||m;return n.$$p=null,C(t)||J.$raise(f("ArgumentError"),"tried to create Proc object without a block"),t.$$is_lambda=!1,t}),F(d,"$puts",function(t){var $,r;return H.stdout==null&&(H.stdout=m),$=B(arguments),r=$,K(H.stdout,"puts",k(r))},-1),F(d,"$p",function(t){var $,r;return $=B(arguments),r=$,K(r,"each",[],function(s){return H.stdout==null&&(H.stdout=m),s==null&&(s=m),H.stdout.$puts(s.$inspect())}),C(o(r.$length(),1))?r["$[]"](0):r},-1),F(d,"$print",function(t){var $,r;return H.stdout==null&&(H.stdout=m),$=B(arguments),r=$,K(H.stdout,"print",k(r))},-1),F(d,"$readline",function(t){var $,r;return H.stdin==null&&(H.stdin=m),$=B(arguments),r=$,K(H.stdin,"readline",k(r))},-1),F(d,"$warn",function(t,$){var r,a,s,p,G,Z,ie=this,ne=m;return H.VERBOSE==null&&(H.VERBOSE=m),H.stderr==null&&(H.stderr=m),r=B(arguments),a=A(r),a=I(a),s=r,p=a.$$smap.uplevel,p==null&&(p=m),C(p)&&(p=y["$coerce_to!"](p,f("Integer"),"to_str"),C(N(p,0))&&J.$raise(f("ArgumentError"),"negative level ("+p+")"),ne=(G=(Z=ie.$caller(x(p,1),1).$first(),Z===m||Z==null?m:Z.$split(":in `")),G===m||G==null?m:G.$first()),C(ne)&&(ne=""+ne+": "),s=K(s,"map",[],function(O){return O==null&&(O=m),""+ne+"warning: "+O})),C(H.VERBOSE["$nil?"]())||C(s["$empty?"]())?m:K(H.stderr,"puts",k(s))},-1),F(d,"$raise",function(t,$,r){throw H["!"]==null&&(H["!"]=m),H["@"]==null&&(H["@"]=m),$==null&&($=m),r==null&&(r=m),t==null&&H["!"]!==m?H["!"]:(t==null?t=f("RuntimeError").$new(""):g(t,"$to_str")?t=f("RuntimeError").$new(t.$to_str()):t.$$is_class&&g(t,"$exception")?t=t.$exception($):t.$$is_exception||(t=f("TypeError").$new("exception class/object expected")),r!==m&&t.$set_backtrace(r),H["!"]!==m&&e.exceptions.push(H["!"]),H["!"]=t,H["@"]=t.$backtrace(),t)},-1),F(d,"$rand",function(t){return t===void 0?f(f("Random"),"DEFAULT").$rand():(t.$$is_number&&(t<0&&(t=Math.abs(t)),t%1!==0&&(t=t.$to_i()),t===0&&(t=void 0)),f(f("Random"),"DEFAULT").$rand(t))},-1),F(d,"$respond_to?",function(t,$){var r=this;$==null&&($=!1);var a=r[j(t)];return typeof a=="function"&&!a.$$stub?!0:r["$respond_to_missing?"].$$pristine===!0?!1:r["$respond_to_missing?"](t,$)},-2),F(d,"$respond_to_missing?",function(t,$){return $==null&&($=!1),!1},-2),y.$pristine(d,"respond_to?","respond_to_missing?"),F(d,"$require",function(t){return typeof t!="string"&&e.String&&e.Array&&(t=y["$coerce_to!"](t,f("String"),"to_str")),e.require(t)}),F(d,"$require_relative",function(t){return y["$try_convert!"](t,f("String"),"to_str"),t=f("File").$expand_path(f("File").$join(e.current_file,"..",t)),e.require(t)}),F(d,"$require_tree",function(t,$){var r;$=I($),r=$.$$smap.autoload,r==null&&(r=!1);var a=[];t=f("File").$expand_path(t),t=e.normalize(t),t==="."&&(t="");for(var s in e.modules)s["$start_with?"](t)&&(r?a.push([s,!0]):a.push([s,e.require(s)]));return a},-2),F(d,"$singleton_class",function(){var t=this;return e.get_singleton_class(t)}),F(d,"$sleep",function(t){t==null&&(t=m),t===m&&J.$raise(f("TypeError"),"can't convert NilClass into time interval"),t.$$is_number||J.$raise(f("TypeError"),"can't convert "+t.$class()+" into time interval"),t<0&&J.$raise(f("ArgumentError"),"time interval must be positive");for(var $=e.global.performance?function(){return performance.now()}:function(){return new Date},r=$();$()-r<=t*1e3;);return Math.round(t)},-1),F(d,"$srand",function(t){return t==null&&(t=u("Random").$new_seed()),f("Random").$srand(t)},-1),F(d,"$String",function(t){var $=m;return C($=y["$coerce_to?"](t,f("String"),"to_str"))?$:y["$coerce_to!"](t,f("String"),"to_s")}),F(d,"$tap",function n(){var t=n.$$p||m,$=this;return n.$$p=null,e.yield1(t,$),$}),F(d,"$to_proc",T),F(d,"$to_s",function(){var t=this;return"#<"+t.$class()+":0x"+t.$__id__().$to_s(16)+">"}),F(d,"$catch",function n(t){var $=n.$$p||m,r=m,a=m;n.$$p=null,t==null&&(t=m);try{return t=C(r=t)?r:L.$new(),e.yield1($,t)}catch(s){if(e.rescue(s,[f("UncaughtThrowError")])){a=s;try{return V(a.$tag(),t)?a.$value():J.$raise()}finally{e.pop_exception()}}else throw s}},-1),F(d,"$throw",function(t,$){return $==null&&($=m),J.$raise(f("UncaughtThrowError").$new(t,$))},-2),F(d,"$open",function n(t){var $=n.$$p||m,r,a;return n.$$p=null,r=B(arguments),a=r,K(f("File"),"open",k(a),$.$to_proc())},-1),F(d,"$yield_self",function n(){var t=n.$$p||m,$=this;return n.$$p=null,t===m?K($,"enum_for",["yield_self"],U(1)):e.yield1(t,$)}),S(d,"fail","raise"),S(d,"kind_of?","is_a?"),S(d,"object_id","__id__"),S(d,"public_send","__send__"),S(d,"send","__send__"),S(d,"then","yield_self"),S(d,"to_enum","enum_for")}("::",E),function(h,R){var d=c(h,R,"Object");return delete L.$$prototype.$require,d.$include(J)}("::",null)};Opal.modules["corelib/main"]=function(e){var C=e.return_val,z=e.def,g=e.Object,y=e.slice,M=e.Kernel,D=e.top,X=[],j=e.nil;return function(b,U){return z(b,"$to_s",C("main")),z(b,"$include",function(J){return g.$include(J)}),z(b,"$autoload",function(J){var H,B;return H=y(arguments),B=H,e.Object.$autoload.apply(e.Object,B)},-1),z(b,"$using",function(J){return M.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(D),X)};Opal.modules["corelib/error/errno"]=function(e){var C=e.module,z=e.truthy,g=e.rb_plus,y=e.send2,M=e.find_super,D=e.def,X=e.klass,j=[],b=e.nil,U=e.$$$;return function(F,J){var H=C(F,"Errno"),B=[H].concat(J),K=b,k=b;K=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],k=b;var I;for(I=0;I<K.length;I++)(function(){var V=K[I][0],v=K[I][1],x=K[I][2];k=e.klass(H,e.SystemCallError,V),k.errno=x,function(w,T){return D(w,"$new",function o(A){var N=o.$$p||b,L=this,S=b;return o.$$p=null,A==null&&(A=b),S=v,z(A)&&(S=g(S," - "+A)),y(L,M(L,"new",o,!1,!0),"new",[S],null)},-1)}(e.get_singleton_class(k),B)})()}("::",j),function(F,J,H){var B=X(F,J,"SystemCallError"),K=[B].concat(H);return D(B,"$errno",function(){var I=this;return I.$class().$errno()}),function(k,I){return k.$attr_reader("errno")}(e.get_singleton_class(B),K)}("::",U("StandardError"),j)};Opal.modules["corelib/error"]=function(e){var C=e.klass,z=e.slice,g=e.gvars,y=e.defs,M=e.send,D=e.to_a,X=e.def,j=e.truthy,b=e.hash2,U=e.Kernel,F=e.not,J=e.rb_plus,H=e.eqeq,B=e.Object,K=e.ensure_kwargs,k=e.send2,I=e.find_super,V=e.module,v=[],x=e.nil,w=e.$$$;return function(T,o,A){var N=C(T,o,"Exception"),L=[N].concat(A),S=e.$r(L),c=N.$$prototype;c.message=x,e.prop(N.$$prototype,"$$is_exception",!0);var E;Error.stackTraceLimit=100,y(N,"$new",function(h){var R,d,l=this;g["!"]==null&&(g["!"]=x),R=z(arguments),d=R;var u=d.length>0?d[0]:x,i=new l.$$constructor(u);return i.name=l.$$name,i.message=u,i.cause=g["!"],e.send(i,i.$initialize,d),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(i,E),i},-1),E=N.$new,y(N,"$exception",function(h){var R,d,l=this;return R=z(arguments),d=R,M(l,"new",D(d))},-1),X(N,"$initialize",function(h){var R,d,l=this;return R=z(arguments),d=R,l.message=d.length>0?d[0]:x},-1);function m(f){for(var h=[],R,d=0;d<f.length;d++){var l=f[d];!l||!l.$$is_string||((R=l.match(/^    at (.*?) \((.*?)\)$/))?h.push(R[2]+":in `"+R[1]+"'"):(R=l.match(/^    at (.*?)$/))?h.push(R[1]+":in `undefined'"):(R=l.match(/^  from (.*?)$/))?h.push(R[1]):(R=l.match(/^(.*?)@(.*?)$/))&&h.push(R[2]+":in `"+R[1]+"'"))}return h}return X(N,"$backtrace",function(){var h=this;if(h.backtrace)return h.backtrace;var R=h.stack;return typeof R!="undefined"&&R.$$is_string?h.backtrace=m(R.split(`
`)):R?h.backtrace=m(R):[]}),X(N,"$backtrace_locations",function(){var h,R=this;return R.backtrace_locations||(R.backtrace_locations=(h=R.$backtrace(),h===x||h==null?x:M(h,"map",[],function(l){return l==null&&(l=x),w(w(w("Thread"),"Backtrace"),"Location").$new(l)}))),R.backtrace_locations}),X(N,"$cause",function(){var h=this;return h.cause||x}),X(N,"$exception",function(h){var R=this;if(h==null&&(h=x),h===x||R===h)return R;var d=R.$clone();return d.message=h,R.backtrace&&(d.backtrace=R.backtrace.$dup()),d.stack=R.stack,d.cause=R.cause,d},-1),X(N,"$message",function(){var h=this;return h.$to_s()}),X(N,"$full_message",function(h){var R,d,l=this,u=x,i=x,n=x,t=x,$=x,r=x,a=x,s=x,p=x;return g.stderr==null&&(g.stderr=x),h==null&&(h=x),j((R=S("Hash","skip_raise"))?"constant":x)?(h=b(["highlight","order"],{highlight:g.stderr["$tty?"](),order:"top"}).$merge(j(u=h)?u:b([],{})),d=[h["$[]"]("highlight"),h["$[]"]("order")],i=d[0],n=d[1],j([!0,!1]["$include?"](i))||U.$raise(w("ArgumentError"),"expected true or false as highlight: "+i),j(["top","bottom"]["$include?"](n))||U.$raise(w("ArgumentError"),"expected :top or :bottom as order: "+n),j(i)?(t="\x1B[1;4m",$="\x1B[1m",r="\x1B[m"):t=$=r="",a=l.$backtrace().$dup(),(F(a)||j(a["$empty?"]()))&&(a=l.$caller()),s=a.$shift(),p=""+s+": ",p=J(p,""+$+l.$to_s()+" ("+t+l.$class()+r+$+")"+r+`
`),p=J(p,M(a,"map",[],function(Z){return Z==null&&(Z=x),"	from "+Z+`
`}).$join()),j(l.$cause())&&(p=J(p,l.$cause().$full_message(b(["highlight"],{highlight:i})))),H(n,"bottom")&&(p=p.$split(`
`).$reverse().$join(`
`),p=J(""+$+"Traceback"+r+` (most recent call last):
`,p)),p):""+l.message+`
`+l.stack},-1),X(N,"$inspect",function(){var h=this,R=x;return R=h.$to_s(),j(R["$empty?"]())?h.$class().$to_s():"#<"+h.$class().$to_s()+": "+h.$to_s()+">"}),X(N,"$set_backtrace",function(h){var R=this,d=!0,l,u;if(h===x)R.backtrace=x,R.stack="";else if(h.$$is_string)R.backtrace=[h],R.stack="  from "+h;else{if(h.$$is_array){for(l=0,u=h.length;l<u;l++)if(!h[l].$$is_string){d=!1;break}}else d=!1;d===!1&&U.$raise(w("TypeError"),"backtrace must be Array of String"),R.backtrace=h,R.stack=M(h,"map",[],function(n){return n==null&&(n=x),J("  from ",n)}).join(`
`)}return h}),X(N,"$to_s",function(){var h=this,R=x,d=x;return j(R=j(d=h.message)?h.message.$to_s():d)?R:h.$class().$to_s()})}("::",Error,v),C("::",w("Exception"),"ScriptError"),C("::",w("ScriptError"),"SyntaxError"),C("::",w("ScriptError"),"LoadError"),C("::",w("ScriptError"),"NotImplementedError"),C("::",w("Exception"),"SystemExit"),C("::",w("Exception"),"NoMemoryError"),C("::",w("Exception"),"SignalException"),C("::",w("SignalException"),"Interrupt"),C("::",w("Exception"),"SecurityError"),C("::",w("Exception"),"SystemStackError"),C("::",w("Exception"),"StandardError"),C("::",w("StandardError"),"EncodingError"),C("::",w("StandardError"),"ZeroDivisionError"),C("::",w("StandardError"),"NameError"),C("::",w("NameError"),"NoMethodError"),C("::",w("StandardError"),"RuntimeError"),C("::",w("RuntimeError"),"FrozenError"),C("::",w("StandardError"),"LocalJumpError"),C("::",w("StandardError"),"TypeError"),C("::",w("StandardError"),"ArgumentError"),C("::",w("ArgumentError"),"UncaughtThrowError"),C("::",w("StandardError"),"IndexError"),C("::",w("IndexError"),"StopIteration"),C("::",w("StopIteration"),"ClosedQueueError"),C("::",w("IndexError"),"KeyError"),C("::",w("StandardError"),"RangeError"),C("::",w("RangeError"),"FloatDomainError"),C("::",w("StandardError"),"IOError"),C("::",w("IOError"),"EOFError"),C("::",w("StandardError"),"SystemCallError"),C("::",w("StandardError"),"RegexpError"),C("::",w("StandardError"),"ThreadError"),C("::",w("StandardError"),"FiberError"),B.$autoload("Errno","corelib/error/errno"),function(T,o){var A=C(T,o,"FrozenError");return A.$attr_reader("receiver"),X(A,"$initialize",function N(L,S){var c,E=N.$$p||x,m=this;return N.$$p=null,S=K(S),c=S.$$smap.receiver,c==null&&(c=x),k(m,I(m,"initialize",N,!1,!0),"initialize",[L],null),m.receiver=c},-2)}("::",w("RuntimeError")),function(T,o){var A=C(T,o,"UncaughtThrowError"),N=A.$$prototype;return N.tag=x,A.$attr_reader("tag","value"),X(A,"$initialize",function L(S,c){var E=L.$$p||x,m=this;return L.$$p=null,c==null&&(c=x),m.tag=S,m.value=c,k(m,I(m,"initialize",L,!1,!0),"initialize",["uncaught throw "+m.tag.$inspect()],null)},-2)}("::",w("ArgumentError")),function(T,o){var A=C(T,o,"NameError");return A.$attr_reader("name"),X(A,"$initialize",function N(L,S){var c=N.$$p||x,E=this;return N.$$p=null,S==null&&(S=x),k(E,I(E,"initialize",N,!1,!0),"initialize",[L],null),E.name=S},-2)}("::",null),function(T,o){var A=C(T,o,"NoMethodError");return A.$attr_reader("args"),X(A,"$initialize",function N(L,S,c){var E=N.$$p||x,m=this;return N.$$p=null,S==null&&(S=x),c==null&&(c=[]),k(m,I(m,"initialize",N,!1,!0),"initialize",[L,S],null),m.args=c},-2)}("::",null),function(T,o){var A=C(T,o,"StopIteration");return A.$attr_reader("result")}("::",null),function(T,o){var A=C(T,o,"KeyError"),N=A.$$prototype;return N.receiver=N.key=x,X(A,"$initialize",function L(S,c){var E,m,f=L.$$p||x,h=this;return L.$$p=null,c=K(c),E=c.$$smap.receiver,E==null&&(E=x),m=c.$$smap.key,m==null&&(m=x),k(h,I(h,"initialize",L,!1,!0),"initialize",[S],null),h.receiver=E,h.key=m},-2),X(A,"$receiver",function(){var S=this,c=x;return j(c=S.receiver)?c:U.$raise(w("ArgumentError"),"no receiver is available")}),X(A,"$key",function(){var S=this,c=x;return j(c=S.key)?c:U.$raise(w("ArgumentError"),"no key is available")})}("::",null),function(T,o){var A=V(T,"JS"),N=[A].concat(o);return C(N[0],null,"Error"),x}("::",v)};Opal.modules["corelib/constants"]=function(e){var C=e.const_set,z=e.nil,g=e.$$$;return C("::","RUBY_PLATFORM","opal"),C("::","RUBY_ENGINE","opal"),C("::","RUBY_VERSION","3.2.0"),C("::","RUBY_ENGINE_VERSION","1.7.1"),C("::","RUBY_RELEASE_DATE","2023-01-06"),C("::","RUBY_PATCHLEVEL",0),C("::","RUBY_REVISION","0"),C("::","RUBY_COPYRIGHT","opal - Copyright (C) 2013-2022 Adam Beynon and the Opal contributors"),C("::","RUBY_DESCRIPTION","opal "+g("RUBY_ENGINE_VERSION")+" ("+g("RUBY_RELEASE_DATE")+" revision "+g("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var C=e.Object,z=e.nil;return C.$require("corelib/runtime"),C.$require("corelib/helpers"),C.$require("corelib/module"),C.$require("corelib/class"),C.$require("corelib/basic_object"),C.$require("corelib/kernel"),C.$require("corelib/main"),C.$require("corelib/error"),C.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var C=e.klass,z=e.Kernel,g=e.def,y=e.return_val,M=e.ensure_kwargs,D=e.NilClass,X=e.slice,j=e.truthy,b=e.rb_gt,U=e.alias,F=[],J=e.nil,H=e.$$$;return function(B,K,k){var I=C(B,K,"NilClass"),V=[I].concat(k);return I.$$prototype.$$meta=I,function(v,x){return g(v,"$allocate",function(){var T=this;return z.$raise(H("TypeError"),"allocator undefined for "+T.$name())}),e.udef(v,"$new"),J}(e.get_singleton_class(I),V),g(I,"$!",y(!0)),g(I,"$&",y(!1)),g(I,"$|",function(x){return x!==!1&&x!==J}),g(I,"$^",function(x){return x!==!1&&x!==J}),g(I,"$==",function(x){return x===J}),g(I,"$dup",y(J)),g(I,"$clone",function(x){var w;return x=M(x),w=x.$$smap.freeze,w==null&&(w=!0),J},-1),g(I,"$inspect",y("nil")),g(I,"$nil?",y(!0)),g(I,"$singleton_class",function(){return D}),g(I,"$to_a",function(){return[]}),g(I,"$to_h",function(){return e.hash()}),g(I,"$to_i",y(0)),g(I,"$to_s",y("")),g(I,"$to_c",function(){return H("Complex").$new(0,0)}),g(I,"$rationalize",function(x){var w,T;return w=X(arguments),T=w,j(b(T.$length(),1))&&z.$raise(H("ArgumentError")),z.$Rational(0,1)},-1),g(I,"$to_r",function(){return z.$Rational(0,1)}),g(I,"$instance_variables",function(){return[]}),U(I,"to_f","to_i")}("::",null,F)};Opal.modules["corelib/boolean"]=function(e){"use strict";var C=e.klass,z=e.Kernel,g=e.def,y=e.return_self,M=e.ensure_kwargs,D=e.slice,X=e.truthy,j=e.send2,b=e.find_super,U=e.to_a,F=e.alias,J=[],H=e.nil,B=e.$$$;return function(K,k,I){var V=C(K,k,"Boolean"),v=[V].concat(I);e.prop(V.$$prototype,"$$is_boolean",!0);for(var x=["$$class","$$meta"],w=0;w<x.length;w++)Object.defineProperty(V.$$prototype,x[w],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(V.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:H}}),function(T,o){return g(T,"$allocate",function(){var N=this;return z.$raise(B("TypeError"),"allocator undefined for "+N.$name())}),e.udef(T,"$new"),H}(e.get_singleton_class(V),v),g(V,"$__id__",function(){var o=this;return o.valueOf()?2:0}),g(V,"$!",function(){var o=this;return o!=!0}),g(V,"$&",function(o){var A=this;return A==!0?o!==!1&&o!==H:!1}),g(V,"$|",function(o){var A=this;return A==!0?!0:o!==!1&&o!==H}),g(V,"$^",function(o){var A=this;return A==!0?o===!1||o===H:o!==!1&&o!==H}),g(V,"$==",function(o){var A=this;return A==!0===o.valueOf()}),g(V,"$singleton_class",function(){var o=this;return o.$$meta}),g(V,"$to_s",function(){var o=this;return o==!0?"true":"false"}),g(V,"$dup",y),g(V,"$clone",function(o){var A,N=this;return o=M(o),A=o.$$smap.freeze,A==null&&(A=!0),N},-1),g(V,"$method_missing",function T(o,A){var N=T.$$p||H,L,S,c=this;T.$$p=null,L=D(arguments,1),S=L;var E=c.$$class.$$prototype[e.jsid(o)];return X(typeof E!="undefined"&&!E.$$stub)||j(c,b(c,"method_missing",T,!1,!0),"method_missing",[o].concat(U(S)),N),e.send(c,E,S,N)},-2),g(V,"$respond_to_missing?",function(o,A){var N=this;A==null&&(A=!1);var L=N.$$class.$$prototype[e.jsid(o)];return typeof L!="undefined"&&!L.$$stub},-2),F(V,"eql?","=="),F(V,"equal?","=="),F(V,"inspect","to_s"),F(V,"object_id","__id__")}("::",Boolean,J),C("::",B("Boolean"),"TrueClass"),C("::",B("Boolean"),"FalseClass"),H};Opal.modules["corelib/comparable"]=function(e){var C=e.truthy,z=e.module,g=e.rb_gt,y=e.rb_lt,M=e.eqeqeq,D=e.Kernel,X=e.def,j=e.nil,b=e.$$$;return function(U){var F=z(U,"Comparable"),J=j;function H(k){return e.is_a(k,e.Integer)?k:g(k,0)?1:y(k,0)?-1:0}function B(k,I){var V;M(j,J=I)||M(!0,J)||M(!1,J)||M(b("Integer"),J)||M(b("Float"),J)?V=I.$inspect():V=I.$$class,D.$raise(b("ArgumentError"),"comparison of "+k.$class()+" with "+V+" failed")}function K(k,I){var V=k["$<=>"](I);return C(V)||B(k,I),H(V)}return X(F,"$==",function(I){var V=this,v=j;return C(V["$equal?"](I))?!0:V["$<=>"]==e.Kernel["$<=>"]?!1:V.$$comparable?(V.$$comparable=!1,!1):C(v=V["$<=>"](I))?H(v)==0:!1}),X(F,"$>",function(I){var V=this;return K(V,I)>0}),X(F,"$>=",function(I){var V=this;return K(V,I)>=0}),X(F,"$<",function(I){var V=this;return K(V,I)<0}),X(F,"$<=",function(I){var V=this;return K(V,I)<=0}),X(F,"$between?",function(I,V){var v=this;return!(y(v,I)||g(v,V))}),X(F,"$clamp",function(I,V){var v=this;V==null&&(V=j);var x,w;if(V===j&&(e.is_a(I,e.Range)||D.$raise(b("TypeError"),"wrong argument type "+I.$class()+" (expected Range)"),w=I.excl,V=I.end,I=I.begin,V!==j&&w&&D.$raise(b("ArgumentError"),"cannot clamp with an exclusive range")),I!==j&&V!==j&&K(I,V)>0&&D.$raise(b("ArgumentError"),"min argument must be smaller than max argument"),I!==j){if(x=K(v,I),x==0)return v;if(x<0)return I}return V!==j&&(x=K(v,V),x>0)?V:v},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var C=e.coerce_to,z=e.prop,g=e.freeze,y=e.klass,M=e.const_set,D=e.send2,X=e.find_super,j=e.def,b=e.truthy,U=e.gvars,F=e.slice,J=e.Kernel,H=e.Opal,B=e.alias,K=e.send,k=e.hash2,I=e.rb_plus,V=e.ensure_kwargs,v=e.rb_ge,x=e.to_a,w=e.eqeqeq,T=e.rb_minus,o=e.return_ivar,A=[],N=e.nil,L=e.$$$;return y("::",L("StandardError"),"RegexpError"),function(S,c,E){var m=y(S,c,"Regexp"),f=[m].concat(E),h=e.$r(f);return M(m,"IGNORECASE",1),M(m,"EXTENDED",2),M(m,"MULTILINE",4),e.prop(m.$$prototype,"$$is_regexp",!0),function(R,d){var l=[R].concat(d),u=e.$r(l);return j(R,"$allocate",function i(){var n=i.$$p||N,t=this,$=N;return i.$$p=null,$=D(t,X(t,"allocate",i,!1,!0),"allocate",[],n),$.uninitialized=!0,$}),j(R,"$escape",function(n){return e.escape_regexp(n)}),j(R,"$last_match",function(n){return U["~"]==null&&(U["~"]=N),n==null&&(n=N),b(n["$nil?"]())?U["~"]:b(U["~"])?U["~"]["$[]"](n):N},-1),j(R,"$union",function(n){var t,$,r=this;t=F(arguments),$=t;var a,s,p,G,Z;if($.length==0)return/(?!)/;if($.length==1&&$[0].$$is_regexp)return $[0];a=$[0].$$is_array,$.length>1&&a&&J.$raise(L("TypeError"),"no implicit conversion of Array into String"),a&&($=$[0]),G=void 0,s=[];for(var ie=0;ie<$.length;ie++)p=$[ie],p.$$is_string?s.push(r.$escape(p)):p.$$is_regexp?(Z=p.$options(),G!=null&&G!=Z&&J.$raise(L("TypeError"),"All expressions must use the same options"),G=Z,s.push("("+p.source+")")):s.push(r.$escape(p.$to_str()));return r.$new(s.$join("|"),G)},-1),j(R,"$new",function(n,t){if(n.$$is_regexp)return new RegExp(n);if(n=H["$coerce_to!"](n,L("String"),"to_str"),n.charAt(n.length-1)==="\\"&&n.charAt(n.length-2)!=="\\"&&J.$raise(L("RegexpError"),"too short escape sequence: /"+n+"/"),n=n.replace("\\A","^").replace("\\z","$"),t===void 0||t["$!"]())return new RegExp(n);if(t.$$is_number){var $="";u("IGNORECASE")&t&&($+="i"),u("MULTILINE")&t&&($+="m"),t=$}else t="i";return new RegExp(n,t)},-2),B(R,"compile","new"),B(R,"quote","escape")}(e.get_singleton_class(m),f),j(m,"$==",function(d){var l=this;return d instanceof RegExp&&l.toString()===d.toString()}),j(m,"$===",function(d){var l=this;return l.$match(H["$coerce_to?"](d,L("String"),"to_str"))!==N}),j(m,"$=~",function(d){var l=this,u=N;return U["~"]==null&&(U["~"]=N),b(u=l.$match(d))?U["~"].$begin(0):u}),j(m,"$freeze",function(){var d=this;return b(d["$frozen?"]())?d:(d.hasOwnProperty("$$g")||z(d,"$$g",null),d.hasOwnProperty("$$gm")||z(d,"$$gm",null),g(d))}),j(m,"$inspect",function(){var d=this,l=/^\/(.*)\/([^\/]*)$/,u=d.toString(),i=l.exec(u);if(i){for(var n=i[1],t=i[2],$=n.split(""),r=$.length,a=!1,s="",p=0;p<r;p++){var G=$[p];!a&&G=="/"&&(s=s.concat("\\")),s=s.concat(G),G=="\\"?a?a=!1:a=!0:a=!1}return"/"+s+"/"+t}else return u}),j(m,"$match",function R(d,l){var u=R.$$p||N,i=this;if(U["~"]==null&&(U["~"]=N),R.$$p=null,i.uninitialized&&J.$raise(L("TypeError"),"uninitialized Regexp"),l===void 0){if(d===N)return U["~"]=N;var n=i.exec(C(d,L("String"),"to_str"));return n?(U["~"]=L("MatchData").$new(i,n),u===N?U["~"]:e.yield1(u,U["~"])):U["~"]=N}if(l=C(l,L("Integer"),"to_int"),d===N||(d=C(d,L("String"),"to_str"),l<0&&(l+=d.length,l<0)))return U["~"]=N;for(var t,$=e.global_regexp(i);;){if(t=$.exec(d),t===null)return U["~"]=N;if(t.index>=l)return U["~"]=L("MatchData").$new($,t),u===N?U["~"]:e.yield1(u,U["~"]);$.lastIndex=t.index+1}},-2),j(m,"$match?",function(d,l){var u=this;if(u.uninitialized&&J.$raise(L("TypeError"),"uninitialized Regexp"),l===void 0)return d===N?!1:u.test(C(d,L("String"),"to_str"));if(l=C(l,L("Integer"),"to_int"),d===N||(d=C(d,L("String"),"to_str"),l<0&&(l+=d.length,l<0)))return!1;var i,n=e.global_regexp(u);return i=n.exec(d),!(i===null||i.index<l)},-2),j(m,"$names",function(){var d=this;return K(d.$source().$scan(/\(?<(\w+)>/,k(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$uniq()}),j(m,"$named_captures",function(){var d=this;return K(K(K(d.$source().$scan(/\(?<(\w+)>/,k(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(u){return u==null&&(u=N),K(u,"map",[],function(n){return n==null&&(n=N),I(n.$last(),1)})})}),j(m,"$~",function(){var d=this;return U._==null&&(U._=N),d["$=~"](U._)}),j(m,"$source",function(){var d=this;return d.source}),j(m,"$options",function(){var d=this;d.uninitialized&&J.$raise(L("TypeError"),"uninitialized Regexp");var l=0;return d.multiline&&(l|=h("MULTILINE")),d.ignoreCase&&(l|=h("IGNORECASE")),l}),j(m,"$casefold?",function(){var d=this;return d.ignoreCase}),B(m,"eql?","=="),B(m,"to_s","source")}("::",RegExp,A),function(S,c,E){var m=y(S,c,"MatchData"),f=[m].concat(E),h=e.$r(f),R=m.$$prototype;return R.matches=N,m.$attr_reader("post_match","pre_match","regexp","string"),j(m,"$initialize",function(l,u,i){var n,t=this;i=V(i),n=i.$$smap.no_matchdata,n==null&&(n=!1),b(n)||(U["~"]=t),t.regexp=l,t.begin=u.index,t.string=u.input,t.pre_match=u.input.slice(0,u.index),t.post_match=u.input.slice(u.index+u[0].length),t.matches=[];for(var $=0,r=u.length;$<r;$++){var a=u[$];a==null?t.matches.push(N):t.matches.push(a)}},-3),j(m,"$match",function(l){var u=this,i=N;return b(i=u["$[]"](l))?i:b(l["$is_a?"](h("Integer")))&&b(v(l,u.$length()))?J.$raise(L("IndexError"),"index "+l+" out of matches"):N}),j(m,"$match_length",function(l){var u,i=this;return u=i.$match(l),u===N||u==null?N:u.$length()}),j(m,"$[]",function(l){var u,i,n=this;return u=F(arguments),i=u,i[0].$$is_string?(n.$regexp().$names()["$include?"](i["$[]"](0))["$!"]()&&J.$raise(L("IndexError"),"undefined group name reference: "+i["$[]"](0)),n.$named_captures()["$[]"](i["$[]"](0))):K(n.matches,"[]",x(i))},-1),j(m,"$offset",function(l){var u=this;return l!==0&&J.$raise(L("ArgumentError"),"MatchData#offset only supports 0th element"),[u.begin,u.begin+u.matches[l].length]}),j(m,"$==",function(l){var u=this,i=N,n=N,t=N,$=N;return w(L("MatchData"),l)?b(i=b(n=b(t=b($=u.string==l.string)?u.regexp.toString()==l.regexp.toString():$)?u.pre_match==l.pre_match:t)?u.post_match==l.post_match:n)?u.begin==l.begin:i:!1}),j(m,"$begin",function(l){var u=this;return l!==0&&J.$raise(L("ArgumentError"),"MatchData#begin only supports 0th element"),u.begin}),j(m,"$end",function(l){var u=this;return l!==0&&J.$raise(L("ArgumentError"),"MatchData#end only supports 0th element"),u.begin+u.matches[l].length}),j(m,"$captures",function(){var l=this;return l.matches.slice(1)}),j(m,"$named_captures",function(){var l=this,u=N;return u=l.$captures(),K(l.$regexp().$named_captures(),"transform_values",[],function(n){return n==null&&(n=N),u["$[]"](T(n.$last(),1))})}),j(m,"$names",function(){var l=this;return l.$regexp().$names()}),j(m,"$inspect",function(){var l=this,u="#<MatchData "+l.matches[0].$inspect();if(l.$regexp().$names()["$empty?"]())for(var i=1,n=l.matches.length;i<n;i++)u+=" "+i+":"+l.matches[i].$inspect();else K(l.$named_captures(),"each",[],function($,r){return $==null&&($=N),r==null&&(r=N),u+=" "+$+":"+r.$inspect()});return u+">"}),j(m,"$length",function(){var l=this;return l.matches.length}),j(m,"$to_a",o("matches")),j(m,"$to_s",function(){var l=this;return l.matches[0]}),j(m,"$values_at",function(l){var u,i,n=this;u=F(arguments),i=u;var t,$,r,a=[];for(t=0;t<i.length;t++){if(i[t].$$is_range&&($=i[t].$to_a(),$.unshift(t,1),Array.prototype.splice.apply(i,$)),r=H["$coerce_to!"](i[t],L("Integer"),"to_int"),r<0&&(r+=n.matches.length,r<0)){a.push(N);continue}a.push(n.matches[r])}return a},-1),B(m,"eql?","=="),B(m,"size","length")}(A[0],null,A)};Opal.modules["corelib/string"]=function(e){var C=e.coerce_to,z=e.respond_to,g=e.global_multiline_regexp,y=e.prop,M=e.klass,D=e.def,X=e.Opal,j=e.defs,b=e.slice,U=e.send,F=e.to_a,J=e.extract_kwargs,H=e.ensure_kwargs,B=e.eqeqeq,K=e.Kernel,k=e.truthy,I=e.gvars,V=e.rb_divide,v=e.rb_plus,x=e.eqeq,w=e.hash2,T=e.alias,o=e.const_set,A=e.top,N=[],L=e.$r(N),S=e.nil,c=e.$$$;return A.$require("corelib/comparable"),A.$require("corelib/regexp"),function(E,m,f){var h=M(E,m,"String"),R=[h].concat(f),d=e.$r(R);h.$include(c("Comparable")),e.prop(h.$$prototype,"$$is_string",!0),D(h,"$__id__",function(){var i=this;return i.toString()}),j(h,"$try_convert",function(i){return X["$coerce_to?"](i,c("String"),"to_str")}),j(h,"$new",function(i){var n,t,$=this;n=b(arguments),t=n;var r=t[0]||"",a=t[t.length-1];return r=C(r,c("String"),"to_str"),a&&a.$$is_hash&&a.$$smap.encoding&&(r=r.$force_encoding(a.$$smap.encoding)),r=new $.$$constructor(r),r.$initialize.$$pristine||U(r,"initialize",F(t)),r},-1),D(h,"$initialize",function(i,n){var t,$,r,a,s;return t=b(arguments),$=J(t),$=H($),t.length>0&&(r=t.shift()),a=$.$$smap.encoding,a==null&&(a=S),s=$.$$smap.capacity,s==null&&(s=S),S},-1),D(h,"$%",function(i){var n=this;return B(c("Array"),i)?U(n,"format",[n].concat(F(i))):n.$format(n,i)}),D(h,"$*",function(i){var n=this;if(i=C(i,c("Integer"),"to_int"),i<0&&K.$raise(c("ArgumentError"),"negative argument"),i===0)return"";var t="",$=n.toString();for($.length*i>=1<<28&&K.$raise(c("RangeError"),"multiply count must not overflow maximum string size");(i&1)===1&&(t+=$),i>>>=1,i!==0;)$+=$;return t}),D(h,"$+",function(i){var n=this;if(i=C(i,c("String"),"to_str"),i==""&&n.$$class===e.String)return n;if(n==""&&i.$$class===e.String)return i;var t=n+i;return n.encoding===t.encoding&&i.encoding===t.encoding||n.encoding.name==="UTF-8"||i.encoding.name==="UTF-8"?t:e.enc(t,n.encoding)}),D(h,"$<=>",function(i){var n=this;if(k(i["$respond_to?"]("to_str")))return i=i.$to_str().$to_s(),n>i?1:n<i?-1:0;var t=i["$<=>"](n);return t===S?S:t>0?-1:t<0?1:0}),D(h,"$==",function(i){var n=this;return i.$$is_string?n.toString()===i.toString():z(i,"$to_str")?i["$=="](n):!1}),D(h,"$=~",function(i){var n=this;return i.$$is_string&&K.$raise(c("TypeError"),"type mismatch: String given"),i["$=~"](n)}),D(h,"$[]",function(i,n){var t=this,$=t.length,r,a;if(i.$$is_range)return r=i.excl,a=i,n=i.end===S?-1:C(i.end,c("Integer"),"to_int"),i=i.begin===S?0:C(i.begin,c("Integer"),"to_int"),Math.abs(i)>$?S:(i<0&&(i+=$),n<0&&(n+=$),(!r||a.end===S)&&(n+=1),n=n-i,n<0&&(n=0),t.substr(i,n));if(i.$$is_string)return n!=null&&K.$raise(c("TypeError")),t.indexOf(i)!==-1?i:S;if(i.$$is_regexp){var s=t.match(i);return s===null?(I["~"]=S,S):(I["~"]=c("MatchData").$new(i,s),n==null?s[0]:(n=C(n,c("Integer"),"to_int"),n<0&&-n<s.length?s[n+=s.length]:n>=0&&n<s.length?s[n]:S))}return i=C(i,c("Integer"),"to_int"),i<0&&(i+=$),n==null?i>=$||i<0?S:t.substr(i,1):(n=C(n,c("Integer"),"to_int"),n<0||i>$||i<0?S:t.substr(i,n))},-2),D(h,"$b",function(){var i=this;return new String(i).$force_encoding("binary")}),D(h,"$capitalize",function(){var i=this;return i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()}),D(h,"$casecmp",function(i){var n=this;if(!k(i["$respond_to?"]("to_str")))return S;i=C(i,c("String"),"to_str").$to_s();var t=/^[\x00-\x7F]*$/;return t.test(n)&&t.test(i)&&(n=n.toLowerCase(),i=i.toLowerCase()),n["$<=>"](i)}),D(h,"$casecmp?",function(i){var n=this,t=n.$casecmp(i);return t===S?S:t===0}),D(h,"$center",function(i,n){var t=this;if(n==null&&(n=" "),i=C(i,c("Integer"),"to_int"),n=C(n,c("String"),"to_str").$to_s(),k(n["$empty?"]())&&K.$raise(c("ArgumentError"),"zero width padding"),k(i<=t.length))return t;var $=t.$ljust(V(v(i,t.length),2).$ceil(),n),r=t.$rjust(V(v(i,t.length),2).$floor(),n);return r+$.slice(t.length)},-2),D(h,"$chomp",function(i){var n=this;if(I["/"]==null&&(I["/"]=S),i==null&&(i=I["/"]),k(i===S||n.length===0))return n;i=X["$coerce_to!"](i,c("String"),"to_str").$to_s();var t;if(i===`
`)t=n.replace(/\r?\n?$/,"");else if(i==="")t=n.replace(/(\r?\n)+$/,"");else if(n.length>=i.length){var $=n.substr(n.length-i.length,i.length);$===i&&(t=n.substr(0,n.length-i.length))}return t!=null?t:n},-1),D(h,"$chop",function(){var i=this,n=i.length,t;return n<=1?t="":i.charAt(n-1)===`
`&&i.charAt(n-2)==="\r"?t=i.substr(0,n-2):t=i.substr(0,n-1),t}),D(h,"$chr",function(){var i=this;return i.charAt(0)}),D(h,"$clone",function(i){var n,t=this,$=S;return i=H(i),n=i.$$smap.freeze,n==null&&(n=S),k(n["$nil?"]())||x(n,!0)||x(n,!1)||t.$raise(d("ArgumentError"),"unexpected value for freeze: "+n.$class()),$=new String(t),$.$copy_singleton_methods(t),$.$initialize_clone(t,w(["freeze"],{freeze:n})),x(n,!0)?$.$$frozen||($.$$frozen=!0):k(n["$nil?"]())&&t.$$frozen&&($.$$frozen=!0),$},-1),D(h,"$dup",function(){var i=this,n=S;return n=new String(i),n.$initialize_dup(i),n}),D(h,"$count",function(i){var n,t,$=this;n=b(arguments),t=n,t.length===0&&K.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var r=l(t);return r===null?0:$.length-$.replace(new RegExp(r,"g"),"").length},-1),D(h,"$delete",function(i){var n,t,$=this;n=b(arguments),t=n,t.length===0&&K.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var r=l(t);return r===null?$:$.replace(new RegExp(r,"g"),"")},-1),D(h,"$delete_prefix",function(i){var n=this;return i.$$is_string||(i=C(i,c("String"),"to_str")),n.slice(0,i.length)===i?n.slice(i.length):n}),D(h,"$delete_suffix",function(i){var n=this;return i.$$is_string||(i=C(i,c("String"),"to_str")),n.slice(n.length-i.length)===i?n.slice(0,n.length-i.length):n}),D(h,"$downcase",function(){var i=this;return i.toLowerCase()}),D(h,"$each_line",function u(i,n){var t=u.$$p||S,$,r,a,s,p=this;if(I["/"]==null&&(I["/"]=S),u.$$p=null,$=b(arguments),r=J($),r=H(r),$.length>0&&(a=$.shift()),a==null&&(a=I["/"]),s=r.$$smap.chomp,s==null&&(s=!1),t===S)return p.$enum_for("each_line",a,w(["chomp"],{chomp:s}));if(a===S)return e.yield1(t,p),p;a=C(a,c("String"),"to_str");var G,Z,ie,ne,se,O,oe,ue;if(a.length===0){for(G=p.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),Z=0,ie=G.length;Z<ie;Z+=2)(G[Z]||G[Z+1])&&(ue=(G[Z]||"")+(G[Z+1]||""),s&&(ue=ue.$chomp(`
`)),e.yield1(t,ue));return p}for(se=p.$chomp(a),O=p.length!=se.length,oe=se.split(a),Z=0,ne=oe.length;Z<ne;Z++)ue=oe[Z],(Z<ne-1||O)&&(ue+=a),s&&(ue=ue.$chomp(a)),e.yield1(t,ue);return p},-1),D(h,"$empty?",function(){var i=this;return i.length===0}),D(h,"$end_with?",function(i){var n,t,$=this;n=b(arguments),t=n;for(var r=0,a=t.length;r<a;r++){var s=C(t[r],c("String"),"to_str").$to_s();if($.length>=s.length&&$.substr($.length-s.length,s.length)==s)return!0}return!1},-1),D(h,"$gsub",function u(i,n){var t=u.$$p||S,$=this;if(u.$$p=null,n===void 0&&t===S)return $.$enum_for("gsub",i);var r="",a=S,s=0,p,G;i.$$is_regexp?i=g(i):(i=C(i,c("String"),"to_str"),i=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var Z;;){if(p=i.exec($),p===null){I["~"]=S,r+=$.slice(s);break}a=c("MatchData").$new(i,p),n===void 0?(Z=i.lastIndex,G=t(p[0]),i.lastIndex=Z):n.$$is_hash?G=n["$[]"](p[0]).$to_s():(n.$$is_string||(n=C(n,c("String"),"to_str")),G=n.replace(/([\\]+)([0-9+&`'])/g,function(ie,ne,se){if(ne.length%2===0)return ie;switch(se){case"+":for(var O=p.length-1;O>0;O--)if(p[O]!==void 0)return ne.slice(1)+p[O];return"";case"&":return ne.slice(1)+p[0];case"`":return ne.slice(1)+$.slice(0,p.index);case"'":return ne.slice(1)+$.slice(p.index+p[0].length);default:return ne.slice(1)+(p[se]||"")}}).replace(/\\\\/g,"\\")),i.lastIndex===p.index?(r+=$.slice(s,p.index)+G+($[p.index]||""),i.lastIndex+=1):r+=$.slice(s,p.index)+G,s=i.lastIndex}return I["~"]=a,r},-2),D(h,"$hash",function(){var i=this;return i.toString()}),D(h,"$hex",function(){var i=this;return i.$to_i(16)}),D(h,"$include?",function(i){var n=this;return i.$$is_string||(i=C(i,c("String"),"to_str")),n.indexOf(i)!==-1}),D(h,"$index",function(i,n){var t=this,$,r,a;if(n===void 0)n=0;else if(n=C(n,c("Integer"),"to_int"),n<0&&(n+=t.length,n<0))return S;if(i.$$is_regexp)for(a=g(i);;){if(r=a.exec(t),r===null){I["~"]=S,$=-1;break}if(r.index>=n){I["~"]=c("MatchData").$new(a,r),$=r.index;break}a.lastIndex=r.index+1}else i=C(i,c("String"),"to_str"),i.length===0&&n>t.length?$=-1:$=t.indexOf(i,n);return $===-1?S:$},-2),D(h,"$inspect",function(){var i=this,n=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},$=i.replace(n,function(r){return t[r]?t[r]:(r=r.charCodeAt(0),r<=255&&(i.encoding["$binary?"]()||i.internal_encoding["$binary?"]())?"\\x"+("00"+r.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+r.toString(16).toUpperCase()).slice(-4))});return'"'+$.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),D(h,"$intern",function(){var i=this;return i.toString()}),D(h,"$length",function(){var i=this;return i.length}),T(h,"size","length"),D(h,"$lines",function u(i,n){var t=u.$$p||S,$,r,a,s,p=this,G=S;return I["/"]==null&&(I["/"]=S),u.$$p=null,$=b(arguments),r=J($),r=H(r),$.length>0&&(a=$.shift()),a==null&&(a=I["/"]),s=r.$$smap.chomp,s==null&&(s=!1),G=U(p,"each_line",[a,w(["chomp"],{chomp:s})],t.$to_proc()),k(t)?p:G.$to_a()},-1),D(h,"$ljust",function(i,n){var t=this;if(n==null&&(n=" "),i=C(i,c("Integer"),"to_int"),n=C(n,c("String"),"to_str").$to_s(),k(n["$empty?"]())&&K.$raise(c("ArgumentError"),"zero width padding"),k(i<=t.length))return t;var $=-1,r="";for(i-=t.length;++$<i;)r+=n;return t+r.slice(0,i)},-2),D(h,"$lstrip",function(){var i=this;return i.replace(/^[\u0000\s]*/,"")}),D(h,"$ascii_only?",function(){var i=this;return i.encoding.ascii?/^[\x00-\x7F]*$/.test(i):!1}),D(h,"$match",function u(i,n){var t=u.$$p||S,$=this;return u.$$p=null,(B(d("String"),i)||k(i["$respond_to?"]("to_str")))&&(i=c("Regexp").$new(i.$to_str())),B(c("Regexp"),i)||K.$raise(c("TypeError"),"wrong argument type "+i.$class()+" (expected Regexp)"),U(i,"match",[$,n],t.$to_proc())},-2),D(h,"$match?",function(i,n){var t=this;return(B(d("String"),i)||k(i["$respond_to?"]("to_str")))&&(i=c("Regexp").$new(i.$to_str())),B(c("Regexp"),i)||K.$raise(c("TypeError"),"wrong argument type "+i.$class()+" (expected Regexp)"),i["$match?"](t,n)},-2),D(h,"$next",function(){var i=this,n=i.length;if(n===0)return"";for(var t=i,$=i.search(/[a-zA-Z0-9]/),r=!1,a;n--;){if(a=i.charCodeAt(n),a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122)switch(a){case 57:r=!0,a=48;break;case 90:r=!0,a=65;break;case 122:r=!0,a=97;break;default:r=!1,a+=1}else $===-1?a===255?(r=!0,a=0):(r=!1,a+=1):r=!0;if(t=t.slice(0,n)+String.fromCharCode(a)+t.slice(n+1),r&&(n===0||n===$)){switch(a){case 65:break;case 97:break;default:a+=1}n===0?t=String.fromCharCode(a)+t:t=t.slice(0,n)+String.fromCharCode(a)+t.slice(n),r=!1}if(!r)break}return t}),D(h,"$oct",function(){var i=this,n,t=i,$=8;return/^\s*_/.test(t)?0:(t=t.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(r,a,s,p){switch(p.charAt(0)){case"+":case"-":return r;case"0":if(p.charAt(1)==="x"&&s==="0x")return r}switch(s){case"0b":$=2;break;case"0":case"0o":$=8;break;case"0d":$=10;break;case"0x":$=16;break}return a+p}),n=parseInt(t.replace(/_(?!_)/g,""),$),isNaN(n)?0:n)}),D(h,"$ord",function(){var i=this;return typeof i.codePointAt=="function"?i.codePointAt(0):i.charCodeAt(0)}),D(h,"$partition",function(i){var n=this,t,$;return i.$$is_regexp?($=i.exec(n),$===null?t=-1:(c("MatchData").$new(i,$),i=$[0],t=$.index)):(i=C(i,c("String"),"to_str"),t=n.indexOf(i)),t===-1?[n,"",""]:[n.slice(0,t),n.slice(t,t+i.length),n.slice(t+i.length)]}),D(h,"$reverse",function(){var i=this;return i.split("").reverse().join("")}),D(h,"$rindex",function(i,n){var t=this,$,r,a,s;if(n===void 0)n=t.length;else if(n=C(n,c("Integer"),"to_int"),n<0&&(n+=t.length,n<0))return S;if(i.$$is_regexp){for(r=null,a=g(i);s=a.exec(t),!(s===null||s.index>n);)r=s,a.lastIndex=r.index+1;r===null?(I["~"]=S,$=-1):(c("MatchData").$new(a,r),$=r.index)}else i=C(i,c("String"),"to_str"),$=t.lastIndexOf(i,n);return $===-1?S:$},-2),D(h,"$rjust",function(i,n){var t=this;if(n==null&&(n=" "),i=C(i,c("Integer"),"to_int"),n=C(n,c("String"),"to_str").$to_s(),k(n["$empty?"]())&&K.$raise(c("ArgumentError"),"zero width padding"),k(i<=t.length))return t;var $=Math.floor(i-t.length),r=Math.floor($/n.length),a=Array(r+1).join(n),s=$-a.length;return a+n.slice(0,s)+t},-2),D(h,"$rpartition",function(i){var n=this,t,$,r,a;if(i.$$is_regexp){for($=null,r=g(i);a=r.exec(n),a!==null;)$=a,r.lastIndex=$.index+1;$===null?t=-1:(c("MatchData").$new(r,$),i=$[0],t=$.index)}else i=C(i,c("String"),"to_str"),t=n.lastIndexOf(i);return t===-1?["","",n]:[n.slice(0,t),n.slice(t,t+i.length),n.slice(t+i.length)]}),D(h,"$rstrip",function(){var i=this;return i.replace(/[\s\u0000]*$/,"")}),D(h,"$scan",function u(i,n){var t=u.$$p||S,$,r=this;u.$$p=null,n=H(n),$=n.$$smap.no_matchdata,$==null&&($=!1);var a=[],s=S,p;for(i.$$is_regexp?i=g(i):(i=C(i,c("String"),"to_str"),i=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(p=i.exec(r))!=null;)s=c("MatchData").$new(i,p,w(["no_matchdata"],{no_matchdata:$})),t===S?p.length==1?a.push(p[0]):a.push(s.$captures()):p.length==1?e.yield1(t,p[0]):e.yield1(t,s.$captures()),i.lastIndex===p.index&&(i.lastIndex+=1);return $||(I["~"]=s),t!==S?r:a},-2),D(h,"$singleton_class",function(){var i=this;return e.get_singleton_class(i)}),D(h,"$split",function(i,n){var t=this,$=S;if(I[";"]==null&&(I[";"]=S),t.length===0)return[];if(n===void 0)n=0;else if(n=X["$coerce_to!"](n,c("Integer"),"to_int"),n===1)return[t];(i===void 0||i===S)&&(i=k($=I[";"])?$:" ");var r=[],a=t.toString(),s=0,p,G,Z;if(i.$$is_regexp?i=g(i):(i=C(i,c("String"),"to_str").$to_s(),i===" "?(i=/\s+/gm,a=a.replace(/^\s+/,"")):i=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm")),r=a.split(i),r.length===1&&r[0]===a)return[r[0]];for(;(G=r.indexOf(void 0))!==-1;)r.splice(G,1);if(n===0){for(;r[r.length-1]==="";)r.length-=1;return r}if(p=i.exec(a),n<0){if(p!==null&&p[0]===""&&i.source.indexOf("(?=")===-1)for(G=0,Z=p.length;G<Z;G++)r.push("");return r}if(p!==null&&p[0]==="")return r.splice(n-1,r.length-1,r.slice(n-1).join("")),r;if(n>=r.length)return r;for(G=0;p!==null&&(G++,s=i.lastIndex,G+1!==n);)p=i.exec(a);return r.splice(n-1,r.length-1,a.slice(s)),r},-1),D(h,"$squeeze",function(i){var n,t,$=this;if(n=b(arguments),t=n,t.length===0)return $.replace(/(.)\1+/g,"$1");var r=l(t);return r===null?$:$.replace(new RegExp("("+r+")\\1+","g"),"$1")},-1),D(h,"$start_with?",function(i){var n,t,$=this;n=b(arguments),t=n;for(var r=0,a=t.length;r<a;r++)if(t[r].$$is_regexp){var s=t[r],p=s.exec($);if(p!=null&&p.index===0)return I["~"]=c("MatchData").$new(s,p),!0;I["~"]=S}else{var G=C(t[r],c("String"),"to_str").$to_s();if($.indexOf(G)===0)return!0}return!1},-1),D(h,"$strip",function(){var i=this;return i.replace(/^[\s\u0000]*|[\s\u0000]*$/g,"")}),D(h,"$sub",function u(i,n){var t=u.$$p||S,$=this;u.$$p=null,i.$$is_regexp||(i=C(i,c("String"),"to_str"),i=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var r,a=i.exec($);return a===null?(I["~"]=S,r=$.toString()):(c("MatchData").$new(i,a),n===void 0?(t===S&&K.$raise(c("ArgumentError"),"wrong number of arguments (1 for 2)"),r=$.slice(0,a.index)+t(a[0])+$.slice(a.index+a[0].length)):n.$$is_hash?r=$.slice(0,a.index)+n["$[]"](a[0]).$to_s()+$.slice(a.index+a[0].length):(n=C(n,c("String"),"to_str"),n=n.replace(/([\\]+)([0-9+&`'])/g,function(s,p,G){if(p.length%2===0)return s;switch(G){case"+":for(var Z=a.length-1;Z>0;Z--)if(a[Z]!==void 0)return p.slice(1)+a[Z];return"";case"&":return p.slice(1)+a[0];case"`":return p.slice(1)+$.slice(0,a.index);case"'":return p.slice(1)+$.slice(a.index+a[0].length);default:return p.slice(1)+(a[G]||"")}}).replace(/\\\\/g,"\\"),r=$.slice(0,a.index)+n+$.slice(a.index+a[0].length))),r},-2),D(h,"$sum",function(i){var n=this;i==null&&(i=16),i=C(i,c("Integer"),"to_int");for(var t=0,$=n.length,r=0;r<$;r++)t+=n.charCodeAt(r);return i<=0?t:t&Math.pow(2,i)-1},-1),D(h,"$swapcase",function(){var i=this,n=i.replace(/([a-z]+)|([A-Z]+)/g,function(t,$,r){return $?t.toUpperCase():t.toLowerCase()});return n}),D(h,"$to_f",function(){var i=this;if(i.charAt(0)==="_")return 0;var n=parseFloat(i.replace(/_/g,""));return isNaN(n)||n==1/0||n==-1/0?0:n}),D(h,"$to_i",function(i){var n=this;i==null&&(i=10);var t,$=n.toLowerCase(),r=C(i,c("Integer"),"to_int");return(r===1||r<0||r>36)&&K.$raise(c("ArgumentError"),"invalid radix "+r),/^\s*_/.test($)?0:($=$.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(a,s,p,G){switch(G.charAt(0)){case"+":case"-":return a;case"0":if(G.charAt(1)==="x"&&p==="0x"&&(r===0||r===16))return a}switch(p){case"0b":if(r===0||r===2)return r=2,s+G;break;case"0":case"0o":if(r===0||r===8)return r=8,s+G;break;case"0d":if(r===0||r===10)return r=10,s+G;break;case"0x":if(r===0||r===16)return r=16,s+G;break}return a}),t=parseInt($.replace(/_(?!_)/g,""),r),isNaN(t)?0:t)},-1),D(h,"$to_proc",function u(){var i=u.$$p||S,n=this,t=S,$=S,r=S;return u.$$p=null,t=n.valueOf(),$=e.jsid(t),r=U(K,"proc",[],function a(s){var p=a.$$p||S,G,Z;a.$$p=null,G=b(arguments),Z=G,Z.length===0&&K.$raise(c("ArgumentError"),"no receiver given");var ie=Z[0];ie==null&&(ie=S);var ne=ie[$];return ne?Z=Z.slice(1):(ne=ie.$method_missing,Z[0]=t),typeof p=="function"&&(ne.$$p=p),Z.length===0?ne.call(ie):ne.apply(ie,Z)},-1),r.$$source_location=S,r}),D(h,"$to_s",function(){var i=this;return i.toString()}),D(h,"$tr",function(i,n){var t=this;if(i=C(i,c("String"),"to_str").$to_s(),n=C(n,c("String"),"to_str").$to_s(),i.length==0||i===n)return t;var $,r,a,s,p,G,Z,ie={},ne=i.split(""),se=ne.length,O=n.split(""),oe=O.length,ue=!1,te=null;ne[0]==="^"&&ne.length>1&&(ue=!0,ne.shift(),te=O[oe-1],se-=1);var $e=[],re=null;for(r=!1,$=0;$<se;$++)if(s=ne[$],re==null)re=s,$e.push(s);else if(s==="-")re==="-"?($e.push("-"),$e.push("-")):$==se-1?$e.push("-"):r=!0;else if(r){for(p=re.charCodeAt(0),G=s.charCodeAt(0),p>G&&K.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(p)+"-"+String.fromCharCode(G)+'" in string transliteration'),a=p+1;a<G;a++)$e.push(String.fromCharCode(a));$e.push(s),r=null,re=null}else $e.push(s);if(ne=$e,se=ne.length,ue)for($=0;$<se;$++)ie[ne[$]]=!0;else{if(oe>0){var P=[],W=null;for(r=!1,$=0;$<oe;$++)if(s=O[$],W==null)W=s,P.push(s);else if(s==="-")W==="-"?(P.push("-"),P.push("-")):$==oe-1?P.push("-"):r=!0;else if(r){for(p=W.charCodeAt(0),G=s.charCodeAt(0),p>G&&K.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(p)+"-"+String.fromCharCode(G)+'" in string transliteration'),a=p+1;a<G;a++)P.push(String.fromCharCode(a));P.push(s),r=null,W=null}else P.push(s);O=P,oe=O.length}var ee=se-oe;if(ee>0){var _=oe>0?O[oe-1]:"";for($=0;$<ee;$++)O.push(_)}for($=0;$<se;$++)ie[ne[$]]=O[$]}var q="";for($=0,Z=t.length;$<Z;$++){s=t.charAt($);var Y=ie[s];ue?q+=Y==null?te:s:q+=Y!=null?Y:s}return q}),D(h,"$tr_s",function(i,n){var t=this;if(i=C(i,c("String"),"to_str").$to_s(),n=C(n,c("String"),"to_str").$to_s(),i.length==0)return t;var $,r,a,s,p,G,Z,ie={},ne=i.split(""),se=ne.length,O=n.split(""),oe=O.length,ue=!1,te=null;ne[0]==="^"&&ne.length>1&&(ue=!0,ne.shift(),te=O[oe-1],se-=1);var $e=[],re=null;for(r=!1,$=0;$<se;$++)if(s=ne[$],re==null)re=s,$e.push(s);else if(s==="-")re==="-"?($e.push("-"),$e.push("-")):$==se-1?$e.push("-"):r=!0;else if(r){for(p=re.charCodeAt(0),G=s.charCodeAt(0),p>G&&K.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(p)+"-"+String.fromCharCode(G)+'" in string transliteration'),a=p+1;a<G;a++)$e.push(String.fromCharCode(a));$e.push(s),r=null,re=null}else $e.push(s);if(ne=$e,se=ne.length,ue)for($=0;$<se;$++)ie[ne[$]]=!0;else{if(oe>0){var P=[],W=null;for(r=!1,$=0;$<oe;$++)if(s=O[$],re==null)re=s,P.push(s);else if(s==="-")W==="-"?(P.push("-"),P.push("-")):$==oe-1?P.push("-"):r=!0;else if(r){for(p=re.charCodeAt(0),G=s.charCodeAt(0),p>G&&K.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(p)+"-"+String.fromCharCode(G)+'" in string transliteration'),a=p+1;a<G;a++)P.push(String.fromCharCode(a));P.push(s),r=null,re=null}else P.push(s);O=P,oe=O.length}var ee=se-oe;if(ee>0){var _=oe>0?O[oe-1]:"";for($=0;$<ee;$++)O.push(_)}for($=0;$<se;$++)ie[ne[$]]=O[$]}var q="",Y=null;for($=0,Z=t.length;$<Z;$++){s=t.charAt($);var Q=ie[s];ue?Q==null?Y==null&&(q+=te,Y=!0):(q+=s,Y=null):Q!=null?(Y==null||Y!==Q)&&(q+=Q,Y=Q):(q+=s,Y=null)}return q}),D(h,"$upcase",function(){var i=this;return i.toUpperCase()}),D(h,"$upto",function u(i,n){var t=u.$$p||S,$=this;if(u.$$p=null,n==null&&(n=!1),t===S)return $.$enum_for("upto",i,n);var r,a,s=$.toString();if(i=C(i,c("String"),"to_str"),s.length===1&&i.length===1)for(r=s.charCodeAt(0),a=i.charCodeAt(0);r<=a&&!(n&&r===a);)t(String.fromCharCode(r)),r+=1;else if(parseInt(s,10).toString()===s&&parseInt(i,10).toString()===i)for(r=parseInt(s,10),a=parseInt(i,10);r<=a&&!(n&&r===a);)t(r.toString()),r+=1;else for(;s.length<=i.length&&s<=i&&!(n&&s===i);)t(s),s=s.$succ();return $},-2);function l(u){function i(ie){var ne="",se,O=ie.length,oe,ue,te,$e,re;for(se=0;se<O;se++)if(oe=ie.charAt(se),oe==="-"&&se>0&&se<O-1&&!ue){for(te=ie.charCodeAt(se-1),$e=ie.charCodeAt(se+1),te>$e&&K.$raise(c("ArgumentError"),'invalid range "'+te+"-"+$e+'" in string transliteration'),re=te+1;re<$e+1;re++)ne+=String.fromCharCode(re);ue=!0,se++}else ue=oe==="\\",ne+=oe;return ne}function n(ie,ne){if(ie.length===0)return ne;var se="",O,oe=ie.length,ue;for(O=0;O<oe;O++)ue=ie.charAt(O),ne.indexOf(ue)!==-1&&(se+=ue);return se}var t,$,r,a,s,p,G="",Z="";for(t=0,$=u.length;t<$;t++)r=C(u[t],c("String"),"to_str"),a=r.charAt(0)==="^"&&r.length>1,r=i(a?r.slice(1):r),a?Z=n(Z,r):G=n(G,r);if(G.length>0&&Z.length>0){for(p="",t=0,$=G.length;t<$;t++)s=G.charAt(t),Z.indexOf(s)===-1&&(p+=s);G=p,Z=""}return G.length>0?"["+c("Regexp").$escape(G)+"]":Z.length>0?"[^"+c("Regexp").$escape(Z)+"]":null}return D(h,"$instance_variables",function(){return[]}),j(h,"$_load",function(i){var n,t,$=this;return n=b(arguments),t=n,U($,"new",F(t))},-1),D(h,"$unicode_normalize",function(i){var n=this;return i==null&&(i="nfc"),k(["nfc","nfd","nfkc","nfkd"]["$include?"](i))||K.$raise(c("ArgumentError"),"Invalid normalization form "+i),n.normalize(i.$upcase())},-1),D(h,"$unicode_normalized?",function(i){var n=this;return i==null&&(i="nfc"),n.$unicode_normalize(i)["$=="](n)},-1),D(h,"$unpack",function(i){return K.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),D(h,"$unpack1",function(i){return K.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),D(h,"$freeze",function(){var i=this;return typeof i=="string"||y(i,"$$frozen",!0),i}),D(h,"$-@",function(){var i=this;return typeof i=="string"||i.$$frozen?i:i.encoding.name=="UTF-8"&&i.internal_encoding.name=="UTF-8"?i.toString():i.$dup().$freeze()}),D(h,"$frozen?",function(){var i=this;return typeof i=="string"||i.$$frozen===!0}),T(h,"+@","dup"),T(h,"===","=="),T(h,"byteslice","[]"),T(h,"eql?","=="),T(h,"equal?","==="),T(h,"object_id","__id__"),T(h,"slice","[]"),T(h,"succ","next"),T(h,"to_str","to_s"),T(h,"to_sym","intern"),X.$pristine(h,"initialize")}("::",String,N),o(N[0],"Symbol",L("String"))};Opal.modules["corelib/enumerable"]=function(e){var C=e.truthy,z=e.coerce_to,g=e.yield1,y=e.yieldX,M=e.deny_frozen_access,D=e.module,X=e.send,j=e.slice,b=e.to_a,U=e.Opal,F=e.thrower,J=e.def,H=e.Kernel,B=e.return_val,K=e.rb_gt,k=e.rb_times,I=e.rb_lt,V=e.eqeq,v=e.rb_plus,x=e.rb_minus,w=e.rb_divide,T=e.rb_le,o=e.hash2,A=e.lambda,N=e.not,L=e.alias,S=[],c=e.nil,E=e.$$$;return function(m,f){var h=D(m,"Enumerable"),R=[h].concat(f),d=e.$r(R);function l(u){return u.length===0&&(u=[c]),u.length>1&&(u=[u]),u}return J(h,"$all?",function u(i){try{var n=F("return"),t=u.$$p||c,$=this;return u.$$p=null,C(i!==void 0)?X($,"each",[],function(a){var s,p,G=c;if(s=j(arguments),p=s,G=l(p),C(X(i,"public_send",["==="].concat(b(G)))))return c;n.$throw(!1)},{$$arity:-1,$$ret:n}):t!==c?X($,"each",[],function(a){var s,p;if(s=j(arguments),p=s,C(e.yieldX(t,b(p))))return c;n.$throw(!1)},{$$arity:-1,$$ret:n}):X($,"each",[],function(a){var s,p;if(s=j(arguments),p=s,C(U.$destructure(p)))return c;n.$throw(!1)},{$$arity:-1,$$ret:n}),!0}catch(r){if(r===n)return r.$v;throw r}},-1),J(h,"$any?",function u(i){try{var n=F("return"),t=u.$$p||c,$=this;return u.$$p=null,C(i!==void 0)?X($,"each",[],function(a){var s,p,G=c;if(s=j(arguments),p=s,G=l(p),C(X(i,"public_send",["==="].concat(b(G)))))n.$throw(!0);else return c},{$$arity:-1,$$ret:n}):t!==c?X($,"each",[],function(a){var s,p;if(s=j(arguments),p=s,C(e.yieldX(t,b(p))))n.$throw(!0);else return c},{$$arity:-1,$$ret:n}):X($,"each",[],function(a){var s,p;if(s=j(arguments),p=s,C(U.$destructure(p)))n.$throw(!0);else return c},{$$arity:-1,$$ret:n}),!1}catch(r){if(r===n)return r.$v;throw r}},-1),J(h,"$chunk",function u(){var i=u.$$p||c,n=this;return u.$$p=null,i===c?X(n,"to_enum",["chunk"],function t(){var $=t.$$s==null?this:t.$$s;return $.$enumerator_size()},{$$s:n}):X(E("Enumerator"),"new",[],function t($){var r=t.$$s==null?this:t.$$s;$==null&&($=c);var a=c,s=[];function p(){s.length>0&&$.$yield(a,s)}r.$each.$$p=function(G){var Z=g(i,G);Z===c?(p(),s=[],a=c):(a===c||a===Z?s.push(G):(p(),s=[G]),a=Z)},r.$each(),p()},{$$s:n})}),J(h,"$chunk_while",function u(){var i=u.$$p||c,n=this;return u.$$p=null,i===c&&H.$raise(E("ArgumentError"),"no block given"),X(n,"slice_when",[],function($,r){return $==null&&($=c),r==null&&(r=c),e.yieldX(i,[$,r])["$!"]()})}),J(h,"$collect",function u(){var i=u.$$p||c,n=this;if(u.$$p=null,i===c)return X(n,"enum_for",["collect"],function $(){var r=$.$$s==null?this:$.$$s;return r.$enumerator_size()},{$$s:n});var t=[];return n.$each.$$p=function(){var $=y(i,arguments);t.push($)},n.$each(),t}),J(h,"$collect_concat",function u(){var i=u.$$p||c,n=this;return u.$$p=null,i===c?X(n,"enum_for",["collect_concat"],function t(){var $=t.$$s==null?this:t.$$s;return $.$enumerator_size()},{$$s:n}):X(n,"map",[],i.$to_proc()).$flatten(1)}),J(h,"$compact",function(){var i=this;return i.$to_a().$compact()}),J(h,"$count",function u(i){var n=u.$$p||c,t=this,$=c;return u.$$p=null,$=0,i!=null&&n!==c&&t.$warn("warning: given block not used"),C(i!=null)?n=X(H,"proc",[],function(a){var s,p;return s=j(arguments),p=s,U.$destructure(p)["$=="](i)},-1):C(n["$nil?"]())&&(n=X(H,"proc",[],B(!0))),X(t,"each",[],function(a){var s,p;return s=j(arguments),p=s,C(y(n,p))?$++:c},-1),$},-1),J(h,"$cycle",function u(i){var n=u.$$p||c,t=this;if(u.$$p=null,i==null&&(i=c),n===c)return X(t,"enum_for",["cycle",i],function p(){var G=p.$$s==null?this:p.$$s;return C(i["$nil?"]())?C(G["$respond_to?"]("size"))?E(E("Float"),"INFINITY"):c:(i=U["$coerce_to!"](i,E("Integer"),"to_int"),C(K(i,0))?k(G.$enumerator_size(),i):0)},{$$s:t});if(!C(i["$nil?"]())&&(i=U["$coerce_to!"](i,E("Integer"),"to_int"),C(i<=0)))return c;var $=[],r,a,s;if(t.$each.$$p=function(){var p=U.$destructure(arguments),G=g(n,p);$.push(p)},t.$each(),$.length===0)return c;if(i===c)for(;;)for(r=0,a=$.length;r<a;r++)s=g(n,$[r]);else for(;i>1;){for(r=0,a=$.length;r<a;r++)s=g(n,$[r]);i--}},-1),J(h,"$detect",function u(i){try{var n=F("return"),t=u.$$p||c,$=this;return u.$$p=null,t===c?$.$enum_for("detect",i):(X($,"each",[],function(a){var s,p,G=c;if(s=j(arguments),p=s,G=U.$destructure(p),C(e.yield1(t,G)))n.$throw(G);else return c},{$$arity:-1,$$ret:n}),i!==void 0?typeof i=="function"?i():i:c)}catch(r){if(r===n)return r.$v;throw r}},-1),J(h,"$drop",function(i){var n=this;i=z(i,E("Integer"),"to_int"),C(i<0)&&H.$raise(E("ArgumentError"),"attempt to drop negative size");var t=[],$=0;return n.$each.$$p=function(){i<=$&&t.push(U.$destructure(arguments)),$++},n.$each(),t}),J(h,"$drop_while",function u(){var i=u.$$p||c,n=this;if(u.$$p=null,i===c)return n.$enum_for("drop_while");var t=[],$=!0;return n.$each.$$p=function(){var r=U.$destructure(arguments);if($){var a=g(i,r);C(a)||($=!1,t.push(r))}else t.push(r)},n.$each(),t}),J(h,"$each_cons",function u(i){var n=u.$$p||c,t=this;if(u.$$p=null,C(arguments.length!=1)&&H.$raise(E("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),i=U.$try_convert(i,E("Integer"),"to_int"),C(i<=0)&&H.$raise(E("ArgumentError"),"invalid size"),n===c)return X(t,"enum_for",["each_cons",i],function r(){var a=r.$$s==null?this:r.$$s,s=c;return s=a.$enumerator_size(),C(s["$nil?"]())?c:V(s,0)||C(I(s,i))?0:v(x(s,i),1)},{$$s:t});var $=[];return t.$each.$$p=function(){var r=U.$destructure(arguments);$.push(r),$.length>i&&$.shift(),$.length==i&&g(n,$.slice(0,i))},t.$each(),t}),J(h,"$each_entry",function u(i){var n=u.$$p||c,t,$,r=this;return u.$$p=null,t=j(arguments),$=t,n===c?X(r,"to_enum",["each_entry"].concat(b($)),function a(){var s=a.$$s==null?this:a.$$s;return s.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var a=U.$destructure(arguments);g(n,a)},r.$each.apply(r,$),r)},-1),J(h,"$each_slice",function u(i){var n=u.$$p||c,t=this;if(u.$$p=null,i=z(i,E("Integer"),"to_int"),C(i<=0)&&H.$raise(E("ArgumentError"),"invalid slice size"),n===c)return X(t,"enum_for",["each_slice",i],function r(){var a=r.$$s==null?this:r.$$s;return C(a["$respond_to?"]("size"))?w(a.$size(),i).$ceil():c},{$$s:t});var $=[];return t.$each.$$p=function(){var r=U.$destructure(arguments);$.push(r),$.length===i&&(g(n,$),$=[])},t.$each(),$.length>0&&g(n,$),t}),J(h,"$each_with_index",function u(i){var n=u.$$p||c,t,$,r=this;if(u.$$p=null,t=j(arguments),$=t,n===c)return X(r,"enum_for",["each_with_index"].concat(b($)),function s(){var p=s.$$s==null?this:s.$$s;return p.$enumerator_size()},{$$s:r});var a=0;return r.$each.$$p=function(){var s=U.$destructure(arguments);n(s,a),a++},r.$each.apply(r,$),r},-1),J(h,"$each_with_object",function u(i){var n=u.$$p||c,t=this;return u.$$p=null,n===c?X(t,"enum_for",["each_with_object",i],function $(){var r=$.$$s==null?this:$.$$s;return r.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var $=U.$destructure(arguments);n($,i)},t.$each(),i)}),J(h,"$entries",function(i){var n,t,$=this;n=j(arguments),t=n;var r=[];return $.$each.$$p=function(){r.push(U.$destructure(arguments))},$.$each.apply($,t),r},-1),J(h,"$filter_map",function u(){var i=u.$$p||c,n=this;return u.$$p=null,i===c?X(n,"enum_for",["filter_map"],function t(){var $=t.$$s==null?this:t.$$s;return $.$enumerator_size()},{$$s:n}):X(X(n,"map",[],i.$to_proc()),"select",[],"itself".$to_proc())}),J(h,"$find_all",function u(){var i=u.$$p||c,n=this;if(u.$$p=null,i===c)return X(n,"enum_for",["find_all"],function $(){var r=$.$$s==null?this:$.$$s;return r.$enumerator_size()},{$$s:n});var t=[];return n.$each.$$p=function(){var $=U.$destructure(arguments),r=g(i,$);C(r)&&t.push($)},n.$each(),t}),J(h,"$find_index",function u(i){try{var n=F("return"),t=u.$$p||c,$=this,r=c;return u.$$p=null,C(i===void 0&&t===c)?$.$enum_for("find_index"):(i!=null&&t!==c&&$.$warn("warning: given block not used"),r=0,C(i!=null)?X($,"each",[],function(s){var p,G;return p=j(arguments),G=p,V(U.$destructure(G),i)&&n.$throw(r),r+=1},{$$arity:-1,$$ret:n}):X($,"each",[],function(s){var p,G;return p=j(arguments),G=p,C(e.yieldX(t,b(G)))&&n.$throw(r),r+=1},{$$arity:-1,$$ret:n}),c)}catch(a){if(a===n)return a.$v;throw a}},-1),J(h,"$first",function(i){try{var n=F("return"),t=this,$=c,r=c;return C(i===void 0)?X(t,"each",[],function(s){s==null&&(s=c),n.$throw(s)},{$$ret:n}):($=[],i=z(i,E("Integer"),"to_int"),C(i<0)&&H.$raise(E("ArgumentError"),"attempt to take negative size"),C(i==0)?[]:(r=0,X(t,"each",[],function(s){var p,G;if(p=j(arguments),G=p,$.push(U.$destructure(G)),C(i<=++r))n.$throw($);else return c},{$$arity:-1,$$ret:n}),$))}catch(a){if(a===n)return a.$v;throw a}},-1),J(h,"$grep",function u(i){var n=u.$$p||c,t=this,$=c;return u.$$p=null,$=[],X(t,"each",[],function(a){var s,p,G=c;return s=j(arguments),p=s,G=l(p),C(X(i,"__send__",["==="].concat(b(G))))?(n!==c?(C(K(p.$length(),1))&&(p=[p]),p=e.yieldX(n,b(p))):C(T(p.$length(),1))&&(p=p["$[]"](0)),$.$push(p)):c},-1),$}),J(h,"$grep_v",function u(i){var n=u.$$p||c,t=this,$=c;return u.$$p=null,$=[],X(t,"each",[],function(a){var s,p,G=c;return s=j(arguments),p=s,G=l(p),C(X(i,"__send__",["==="].concat(b(G))))?c:(n!==c?(C(K(p.$length(),1))&&(p=[p]),p=e.yieldX(n,b(p))):C(T(p.$length(),1))&&(p=p["$[]"](0)),$.$push(p))},-1),$}),J(h,"$group_by",function u(){var i=u.$$p||c,n,t=this,$=c,r=c;if(u.$$p=null,i===c)return X(t,"enum_for",["group_by"],function s(){var p=s.$$s==null?this:s.$$s;return p.$enumerator_size()},{$$s:t});$=o([],{});var a;return t.$each.$$p=function(){var s=U.$destructure(arguments),p=g(i,s);(C(r=$["$[]"](p))?r:(n=[p,[]],X($,"[]=",n),n[n.length-1]))["$<<"](s)},t.$each(),a!==void 0?a:$}),J(h,"$include?",function(i){try{var n=F("return"),t=this;return X(t,"each",[],function(r){var a,s;if(a=j(arguments),s=a,V(U.$destructure(s),i))n.$throw(!0);else return c},{$$arity:-1,$$ret:n}),!1}catch($){if($===n)return $.$v;throw $}}),J(h,"$inject",function u(i,n){var t=u.$$p||c,$=this;u.$$p=null;var r=i;return t!==c&&n===void 0?$.$each.$$p=function(){var a=U.$destructure(arguments);if(r===void 0){r=a;return}a=y(t,[r,a]),r=a}:(n===void 0&&(E("Symbol")["$==="](i)||H.$raise(E("TypeError"),""+i.$inspect()+" is not a Symbol"),n=i,r=void 0),$.$each.$$p=function(){var a=U.$destructure(arguments);if(r===void 0){r=a;return}r=r.$__send__(n,a)}),$.$each(),r==null?c:r},-1),J(h,"$lazy",function(){var i=this;return X(E(E("Enumerator"),"Lazy"),"new",[i,i.$enumerator_size()],function(t,$){var r,a;return t==null&&(t=c),r=j(arguments,1),a=r,X(t,"yield",b(a))},-2)}),J(h,"$enumerator_size",function(){var i=this;return C(i["$respond_to?"]("size"))?i.$size():c}),J(h,"$max",function u(i){var n=u.$$p||c,t=this;if(u.$$p=null,i===void 0||i===c){var $,r;return t.$each.$$p=function(){var a=U.$destructure(arguments);if($===void 0){$=a;return}n!==c?r=y(n,[a,$]):r=a["$<=>"]($),r===c&&H.$raise(E("ArgumentError"),"comparison failed"),r>0&&($=a)},t.$each(),$===void 0?c:$}return i=z(i,E("Integer"),"to_int"),X(t,"sort",[],n.$to_proc()).$reverse().$first(i)},-1),J(h,"$max_by",function u(i){var n=u.$$p||c,t=this;if(u.$$p=null,i==null&&(i=c),!C(n))return X(t,"enum_for",["max_by",i],function a(){var s=a.$$s==null?this:a.$$s;return s.$enumerator_size()},{$$s:t});if(!C(i["$nil?"]()))return X(t,"sort_by",[],n.$to_proc()).$reverse().$take(i);var $,r;return t.$each.$$p=function(){var a=U.$destructure(arguments),s=g(n,a);if($===void 0){$=a,r=s;return}s["$<=>"](r)>0&&($=a,r=s)},t.$each(),$===void 0?c:$},-1),J(h,"$min",function u(i){var n=u.$$p||c,t=this;if(u.$$p=null,i==null&&(i=c),!C(i["$nil?"]()))return n!==c?X(t,"sort",[],function(a,s){return a==null&&(a=c),s==null&&(s=c),e.yieldX(n,[a,s])}).$take(i):t.$sort().$take(i);var $;return n!==c?t.$each.$$p=function(){var r=U.$destructure(arguments);if($===void 0){$=r;return}var a=n(r,$);a===c&&H.$raise(E("ArgumentError"),"comparison failed"),a<0&&($=r)}:t.$each.$$p=function(){var r=U.$destructure(arguments);if($===void 0){$=r;return}U.$compare(r,$)<0&&($=r)},t.$each(),$===void 0?c:$},-1),J(h,"$min_by",function u(i){var n=u.$$p||c,t=this;if(u.$$p=null,i==null&&(i=c),!C(n))return X(t,"enum_for",["min_by",i],function a(){var s=a.$$s==null?this:a.$$s;return s.$enumerator_size()},{$$s:t});if(!C(i["$nil?"]()))return X(t,"sort_by",[],n.$to_proc()).$take(i);var $,r;return t.$each.$$p=function(){var a=U.$destructure(arguments),s=g(n,a);if($===void 0){$=a,r=s;return}s["$<=>"](r)<0&&($=a,r=s)},t.$each(),$===void 0?c:$},-1),J(h,"$minmax",function u(){var i=u.$$p||c,n=this,t=c;u.$$p=null,i=C(t=i)?t:X(H,"proc",[],function(p,G){return p==null&&(p=c),G==null&&(G=c),p["$<=>"](G)});var $=c,r=c,a=!0;return n.$each.$$p=function(){var s=U.$destructure(arguments);if(a)$=r=s,a=!1;else{var p=i.$call($,s);p===c?H.$raise(E("ArgumentError"),"comparison failed"):p>0&&($=s);var G=i.$call(r,s);G===c?H.$raise(E("ArgumentError"),"comparison failed"):G<0&&(r=s)}},n.$each(),[$,r]}),J(h,"$minmax_by",function u(){var i=u.$$p||c,n=this;if(u.$$p=null,!C(i))return X(n,"enum_for",["minmax_by"],function s(){var p=s.$$s==null?this:s.$$s;return p.$enumerator_size()},{$$s:n});var t=c,$=c,r,a;return n.$each.$$p=function(){var s=U.$destructure(arguments),p=g(i,s);(r===void 0||p["$<=>"](r)<0)&&(t=s,r=p),(a===void 0||p["$<=>"](a)>0)&&($=s,a=p)},n.$each(),[t,$]}),J(h,"$none?",function u(i){try{var n=F("return"),t=u.$$p||c,$=this;return u.$$p=null,C(i!==void 0)?X($,"each",[],function(a){var s,p,G=c;if(s=j(arguments),p=s,G=l(p),C(X(i,"public_send",["==="].concat(b(G)))))n.$throw(!1);else return c},{$$arity:-1,$$ret:n}):t!==c?X($,"each",[],function(a){var s,p;if(s=j(arguments),p=s,C(e.yieldX(t,b(p))))n.$throw(!1);else return c},{$$arity:-1,$$ret:n}):X($,"each",[],function(a){var s,p,G=c;if(s=j(arguments),p=s,G=U.$destructure(p),C(G))n.$throw(!1);else return c},{$$arity:-1,$$ret:n}),!0}catch(r){if(r===n)return r.$v;throw r}},-1),J(h,"$one?",function u(i){try{var n=F("return"),t=u.$$p||c,$=this,r=c;return u.$$p=null,r=0,C(i!==void 0)?X($,"each",[],function(s){var p,G,Z=c;if(p=j(arguments),G=p,Z=l(G),C(X(i,"public_send",["==="].concat(b(Z)))))if(r=v(r,1),C(K(r,1)))n.$throw(!1);else return c;else return c},{$$arity:-1,$$ret:n}):t!==c?X($,"each",[],function(s){var p,G;if(p=j(arguments),G=p,!C(e.yieldX(t,b(G))))return c;if(r=v(r,1),C(K(r,1)))n.$throw(!1);else return c},{$$arity:-1,$$ret:n}):X($,"each",[],function(s){var p,G;if(p=j(arguments),G=p,!C(U.$destructure(G)))return c;if(r=v(r,1),C(K(r,1)))n.$throw(!1);else return c},{$$arity:-1,$$ret:n}),r["$=="](1)}catch(a){if(a===n)return a.$v;throw a}},-1),J(h,"$partition",function u(){var i=u.$$p||c,n=this;if(u.$$p=null,i===c)return X(n,"enum_for",["partition"],function a(){var s=a.$$s==null?this:a.$$s;return s.$enumerator_size()},{$$s:n});var t=[],$=[],r;return n.$each.$$p=function(){var a=U.$destructure(arguments),s=g(i,a);C(s)?t.push(a):$.push(a)},n.$each(),[t,$]}),J(h,"$reject",function u(){var i=u.$$p||c,n=this;if(u.$$p=null,i===c)return X(n,"enum_for",["reject"],function $(){var r=$.$$s==null?this:$.$$s;return r.$enumerator_size()},{$$s:n});var t=[];return n.$each.$$p=function(){var $=U.$destructure(arguments),r=g(i,$);C(r)||t.push($)},n.$each(),t}),J(h,"$reverse_each",function u(){var i=u.$$p||c,n=this;if(u.$$p=null,i===c)return X(n,"enum_for",["reverse_each"],function r(){var a=r.$$s==null?this:r.$$s;return a.$enumerator_size()},{$$s:n});var t=[];n.$each.$$p=function(){t.push(arguments)},n.$each();for(var $=t.length-1;$>=0;$--)y(i,t[$]);return t}),J(h,"$slice_before",function u(i){var n=u.$$p||c,t=this;return u.$$p=null,C(i===void 0&&n===c)&&H.$raise(E("ArgumentError"),"both pattern and block are given"),C(i!==void 0&&n!==c||arguments.length>1)&&H.$raise(E("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),X(E("Enumerator"),"new",[],function $(r){var a=$.$$s==null?this:$.$$s;r==null&&(r=c);var s=[];n!==c?i===void 0?a.$each.$$p=function(){var p=U.$destructure(arguments),G=g(n,p);C(G)&&s.length>0&&(r["$<<"](s),s=[]),s.push(p)}:a.$each.$$p=function(){var p=U.$destructure(arguments),G=n(p,i.$dup());C(G)&&s.length>0&&(r["$<<"](s),s=[]),s.push(p)}:a.$each.$$p=function(){var p=U.$destructure(arguments),G=i["$==="](p);C(G)&&s.length>0&&(r["$<<"](s),s=[]),s.push(p)},a.$each(),s.length>0&&r["$<<"](s)},{$$s:t})},-1),J(h,"$slice_after",function u(i){var n=u.$$p||c,t=this;return u.$$p=null,C(i===void 0&&n===c)&&H.$raise(E("ArgumentError"),"both pattern and block are given"),C(i!==void 0&&n!==c||arguments.length>1)&&H.$raise(E("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),C(i!==void 0)&&(n=X(H,"proc",[],function(r){return r==null&&(r=c),i["$==="](r)})),X(E("Enumerator"),"new",[],function $(r){var a=$.$$s==null?this:$.$$s;r==null&&(r=c);var s;a.$each.$$p=function(){var p=U.$destructure(arguments),G=g(n,p);s==null&&(s=[]),C(G)?(s.push(p),r.$yield(s),s=null):s.push(p)},a.$each(),s!=null&&r.$yield(s)},{$$s:t})},-1),J(h,"$slice_when",function u(){var i=u.$$p||c,n=this;return u.$$p=null,i===c&&H.$raise(E("ArgumentError"),"wrong number of arguments (0 for 1)"),X(E("Enumerator"),"new",[],function t($){var r=t.$$s==null?this:t.$$s;$==null&&($=c);var a=c,s=c;r.$each_cons.$$p=function(){var p=U.$destructure(arguments),G=p[0],Z=p[1],ie=y(i,[G,Z]);s=Z,a===c&&(a=[]),C(ie)?(a.push(G),$.$yield(a),a=[]):a.push(G)},r.$each_cons(2),a!==c&&(a.push(s),$.$yield(a))},{$$s:n})}),J(h,"$sort",function u(){var i=u.$$p||c,n=this,t=c;return u.$$p=null,t=n.$to_a(),i===c&&(i=A(function(r,a){return r==null&&(r=c),a==null&&(a=c),r["$<=>"](a)})),X(t,"sort",[],i.$to_proc())}),J(h,"$sort_by",function u(){var i=u.$$p||c,n=this,t=c;return u.$$p=null,i===c?X(n,"enum_for",["sort_by"],function $(){var r=$.$$s==null?this:$.$$s;return r.$enumerator_size()},{$$s:n}):(t=X(n,"map",[],function(){var r=c;return r=U.$destructure(arguments),[e.yield1(i,r),r]}),X(t,"sort!",[],function(r,a){return r==null&&(r=c),a==null&&(a=c),r[0]["$<=>"](a[0])}),X(t,"map!",[],function(r){return r==null&&(r=c),r[1]}))}),J(h,"$sum",function u(i){var n=u.$$p||c,t=this,$=c,r=c;return u.$$p=null,i==null&&(i=0),$=i,r=0,X(t,"each",[],function(s){var p,G,Z=c,ie=c,ne=c;return p=j(arguments),G=p,Z=n!==c?e.yieldX(n,b(G)):U.$destructure(G),N([E(E("Float"),"INFINITY"),E(E("Float"),"INFINITY")["$-@"]()]["$include?"](Z))&&C(Z["$respond_to?"]("-"))?(ie=x(Z,r),ne=v($,ie),r=x(x(ne,$),ie),$=ne):$=v($,Z)},-1),$},-1),J(h,"$take",function(i){var n=this;return n.$first(i)}),J(h,"$take_while",function u(){try{var i=F("return"),n=u.$$p||c,t=this,$=c;return u.$$p=null,C(n)?($=[],X(t,"each",[],function(a){var s,p,G=c;return s=j(arguments),p=s,G=U.$destructure(p),C(e.yield1(n,G))||i.$throw($),$.push(G)},{$$arity:-1,$$ret:i})):t.$enum_for("take_while")}catch(r){if(r===i)return r.$v;throw r}}),J(h,"$uniq",function u(){var i=u.$$p||c,n=this,t=c;return u.$$p=null,t=o([],{}),X(n,"each",[],function(r){var a,s,p,G=c,Z=c;return a=j(arguments),s=a,G=U.$destructure(s),Z=i!==c?e.yield1(i,G):G,C(t["$key?"](Z))?c:(p=[Z,G],X(t,"[]=",p),p[p.length-1])},-1),t.$values()}),J(h,"$tally",function(i){var n=this,t=c;return i&&i!==c&&M(i),t=X(X(n,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),C(i)?(X(t,"each",[],function(r,a){var s;return r==null&&(r=c),a==null&&(a=c),s=[r,v(i.$fetch(r,0),a)],X(i,"[]=",s),s[s.length-1]}),i):t},-1),J(h,"$to_h",function u(i){var n=u.$$p||c,t,$,r=this;if(u.$$p=null,t=j(arguments),$=t,n!==c)return X(X(r,"map",[],n.$to_proc()),"to_h",b($));var a=o([],{});return r.$each.$$p=function(){var s=U.$destructure(arguments),p=U["$coerce_to?"](s,E("Array"),"to_ary"),G,Z;p.$$is_array||H.$raise(E("TypeError"),"wrong element type "+p.$class()+" (expected array)"),p.length!==2&&H.$raise(E("ArgumentError"),"wrong array length (expected 2, was "+p.$length()+")"),G=p[0],Z=p[1],e.hash_put(a,G,Z)},r.$each.apply(r,$),a},-1),J(h,"$to_set",function u(i,n){var t=u.$$p||c,$,r,a,s=this;return u.$$p=null,$=j(arguments),$.length>0&&(r=$.shift()),r==null&&(r=d("Set")),a=$,X(r,"new",[s].concat(b(a)),t.$to_proc())},-1),J(h,"$zip",function u(i){var n=u.$$p||c,t,$,r=this;return u.$$p=null,t=j(arguments),$=t,X(r.$to_a(),"zip",b($))},-1),L(h,"find","detect"),L(h,"filter","find_all"),L(h,"flat_map","collect_concat"),L(h,"map","collect"),L(h,"member?","include?"),L(h,"reduce","inject"),L(h,"select","find_all"),L(h,"to_a","entries")}("::",S)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var C=e.klass,z=e.truthy,g=e.to_a,y=e.eqeq,M=e.Kernel,D=e.def,X=e.rb_gt,j=e.rb_lt,b=e.rb_le,U=e.rb_ge,F=e.rb_plus,J=e.rb_minus,H=e.eqeqeq,B=e.not,K=e.rb_times,k=e.rb_divide,I=e.alias,V=[],v=e.nil,x=e.$$$;return function(w,T,o){var A=C(w,T,"Enumerator"),N=[A].concat(o);return function(L,S,c){var E=C(L,S,"ArithmeticSequence"),m=[E].concat(c),f=e.$r(m),h=E.$$prototype;h.step_arg2=h.receiver_num=h.step_arg1=h.step=h.range=h.topfx=h.bypfx=h.creation_method=h.skipped_arg=v,e.prop(E.$$prototype,"$$is_arithmetic_seq",!0);var R=1/0;return D(E,"$initialize",function(l,u,i){var n,t=this,$=v;return i==null&&(i="step"),t.creation_method=i,z(l["$is_a?"](x("Array")))?(n=[].concat(g(l)),t.step_arg1=n[0]==null?v:n[0],t.step_arg2=n[1]==null?v:n[1],t.topfx=n[2]==null?v:n[2],t.bypfx=n[3]==null?v:n[3],t.receiver_num=u,t.step=1,t.range=z(t.step_arg2)?(t.step=t.step_arg2,e.Range.$new(t.receiver_num,t.step_arg1,!1)):z(t.step_arg1)?e.Range.$new(t.receiver_num,t.step_arg1,!1):e.Range.$new(t.receiver_num,v,!1)):(z(u)||(t.skipped_arg=!0),n=[l,z($=u)?$:1],t.range=n[0],t.step=n[1]),t.object=t,y(t.step,0)&&M.$raise(f("ArgumentError"),"step can't be 0"),z(t.step["$respond_to?"]("to_int"))?v:M.$raise(f("ArgumentError"),"no implicit conversion of "+t.step.$class()+" into Integer")},-2),E.$attr_reader("step"),D(E,"$begin",function(){var l=this;return l.range.$begin()}),D(E,"$end",function(){var l=this;return l.range.$end()}),D(E,"$exclude_end?",function(){var l=this;return l.range["$exclude_end?"]()}),D(E,"$_lesser_than_end?",function(l){var u=this,i=v,n=v;return i=z(n=u.$end())?n:R,z(X(u.$step(),0))?z(u["$exclude_end?"]())?j(l,i):b(l,i):z(u["$exclude_end?"]())?X(l,i):U(l,i)}),D(E,"$_greater_than_begin?",function(l){var u=this,i=v,n=v;return i=z(n=u.$begin())?n:R["$-@"](),z(X(u.$step(),0))?X(l,i):j(l,i)}),D(E,"$first",function(l){var u=this,i=v,n=v,t=v;if(i=z(n=u.$begin())?n:R["$-@"](),!z(l))return z(u["$_lesser_than_end?"](i))?i:v;for(t=[];z(z(n=u["$_lesser_than_end?"](i))?X(l,0):n);)t["$<<"](i),i=F(i,u.$step()),l=J(l,1);return t},-1),D(E,"$each",function d(){var l=d.$$p||v,u=this,i=v,n=v;if(d.$$p=null,l===v)return u;for(H(v,i=u.$begin())&&M.$raise(f("TypeError"),"nil can't be coerced into Integer"),n=z(i=u.$begin())?i:R["$-@"]();z(u["$_lesser_than_end?"](n));)e.yield1(l,n),n=F(n,u.$step());return u}),D(E,"$last",function(l){var u=this,i=v,n=v,t=v;if(H(R,i=u.$end())||H(R["$-@"](),i)?M.$raise(x("FloatDomainError"),u.$end()):H(v,i)&&M.$raise(x("RangeError"),"cannot get the last element of endless arithmetic sequence"),n=J(u.$end(),J(u.$end(),u.$begin())["$%"](u.$step())),z(u["$_lesser_than_end?"](n))||(n=J(n,u.$step())),!z(l))return z(u["$_greater_than_begin?"](n))?n:v;for(t=[];z(z(i=u["$_greater_than_begin?"](n))?X(l,0):i);)t["$<<"](n),n=J(n,u.$step()),l=J(l,1);return t.$reverse()},-1),D(E,"$size",function(){var l=this,u=v,i=v;return u=z(X(l.$step(),0))?1:-1,B(l["$_lesser_than_end?"](l.$begin()))?0:z([R["$-@"](),R]["$include?"](l.$step()))?1:z([K(R["$-@"](),u),v]["$include?"](l.$begin()))||z([K(R,u),v]["$include?"](l.$end()))?R:(i=J(l.$end(),J(l.$end(),l.$begin())["$%"](l.$step())),z(l["$_lesser_than_end?"](i))||(i=J(i,l.$step())),F(k(J(i,l.$begin()),l.$step()).$abs().$to_i(),1))}),D(E,"$==",function(l){var u=this,i=v,n=v,t=v,$=v;return z(i=z(n=z(t=z($=u.$class()["$=="](l.$class()))?u.$begin()["$=="](l.$begin()):$)?u.$end()["$=="](l.$end()):t)?u.$step()["$=="](l.$step()):n)?u["$exclude_end?"]()["$=="](l["$exclude_end?"]()):i}),D(E,"$hash",function(){var l=this;return[l.$begin(),l.$end(),l.$step(),l["$exclude_end?"]()].$hash()}),D(E,"$inspect",function(){var l=this,u=v;return z(l.receiver_num)?(u=z(l.step_arg2)?"("+l.topfx+l.step_arg1.$inspect()+", "+l.bypfx+l.step_arg2.$inspect()+")":z(l.step_arg1)?"("+l.topfx+l.step_arg1.$inspect()+")":v,"("+l.receiver_num.$inspect()+"."+l.creation_method+u+")"):(u=z(l.skipped_arg)?v:"("+l.step+")","(("+l.range.$inspect()+")."+l.creation_method+u+")")}),I(E,"===","=="),I(E,"eql?","==")}(A,A,N)}("::",null,V)};Opal.modules["corelib/enumerator/chain"]=function(e){var C=e.deny_frozen_access,z=e.klass,g=e.slice,y=e.def,M=e.send,D=e.to_a,X=e.truthy,j=e.rb_plus,b=e.thrower,U=e.nil,F=e.$$$;return function(J,H){var B=z(J,H,"Enumerator");return function(K,k){var I=z(K,k,"Chain"),V=I.$$prototype;return V.enums=V.iterated=U,y(I,"$initialize",function(x){var w,T,o=this;return w=g(arguments),T=w,C(o),o.enums=T,o.iterated=[],o.object=o},-1),y(I,"$each",function v(x){var w=v.$$p||U,T,o,A=this;return v.$$p=null,T=g(arguments),o=T,w===U?M(A,"to_enum",["each"].concat(D(o)),function N(){var L=N.$$s==null?this:N.$$s;return L.$size()},{$$s:A}):(M(A.enums,"each",[],function N(L){var S=N.$$s==null?this:N.$$s;return S.iterated==null&&(S.iterated=U),L==null&&(L=U),S.iterated["$<<"](L),M(L,"each",D(o),w.$to_proc())},{$$s:A}),A)},-1),y(I,"$size",function(x){try{var w=b("return"),T,o,A=this,N=U;return T=g(arguments),o=T,N=0,M(A.enums,"each",[],function(S){var c=U;return S==null&&(S=U),c=M(S,"size",D(o)),X([U,F(F("Float"),"INFINITY")]["$include?"](c))&&w.$throw(c),N=j(N,c)},{$$ret:w}),N}catch(L){if(L===w)return L.$v;throw L}},-1),y(I,"$rewind",function(){var x=this;return M(x.iterated,"reverse_each",[],function(T){return T==null&&(T=U),X(T["$respond_to?"]("rewind"))?T.$rewind():U}),x.iterated=[],x}),y(I,"$inspect",function(){var x=this;return"#<Enumerator::Chain: "+x.enums.$inspect()+">"})}(B,B)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var C=e.deny_frozen_access,z=e.klass,g=e.truthy,y=e.Kernel,M=e.def,D=e.slice,X=e.send,j=[],b=e.nil,U=e.$$$;return function(F,J,H){var B=z(F,J,"Enumerator"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"Generator"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.block=b,v.$include(U("Enumerable")),M(v,"$initialize",function o(){var A=o.$$p||b,N=this;return o.$$p=null,C(N),g(A)||y.$raise(U("LocalJumpError"),"no block given"),N.block=A}),M(v,"$each",function o(A){var N=o.$$p||b,L,S,c=this,E=b;o.$$p=null,L=D(arguments),S=L,E=X(w("Yielder"),"new",[],N.$to_proc());try{S.unshift(E),e.yieldX(c.block,S)}catch(m){if(m&&m.$thrower_type=="breaker")return m.$v;throw m}return c},-1)}(K[0],null,K)}(j[0],null,j)};Opal.modules["corelib/enumerator/lazy"]=function(e){var C=e.truthy,z=e.coerce_to,g=e.yield1,y=e.yieldX,M=e.deny_frozen_access,D=e.klass,X=e.slice,j=e.send2,b=e.find_super,U=e.to_a,F=e.defs,J=e.Kernel,H=e.send,B=e.def,K=e.return_self,k=e.Opal,I=e.rb_lt,V=e.eqeqeq,v=e.rb_plus,x=e.alias,w=[],T=e.nil,o=e.$$$;return function(A,N,L){var S=D(A,N,"Enumerator"),c=[S].concat(L);return function(E,m,f){var h=D(E,m,"Lazy"),R=[h].concat(f),d=e.$r(R),l=h.$$prototype;return l.enumerator=T,D(h,o("Exception"),"StopLazyError"),F(h,"$for",function u(i,n){var t,$,r=u.$$p||T,a=this,s=T;return u.$$p=null,t=X(arguments,1),$=t,s=j(a,b(a,"for",u,!1,!0),"for",[i].concat(U($)),r),s.enumerator=i,s},-2),B(h,"$initialize",function u(i,n){var t=u.$$p||T,$=this;return u.$$p=null,n==null&&(n=T),M($),t===T&&J.$raise(o("ArgumentError"),"tried to call lazy new without a block"),$.enumerator=i,j($,b($,"initialize",u,!1,!0),"initialize",[n],function(a,s){var p,G;a==null&&(a=T),p=X(arguments,1),G=p;try{return H(i,"each",U(G),function(ie){var ne,se;ne=X(arguments),se=ne,se.unshift(a),y(t,se)},-1)}catch(Z){if(e.rescue(Z,[d("StopLazyError")]))try{return T}finally{e.pop_exception()}else throw Z}},-2)},-2),B(h,"$lazy",K),B(h,"$collect",function u(){var i=u.$$p||T,n=this;return u.$$p=null,C(i)||J.$raise(o("ArgumentError"),"tried to call lazy map without a block"),H(d("Lazy"),"new",[n,n.$enumerator_size()],function($,r){var a,s;$==null&&($=T),a=X(arguments,1),s=a;var p=y(i,s);$.$yield(p)},-2)}),B(h,"$collect_concat",function u(){var i=u.$$p||T,n=this;return u.$$p=null,C(i)||J.$raise(o("ArgumentError"),"tried to call lazy map without a block"),H(d("Lazy"),"new",[n,T],function($,r){var a,s;$==null&&($=T),a=X(arguments,1),s=a;var p=y(i,s);if(p["$respond_to?"]("force")&&p["$respond_to?"]("each"))H(p,"each",[],function(ie){return ie==null&&(ie=T),$.$yield(ie)});else{var G=k.$try_convert(p,o("Array"),"to_ary");G===T?$.$yield(p):H(p,"each",[],function(ie){return ie==null&&(ie=T),$.$yield(ie)})}},-2)}),B(h,"$drop",function(i){var n=this,t=T,$=T,r=T;return i=z(i,o("Integer"),"to_int"),C(I(i,0))&&J.$raise(o("ArgumentError"),"attempt to drop negative size"),t=n.$enumerator_size(),$=V(o("Integer"),t)&&C(I(i,t))?i:t,r=0,H(d("Lazy"),"new",[n,$],function(s,p){var G,Z;return s==null&&(s=T),G=X(arguments,1),Z=G,C(I(r,i))?r=v(r,1):H(s,"yield",U(Z))},-2)}),B(h,"$drop_while",function u(){var i=u.$$p||T,n=this,t=T;return u.$$p=null,C(i)||J.$raise(o("ArgumentError"),"tried to call lazy drop_while without a block"),t=!0,H(d("Lazy"),"new",[n,T],function(r,a){var s,p;if(r==null&&(r=T),s=X(arguments,1),p=s,C(t)){var G=y(i,p);C(G)||(t=!1,H(r,"yield",U(p)))}else return H(r,"yield",U(p))},-2)}),B(h,"$enum_for",function u(i,n){var t=u.$$p||T,$,r,a,s=this;return u.$$p=null,$=X(arguments),$.length>0&&(r=$.shift()),r==null&&(r="each"),a=$,H(s.$class(),"for",[s,r].concat(U(a)),t.$to_proc())},-1),B(h,"$find_all",function u(){var i=u.$$p||T,n=this;return u.$$p=null,C(i)||J.$raise(o("ArgumentError"),"tried to call lazy select without a block"),H(d("Lazy"),"new",[n,T],function($,r){var a,s;$==null&&($=T),a=X(arguments,1),s=a;var p=y(i,s);C(p)&&H($,"yield",U(s))},-2)}),B(h,"$grep",function u(i){var n=u.$$p||T,t=this;return u.$$p=null,C(n)?H(d("Lazy"),"new",[t,T],function(r,a){var s,p;r==null&&(r=T),s=X(arguments,1),p=s;var G=k.$destructure(p),Z=i["$==="](G);C(Z)&&(Z=g(n,G),r.$yield(g(n,G)))},-2):H(d("Lazy"),"new",[t,T],function(r,a){var s,p;r==null&&(r=T),s=X(arguments,1),p=s;var G=k.$destructure(p),Z=i["$==="](G);C(Z)&&r.$yield(G)},-2)}),B(h,"$reject",function u(){var i=u.$$p||T,n=this;return u.$$p=null,C(i)||J.$raise(o("ArgumentError"),"tried to call lazy reject without a block"),H(d("Lazy"),"new",[n,T],function($,r){var a,s;$==null&&($=T),a=X(arguments,1),s=a;var p=y(i,s);C(p)||H($,"yield",U(s))},-2)}),B(h,"$take",function(i){var n=this,t=T,$=T,r=T;return i=z(i,o("Integer"),"to_int"),C(I(i,0))&&J.$raise(o("ArgumentError"),"attempt to take negative size"),t=n.$enumerator_size(),$=V(o("Integer"),t)&&C(I(i,t))?i:t,r=0,H(d("Lazy"),"new",[n,$],function(s,p){var G,Z;return s==null&&(s=T),G=X(arguments,1),Z=G,C(I(r,i))?(H(s,"yield",U(Z)),r=v(r,1)):J.$raise(d("StopLazyError"))},-2)}),B(h,"$take_while",function u(){var i=u.$$p||T,n=this;return u.$$p=null,C(i)||J.$raise(o("ArgumentError"),"tried to call lazy take_while without a block"),H(d("Lazy"),"new",[n,T],function($,r){var a,s;$==null&&($=T),a=X(arguments,1),s=a;var p=y(i,s);C(p)?H($,"yield",U(s)):J.$raise(d("StopLazyError"))},-2)}),B(h,"$inspect",function(){var i=this;return"#<"+i.$class()+": "+i.enumerator.$inspect()+">"}),x(h,"force","to_a"),x(h,"filter","find_all"),x(h,"flat_map","collect_concat"),x(h,"map","collect"),x(h,"select","find_all"),x(h,"to_enum","enum_for")}(S,S,c)}("::",null,w)};Opal.modules["corelib/enumerator/yielder"]=function(e){var C=e.klass,z=e.def,g=e.slice,y=e.send,M=e.to_a,D=[],X=e.nil;return function(j,b,U){var F=C(j,b,"Enumerator"),J=[F].concat(U);return function(H,B){var K=C(H,B,"Yielder"),k=K.$$prototype;return k.block=X,z(K,"$initialize",function I(){var V=I.$$p||X,v=this;return I.$$p=null,v.block=V,v}),z(K,"$yield",function(V){var v,x,w=this;v=g(arguments),x=v;var T=e.yieldX(w.block,x);if(T&&T.$thrower_type=="break")throw T;return T},-1),z(K,"$<<",function(V){var v=this;return v.$yield(V),v}),z(K,"$to_proc",function(){var V=this;return y(V,"proc",[],function v(x){var w,T,o=v.$$s==null?this:v.$$s;return w=g(arguments),T=w,y(o,"yield",M(T))},{$$arity:-1,$$s:V})})}(J[0],null)}(D[0],null,D)};Opal.modules["corelib/enumerator"]=function(e){var C=e.slice,z=e.coerce_to,g=e.deny_frozen_access,y=e.klass,M=e.defs,D=e.truthy,X=e.send,j=e.not,b=e.def,U=e.rb_plus,F=e.to_a,J=e.Opal,H=e.send2,B=e.find_super,K=e.rb_ge,k=e.Kernel,I=e.rb_le,V=e.alias,v=e.top,x=[],w=e.nil,T=e.$$$;return v.$require("corelib/enumerable"),function(o,A,N){var L=y(o,A,"Enumerator"),S=[L].concat(N),c=e.$r(S),E=L.$$prototype;return E.size=E.args=E.object=E.method=E.values=E.cursor=w,L.$include(T("Enumerable")),L.$$prototype.$$is_enumerator=!0,M(L,"$for",function m(f,h,R){var d=m.$$p||w,l,u,i,n=this;m.$$p=null,l=C(arguments,1),l.length>0&&(u=l.shift()),u==null&&(u="each"),i=l;var t=n.$allocate();return t.object=f,t.size=d,t.method=u,t.args=i,t.cursor=0,t},-2),b(L,"$initialize",function m(f){var h=m.$$p||w,R,d,l=this;return m.$$p=null,R=C(arguments),d=R,g(l),l.cursor=0,D(h)?(l.object=X(c("Generator"),"new",[],h.$to_proc()),l.method="each",l.args=[],l.size=arguments[0]||w,D(l.size)&&j(l.size["$respond_to?"]("call"))?l.size=z(l.size,T("Integer"),"to_int"):w):(l.object=arguments[0],l.method=arguments[1]||"each",l.args=C(arguments,2),l.size=w)},-1),b(L,"$each",function m(f){var h=m.$$p||w,R,d,l=this;return m.$$p=null,R=C(arguments),d=R,D(h["$nil?"]())&&D(d["$empty?"]())?l:(d=U(l.args,d),D(h["$nil?"]())?X(l.$class(),"new",[l.object,l.method].concat(F(d))):X(l.object,"__send__",[l.method].concat(F(d)),h.$to_proc()))},-1),b(L,"$size",function(){var f=this;return D(f.size["$respond_to?"]("call"))?X(f.size,"call",F(f.args)):f.size}),b(L,"$with_index",function m(f){var h=m.$$p||w,R=this;if(m.$$p=null,f==null&&(f=0),f=D(f)?z(f,T("Integer"),"to_int"):0,!D(h))return X(R,"enum_for",["with_index",f],function u(){var i=u.$$s==null?this:u.$$s;return i.$size()},{$$s:R});var d,l=f;return R.$each.$$p=function(){var u=J.$destructure(arguments),i=h(u,l);return l++,i},R.$each()},-1),b(L,"$each_with_index",function m(){var f=m.$$p||w,h=this;return m.$$p=null,f===w?X(h,"enum_for",["each_with_index"],function R(){var d=R.$$s==null?this:R.$$s;return d.$size()},{$$s:h}):(H(h,B(h,"each_with_index",m,!1,!0),"each_with_index",[],f),h.object)}),b(L,"$rewind",function(){var f=this;return f.cursor=0,f}),b(L,"$peek_values",function(){var f=this,h=w;return f.values=D(h=f.values)?h:X(f,"map",[],function(d){var l,u;return l=C(arguments),u=l,u},-1),D(K(f.cursor,f.values.$length()))&&k.$raise(T("StopIteration"),"iteration reached an end"),f.values["$[]"](f.cursor)}),b(L,"$peek",function(){var f=this,h=w;return h=f.$peek_values(),D(I(h.$length(),1))?h["$[]"](0):h}),b(L,"$next_values",function(){var f=this,h=w;return h=f.$peek_values(),f.cursor=U(f.cursor,1),h}),b(L,"$next",function(){var f=this,h=w;return h=f.$next_values(),D(I(h.$length(),1))?h["$[]"](0):h}),b(L,"$feed",function(f){var h=this;return h.$raise(c("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),b(L,"$+",function(f){var h=this;return T(T("Enumerator"),"Chain").$new(h,f)}),b(L,"$inspect",function(){var f=this,h=w;return h="#<"+f.$class()+": "+f.object.$inspect()+":"+f.method,D(f.args["$any?"]())&&(h=U(h,"("+f.args.$inspect()["$[]"](T("Range").$new(1,-2))+")")),U(h,">")}),V(L,"with_object","each_with_object"),L.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),L.$autoload("Chain","corelib/enumerator/chain"),L.$autoload("Generator","corelib/enumerator/generator"),L.$autoload("Lazy","corelib/enumerator/lazy"),L.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,x)};Opal.modules["corelib/numeric"]=function(e){var C=e.klass,z=e.truthy,g=e.Kernel,y=e.def,M=e.to_ary,D=e.return_self,X=e.rb_minus,j=e.rb_times,b=e.rb_lt,U=e.eqeq,F=e.rb_divide,J=e.return_val,H=e.Opal,B=e.slice,K=e.extract_kwargs,k=e.ensure_kwargs,I=e.not,V=e.send,v=e.rb_ge,x=e.rb_le,w=e.rb_plus,T=e.rb_gt,o=e.alias,A=e.top,N=e.nil,L=e.$$$;return A.$require("corelib/comparable"),function(S,c){var E=C(S,c,"Numeric");return E.$include(L("Comparable")),y(E,"$coerce",function(f){var h=this;return z(f["$instance_of?"](h.$class()))?[f,h]:[g.$Float(f),g.$Float(h)]}),y(E,"$__coerced__",function(f,h){var R,d,l=this,u=N,i=N;if(z(h["$respond_to?"]("coerce")))return d=h.$coerce(l),R=M(d),u=R[0]==null?N:R[0],i=R[1]==null?N:R[1],u.$__send__(f,i);switch(f){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return g.$raise(L("TypeError"),""+h.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return g.$raise(L("ArgumentError"),"comparison of "+l.$class()+" with "+h.$class()+" failed");default:return N}}),y(E,"$<=>",function(f){var h=this;return z(h["$equal?"](f))?0:N}),y(E,"$+@",D),y(E,"$-@",function(){var f=this;return X(0,f)}),y(E,"$%",function(f){var h=this;return X(h,j(f,h.$div(f)))}),y(E,"$abs",function(){var f=this;return b(f,0)?f["$-@"]():f}),y(E,"$abs2",function(){var f=this;return j(f,f)}),y(E,"$angle",function(){var f=this;return b(f,0)?L(L("Math"),"PI"):0}),y(E,"$ceil",function(f){var h=this;return f==null&&(f=0),h.$to_f().$ceil(f)},-1),y(E,"$conj",D),y(E,"$denominator",function(){var f=this;return f.$to_r().$denominator()}),y(E,"$div",function(f){var h=this;return U(f,0)&&g.$raise(L("ZeroDivisionError"),"divided by o"),F(h,f).$floor()}),y(E,"$divmod",function(f){var h=this;return[h.$div(f),h["$%"](f)]}),y(E,"$fdiv",function(f){var h=this;return F(h.$to_f(),f)}),y(E,"$floor",function(f){var h=this;return f==null&&(f=0),h.$to_f().$floor(f)},-1),y(E,"$i",function(){var f=this;return g.$Complex(0,f)}),y(E,"$imag",J(0)),y(E,"$integer?",J(!1)),y(E,"$nonzero?",function(){var f=this;return z(f["$zero?"]())?N:f}),y(E,"$numerator",function(){var f=this;return f.$to_r().$numerator()}),y(E,"$polar",function(){var f=this;return[f.$abs(),f.$arg()]}),y(E,"$quo",function(f){var h=this;return F(H["$coerce_to!"](h,L("Rational"),"to_r"),f)}),y(E,"$real",D),y(E,"$real?",J(!0)),y(E,"$rect",function(){var f=this;return[f,0]}),y(E,"$round",function(f){var h=this;return h.$to_f().$round(f)},-1),y(E,"$step",function m(f,h,R){var d=m.$$p||N,l,u,i,n,t,$,r=this,a=N;m.$$p=null,l=B(arguments),u=K(l),u=k(u),l.length>0&&(i=l.shift()),l.length>0&&(n=l.shift()),t=u.$$smap.to,$=u.$$smap.by,i!==void 0&&t!==void 0&&g.$raise(L("ArgumentError"),"to is given twice"),n!==void 0&&$!==void 0&&g.$raise(L("ArgumentError"),"step is given twice"),t!==void 0&&(i=t),$!==void 0&&(n=$),i===void 0&&(i=N);function s(){n===N&&g.$raise(L("TypeError"),"step must be numeric"),n!=null&&n["$=="](0)&&g.$raise(L("ArgumentError"),"step can't be 0"),(n===N||n==null)&&(n=1);var te=n["$<=>"](0);te===N&&g.$raise(L("ArgumentError"),"0 can't be coerced into "+n.$class()),(i===N||i==null)&&(i=te>0?L(L("Float"),"INFINITY"):L(L("Float"),"INFINITY")["$-@"]()),H.$compare(r,i)}function p(){if(n>0&&r>i||n<0&&r<i)return 0;if(n===1/0||n===-1/0)return 1;var te=Math.abs,$e=Math.floor,re=(te(r)+te(i)+te(i-r))/te(n)*L(L("Float"),"EPSILON");return re===1/0||re===-1/0?0:(re>.5&&(re=.5),$e((i-r)/n+re)+1)}function G(){if(s(),n===0)return 1/0;if(n%1!==0)return p();if(n>0&&r>i||n<0&&r<i)return 0;var te=Math.ceil,$e=Math.abs,re=$e(r-i)+1,P=$e(n);return te(re/P)}if(d===N)return(I(i)||z(i["$is_a?"](L("Numeric"))))&&(I(n)||z(n["$is_a?"](L("Numeric"))))?L(L("Enumerator"),"ArithmeticSequence").$new([i,n,z(t)?"to: ":N,z($)?"by: ":N],r):V(r,"enum_for",["step",i,n],G.$to_proc());s();var Z=n["$negative?"](),ie=n["$=="](0)||i===1/0&&!Z||i===-1/0&&Z;if(r.$$is_number&&n.$$is_number&&i.$$is_number)if(r%1===0&&(ie||i%1===0)&&n%1===0){var ne=r;if(ie)for(;;ne+=n)d(ne);else if(Z)for(;ne>=i;ne+=n)d(ne);else for(;ne<=i;ne+=n)d(ne);return r}else{var se=r.$to_f().valueOf();n=n.$to_f().valueOf(),i=i.$to_f().valueOf();var O=p();if(!isFinite(n))O!==0&&d(se);else if(n===0)for(;;)d(se);else for(var oe=0;oe<O;oe++){var ue=oe*n+r;(n>=0?i<ue:i>ue)&&(ue=i),d(ue)}return r}for(a=r;z(Z?v(a,i):x(a,i));)e.yield1(d,a),a=w(a,n)},-1),y(E,"$to_c",function(){var f=this;return g.$Complex(f,0)}),y(E,"$to_int",function(){var f=this;return f.$to_i()}),y(E,"$truncate",function(f){var h=this;return f==null&&(f=0),h.$to_f().$truncate(f)},-1),y(E,"$zero?",function(){var f=this;return f["$=="](0)}),y(E,"$positive?",function(){var f=this;return T(f,0)}),y(E,"$negative?",function(){var f=this;return b(f,0)}),y(E,"$dup",D),y(E,"$clone",function(f){var h,R=this;return f=k(f),h=f.$$smap.freeze,h==null&&(h=!0),R},-1),y(E,"$finite?",J(!0)),y(E,"$infinite?",J(N)),o(E,"arg","angle"),o(E,"conjugate","conj"),o(E,"imaginary","imag"),o(E,"magnitude","abs"),o(E,"modulo","%"),o(E,"phase","arg"),o(E,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var C=e.truthy,z=e.falsy,g=e.hash_ids,y=e.yield1,M=e.hash_get,D=e.hash_put,X=e.hash_delete,j=e.coerce_to,b=e.respond_to,U=e.deny_frozen_access,F=e.freeze,J=e.klass,H=e.slice,B=e.defs,K=e.Kernel,k=e.def,I=e.Opal,V=e.eqeqeq,v=e.hash2,x=e.send2,w=e.find_super,T=e.send,o=e.rb_gt,A=e.rb_times,N=e.eqeq,L=e.rb_minus,S=e.to_a,c=e.to_ary,E=e.gvars,m=e.rb_ge,f=e.assign_ivar,h=e.rb_lt,R=e.return_self,d=e.neqeq,l=e.alias,u=e.top,i=[],n=e.nil,t=e.$$$;return u.$require("corelib/enumerable"),u.$require("corelib/numeric"),function($,r,a){var s=J($,r,"Array"),p=[s].concat(a),G=e.$r(p);s.$include(t("Enumerable")),e.prop(s.$$prototype,"$$is_array",!0);function Z(re){for(var P=re[0],W=1,ee=re.length;W<ee;W++)re[W-1]=re[W];return re.pop(),P}function ie(re,P){return P.$$name===e.Array?re:P.$allocate().$replace(re.$to_a())}function ne(re,P,W){for(var ee,_=null,q=new Array(re.length),Y=0,Q=0,ae=re.length;Y<ae;Y++){if(!_)try{ee=y(W,re[Y])}catch(le){_=le}(_||P(ee))&&(q[Q]=re[Y],Q+=1)}if(Q!==Y&&(re.splice.apply(re,[0,q.length].concat(q)),re.splice(Q,q.length)),_)throw _}B(s,"$[]",function(P){var W,ee,_=this;return W=H(arguments),ee=W,ie(ee,_)},-1),k(s,"$initialize",function re(P,W){var ee=re.$$p||n,_=this;if(re.$$p=null,P==null&&(P=n),W==null&&(W=n),U(_),W!==n&&ee!==n&&K.$warn("warning: block supersedes default value argument"),P>t(t("Integer"),"MAX")&&K.$raise(t("ArgumentError"),"array size too big"),arguments.length>2&&K.$raise(t("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return _.splice(0,_.length),_;if(arguments.length===1){if(P.$$is_array)return _.$replace(P.$to_a()),_;if(P["$respond_to?"]("to_ary"))return _.$replace(P.$to_ary()),_}P=j(P,t("Integer"),"to_int"),P<0&&K.$raise(t("ArgumentError"),"negative array size"),_.splice(0,_.length);var q,Y;if(ee===n)for(q=0;q<P;q++)_.push(W);else for(q=0,Y;q<P;q++)Y=ee(q),_[q]=Y;return _},-1),B(s,"$try_convert",function(P){return I["$coerce_to?"](P,t("Array"),"to_ary")}),k(s,"$&",function(P){var W=this;P=V(t("Array"),P)?P.$to_a():j(P,t("Array"),"to_ary").$to_a();var ee=[],_=v([],{}),q,Y,Q;for(q=0,Y=P.length;q<Y;q++)D(_,P[q],!0);for(q=0,Y=W.length;q<Y;q++)Q=W[q],X(_,Q)!==void 0&&ee.push(Q);return ee}),k(s,"$|",function(P){var W=this;P=V(t("Array"),P)?P.$to_a():j(P,t("Array"),"to_ary").$to_a();var ee=v([],{}),_,q,Y;for(_=0,q=W.length;_<q;_++)D(ee,W[_],!0);for(_=0,q=P.length;_<q;_++)D(ee,P[_],!0);return ee.$keys()}),k(s,"$*",function(P){var W=this;if(C(P["$respond_to?"]("to_str")))return W.$join(P.$to_str());P=j(P,t("Integer"),"to_int"),C(P<0)&&K.$raise(t("ArgumentError"),"negative argument");for(var ee=[],_=W.$to_a(),q=0;q<P;q++)ee=ee.concat(_);return ee}),k(s,"$+",function(P){var W=this;return P=V(t("Array"),P)?P.$to_a():j(P,t("Array"),"to_ary").$to_a(),W.concat(P)}),k(s,"$-",function(P){var W=this;if(P=V(t("Array"),P)?P.$to_a():j(P,t("Array"),"to_ary").$to_a(),C(W.length===0))return[];if(C(P.length===0))return W.slice();var ee=[],_=v([],{}),q,Y,Q;for(q=0,Y=P.length;q<Y;q++)D(_,P[q],!0);for(q=0,Y=W.length;q<Y;q++)Q=W[q],M(_,Q)===void 0&&ee.push(Q);return ee}),k(s,"$<<",function(P){var W=this;return U(W),W.push(P),W}),k(s,"$<=>",function(P){var W=this;if(V(t("Array"),P))P=P.$to_a();else if(C(P["$respond_to?"]("to_ary")))P=P.$to_ary().$to_a();else return n;if(W.$hash()===P.$hash())return 0;for(var ee=Math.min(W.length,P.length),_=0;_<ee;_++){var q=W[_]["$<=>"](P[_]);if(q!==0)return q}return W.length["$<=>"](P.length)}),k(s,"$==",function(P){var W=this,ee={};function _(q,Y){var Q,ae,le,ce;if(q===Y)return!0;if(!Y.$$is_array)return b(Y,"$to_ary")?Y["$=="](q):!1;if(q.$$constructor!==Array&&(q=q.$to_a()),Y.$$constructor!==Array&&(Y=Y.$to_a()),q.length!==Y.length)return!1;for(ee[q.$object_id()]=!0,Q=0,ae=q.length;Q<ae;Q++)if(le=q[Q],ce=Y[Q],le.$$is_array){if(ce.$$is_array&&ce.length!==le.length||!ee.hasOwnProperty(le.$object_id())&&!_(le,ce))return!1}else if(!le["$=="](ce))return!1;return!0}return _(W,P)});function se(re,P){var W=re.length,ee,_,q,Y;return ee=P.excl,_=P.begin===n?0:j(P.begin,e.Integer,"to_int"),q=P.end===n?-1:j(P.end,e.Integer,"to_int"),_<0&&(_+=W,_<0)||(P.excl_rev&&P.begin!==n&&(_+=1),_>W)?n:q<0&&(q+=W,q<0)?[]:((!ee||P.end===n)&&(q+=1),Y=re.slice(_,q),Y)}function O(re,P){var W,ee=[],_=0,q;for(P.step<0?(q={begin:P.range.end,end:P.range.begin,excl:!1,excl_rev:P.range.excl},W=se(re,q).$reverse()):W=se(re,P.range);_<W.length;)ee.push(W[_]),_+=Math.abs(P.step);return ee}function oe(re,P,W){var ee=re.length,_,q,Y,Q;return P=j(P,e.Integer,"to_int"),P<0&&(P+=ee,P<0)?n:W===void 0?P>=ee||P<0?n:re[P]:(W=j(W,e.Integer,"to_int"),W<0||P>ee||P<0?n:(Q=re.slice(P,P+W),Q))}k(s,"$[]",function(P,W){var ee=this;return P.$$is_range?se(ee,P):P.$$is_arithmetic_seq?O(ee,P):oe(ee,P,W)},-2),k(s,"$[]=",function(P,W,ee){var _=this,q=n,Y=n;U(_),q=n;var Q,ae=_.length;if(P.$$is_range){W.$$is_array?q=W.$to_a():W["$respond_to?"]("to_ary")?q=W.$to_ary().$to_a():q=[W];var le=P.excl,ce=P.begin===n?0:j(P.begin,e.Integer,"to_int"),_e=P.end===n?-1:j(P.end,e.Integer,"to_int");if(ce<0&&(ce+=ae,ce<0&&K.$raise(t("RangeError"),""+P.$inspect()+" out of range")),_e<0&&(_e+=ae),(!le||P.end===n)&&(_e+=1),ce>ae)for(Q=ae;Q<ce;Q++)_[Q]=n;return _e<0?_.splice.apply(_,[ce,0].concat(q)):_.splice.apply(_,[ce,_e-ce].concat(q)),W}else{ee===void 0?Y=1:(Y=W,W=ee,W.$$is_array?q=W.$to_a():W["$respond_to?"]("to_ary")?q=W.$to_ary().$to_a():q=[W]);var fe;if(P=j(P,t("Integer"),"to_int"),Y=j(Y,t("Integer"),"to_int"),P<0&&(fe=P,P+=ae,P<0&&K.$raise(t("IndexError"),"index "+fe+" too small for array; minimum "+-_.length)),Y<0&&K.$raise(t("IndexError"),"negative length ("+Y+")"),P>ae)for(Q=ae;Q<P;Q++)_[Q]=n;return ee===void 0?_[P]=W:_.splice.apply(_,[P,Y].concat(q)),W}},-3),k(s,"$any?",function re(P){var W=re.$$p||n,ee=this;return re.$$p=null,ee.length===0?!1:x(ee,w(ee,"any?",re,!1,!0),"any?",[P],W)},-1),k(s,"$assoc",function(P){for(var W=this,ee=0,_=W.length,q;ee<_;ee++)if(q=W[ee],q.length&&q[0]["$=="](P))return q;return n}),k(s,"$at",function(P){var W=this;return P=j(P,t("Integer"),"to_int"),P<0&&(P+=W.length),P<0||P>=W.length?n:W[P]}),k(s,"$bsearch_index",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return W.$enum_for("bsearch_index");for(var ee=0,_=W.length,q,Y,Q,ae=!1,le=n;ee<_;){if(q=ee+Math.floor((_-ee)/2),Y=W[q],Q=y(P,Y),Q===!0)le=q,ae=!0;else if(Q===!1||Q===n)ae=!1;else if(Q.$$is_number){if(Q===0)return q;ae=Q<0}else K.$raise(t("TypeError"),"wrong argument type "+Q.$class()+" (must be numeric, true, false or nil)");ae?_=q:ee=q+1}return le}),k(s,"$bsearch",function re(){var P=re.$$p||n,W=this,ee=n;return re.$$p=null,P===n?W.$enum_for("bsearch"):(ee=T(W,"bsearch_index",[],P.$to_proc()),ee!=null&&ee.$$is_number?W[ee]:ee)}),k(s,"$cycle",function re(P){var W=re.$$p||n,ee=this;if(re.$$p=null,P==null&&(P=n),W===n)return T(ee,"enum_for",["cycle",P],function Q(){var ae=Q.$$s==null?this:Q.$$s;return C(P["$nil?"]())?t(t("Float"),"INFINITY"):(P=I["$coerce_to!"](P,t("Integer"),"to_int"),C(o(P,0))?A(ae.$enumerator_size(),P):0)},{$$s:ee});if(C(ee["$empty?"]())||N(P,0))return n;var _,q,Y;if(P===n)for(;;)for(_=0,q=ee.length;_<q;_++)Y=y(W,ee[_]);else{if(P=I["$coerce_to!"](P,t("Integer"),"to_int"),P<=0)return ee;for(;P>0;){for(_=0,q=ee.length;_<q;_++)Y=y(W,ee[_]);P--}}return ee},-1),k(s,"$clear",function(){var P=this;return U(P),P.splice(0,P.length),P}),k(s,"$count",function re(P){var W=re.$$p||n,ee=this;return re.$$p=null,C(P!==void 0)||C(W)?x(ee,w(ee,"count",re,!1,!0),"count",[P],W):ee.$size()},-1),k(s,"$initialize_copy",function(P){var W=this;return W.$replace(P)}),k(s,"$collect",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return T(W,"enum_for",["collect"],function Q(){var ae=Q.$$s==null?this:Q.$$s;return ae.$size()},{$$s:W});for(var ee=[],_=0,q=W.length;_<q;_++){var Y=y(P,W[_]);ee.push(Y)}return ee}),k(s,"$collect!",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return T(W,"enum_for",["collect!"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:W});U(W);for(var ee=0,_=W.length;ee<_;ee++){var q=y(P,W[ee]);W[ee]=q}return W});function ue(re,P){return re===P||P===0?1:P>0&&re>P?ue(re-1,P-1)+ue(re-1,P):0}k(s,"$combination",function re(P){var W=re.$$p||n,ee=this,_=n;if(re.$$p=null,_=I["$coerce_to!"](P,t("Integer"),"to_int"),W===n)return T(ee,"enum_for",["combination",_],function fe(){var de=fe.$$s==null?this:fe.$$s;return ue(de.length,_)},{$$s:ee});var q,Y,Q,ae,le,ce,_e;if(_===0)e.yield1(W,[]);else if(_===1)for(q=0,Y=ee.length;q<Y;q++)e.yield1(W,[ee[q]]);else if(_===ee.length)e.yield1(W,ee.slice());else if(_>=0&&_<ee.length){for(Q=[],q=0;q<=_+1;q++)Q.push(0);for(ae=[],le=0,ce=!1,Q[0]=-1;!ce;){for(ae[le]=ee[Q[le+1]];le<_-1;)le++,_e=Q[le+1]=Q[le]+1,ae[le]=ee[_e];e.yield1(W,ae.slice()),le++;do ce=le===0,Q[le]++,le--;while(Q[le+1]+_===ee.length+le+1)}}return ee}),k(s,"$repeated_combination",function re(P){var W=re.$$p||n,ee=this,_=n;if(re.$$p=null,_=I["$coerce_to!"](P,t("Integer"),"to_int"),W===n)return T(ee,"enum_for",["repeated_combination",_],function Y(){var Q=Y.$$s==null?this:Y.$$s;return ue(Q.length+_-1,_)},{$$s:ee});function q(Y,Q,ae,le){if(ae.length==Y){var ce=ae.slice();e.yield1(W,ce);return}for(var _e=Q;_e<le.length;_e++)ae.push(le[_e]),q(Y,_e,ae,le),ae.pop()}return _>=0&&q(_,0,[],ee),ee}),k(s,"$compact",function(){for(var P=this,W=[],ee=0,_=P.length,q;ee<_;ee++)(q=P[ee])!==n&&W.push(q);return W}),k(s,"$compact!",function(){var P=this;U(P);for(var W=P.length,ee=0,_=P.length;ee<_;ee++)P[ee]===n&&(P.splice(ee,1),_--,ee--);return P.length===W?n:P}),k(s,"$concat",function(P){var W,ee,_=this;return W=H(arguments),ee=W,U(_),ee=T(ee,"map",[],function q(Y){var Q=q.$$s==null?this:q.$$s;return Y==null&&(Y=n),Y=V(t("Array"),Y)?Y.$to_a():j(Y,t("Array"),"to_ary").$to_a(),C(Y["$equal?"](Q))&&(Y=Y.$dup()),Y},{$$s:_}),T(ee,"each",[],function q(Y){var Q=q.$$s==null?this:q.$$s;Y==null&&(Y=n);for(var ae=0,le=Y.length;ae<le;ae++)Q.push(Y[ae])},{$$s:_}),_},-1),k(s,"$delete",function re(P){var W=re.$$p||n,ee=this;re.$$p=null;for(var _=ee.length,q=0,Y=_;q<Y;q++)ee[q]["$=="](P)&&(U(ee),ee.splice(q,1),Y--,q--);return ee.length===_?W!==n?e.yieldX(W,[]):n:P}),k(s,"$delete_at",function(P){var W=this;if(U(W),P=j(P,t("Integer"),"to_int"),P<0&&(P+=W.length),P<0||P>=W.length)return n;var ee=W[P];return W.splice(P,1),ee}),k(s,"$delete_if",function re(){var P=re.$$p||n,W=this;return re.$$p=null,P===n?T(W,"enum_for",["delete_if"],function ee(){var _=ee.$$s==null?this:ee.$$s;return _.$size()},{$$s:W}):(U(W),ne(W,z,P),W)}),k(s,"$difference",function(P){var W,ee,_=this;return W=H(arguments),ee=W,T(ee,"reduce",[_.$to_a().$dup()],function(Y,Q){return Y==null&&(Y=n),Q==null&&(Q=n),L(Y,Q)})},-1),k(s,"$dig",function(P,W){var ee,_,q=this,Y=n;return ee=H(arguments,1),_=ee,Y=q["$[]"](P),Y===n||_.length===0?Y:(C(Y["$respond_to?"]("dig"))||K.$raise(t("TypeError"),""+Y.$class()+" does not have #dig method"),T(Y,"dig",S(_)))},-2),k(s,"$drop",function(P){var W=this;return P=j(P,t("Integer"),"to_int"),P<0&&K.$raise(t("ArgumentError")),W.slice(P)}),k(s,"$dup",function re(){var P=re.$$p||n,W=this;return re.$$p=null,W.$$class===e.Array&&W.$$class.$allocate.$$pristine&&W.$copy_instance_variables.$$pristine&&W.$initialize_dup.$$pristine?W.slice(0):x(W,w(W,"dup",re,!1,!0),"dup",[],P)}),k(s,"$each",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return T(W,"enum_for",["each"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:W});for(var ee=0,_=W.length;ee<_;ee++)var q=y(P,W[ee]);return W}),k(s,"$each_index",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return T(W,"enum_for",["each_index"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:W});for(var ee=0,_=W.length;ee<_;ee++)var q=y(P,ee);return W}),k(s,"$empty?",function(){var P=this;return P.length===0}),k(s,"$eql?",function(P){var W=this,ee={};function _(q,Y){var Q,ae,le,ce;if(!Y.$$is_array||(Y=Y.$to_a(),q.length!==Y.length))return!1;for(ee[q.$object_id()]=!0,Q=0,ae=q.length;Q<ae;Q++)if(le=q[Q],ce=Y[Q],le.$$is_array){if(ce.$$is_array&&ce.length!==le.length||!ee.hasOwnProperty(le.$object_id())&&!_(le,ce))return!1}else if(!le["$eql?"](ce))return!1;return!0}return _(W,P)}),k(s,"$fetch",function re(P,W){var ee=re.$$p||n,_=this;re.$$p=null;var q=P;if(P=j(P,t("Integer"),"to_int"),P<0&&(P+=_.length),P>=0&&P<_.length)return _[P];if(ee!==n&&W!=null&&_.$warn("warning: block supersedes default value argument"),ee!==n)return ee(q);if(W!=null)return W;_.length===0?K.$raise(t("IndexError"),"index "+q+" outside of array bounds: 0...0"):K.$raise(t("IndexError"),"index "+q+" outside of array bounds: -"+_.length+"..."+_.length)},-2),k(s,"$fill",function re(P){var W=re.$$p||n,ee,_,q,Y,Q=this,ae=n,le=n,ce=n,_e=n,fe=n;re.$$p=null,ee=H(arguments),_=ee,U(Q);var de,he,me;if(C(W)?(C(_.length>2)&&K.$raise(t("ArgumentError"),"wrong number of arguments ("+_.$length()+" for 0..2)"),Y=_,q=c(Y),ae=q[0]==null?n:q[0],le=q[1]==null?n:q[1]):(C(_.length==0)?K.$raise(t("ArgumentError"),"wrong number of arguments (0 for 1..3)"):C(_.length>3)&&K.$raise(t("ArgumentError"),"wrong number of arguments ("+_.$length()+" for 1..3)"),Y=_,q=c(Y),ce=q[0]==null?n:q[0],ae=q[1]==null?n:q[1],le=q[2]==null?n:q[2]),V(t("Range"),ae)){if(C(le)&&K.$raise(t("TypeError"),"length invalid with range"),_e=ae.begin===n?0:j(ae.begin,t("Integer"),"to_int"),C(_e<0)&&(_e+=this.length),C(_e<0)&&K.$raise(t("RangeError"),""+ae.$inspect()+" out of range"),fe=ae.end===n?-1:j(ae.end,t("Integer"),"to_int"),C(fe<0)&&(fe+=this.length),C(ae["$exclude_end?"]())||(fe+=1),C(fe<=_e))return Q}else if(C(ae))if(_e=j(ae,t("Integer"),"to_int"),C(_e<0)&&(_e+=this.length),C(_e<0)&&(_e=0),C(le)){if(fe=j(le,t("Integer"),"to_int"),C(fe==0))return Q;fe+=_e}else fe=this.length;else _e=0,fe=this.length;if(C(_e>this.length))for(de=this.length;de<fe;de++)Q[de]=n;if(C(fe>this.length)&&(this.length=fe),C(W))for(he=this.length;_e<fe;_e++)me=W(_e),Q[_e]=me;else for(he=this.length;_e<fe;_e++)Q[_e]=ce;return Q},-1),k(s,"$first",function(P){var W=this;return P==null?W.length===0?n:W[0]:(P=j(P,t("Integer"),"to_int"),P<0&&K.$raise(t("ArgumentError"),"negative array size"),W.slice(0,P))},-1),k(s,"$flatten",function(P){var W=this;function ee(_,q){var Y=[],Q,ae,le,ce;for(_=_.$to_a(),Q=0,ae=_.length;Q<ae;Q++){if(le=_[Q],!b(le,"$to_ary",!0)){Y.push(le);continue}if(ce=le.$to_ary(),ce===n){Y.push(le);continue}switch(ce.$$is_array||K.$raise(t("TypeError")),ce===W&&K.$raise(t("ArgumentError")),q){case void 0:Y=Y.concat(ee(ce));break;case 0:Y.push(ce);break;default:Y.push.apply(Y,ee(ce,q-1))}}return Y}return P!==void 0&&(P=j(P,t("Integer"),"to_int")),ee(W,P)},-1),k(s,"$flatten!",function(P){var W=this;U(W);var ee=W.$flatten(P);if(W.length==ee.length){for(var _=0,q=W.length;_<q&&W[_]===ee[_];_++);if(_==q)return n}return W.$replace(ee),W},-1),k(s,"$freeze",function(){var P=this;return C(P["$frozen?"]())?P:F(P)}),k(s,"$hash",function(){var P=this,W=g===void 0,ee=["A"],_=P.$object_id(),q,Y,Q;try{if(W&&(g=Object.create(null)),g[_])return"self";for(Q in g)if(q=g[Q],P["$eql?"](q))return"self";for(g[_]=P,Y=0;Y<P.length;Y++)q=P[Y],ee.push(q.$hash());return ee.join(",")}finally{W&&(g=void 0)}}),k(s,"$include?",function(P){for(var W=this,ee=0,_=W.length;ee<_;ee++)if(W[ee]["$=="](P))return!0;return!1}),k(s,"$index",function re(P){var W=re.$$p||n,ee=this;re.$$p=null;var _,q,Y;if(P!=null&&W!==n&&ee.$warn("warning: given block not used"),P!=null){for(_=0,q=ee.length;_<q;_++)if(ee[_]["$=="](P))return _}else if(W!==n){for(_=0,q=ee.length;_<q;_++)if(Y=W(ee[_]),Y!==!1&&Y!==n)return _}else return ee.$enum_for("index");return n},-1),k(s,"$insert",function(P,W){var ee,_,q=this;if(ee=H(arguments,1),_=ee,U(q),P=j(P,t("Integer"),"to_int"),_.length>0){if(P<0&&(P+=q.length+1,P<0&&K.$raise(t("IndexError"),""+P+" is out of bounds")),P>q.length)for(var Y=q.length;Y<P;Y++)q.push(n);q.splice.apply(q,[P,0].concat(_))}return q},-2);var te=[];k(s,"$inspect",function(){var P=this,W=[],ee=P.$__id__(),_=!0;return function(){try{if(te.indexOf(ee)!==-1)return _=!1,"[...]";te.push(ee);for(var q=0,Y=P.length;q<Y;q++){var Q=P["$[]"](q);W.push(G("Opal").$inspect(Q))}return"["+W.join(", ")+"]"}finally{_&&te.pop()}}()}),k(s,"$intersection",function(P){var W,ee,_=this;return W=H(arguments),ee=W,T(ee,"reduce",[_.$to_a().$dup()],function(Y,Q){return Y==null&&(Y=n),Q==null&&(Q=n),Y["$&"](Q)})},-1),k(s,"$intersect?",function(P){var W=this;return W.$intersection(P)["$empty?"]()["$!"]()}),k(s,"$join",function(P){var W=this;if(E[","]==null&&(E[","]=n),P==null&&(P=n),C(W.length===0))return"";C(P===n)&&(P=E[","]);var ee=[],_,q,Y,Q;for(_=0,q=W.length;_<q;_++){if(Y=W[_],b(Y,"$to_str")&&(Q=Y.$to_str(),Q!==n)){ee.push(Q.$to_s());continue}if(b(Y,"$to_ary")&&(Q=Y.$to_ary(),Q===W&&K.$raise(t("ArgumentError")),Q!==n)){ee.push(Q.$join(P));continue}if(b(Y,"$to_s")&&(Q=Y.$to_s(),Q!==n)){ee.push(Q);continue}K.$raise(t("NoMethodError").$new(""+G("Opal").$inspect(W.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return P===n?ee.join(""):ee.join(I["$coerce_to!"](P,t("String"),"to_str").$to_s())},-1),k(s,"$keep_if",function re(){var P=re.$$p||n,W=this;return re.$$p=null,P===n?T(W,"enum_for",["keep_if"],function ee(){var _=ee.$$s==null?this:ee.$$s;return _.$size()},{$$s:W}):(U(W),ne(W,C,P),W)}),k(s,"$last",function(P){var W=this;return P==null?W.length===0?n:W[W.length-1]:(P=j(P,t("Integer"),"to_int"),P<0&&K.$raise(t("ArgumentError"),"negative array size"),P>W.length&&(P=W.length),W.slice(W.length-P,W.length))},-1),k(s,"$length",function(){var P=this;return P.length}),k(s,"$max",function re(P){var W=re.$$p||n,ee=this;return re.$$p=null,T(ee.$each(),"max",[P],W.$to_proc())},-1),k(s,"$min",function re(){var P=re.$$p||n,W=this;return re.$$p=null,T(W.$each(),"min",[],P.$to_proc())});function $e(re,P){for(var W=P>=0?1:0;P;)W*=re,re--,P--;return W}return k(s,"$permutation",function re(P){var W=re.$$p||n,ee=this,_=n,q=n;if(re.$$p=null,W===n)return T(ee,"enum_for",["permutation",P],function ce(){var _e=ce.$$s==null?this:ce.$$s;return $e(_e.length,P===void 0?_e.length:P)},{$$s:ee});var Y,Q,ae;if(P===void 0?P=ee.length:P=j(P,t("Integer"),"to_int"),!(P<0||ee.length<P))if(P===0)e.yield1(W,[]);else if(P===1)for(var le=0;le<ee.length;le++)e.yield1(W,[ee[le]]);else _=G("Array").$new(P),q=G("Array").$new(ee.length,!1),Y=function(ce,_e,fe,de,he){ee=this;for(var me=0;me<ee.length;me++)if(de["$[]"](me)["$!"]())if(_e[fe]=me,fe<ce-1)de[me]=!0,Y.call(ee,ce,_e,fe+1,de,he),de[me]=!1;else{ae=[];for(var ge=0;ge<_e.length;ge++)ae.push(ee[_e[ge]]);y(he,ae)}},W!==n?(Q=ee.slice(),Y.call(Q,P,_,0,q,W)):Y.call(ee,P,_,0,q,W);return ee},-1),k(s,"$repeated_permutation",function re(P){var W=re.$$p||n,ee=this,_=n;if(re.$$p=null,_=I["$coerce_to!"](P,t("Integer"),"to_int"),W===n)return T(ee,"enum_for",["repeated_permutation",_],function Y(){var Q=Y.$$s==null?this:Y.$$s;return C(m(_,0))?Q.$size()["$**"](_):0},{$$s:ee});function q(Y,Q,ae){if(Q.length==Y){var le=Q.slice();e.yield1(W,le);return}for(var ce=0;ce<ae.length;ce++)Q.push(ae[ce]),q(Y,Q,ae),Q.pop()}return q(_,[],ee.slice()),ee}),k(s,"$pop",function(P){var W=this;return U(W),C(P===void 0)?C(W.length===0)?n:W.pop():(P=j(P,t("Integer"),"to_int"),C(P<0)&&K.$raise(t("ArgumentError"),"negative array size"),C(W.length===0)?[]:C(P===1)?[W.pop()]:C(P>W.length)?W.splice(0,W.length):W.splice(W.length-P,W.length))},-1),k(s,"$product",function re(P){var W=re.$$p||n,ee,_,q=this;re.$$p=null,ee=H(arguments),_=ee;var Y=W!==n?null:[],Q=_.length+1,ae=new Array(Q),le=new Array(Q),ce=new Array(Q),_e,fe,de,he,me=1;for(ce[0]=q,_e=1;_e<Q;_e++)ce[_e]=j(_[_e-1],t("Array"),"to_ary");for(_e=0;_e<Q;_e++){if(he=ce[_e].length,he===0)return Y||q;me*=he,me>2147483647&&K.$raise(t("RangeError"),"too big to product"),le[_e]=he,ae[_e]=0}e:for(;;){for(de=[],_e=0;_e<Q;_e++)de.push(ce[_e][ae[_e]]);for(Y?Y.push(de):e.yield1(W,de),fe=Q-1,ae[fe]++;ae[fe]===le[fe];){if(ae[fe]=0,--fe<0)break e;ae[fe]++}}return Y||q},-1),k(s,"$push",function(P){var W,ee,_=this;W=H(arguments),ee=W,U(_);for(var q=0,Y=ee.length;q<Y;q++)_.push(ee[q]);return _},-1),k(s,"$rassoc",function(P){for(var W=this,ee=0,_=W.length,q;ee<_;ee++)if(q=W[ee],q.length&&q[1]!==void 0&&q[1]["$=="](P))return q;return n}),k(s,"$reject",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return T(W,"enum_for",["reject"],function Q(){var ae=Q.$$s==null?this:Q.$$s;return ae.$size()},{$$s:W});for(var ee=[],_=0,q=W.length,Y;_<q;_++)Y=P(W[_]),(Y===!1||Y===n)&&ee.push(W[_]);return ee}),k(s,"$reject!",function re(){var P=re.$$p||n,W=this,ee=n;return re.$$p=null,P===n?T(W,"enum_for",["reject!"],function _(){var q=_.$$s==null?this:_.$$s;return q.$size()},{$$s:W}):(U(W),ee=W.$length(),T(W,"delete_if",[],P.$to_proc()),N(W.$length(),ee)?n:W)}),k(s,"$replace",function(P){var W=this;return U(W),P=V(t("Array"),P)?P.$to_a():j(P,t("Array"),"to_ary").$to_a(),W.splice(0,W.length),W.push.apply(W,P),W}),k(s,"$reverse",function(){var P=this;return P.slice(0).reverse()}),k(s,"$reverse!",function(){var P=this;return U(P),P.reverse()}),k(s,"$reverse_each",function re(){var P=re.$$p||n,W=this;return re.$$p=null,P===n?T(W,"enum_for",["reverse_each"],function ee(){var _=ee.$$s==null?this:ee.$$s;return _.$size()},{$$s:W}):(T(W.$reverse(),"each",[],P.$to_proc()),W)}),k(s,"$rindex",function re(P){var W=re.$$p||n,ee=this;re.$$p=null;var _,q;if(P!=null&&W!==n&&ee.$warn("warning: given block not used"),P!=null){for(_=ee.length-1;_>=0&&!(_>=ee.length);_--)if(ee[_]["$=="](P))return _}else if(W!==n){for(_=ee.length-1;_>=0&&!(_>=ee.length);_--)if(q=W(ee[_]),q!==!1&&q!==n)return _}else if(P==null)return ee.$enum_for("rindex");return n},-1),k(s,"$rotate",function(P){var W=this;P==null&&(P=1);var ee,_,q,Y;return P=j(P,t("Integer"),"to_int"),W.length===1?W.slice():W.length===0?[]:(ee=W.slice(),_=P%ee.length,q=ee.slice(_),Y=ee.slice(0,_),q.concat(Y))},-1),k(s,"$rotate!",function(P){var W=this,ee=n;return P==null&&(P=1),U(W),W.length===0||W.length===1?W:(P=j(P,t("Integer"),"to_int"),ee=W.$rotate(P),W.$replace(ee))},-1),function(re,P){var W=J(re,P,"SampleRandom"),ee=W.$$prototype;return ee.rng=n,k(W,"$initialize",f("rng")),k(W,"$rand",function(q){var Y=this,Q=n;return Q=j(Y.rng.$rand(q),t("Integer"),"to_int"),C(Q<0)&&K.$raise(t("RangeError"),"random value must be >= 0"),C(Q<q)||K.$raise(t("RangeError"),"random value must be less than Array size"),Q})}(s,null),k(s,"$sample",function(P,W){var ee=this,_=n,q=n;if(C(P===void 0))return ee.$at(K.$rand(ee.length));if(C(W===void 0)?C(_=I["$coerce_to?"](P,t("Hash"),"to_hash"))?(W=_,P=n):(W=n,P=j(P,t("Integer"),"to_int")):(P=j(P,t("Integer"),"to_int"),W=j(W,t("Hash"),"to_hash")),C(P)&&C(P<0)&&K.$raise(t("ArgumentError"),"count must be greater than 0"),C(W)&&(q=W["$[]"]("random")),q=C(q)&&C(q["$respond_to?"]("rand"))?G("SampleRandom").$new(q):K,!C(P))return ee[q.$rand(ee.length)];var Y,Q,ae,le,ce,_e,fe,de;switch(P>ee.length&&(P=ee.length),P){case 0:return[];case 1:return[ee[q.$rand(ee.length)]];case 2:return le=q.$rand(ee.length),ce=q.$rand(ee.length),le===ce&&(ce=le===0?le+1:le-1),[ee[le],ee[ce]];break;default:if(ee.length/P>3){for(Y=!1,Q=0,ae=G("Array").$new(P),le=1,ae[0]=q.$rand(ee.length);le<P;){for(_e=q.$rand(ee.length),ce=0;ce<le;){for(;_e===ae[ce];){if(Q++,Q>100){Y=!0;break}_e=q.$rand(ee.length)}if(Y)break;ce++}if(Y)break;ae[le]=_e,le++}if(!Y){for(le=0;le<P;)ae[le]=ee[ae[le]],le++;return ae}}ae=ee.slice();for(var he=0;he<P;he++)fe=q.$rand(ee.length),de=ae[he],ae[he]=ae[fe],ae[fe]=de;return P===ee.length?ae:ae["$[]"](0,P)}},-1),k(s,"$select",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return T(W,"enum_for",["select"],function ae(){var le=ae.$$s==null?this:ae.$$s;return le.$size()},{$$s:W});for(var ee=[],_=0,q=W.length,Y,Q;_<q;_++)Y=W[_],Q=y(P,Y),C(Q)&&ee.push(Y);return ee}),k(s,"$select!",function re(){var P=re.$$p||n,W=this;if(re.$$p=null,P===n)return T(W,"enum_for",["select!"],function _(){var q=_.$$s==null?this:_.$$s;return q.$size()},{$$s:W});U(W);var ee=W.length;return T(W,"keep_if",[],P.$to_proc()),W.length===ee?n:W}),k(s,"$shift",function(P){var W=this;return U(W),C(P===void 0)?C(W.length===0)?n:Z(W):(P=j(P,t("Integer"),"to_int"),C(P<0)&&K.$raise(t("ArgumentError"),"negative array size"),C(W.length===0)?[]:W.splice(0,P))},-1),k(s,"$shuffle",function(P){var W=this;return W.$dup().$to_a()["$shuffle!"](P)},-1),k(s,"$shuffle!",function(P){var W=this;U(W);var ee,_=W.length,q,Y;for(P!==void 0&&(P=I["$coerce_to?"](P,t("Hash"),"to_hash"),P!==n&&(P=P["$[]"]("random"),P!==n&&P["$respond_to?"]("rand")&&(ee=P)));_;)ee?(q=ee.$rand(_).$to_int(),q<0&&K.$raise(t("RangeError"),"random number too small "+q),q>=_&&K.$raise(t("RangeError"),"random number too big "+q)):q=W.$rand(_),Y=W[--_],W[_]=W[q],W[q]=Y;return W},-1),k(s,"$slice!",function(P,W){var ee=this,_=n,q=n,Y=n,Q=n,ae=n;if(U(ee),_=n,C(W===void 0))if(V(t("Range"),P)){q=P,_=ee["$[]"](q),Y=q.begin===n?0:j(q.begin,t("Integer"),"to_int"),Q=q.end===n?-1:j(q.end,t("Integer"),"to_int"),Y<0&&(Y+=ee.length),Q<0?Q+=ee.length:Q>=ee.length&&(Q=ee.length-1,q.excl&&(Q+=1));var le=Q-Y;q.excl&&q.end!==n?Q-=1:le+=1,Y<ee.length&&Y>=0&&Q<ee.length&&Q>=0&&le>0&&ee.splice(Y,le)}else{if(ae=j(P,t("Integer"),"to_int"),ae<0&&(ae+=ee.length),ae<0||ae>=ee.length)return n;_=ee[ae],ae===0?ee.shift():ee.splice(ae,1)}else{if(ae=j(P,t("Integer"),"to_int"),W=j(W,t("Integer"),"to_int"),W<0)return n;var ce=ae+W;_=ee["$[]"](ae,W),ae<0&&(ae+=ee.length),ae+W>ee.length&&(W=ee.length-ae),ae<ee.length&&ae>=0&&ee.splice(ae,W)}return _},-2),k(s,"$sort",function re(){var P=re.$$p||n,W=this;return re.$$p=null,C(W.length>1)?(P===n&&(P=function(ee,_){return ee["$<=>"](_)}),W.slice().sort(function(ee,_){var q=P(ee,_);return q===n&&K.$raise(t("ArgumentError"),"comparison of "+ee.$inspect()+" with "+_.$inspect()+" failed"),o(q,0)?1:h(q,0)?-1:0})):W}),k(s,"$sort!",function re(){var P=re.$$p||n,W=this;re.$$p=null,U(W);var ee;P!==n?ee=T(W.slice(),"sort",[],P.$to_proc()):ee=W.slice().$sort(),W.length=0;for(var _=0,q=ee.length;_<q;_++)W.push(ee[_]);return W}),k(s,"$sort_by!",function re(){var P=re.$$p||n,W=this;return re.$$p=null,P===n?T(W,"enum_for",["sort_by!"],function ee(){var _=ee.$$s==null?this:ee.$$s;return _.$size()},{$$s:W}):(U(W),W.$replace(T(W,"sort_by",[],P.$to_proc())))}),k(s,"$take",function(P){var W=this;return P<0&&K.$raise(t("ArgumentError")),W.slice(0,P)}),k(s,"$take_while",function re(){var P=re.$$p||n,W=this;re.$$p=null;for(var ee=[],_=0,q=W.length,Y,Q;_<q;_++){if(Y=W[_],Q=P(Y),Q===!1||Q===n)return ee;ee.push(Y)}return ee}),k(s,"$to_a",function(){var P=this;return P.$$class===e.Array?P:e.Array.$new(P)}),k(s,"$to_ary",R),k(s,"$to_h",function re(){var P=re.$$p||n,W=this,ee=n;re.$$p=null,ee=W,P!==n&&(ee=T(ee,"map",[],P.$to_proc()));var _,q=ee.length,Y,Q,ae,le=v([],{});for(_=0;_<q;_++)Y=I["$coerce_to?"](ee[_],t("Array"),"to_ary"),Y.$$is_array||K.$raise(t("TypeError"),"wrong element type "+Y.$class()+" at "+_+" (expected array)"),Y.length!==2&&K.$raise(t("ArgumentError"),"wrong array length at "+_+" (expected 2, was "+Y.$length()+")"),Q=Y[0],ae=Y[1],D(le,Q,ae);return le}),k(s,"$transpose",function(){var P=this,W=n,ee=n;return C(P["$empty?"]())?[]:(W=[],ee=n,T(P,"each",[],function(q){var Y=n;return q==null&&(q=n),q=V(t("Array"),q)?q.$to_a():j(q,t("Array"),"to_ary").$to_a(),ee=C(Y=ee)?Y:q.length,d(q.length,ee)&&K.$raise(t("IndexError"),"element size differs ("+q.length+" should be "+ee+")"),T(q.length,"times",[],function(ae){var le,ce=n;return ae==null&&(ae=n),ce=C(Y=W["$[]"](ae))?Y:(le=[ae,[]],T(W,"[]=",le),le[le.length-1]),ce["$<<"](q.$at(ae))})}),W)}),k(s,"$union",function(P){var W,ee,_=this;return W=H(arguments),ee=W,T(ee,"reduce",[_.$uniq()],function(Y,Q){return Y==null&&(Y=n),Q==null&&(Q=n),Y["$|"](Q)})},-1),k(s,"$uniq",function re(){var P=re.$$p||n,W=this;re.$$p=null;var ee=v([],{}),_,q,Y,Q;if(P===n)for(_=0,q=W.length;_<q;_++)Y=W[_],M(ee,Y)===void 0&&D(ee,Y,Y);else for(_=0,q=W.length;_<q;_++)Y=W[_],Q=y(P,Y),M(ee,Q)===void 0&&D(ee,Q,Y);return ee.$values()}),k(s,"$uniq!",function re(){var P=re.$$p||n,W=this;re.$$p=null,U(W);var ee=W.length,_=v([],{}),q,Y,Q,ae;for(q=0,Y=ee;q<Y;q++){if(Q=W[q],ae=P===n?Q:y(P,Q),M(_,ae)===void 0){D(_,ae,Q);continue}W.splice(q,1),Y--,q--}return W.length===ee?n:W}),k(s,"$unshift",function(P){var W,ee,_=this;W=H(arguments),ee=W,U(_);var q=_.length,Y=ee.length;if(Y==0)return _;for(var Q=q-Y,ae=0;ae<Y;ae++)_.push(_[Q+ae]);for(var le=q-1;le-Y>=0;)_[le]=_[le-Y],le--;for(var ce=0;ce<Y;ce++)_[ce]=ee[ce];return _},-1),k(s,"$values_at",function(P){var W,ee,_=this,q=n;return W=H(arguments),ee=W,q=[],T(ee,"each",[],function Y(Q){var ae=Y.$$s==null?this:Y.$$s,le=n,ce=n,_e=n;return Q==null&&(Q=n),C(Q["$is_a?"](t("Range")))?(le=Q.$end()===n?-1:j(Q.$end(),t("Integer"),"to_int"),ce=Q.$begin()===n?0:j(Q.$begin(),t("Integer"),"to_int"),ce<0?(ce=ce+ae.length,n):(le<0&&(le=le+ae.length),Q["$exclude_end?"]()&&Q.$end()!==n&&le--,le<ce?n:T(ce,"upto",[le],function fe(de){var he=fe.$$s==null?this:fe.$$s;return de==null&&(de=n),q["$<<"](he.$at(de))},{$$s:ae}))):(_e=j(Q,t("Integer"),"to_int"),q["$<<"](ae.$at(_e)))},{$$s:_}),q},-1),k(s,"$zip",function re(P){var W=re.$$p||n,ee,_,q=this,Y=n;re.$$p=null,ee=H(arguments),_=ee;var Q=[],ae=q.length,le,ce,_e,fe,de;for(fe=0,de=_.length;fe<de;fe++)if(ce=_[fe],!ce.$$is_array){if(ce.$$is_range||ce.$$is_enumerator){_[fe]=ce.$take(ae);continue}_[fe]=(C(Y=I["$coerce_to?"](ce,t("Array"),"to_ary"))?Y:I["$coerce_to!"](ce,t("Enumerator"),"to_enum","each")).$to_a()}for(_e=0;_e<ae;_e++){for(le=[q[_e]],fe=0,de=_.length;fe<de;fe++)ce=_[fe][_e],ce==null&&(ce=n),le[fe+1]=ce;Q[_e]=le}if(W!==n){for(_e=0;_e<ae;_e++)e.yield1(W,Q[_e]);return n}return Q},-1),B(s,"$inherited",function(P){P.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),k(s,"$instance_variables",function re(){var P=re.$$p||n,W=this;return re.$$p=null,T(x(W,w(W,"instance_variables",re,!1,!0),"instance_variables",[],P),"reject",[],function(_){var q=n;return _==null&&(_=n),C(q=/^@\d+$/.test(_))?q:_["$=="]("@length")})}),k(s,"$pack",function(P){var W,ee;return W=H(arguments),ee=W,K.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),l(s,"append","push"),l(s,"filter","select"),l(s,"filter!","select!"),l(s,"map","collect"),l(s,"map!","collect!"),l(s,"prepend","unshift"),l(s,"size","length"),l(s,"slice","[]"),l(s,"to_s","inspect"),I.$pristine(s.$singleton_class(),"allocate"),I.$pristine(s,"copy_instance_variables","initialize_dup")}("::",Array,i)};Opal.modules["corelib/hash"]=function(e){var C=e.yield1,z=e.hash,g=e.hash_init,y=e.hash_get,M=e.hash_put,D=e.hash_delete,X=e.deny_frozen_access,j=e.freeze,b=e.klass,U=e.slice,F=e.Opal,J=e.Kernel,H=e.defs,B=e.def,K=e.send,k=e.rb_ge,I=e.rb_gt,V=e.hash2,v=e.truthy,x=e.to_a,w=e.return_self,T=e.alias,o=e.top,A=[],N=e.nil,L=e.$$$;return o.$require("corelib/enumerable"),function(S,c,E){var m=b(S,c,"Hash"),f=[m].concat(E),h=e.$r(f);m.$include(L("Enumerable")),m.$$prototype.$$is_hash=!0,H(m,"$[]",function(l){var u,i,n=this;u=U(arguments),i=u;var t,$=i.length,r;if($===1){if(t=F["$coerce_to?"](i["$[]"](0),L("Hash"),"to_hash"),t!==N)return n.$allocate()["$merge!"](t);for(i=F["$coerce_to?"](i["$[]"](0),L("Array"),"to_ary"),i===N&&J.$raise(L("ArgumentError"),"odd number of arguments for Hash"),$=i.length,t=n.$allocate(),r=0;r<$;r++)if(i[r].$$is_array)switch(i[r].length){case 1:t.$store(i[r][0],N);break;case 2:t.$store(i[r][0],i[r][1]);break;default:J.$raise(L("ArgumentError"),"invalid number of elements ("+i[r].length+" for 1..2)")}return t}for($%2!==0&&J.$raise(L("ArgumentError"),"odd number of arguments for Hash"),t=n.$allocate(),r=0;r<$;r+=2)t.$store(i[r],i[r+1]);return t},-1),H(m,"$allocate",function(){var l=this,u=new l.$$constructor;return g(u),u.$$none=N,u.$$proc=N,u}),H(m,"$try_convert",function(l){return F["$coerce_to?"](l,L("Hash"),"to_hash")}),B(m,"$initialize",function d(l){var u=d.$$p||N,i=this;return d.$$p=null,X(i),l!==void 0&&u!==N&&J.$raise(L("ArgumentError"),"wrong number of arguments (1 for 0)"),i.$$none=l===void 0?N:l,i.$$proc=u,i},-1),B(m,"$==",function(l){var u=this;if(u===l)return!0;if(!l.$$is_hash||u.$$keys.length!==l.$$keys.length)return!1;for(var i=0,n=u.$$keys,t=n.length,$,r,a;i<t;i++)if($=n[i],$.$$is_string?(r=u.$$smap[$],a=l.$$smap[$]):(r=$.value,a=y(l,$.key)),a===void 0||!r["$eql?"](a))return!1;return!0}),B(m,"$>=",function(l){var u=this,i=N;return l=F["$coerce_to!"](l,L("Hash"),"to_hash"),u.$$keys.length<l.$$keys.length?!1:(i=!0,K(l,"each",[],function n(t,$){var r=n.$$s==null?this:n.$$s,a=N;if(t==null&&(t=N),$==null&&($=N),a=r.$fetch(t,null),a==null||a!==$){i=!1;return}},{$$s:u}),i)}),B(m,"$>",function(l){var u=this;return l=F["$coerce_to!"](l,L("Hash"),"to_hash"),u.$$keys.length<=l.$$keys.length?!1:k(u,l)}),B(m,"$<",function(l){var u=this;return l=F["$coerce_to!"](l,L("Hash"),"to_hash"),I(l,u)}),B(m,"$<=",function(l){var u=this;return l=F["$coerce_to!"](l,L("Hash"),"to_hash"),k(l,u)}),B(m,"$[]",function(l){var u=this,i=y(u,l);return i!==void 0?i:u.$default(l)}),B(m,"$[]=",function(l,u){var i=this;return X(i),M(i,l,u),u}),B(m,"$assoc",function(l){for(var u=this,i=0,n=u.$$keys,t=n.length,$;i<t;i++)if($=n[i],$.$$is_string){if($["$=="](l))return[$,u.$$smap[$]]}else if($.key["$=="](l))return[$.key,$.value];return N}),B(m,"$clear",function(){var l=this;return X(l),g(l),l}),B(m,"$clone",function(){var l=this,u=new l.$$class;return g(u),e.hash_clone(l,u),u}),B(m,"$compact",function(){for(var l=this,u=z(),i=0,n=l.$$keys,t=n.length,$,r,a;i<t;i++)$=n[i],$.$$is_string?r=l.$$smap[$]:(r=$.value,$=$.key),r!==N&&M(u,$,r);return u}),B(m,"$compact!",function(){var l=this;X(l);for(var u=!1,i=0,n=l.$$keys,t=n.length,$,r,a;i<t;i++)$=n[i],$.$$is_string?r=l.$$smap[$]:(r=$.value,$=$.key),r===N&&D(l,$)!==void 0&&(u=!0,t--,i--);return u?l:N}),B(m,"$compare_by_identity",function(){var l=this;X(l);var u,i,n,t=l.$$keys,$;if(l.$$by_identity)return l;if(l.$$keys.length===0)return l.$$by_identity=!0,l;for($=V([],{}).$compare_by_identity(),u=0,i=t.length;u<i;u++)n=t[u],n.$$is_string||(n=n.key),M($,n,y(l,n));return l.$$by_identity=!0,l.$$map=$.$$map,l.$$smap=$.$$smap,l}),B(m,"$compare_by_identity?",function(){var l=this;return l.$$by_identity===!0}),B(m,"$default",function(l){var u=this;return l!==void 0&&u.$$proc!==N&&u.$$proc!==void 0?u.$$proc.$call(u,l):u.$$none===void 0?N:u.$$none},-1),B(m,"$default=",function(l){var u=this;return X(u),u.$$proc=N,u.$$none=l,l}),B(m,"$default_proc",function(){var l=this;return l.$$proc!==void 0?l.$$proc:N}),B(m,"$default_proc=",function(l){var u=this;X(u);var i=l;return i!==N&&(i=F["$coerce_to!"](i,L("Proc"),"to_proc"),i["$lambda?"]()&&i.$arity().$abs()!==2&&J.$raise(L("TypeError"),"default_proc takes two arguments")),u.$$none=N,u.$$proc=i,l}),B(m,"$delete",function d(l){var u=d.$$p||N,i=this;d.$$p=null,X(i);var n=D(i,l);return n!==void 0?n:u!==N?e.yield1(u,l):N}),B(m,"$delete_if",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["delete_if"],function s(){var p=s.$$s==null?this:s.$$s;return p.$size()},{$$s:u});X(u);for(var i=0,n=u.$$keys,t=n.length,$,r,a;i<t;i++)$=n[i],$.$$is_string?r=u.$$smap[$]:(r=$.value,$=$.key),a=l($,r),a!==!1&&a!==N&&D(u,$)!==void 0&&(t--,i--);return u}),B(m,"$dig",function(l,u){var i,n,t=this,$=N;return i=U(arguments,1),n=i,$=t["$[]"](l),$===N||n.length===0?$:(v($["$respond_to?"]("dig"))||J.$raise(L("TypeError"),""+$.$class()+" does not have #dig method"),K($,"dig",x(n)))},-2),B(m,"$each",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["each"],function a(){var s=a.$$s==null?this:a.$$s;return s.$size()},{$$s:u});for(var i=0,n=u.$$keys.slice(),t=n.length,$,r;i<t;i++)$=n[i],$.$$is_string?r=u.$$smap[$]:(r=$.value,$=$.key),C(l,[$,r]);return u}),B(m,"$each_key",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["each_key"],function r(){var a=r.$$s==null?this:r.$$s;return a.$size()},{$$s:u});for(var i=0,n=u.$$keys.slice(),t=n.length,$;i<t;i++)$=n[i],l($.$$is_string?$:$.key);return u}),B(m,"$each_value",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["each_value"],function r(){var a=r.$$s==null?this:r.$$s;return a.$size()},{$$s:u});for(var i=0,n=u.$$keys.slice(),t=n.length,$;i<t;i++)$=n[i],l($.$$is_string?u.$$smap[$]:$.value);return u}),B(m,"$empty?",function(){var l=this;return l.$$keys.length===0}),B(m,"$except",function(l){var u,i,n=this;return u=U(arguments),i=u,K(n.$dup(),"except!",x(i))},-1),B(m,"$except!",function(l){var u,i,n=this;return u=U(arguments),i=u,K(i,"each",[],function t($){var r=t.$$s==null?this:t.$$s;return $==null&&($=N),r.$delete($)},{$$s:n}),n},-1),B(m,"$fetch",function d(l,u){var i=d.$$p||N,n=this;d.$$p=null;var t=y(n,l);return t!==void 0?t:i!==N?i(l):u!==void 0?u:J.$raise(L("KeyError").$new("key not found: "+l.$inspect(),V(["key","receiver"],{key:l,receiver:n})))},-2),B(m,"$fetch_values",function d(l){var u=d.$$p||N,i,n,t=this;return d.$$p=null,i=U(arguments),n=i,K(n,"map",[],function $(r){var a=$.$$s==null?this:$.$$s;return r==null&&(r=N),K(a,"fetch",[r],u.$to_proc())},{$$s:t})},-1),B(m,"$flatten",function(l){var u=this;l==null&&(l=1),l=F["$coerce_to!"](l,L("Integer"),"to_int");for(var i=[],n=0,t=u.$$keys,$=t.length,r,a;n<$;n++){if(r=t[n],r.$$is_string?a=u.$$smap[r]:(a=r.value,r=r.key),i.push(r),a.$$is_array){if(l===1){i.push(a);continue}i=i.concat(a.$flatten(l-2));continue}i.push(a)}return i},-1),B(m,"$freeze",function(){var l=this;return v(l["$frozen?"]())?l:j(l)}),B(m,"$has_key?",function(l){var u=this;return y(u,l)!==void 0}),B(m,"$has_value?",function(l){for(var u=this,i=0,n=u.$$keys,t=n.length,$;i<t;i++)if($=n[i],($.$$is_string?u.$$smap[$]:$.value)["$=="](l))return!0;return!1}),B(m,"$hash",function(){var l=this,u=e.hash_ids===void 0,i=l.$object_id(),n=["Hash"],t,$;try{if(u&&(e.hash_ids=Object.create(null)),e[i])return"self";for(t in e.hash_ids)if($=e.hash_ids[t],l["$eql?"]($))return"self";e.hash_ids[i]=l;for(var r=0,a=l.$$keys,s=a.length;r<s;r++)t=a[r],t.$$is_string?n.push([t,l.$$smap[t].$hash()]):n.push([t.key_hash,t.value.$hash()]);return n.sort().join()}finally{u&&(e.hash_ids=void 0)}}),B(m,"$index",function(l){for(var u=this,i=0,n=u.$$keys,t=n.length,$,r;i<t;i++)if($=n[i],$.$$is_string?r=u.$$smap[$]:(r=$.value,$=$.key),r["$=="](l))return $;return N}),B(m,"$indexes",function(l){var u,i,n=this;u=U(arguments),i=u;for(var t=[],$=0,r=i.length,a,s;$<r;$++){if(a=i[$],s=y(n,a),s===void 0){t.push(n.$default());continue}t.push(s)}return t},-1);var R;return B(m,"$inspect",function(){var l=this,u=R===void 0,i=l.$object_id(),n=[];return function(){try{if(u&&(R={}),R.hasOwnProperty(i))return"{...}";R[i]=!0;for(var t=0,$=l.$$keys,r=$.length,a,s;t<r;t++)a=$[t],a.$$is_string?s=l.$$smap[a]:(s=a.value,a=a.key),a=h("Opal").$inspect(a),s=h("Opal").$inspect(s),n.push(a+"=>"+s);return"{"+n.join(", ")+"}"}finally{u&&(R=void 0)}}()}),B(m,"$invert",function(){for(var l=this,u=z(),i=0,n=l.$$keys,t=n.length,$,r;i<t;i++)$=n[i],$.$$is_string?r=l.$$smap[$]:(r=$.value,$=$.key),M(u,r,$);return u}),B(m,"$keep_if",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["keep_if"],function s(){var p=s.$$s==null?this:s.$$s;return p.$size()},{$$s:u});X(u);for(var i=0,n=u.$$keys,t=n.length,$,r,a;i<t;i++)$=n[i],$.$$is_string?r=u.$$smap[$]:(r=$.value,$=$.key),a=l($,r),(a===!1||a===N)&&D(u,$)!==void 0&&(t--,i--);return u}),B(m,"$keys",function(){for(var l=this,u=[],i=0,n=l.$$keys,t=n.length,$;i<t;i++)$=n[i],$.$$is_string?u.push($):u.push($.key);return u}),B(m,"$length",function(){var l=this;return l.$$keys.length}),B(m,"$merge",function d(l){var u=d.$$p||N,i,n,t=this;return d.$$p=null,i=U(arguments),n=i,K(t.$dup(),"merge!",x(n),u.$to_proc())},-1),B(m,"$merge!",function d(l){var u=d.$$p||N,i,n,t=this;d.$$p=null,i=U(arguments),n=i,X(t);var $,r,a,s,p,G,Z,ie;for($=0;$<n.length;++$)if(a=F["$coerce_to!"](n[$],L("Hash"),"to_hash"),s=a.$$keys,p=s.length,u===N)for(r=0;r<p;r++)G=s[r],G.$$is_string?ie=a.$$smap[G]:(ie=G.value,G=G.key),M(t,G,ie);else for(r=0;r<p;r++){if(G=s[r],G.$$is_string?ie=a.$$smap[G]:(ie=G.value,G=G.key),Z=y(t,G),Z===void 0){M(t,G,ie);continue}M(t,G,u(G,Z,ie))}return t},-1),B(m,"$rassoc",function(l){for(var u=this,i=0,n=u.$$keys,t=n.length,$,r;i<t;i++)if($=n[i],$.$$is_string?r=u.$$smap[$]:(r=$.value,$=$.key),r["$=="](l))return[$,r];return N}),B(m,"$rehash",function(){var l=this;return X(l),e.hash_rehash(l),l}),B(m,"$reject",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["reject"],function p(){var G=p.$$s==null?this:p.$$s;return G.$size()},{$$s:u});for(var i=z(),n=0,t=u.$$keys,$=t.length,r,a,s;n<$;n++)r=t[n],r.$$is_string?a=u.$$smap[r]:(a=r.value,r=r.key),s=l(r,a),(s===!1||s===N)&&M(i,r,a);return i}),B(m,"$reject!",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["reject!"],function p(){var G=p.$$s==null?this:p.$$s;return G.$size()},{$$s:u});X(u);for(var i=!1,n=0,t=u.$$keys,$=t.length,r,a,s;n<$;n++)r=t[n],r.$$is_string?a=u.$$smap[r]:(a=r.value,r=r.key),s=l(r,a),s!==!1&&s!==N&&D(u,r)!==void 0&&(i=!0,$--,n--);return i?u:N}),B(m,"$replace",function(l){var u=this;X(u),l=F["$coerce_to!"](l,L("Hash"),"to_hash"),g(u);for(var i=0,n=l.$$keys,t=n.length,$,r,a;i<t;i++)$=n[i],$.$$is_string?a=l.$$smap[$]:(a=$.value,$=$.key),M(u,$,a);return v(l.$default_proc())?u["$default_proc="](l.$default_proc()):u["$default="](l.$default()),u}),B(m,"$select",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["select"],function p(){var G=p.$$s==null?this:p.$$s;return G.$size()},{$$s:u});for(var i=z(),n=0,t=u.$$keys,$=t.length,r,a,s;n<$;n++)r=t[n],r.$$is_string?a=u.$$smap[r]:(a=r.value,r=r.key),s=l(r,a),s!==!1&&s!==N&&M(i,r,a);return i}),B(m,"$select!",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["select!"],function p(){var G=p.$$s==null?this:p.$$s;return G.$size()},{$$s:u});X(u);for(var i=N,n=0,t=u.$$keys,$=t.length,r,a,s;n<$;n++)r=t[n],r.$$is_string?a=u.$$smap[r]:(a=r.value,r=r.key),s=l(r,a),(s===!1||s===N)&&(D(u,r)!==void 0&&($--,n--),i=u);return i}),B(m,"$shift",function(){var l=this;X(l);var u=l.$$keys,i;return u.length>0?(i=u[0],i=i.$$is_string?i:i.key,[i,D(l,i)]):N}),B(m,"$slice",function(l){var u,i,n=this;u=U(arguments),i=u;for(var t=z(),$=0,r=i.length;$<r;$++){var a=i[$],s=y(n,a);s!==void 0&&M(t,a,s)}return t},-1),B(m,"$to_a",function(){for(var l=this,u=[],i=0,n=l.$$keys,t=n.length,$,r;i<t;i++)$=n[i],$.$$is_string?r=l.$$smap[$]:(r=$.value,$=$.key),u.push([$,r]);return u}),B(m,"$to_h",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,l!==N)return K(u,"map",[],l.$to_proc()).$to_h();if(u.$$class===e.Hash)return u;var i=new e.Hash;return g(i),e.hash_clone(u,i),i}),B(m,"$to_hash",w),B(m,"$to_proc",function(){var l=this;return K(l,"proc",[],function u(i){var n=u.$$s==null?this:u.$$s;return i==null&&J.$raise(L("ArgumentError"),"no key given"),n["$[]"](i)},{$$arity:-1,$$s:l})}),B(m,"$transform_keys",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["transform_keys"],function s(){var p=s.$$s==null?this:s.$$s;return p.$size()},{$$s:u});for(var i=z(),n=0,t=u.$$keys,$=t.length,r,a;n<$;n++)r=t[n],r.$$is_string?a=u.$$smap[r]:(a=r.value,r=r.key),r=C(l,r),M(i,r,a);return i}),B(m,"$transform_keys!",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["transform_keys!"],function s(){var p=s.$$s==null?this:s.$$s;return p.$size()},{$$s:u});X(u);var i=e.slice(u.$$keys),n,t=i.length,$,r,a;for(n=0;n<t;n++)$=i[n],$.$$is_string?r=u.$$smap[$]:(r=$.value,$=$.key),a=C(l,$),D(u,$),M(u,a,r);return u}),B(m,"$transform_values",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["transform_values"],function s(){var p=s.$$s==null?this:s.$$s;return p.$size()},{$$s:u});for(var i=z(),n=0,t=u.$$keys,$=t.length,r,a;n<$;n++)r=t[n],r.$$is_string?a=u.$$smap[r]:(a=r.value,r=r.key),a=C(l,a),M(i,r,a);return i}),B(m,"$transform_values!",function d(){var l=d.$$p||N,u=this;if(d.$$p=null,!v(l))return K(u,"enum_for",["transform_values!"],function a(){var s=a.$$s==null?this:a.$$s;return s.$size()},{$$s:u});X(u);for(var i=0,n=u.$$keys,t=n.length,$,r;i<t;i++)$=n[i],$.$$is_string?r=u.$$smap[$]:(r=$.value,$=$.key),r=C(l,r),M(u,$,r);return u}),B(m,"$values",function(){for(var l=this,u=[],i=0,n=l.$$keys,t=n.length,$;i<t;i++)$=n[i],$.$$is_string?u.push(l.$$smap[$]):u.push($.value);return u}),T(m,"dup","clone"),T(m,"each_pair","each"),T(m,"eql?","=="),T(m,"filter","select"),T(m,"filter!","select!"),T(m,"include?","has_key?"),T(m,"indices","indexes"),T(m,"key","index"),T(m,"key?","has_key?"),T(m,"member?","has_key?"),T(m,"size","length"),T(m,"store","[]="),T(m,"to_s","inspect"),T(m,"update","merge!"),T(m,"value?","has_value?"),T(m,"values_at","indexes")}("::",null,A)};Opal.modules["corelib/number"]=function(e){var C=e.klass,z=e.Opal,g=e.Kernel,y=e.def,M=e.eqeqeq,D=e.truthy,X=e.rb_gt,j=e.not,b=e.rb_lt,U=e.alias,F=e.send2,J=e.find_super,H=e.send,B=e.rb_plus,K=e.rb_minus,k=e.eqeq,I=e.return_self,V=e.rb_divide,v=e.to_ary,x=e.rb_times,w=e.rb_le,T=e.rb_ge,o=e.return_val,A=e.const_set,N=e.top,L=[],S=e.nil,c=e.$$$;return N.$require("corelib/numeric"),function(E,m,f){var h=C(E,m,"Number"),R=[h].concat(f);z.$bridge(Number,h),e.prop(h.$$prototype,"$$is_number",!0),h.$$is_number_class=!0,function(t,$){return y(t,"$allocate",function(){var a=this;return g.$raise(c("TypeError"),"allocator undefined for "+a.$name())}),e.udef(t,"$new"),S}(e.get_singleton_class(h),R),y(h,"$coerce",function($){var r=this;if($===S)g.$raise(c("TypeError"),"can't convert "+$.$class()+" into Float");else{if($.$$is_string)return[g.$Float($),r];if($["$respond_to?"]("to_f"))return[z["$coerce_to!"]($,c("Float"),"to_f"),r];if($.$$is_number)return[$,r];g.$raise(c("TypeError"),"can't convert "+$.$class()+" into Float")}}),y(h,"$__id__",function(){var $=this;return $*2+1}),y(h,"$+",function($){var r=this;return $.$$is_number?r+$:r.$__coerced__("+",$)}),y(h,"$-",function($){var r=this;return $.$$is_number?r-$:r.$__coerced__("-",$)}),y(h,"$*",function($){var r=this;return $.$$is_number?r*$:r.$__coerced__("*",$)}),y(h,"$/",function($){var r=this;return $.$$is_number?r/$:r.$__coerced__("/",$)}),y(h,"$%",function($){var r=this;if($.$$is_number){if($==-1/0)return $;if($==0)g.$raise(c("ZeroDivisionError"),"divided by 0");else return $<0||r<0?(r%$+$)%$:r%$}else return r.$__coerced__("%",$)}),y(h,"$&",function($){var r=this;return $.$$is_number?r&$:r.$__coerced__("&",$)}),y(h,"$|",function($){var r=this;return $.$$is_number?r|$:r.$__coerced__("|",$)}),y(h,"$^",function($){var r=this;return $.$$is_number?r^$:r.$__coerced__("^",$)}),y(h,"$<",function($){var r=this;return $.$$is_number?r<$:r.$__coerced__("<",$)}),y(h,"$<=",function($){var r=this;return $.$$is_number?r<=$:r.$__coerced__("<=",$)}),y(h,"$>",function($){var r=this;return $.$$is_number?r>$:r.$__coerced__(">",$)}),y(h,"$>=",function($){var r=this;return $.$$is_number?r>=$:r.$__coerced__(">=",$)});var d=function(t,$){return $.$$is_number?isNaN(t)||isNaN($)?S:t>$?1:t<$?-1:0:t.$__coerced__("<=>",$)};y(h,"$<=>",function($){var r=this;try{return d(r,$)}catch(a){if(e.rescue(a,[c("ArgumentError")]))try{return S}finally{e.pop_exception()}else throw a}}),y(h,"$<<",function($){var r=this;return $=z["$coerce_to!"]($,c("Integer"),"to_int"),$>0?r<<$:r>>-$}),y(h,"$>>",function($){var r=this;return $=z["$coerce_to!"]($,c("Integer"),"to_int"),$>0?r>>$:r<<-$}),y(h,"$[]",function($){var r=this;return $=z["$coerce_to!"]($,c("Integer"),"to_int"),$<0?0:$>=32?r<0?1:0:r>>$&1}),y(h,"$+@",function(){var $=this;return+$}),y(h,"$-@",function(){var $=this;return-$}),y(h,"$~",function(){var $=this;return~$}),y(h,"$**",function($){var r=this;return M(c("Integer"),$)?j(c("Integer")["$==="](r))||D(X($,0))?Math.pow(r,$):c("Rational").$new(r,1)["$**"]($):b(r,0)&&(M(c("Float"),$)||M(c("Rational"),$))?c("Complex").$new(r,0)["$**"]($.$to_f()):D($.$$is_number!=null)?Math.pow(r,$):r.$__coerced__("**",$)}),y(h,"$==",function($){var r=this;return $.$$is_number?r.valueOf()===$.valueOf():$["$respond_to?"]("==")?$["$=="](r):!1}),U(h,"===","=="),y(h,"$abs",function(){var $=this;return Math.abs($)}),y(h,"$abs2",function(){var $=this;return Math.abs($*$)}),y(h,"$allbits?",function($){var r=this;return $=z["$coerce_to!"]($,c("Integer"),"to_int"),(r&$)==$}),y(h,"$anybits?",function($){var r=this;return $=z["$coerce_to!"]($,c("Integer"),"to_int"),(r&$)!==0}),y(h,"$angle",function(){var $=this;return D($["$nan?"]())?$:$==0?1/$>0?0:Math.PI:$<0?Math.PI:0}),y(h,"$bit_length",function(){var $=this;if(M(c("Integer"),$)||g.$raise(c("NoMethodError").$new("undefined method `bit_length` for "+$+":Float","bit_length")),$===0||$===-1)return 0;for(var r=0,a=$<0?~$:$;a!=0;)r+=1,a>>>=1;return r}),y(h,"$ceil",function($){var r=this;$==null&&($=0);var a=r.$to_f();if(a%1===0&&$>=0)return a;var s=Math.pow(10,$),p=Math.ceil(a*s)/s;return a%1===0&&(p=Math.round(p)),p},-1),y(h,"$chr",function($){var r=this;return e.enc(String.fromCharCode(r),$||"BINARY")},-1),y(h,"$denominator",function t(){var $=t.$$p||S,r=this;return t.$$p=null,D(r["$nan?"]())||D(r["$infinite?"]())?1:F(r,J(r,"denominator",t,!1,!0),"denominator",[],$)}),y(h,"$downto",function t($){var r=t.$$p||S,a=this;if(t.$$p=null,r===S)return H(a,"enum_for",["downto",$],function p(){var G=p.$$s==null?this:p.$$s;return M(c("Numeric"),$)||g.$raise(c("ArgumentError"),"comparison of "+G.$class()+" with "+$.$class()+" failed"),D(X($,G))?0:B(K(G,$),1)},{$$s:a});$.$$is_number||g.$raise(c("ArgumentError"),"comparison of "+a.$class()+" with "+$.$class()+" failed");for(var s=a;s>=$;s--)r(s);return a}),y(h,"$equal?",function($){var r=this,a=S;return D(a=r["$=="]($))?a:isNaN(r)&&isNaN($)}),y(h,"$even?",function(){var $=this;return $%2===0}),y(h,"$floor",function($){var r=this;$==null&&($=0);var a=r.$to_f();if(a%1===0&&$>=0)return a;var s=Math.pow(10,$),p=Math.floor(a*s)/s;return a%1===0&&(p=Math.round(p)),p},-1),y(h,"$gcd",function($){var r=this;M(c("Integer"),$)||g.$raise(c("TypeError"),"not an integer");for(var a=Math.abs(r),s=Math.abs($);a>0;){var p=a;a=s%a,s=p}return s}),y(h,"$gcdlcm",function($){var r=this;return[r.$gcd($),r.$lcm($)]}),y(h,"$integer?",function(){var $=this;return $%1===0}),y(h,"$is_a?",function t($){var r=t.$$p||S,a=this;return t.$$p=null,k($,c("Integer"))&&M(c("Integer"),a)||k($,c("Integer"))&&M(c("Integer"),a)||k($,c("Float"))&&M(c("Float"),a)?!0:F(a,J(a,"is_a?",t,!1,!0),"is_a?",[$],r)}),y(h,"$instance_of?",function t($){var r=t.$$p||S,a=this;return t.$$p=null,k($,c("Integer"))&&M(c("Integer"),a)||k($,c("Integer"))&&M(c("Integer"),a)||k($,c("Float"))&&M(c("Float"),a)?!0:F(a,J(a,"instance_of?",t,!1,!0),"instance_of?",[$],r)}),y(h,"$lcm",function($){var r=this;return M(c("Integer"),$)||g.$raise(c("TypeError"),"not an integer"),r==0||$==0?0:Math.abs(r*$/r.$gcd($))}),y(h,"$next",function(){var $=this;return $+1}),y(h,"$nobits?",function($){var r=this;return $=z["$coerce_to!"]($,c("Integer"),"to_int"),(r&$)==0}),y(h,"$nonzero?",function(){var $=this;return $==0?S:$}),y(h,"$numerator",function t(){var $=t.$$p||S,r=this;return t.$$p=null,D(r["$nan?"]())||D(r["$infinite?"]())?r:F(r,J(r,"numerator",t,!1,!0),"numerator",[],$)}),y(h,"$odd?",function(){var $=this;return $%2!==0}),y(h,"$ord",I),y(h,"$pow",function($,r){var a=this;return a==0&&g.$raise(c("ZeroDivisionError"),"divided by 0"),r===void 0?a["$**"]($):(c("Integer")["$==="]($)||g.$raise(c("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),$<0&&g.$raise(c("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),c("Integer")["$==="](r)||g.$raise(c("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),r===0&&g.$raise(c("ZeroDivisionError"),"divided by 0"),a["$**"]($)["$%"](r))},-2),y(h,"$pred",function(){var $=this;return $-1}),y(h,"$quo",function t($){var r=t.$$p||S,a=this;return t.$$p=null,M(c("Integer"),a)?F(a,J(a,"quo",t,!1,!0),"quo",[$],r):V(a,$)}),y(h,"$rationalize",function($){var r,a,s=this,p=S,G=S;return arguments.length>1&&g.$raise(c("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),M(c("Integer"),s)?c("Rational").$new(s,1):D(s["$infinite?"]())?g.$raise(c("FloatDomainError"),"Infinity"):D(s["$nan?"]())?g.$raise(c("FloatDomainError"),"NaN"):D($==null)?(a=c("Math").$frexp(s),r=v(a),p=r[0]==null?S:r[0],G=r[1]==null?S:r[1],p=c("Math").$ldexp(p,c(c("Float"),"MANT_DIG")).$to_i(),G=K(G,c(c("Float"),"MANT_DIG")),c("Rational").$new(x(2,p),1["$<<"](K(1,G))).$rationalize(c("Rational").$new(1,1["$<<"](K(1,G))))):s.$to_r().$rationalize($)},-1),y(h,"$remainder",function($){var r=this;return K(r,x($,V(r,$).$truncate()))}),y(h,"$round",function($){var r,a,s=this,p=S,G=S;if(M(c("Integer"),s)){if(D($==null)||(M(c("Float"),$)&&D($["$infinite?"]())&&g.$raise(c("RangeError"),"Infinity"),$=z["$coerce_to!"]($,c("Integer"),"to_int"),D(b($,c(c("Integer"),"MIN")))&&g.$raise(c("RangeError"),"out of bounds"),D($>=0)))return s;if($=$["$-@"](),.415241*$-.125>s.$size())return 0;var Z=Math.pow(10,$),ie=Math.floor((Math.abs(s)+Z/2)/Z)*Z;return s<0?-ie:ie}else{if(D(s["$nan?"]())&&D($==null)&&g.$raise(c("FloatDomainError"),"NaN"),$=z["$coerce_to!"]($||0,c("Integer"),"to_int"),D(w($,0)))D(s["$nan?"]())?g.$raise(c("RangeError"),"NaN"):D(s["$infinite?"]())&&g.$raise(c("FloatDomainError"),"Infinity");else{if(k($,0))return Math.round(s);if(D(s["$nan?"]())||D(s["$infinite?"]()))return s}return a=c("Math").$frexp(s),r=v(a),p=r[0]==null?S:r[0],G=r[1]==null?S:r[1],D(T($,K(B(c(c("Float"),"DIG"),2),D(X(G,0))?V(G,4):K(V(G,3),1))))?s:D(b($,(D(X(G,0))?B(V(G,3),1):V(G,4))["$-@"]()))?0:Math.round(s*Math.pow(10,$))/Math.pow(10,$)}},-1),y(h,"$times",function t(){var $=t.$$p||S,r=this;if(t.$$p=null,!D($))return H(r,"enum_for",["times"],function s(){var p=s.$$s==null?this:s.$$s;return p},{$$s:r});for(var a=0;a<r;a++)$(a);return r}),y(h,"$to_f",I),y(h,"$to_i",function(){var $=this;return $<0?Math.ceil($):Math.floor($)}),y(h,"$to_r",function(){var $,r,a=this,s=S,p=S;return M(c("Integer"),a)?c("Rational").$new(a,1):(r=c("Math").$frexp(a),$=v(r),s=$[0]==null?S:$[0],p=$[1]==null?S:$[1],s=c("Math").$ldexp(s,c(c("Float"),"MANT_DIG")).$to_i(),p=K(p,c(c("Float"),"MANT_DIG")),x(s,c(c("Float"),"RADIX")["$**"](p)).$to_r())}),y(h,"$to_s",function($){var r=this;return $==null&&($=10),$=z["$coerce_to!"]($,c("Integer"),"to_int"),(D(b($,2))||D(X($,36)))&&g.$raise(c("ArgumentError"),"invalid radix "+$),k(r,0)&&D(1/r===-1/0)?"-0.0":r.toString($)},-1),y(h,"$truncate",function($){var r=this;$==null&&($=0);var a=r.$to_f();if(a%1===0&&$>=0)return a;var s=Math.pow(10,$),p=parseInt(a*s,10)/s;return a%1===0&&(p=Math.round(p)),p},-1),y(h,"$digits",function($){var r=this;$==null&&($=10),b(r,0)&&g.$raise(c(c("Math"),"DomainError"),"out of domain"),$=z["$coerce_to!"]($,c("Integer"),"to_int"),D(b($,2))&&g.$raise(c("ArgumentError"),"invalid radix "+$),r!=parseInt(r)&&g.$raise(c("NoMethodError"),"undefined method `digits' for "+r.$inspect());var a=r,s=[];if(r==0)return[0];for(;a!=0;)s.push(a%$),a=parseInt(a/$,10);return s},-1),y(h,"$divmod",function t($){var r=t.$$p||S,a=this;return t.$$p=null,D(a["$nan?"]())||D($["$nan?"]())?g.$raise(c("FloatDomainError"),"NaN"):D(a["$infinite?"]())?g.$raise(c("FloatDomainError"),"Infinity"):F(a,J(a,"divmod",t,!1,!0),"divmod",[$],r)}),y(h,"$upto",function t($){var r=t.$$p||S,a=this;if(t.$$p=null,r===S)return H(a,"enum_for",["upto",$],function p(){var G=p.$$s==null?this:p.$$s;return M(c("Numeric"),$)||g.$raise(c("ArgumentError"),"comparison of "+G.$class()+" with "+$.$class()+" failed"),D(b($,G))?0:B(K($,G),1)},{$$s:a});$.$$is_number||g.$raise(c("ArgumentError"),"comparison of "+a.$class()+" with "+$.$class()+" failed");for(var s=a;s<=$;s++)r(s);return a}),y(h,"$zero?",function(){var $=this;return $==0}),y(h,"$size",o(4)),y(h,"$nan?",function(){var $=this;return isNaN($)}),y(h,"$finite?",function(){var $=this;return $!=1/0&&$!=-1/0&&!isNaN($)}),y(h,"$infinite?",function(){var $=this;return $==1/0?1:$==-1/0?-1:S}),y(h,"$positive?",function(){var $=this;return $!=0&&($==1/0||1/$>0)}),y(h,"$negative?",function(){var $=this;return $==-1/0||1/$<0});function l(t){var $=new Uint8Array(8);return new DataView($.buffer).setFloat64(0,t,!0),$}function u(t){return new DataView(t.buffer).getFloat64(0,!0)}function i(t){for(var $=l(t),r=0;r<$.length;r++)if($[r]===255)$[r]=0;else{$[r]++;break}return u($)}function n(t){for(var $=l(t),r=0;r<$.length;r++)if($[r]===0)$[r]=255;else{$[r]--;break}return u($)}return y(h,"$next_float",function(){var $=this;return k($,c(c("Float"),"INFINITY"))?c(c("Float"),"INFINITY"):D($["$nan?"]())?c(c("Float"),"NAN"):T($,0)?i(Math.abs($)):n($)}),y(h,"$prev_float",function(){var $=this;return k($,c(c("Float"),"INFINITY")["$-@"]())?c(c("Float"),"INFINITY")["$-@"]():D($["$nan?"]())?c(c("Float"),"NAN"):X($,0)?n($):-i(Math.abs($))}),U(h,"arg","angle"),U(h,"eql?","=="),U(h,"fdiv","/"),U(h,"inspect","to_s"),U(h,"kind_of?","is_a?"),U(h,"magnitude","abs"),U(h,"modulo","%"),U(h,"object_id","__id__"),U(h,"phase","angle"),U(h,"succ","next"),U(h,"to_int","to_i")}("::",c("Numeric"),L),A("::","Fixnum",c("Number")),function(E,m,f){var h=C(E,m,"Integer"),R=[h].concat(f);return h.$$is_number_class=!0,h.$$is_integer_class=!0,function(d,l){var u=[d].concat(l),i=e.$r(u);return y(d,"$allocate",function(){var t=this;return g.$raise(c("TypeError"),"allocator undefined for "+t.$name())}),e.udef(d,"$new"),y(d,"$sqrt",function(t){return t=z["$coerce_to!"](t,c("Integer"),"to_int"),t<0&&g.$raise(c(c("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(t),10)}),y(d,"$try_convert",function(t){var $=this;return i("Opal")["$coerce_to?"](t,$,"to_int")})}(e.get_singleton_class(h),R),A(h,"MAX",Math.pow(2,30)-1),A(h,"MIN",-Math.pow(2,30))}("::",c("Numeric"),L),function(E,m,f){var h=C(E,m,"Float"),R=[h].concat(f);return h.$$is_number_class=!0,function(d,l){return y(d,"$allocate",function(){var i=this;return g.$raise(c("TypeError"),"allocator undefined for "+i.$name())}),e.udef(d,"$new"),y(d,"$===",function(i){return!!i.$$is_number})}(e.get_singleton_class(h),R),A(h,"INFINITY",1/0),A(h,"MAX",Number.MAX_VALUE),A(h,"MIN",Number.MIN_VALUE),A(h,"NAN",NaN),A(h,"DIG",15),A(h,"MANT_DIG",53),A(h,"RADIX",2),A(h,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",c("Numeric"),L)};Opal.modules["corelib/range"]=function(e){var C=e.klass,z=e.truthy,g=e.Kernel,y=e.def,M=e.not,D=e.send2,X=e.find_super,j=e.rb_lt,b=e.rb_le,U=e.send,F=e.eqeq,J=e.eqeqeq,H=e.return_ivar,B=e.rb_gt,K=e.rb_minus,k=e.Opal,I=e.rb_divide,V=e.rb_plus,v=e.rb_times,x=e.rb_ge,w=e.thrower,T=e.alias,o=e.top,A=[],N=e.nil,L=e.$$$;return o.$require("corelib/enumerable"),function(S,c,E){var m=C(S,c,"Range"),f=[m].concat(E),h=e.$r(f),R=m.$$prototype;R.begin=R.end=R.excl=N,m.$include(L("Enumerable")),m.$$prototype.$$is_range=!0,m.$attr_reader("begin","end"),y(m,"$initialize",function(u,i,n){var t=this;return n==null&&(n=!1),z(t.begin)&&g.$raise(L("NameError"),"'initialize' called twice"),z(u["$<=>"](i))||z(u["$nil?"]())||z(i["$nil?"]())||g.$raise(L("ArgumentError"),"bad value for range"),t.begin=u,t.end=i,t.excl=n},-3),y(m,"$===",function(u){var i=this;return i["$include?"](u)});function d(l){return l.begin===N||l.end===N||l.begin===-1/0||l.end===1/0||l.begin===1/0||l.end===-1/0}return y(m,"$count",function l(){var u=l.$$p||N,i=this;return l.$$p=null,M(u!==N)&&z(d(i))?L(L("Float"),"INFINITY"):D(i,X(i,"count",l,!1,!0),"count",[],u)}),y(m,"$to_a",function l(){var u=l.$$p||N,i=this;return l.$$p=null,z(d(i))&&g.$raise(L("TypeError"),"cannot convert endless range to an array"),D(i,X(i,"to_a",l,!1,!0),"to_a",[],u)}),y(m,"$cover?",function(u){var i=this,n=N,t=N,$=N,r=N,a=N;return n=z(t=z($=z(r=i.begin["$nil?"]())?-1:r)?$:i.begin["$<=>"](u))&&t,a=z(t=z($=z(r=i.end["$nil?"]())?-1:r)?$:u["$<=>"](i.end))&&t,z(t=z($=z(i.excl)?z(r=a)?j(a,0):r:z(r=a)?b(a,0):r)?n:$)?b(n,0):t}),y(m,"$each",function l(){var u=l.$$p||N,i=this,n=N,t=N,$=N;if(l.$$p=null,u===N)return U(i,"enum_for",["each"],function s(){var p=s.$$s==null?this:s.$$s;return p.$size()},{$$s:i});var r,a;if(i.begin.$$is_number&&i.end.$$is_number){for((i.begin%1!==0||i.end%1!==0)&&g.$raise(L("TypeError"),"can't iterate from Float"),r=i.begin,a=i.end+(z(i.excl)?0:1);r<a;r++)u(r);return i}if(i.begin.$$is_string&&i.end.$$is_string)return U(i.begin,"upto",[i.end,i.excl],u.$to_proc()),i;for(n=i.begin,t=i.end,z(n["$respond_to?"]("succ"))||g.$raise(L("TypeError"),"can't iterate from "+n.$class());z(z($=i.end["$nil?"]())?$:j(n["$<=>"](t),0));)e.yield1(u,n),n=n.$succ();return M(i.excl)&&F(n,t)&&e.yield1(u,n),i}),y(m,"$eql?",function(u){var i=this,n=N,t=N;return J(L("Range"),u)?z(n=z(t=i.excl["$==="](u["$exclude_end?"]()))?i.begin["$eql?"](u.$begin()):t)?i.end["$eql?"](u.$end()):n:!1}),y(m,"$exclude_end?",H("excl")),y(m,"$first",function l(u){var i=l.$$p||N,n=this;return l.$$p=null,z(n.begin["$nil?"]())&&g.$raise(L("RangeError"),"cannot get the minimum of beginless range"),z(u==null)?n.begin:D(n,X(n,"first",l,!1,!0),"first",[u],i)},-1),y(m,"$last",function(u){var i=this;return z(i.end["$nil?"]())&&g.$raise(L("RangeError"),"cannot get the maximum of endless range"),z(u==null)?i.end:i.$to_a().$last(u)},-1),y(m,"$max",function l(){var u=l.$$p||N,i=this;return l.$$p=null,z(i.end["$nil?"]())?g.$raise(L("RangeError"),"cannot get the maximum of endless range"):u!==N?D(i,X(i,"max",l,!1,!0),"max",[],u):M(i.begin["$nil?"]())&&(z(B(i.begin,i.end))||z(i.excl)&&F(i.begin,i.end))?N:i.excl?i.end-1:i.end}),y(m,"$min",function l(){var u=l.$$p||N,i=this;return l.$$p=null,z(i.begin["$nil?"]())?g.$raise(L("RangeError"),"cannot get the minimum of beginless range"):u!==N?D(i,X(i,"min",l,!1,!0),"min",[],u):M(i.end["$nil?"]())&&(z(B(i.begin,i.end))||z(i.excl)&&F(i.begin,i.end))?N:i.begin}),y(m,"$size",function(){var u=this,i=N,n=N,t=N;return i=L(L("Float"),"INFINITY"),F(u.begin,i)&&M(u.end["$nil?"]())||F(u.end,i["$-@"]())&&M(u.begin["$nil?"]())?0:z(d(u))?i:J(L("Numeric"),u.begin)&&J(L("Numeric"),u.end)?(n=u.begin,t=u.end,z(u.excl)&&(t=K(t,1)),z(j(t,n))?0:(Math.abs(t-n)+1).$to_i()):N}),y(m,"$step",function l(u){var i=l.$$p||N,n=this,t=N,$=N;l.$$p=null;function r(){u==null?u=1:u.$$is_number||(u=k["$coerce_to!"](u,L("Integer"),"to_int")),u<0?g.$raise(L("ArgumentError"),"step can't be negative"):u===0&&g.$raise(L("ArgumentError"),"step can't be 0")}function a(){if(!n.begin["$respond_to?"]("succ")||n.begin.$$is_string&&n.end.$$is_string)return N;if(u%1===0)return I(n.$size(),u).$ceil();var s=n.begin,p=n.end,G=Math.abs,Z=Math.floor,ie=(G(s)+G(p)+G(p-s))/G(u)*L(L("Float"),"EPSILON"),ne;return ie>.5&&(ie=.5),n.excl?(ne=Z((p-s)/u-ie),ne*u+s<p&&ne++):ne=Z((p-s)/u+ie)+1,ne}return i===N?(z(n.begin["$is_a?"](h("Numeric")))||z(n.begin["$nil?"]()))&&(z(n.end["$is_a?"](h("Numeric")))||z(n.end["$nil?"]()))&&M(z(t=n.begin["$nil?"]())?n.end["$nil?"]():t)?L(L("Enumerator"),"ArithmeticSequence").$new(n,u,"step"):U(n,"enum_for",["step",u],function(){return r(),a()}):(r(),z(n.begin.$$is_number&&n.end.$$is_number)?($=0,function(){try{var s=w("break");return U(n,"loop",[],function p(){var G=p.$$s==null?this:p.$$s,Z=N;return G.begin==null&&(G.begin=N),G.excl==null&&(G.excl=N),G.end==null&&(G.end=N),Z=V(G.begin,v($,u)),z(G.excl)?z(x(Z,G.end))&&s.$throw():z(B(Z,G.end))&&s.$throw(),e.yield1(i,Z),$=V($,1)},{$$s:n})}catch(p){if(p===s)return p.$v;throw p}}()):(n.begin.$$is_string&&n.end.$$is_string&&u%1!==0&&g.$raise(L("TypeError"),"no implicit conversion to float from string"),U(n,"each_with_index",[],function(p,G){return p==null&&(p=N),G==null&&(G=N),F(G["$%"](u),0)?e.yield1(i,p):N})),n)},-1),y(m,"$%",function(u){var i=this;return z(i.begin["$is_a?"](h("Numeric")))&&z(i.end["$is_a?"](h("Numeric")))?L(L("Enumerator"),"ArithmeticSequence").$new(i,u,"%"):i.$step(u)}),y(m,"$bsearch",function l(){var u=l.$$p||N,i=this;return l.$$p=null,u===N?i.$enum_for("bsearch"):(z(d(i)&&(i.begin.$$is_number||i.end.$$is_number))&&g.$raise(L("NotImplementedError"),"Can't #bsearch an infinite range"),z(i.begin.$$is_number&&i.end.$$is_number)||g.$raise(L("TypeError"),"can't do binary search for "+i.begin.$class()),U(i.$to_a(),"bsearch",[],u.$to_proc()))}),y(m,"$to_s",function(){var u=this,i=N;return""+(z(i=u.begin)?i:"")+(z(u.excl)?"...":"..")+(z(i=u.end)?i:"")}),y(m,"$inspect",function(){var u=this,i=N;return""+(z(i=u.begin)?u.begin.$inspect():i)+(z(u.excl)?"...":"..")+(z(i=u.end)?u.end.$inspect():i)}),y(m,"$marshal_load",function(u){var i=this;return i.begin=u["$[]"]("begin"),i.end=u["$[]"]("end"),i.excl=u["$[]"]("excl")}),y(m,"$hash",function(){var u=this;return[u.begin,u.end,u.excl].$hash()}),T(m,"==","eql?"),T(m,"include?","cover?"),T(m,"member?","cover?")}("::",null,A)};Opal.modules["corelib/proc"]=function(e){var C=e.slice,z=e.klass,g=e.truthy,y=e.Kernel,M=e.defs,D=e.def,X=e.send,j=e.to_a,b=e.return_self,U=e.ensure_kwargs,F=e.Opal,J=e.alias,H=e.nil,B=e.$$$;return function(K,k){var I=z(K,k,"Proc");return e.prop(I.$$prototype,"$$is_proc",!0),e.prop(I.$$prototype,"$$is_lambda",!1),M(I,"$new",function V(){var v=V.$$p||H;return V.$$p=null,g(v)||y.$raise(B("ArgumentError"),"tried to create a Proc object without a block"),v}),D(I,"$call",function V(v){var x=V.$$p||H,w,T,o=this;V.$$p=null,w=C(arguments),T=w,x!==H&&(o.$$p=x);var A,N=o.$$brk,L=o.$$ret;if(N||L&&o.$$is_lambda)try{o.$$is_lambda?A=o.apply(null,T):A=e.yieldX(o,T)}catch(S){if(S===N)return S.$v;if(o.$$is_lambda&&S===L)return S.$v;throw S}else o.$$is_lambda?A=o.apply(null,T):A=e.yieldX(o,T);return A},-1),D(I,"$>>",function V(v){var x=V.$$p||H,w=this;return V.$$p=null,X(y,"proc",[],function T(o){var A=T.$$p||H,N,L,S=T.$$s==null?this:T.$$s,c=H;return T.$$p=null,N=C(arguments),L=N,c=X(S,"call",j(L),A.$to_proc()),v.$call(c)},{$$arity:-1,$$s:w})}),D(I,"$<<",function V(v){var x=V.$$p||H,w=this;return V.$$p=null,X(y,"proc",[],function T(o){var A=T.$$p||H,N,L,S=T.$$s==null?this:T.$$s,c=H;return T.$$p=null,N=C(arguments),L=N,c=X(v,"call",j(L),A.$to_proc()),S.$call(c)},{$$arity:-1,$$s:w})}),D(I,"$to_proc",b),D(I,"$lambda?",function(){var v=this;return!!v.$$is_lambda}),D(I,"$arity",function(){var v=this;return v.$$is_curried?-1:v.$$arity!=null?v.$$arity:v.length}),D(I,"$source_location",function(){var v=this,x=H;return v.$$is_curried?H:g(x=v.$$source_location)?x:H}),D(I,"$binding",function(){var v,x=this;return x.$$is_curried&&y.$raise(B("ArgumentError"),"Can't create Binding"),g((v=B("::","Binding","skip_raise"))?"constant":H)?B("Binding").$new(H,[],x.$$s,x.$source_location()):H}),D(I,"$parameters",function(v){var x,w=this;if(v=U(v),x=v.$$smap.lambda,w.$$is_curried)return[["rest"]];if(w.$$parameters){if(x==null?w.$$is_lambda:x)return w.$$parameters;var T=[],o,A;for(o=0,A=w.$$parameters.length;o<A;o++){var N=w.$$parameters[o];N[0]==="req"&&(N=["opt",N[1]]),T.push(N)}return T}else return[]},-1),D(I,"$curry",function(v){var x=this;v===void 0?v=x.length:(v=F["$coerce_to!"](v,B("Integer"),"to_int"),x.$$is_lambda&&v!==x.length&&y.$raise(B("ArgumentError"),"wrong number of arguments ("+v+" for "+x.length+")"));function w(){var T=C(arguments),o=T.length,A;return o>v&&x.$$is_lambda&&!x.$$is_curried&&y.$raise(B("ArgumentError"),"wrong number of arguments ("+o+" for "+v+")"),o>=v?x.$call.apply(x,T):(A=function(){return w.apply(null,T.concat(C(arguments)))},A.$$is_lambda=x.$$is_lambda,A.$$is_curried=!0,A)}return w.$$is_lambda=x.$$is_lambda,w.$$is_curried=!0,w},-1),D(I,"$dup",function(){var v=this,x=v.$$original_proc||v,w=function(){return x.apply(this,arguments)};for(var T in v)v.hasOwnProperty(T)&&(w[T]=v[T]);return w}),J(I,"===","call"),J(I,"clone","dup"),J(I,"yield","call"),J(I,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var C=e.klass,z=e.def,g=e.truthy,y=e.slice,M=e.alias,D=e.Kernel,X=e.send,j=e.to_a,b=e.nil,U=e.$$$;return function(F,J){var H=C(F,J,"Method"),B=H.$$prototype;return B.method=B.receiver=B.owner=B.name=b,H.$attr_reader("owner","receiver","name"),z(H,"$initialize",function(k,I,V,v){var x=this;return x.receiver=k,x.owner=I,x.name=v,x.method=V}),z(H,"$arity",function(){var k=this;return k.method.$arity()}),z(H,"$parameters",function(){var k=this;return k.method.$$parameters}),z(H,"$source_location",function(){var k=this,I=b;return g(I=k.method.$$source_location)?I:["(eval)",0]}),z(H,"$comments",function(){var k=this,I=b;return g(I=k.method.$$comments)?I:[]}),z(H,"$call",function K(k){var I=K.$$p||b,V,v,x=this;return K.$$p=null,V=y(arguments),v=V,x.method.$$p=I,x.method.apply(x.receiver,v)},-1),z(H,"$curry",function(k){var I=this;return I.method.$curry(k)},-1),z(H,"$>>",function(k){var I=this;return I.method["$>>"](k)}),z(H,"$<<",function(k){var I=this;return I.method["$<<"](k)}),z(H,"$unbind",function(){var k=this;return U("UnboundMethod").$new(k.receiver.$class(),k.owner,k.method,k.name)}),z(H,"$to_proc",function(){var k=this,I=k.$call.bind(k);return I.$$unbound=k.method,I.$$is_lambda=!0,I.$$arity=k.method.$$arity==null?k.method.length:k.method.$$arity,I.$$parameters=k.method.$$parameters,I}),z(H,"$inspect",function(){var k=this;return"#<"+k.$class()+": "+k.receiver.$class()+"#"+k.name+" (defined in "+k.owner+" in "+k.$source_location().$join(":")+")>"}),M(H,"[]","call"),M(H,"===","call")}("::",null),function(F,J){var H=C(F,J,"UnboundMethod"),B=H.$$prototype;return B.method=B.owner=B.name=B.source=b,H.$attr_reader("source","owner","name"),z(H,"$initialize",function(k,I,V,v){var x=this;return x.source=k,x.owner=I,x.method=V,x.name=v}),z(H,"$arity",function(){var k=this;return k.method.$arity()}),z(H,"$parameters",function(){var k=this;return k.method.$$parameters}),z(H,"$source_location",function(){var k=this,I=b;return g(I=k.method.$$source_location)?I:["(eval)",0]}),z(H,"$comments",function(){var k=this,I=b;return g(I=k.method.$$comments)?I:[]}),z(H,"$bind",function(k){var I=this;if(I.owner.$$is_module||e.is_a(k,I.owner))return U("Method").$new(k,I.owner,I.method,I.name);D.$raise(U("TypeError"),"can't bind singleton method to a different class (expected "+k+".kind_of?("+I.owner+" to be true)")}),z(H,"$bind_call",function K(k,I){var V=K.$$p||b,v,x,w=this;return K.$$p=null,v=y(arguments,1),x=v,X(w.$bind(k),"call",j(x),V.$to_proc())},-2),z(H,"$inspect",function(){var k=this;return"#<"+k.$class()+": "+k.source+"#"+k.name+" (defined in "+k.owner+" in "+k.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var C=e.gvars,z=e.const_set,g=e.Object,y=e.hash2,M=e.nil;return C["&"]=C["~"]=C["`"]=C["'"]=M,C.LOADED_FEATURES=C['"']=e.loaded_features,C.LOAD_PATH=C[":"]=[],C["/"]=`
`,C[","]=M,z("::","ARGV",[]),z("::","ARGF",g.$new()),z("::","ENV",y([],{})),C.VERBOSE=!1,C.DEBUG=!1,C.SAFE=0};Opal.modules["corelib/io"]=function(e){var C=e.klass,z=e.const_set,g=e.not,y=e.truthy,M=e.def,D=e.return_ivar,X=e.return_val,j=e.slice,b=e.Kernel,U=e.gvars,F=e.send,J=e.to_a,H=e.rb_plus,B=e.neqeq,K=e.range,k=e.hash2,I=e.eqeq,V=e.to_ary,v=e.rb_gt,x=e.assign_ivar_val,w=e.alias,T,o=e.nil,A=e.$$$;(function(L,S){var c=C(L,S,"IO"),E=c.$$prototype;return E.read_buffer=E.closed=o,z(c,"SEEK_SET",0),z(c,"SEEK_CUR",1),z(c,"SEEK_END",2),z(c,"SEEK_DATA",3),z(c,"SEEK_HOLE",4),z(c,"READABLE",1),z(c,"WRITABLE",4),c.$attr_reader("eof"),c.$attr_accessor("read_proc","sync","tty","write_proc"),M(c,"$initialize",function(f,h){var R=this;return h==null&&(h="r"),R.fd=f,R.flags=h,R.eof=!1,y(h["$include?"]("r"))&&g(h["$match?"](/[wa+]/))?R.closed="write":y(h["$match?"](/[wa]/))&&g(h["$match?"](/[r+]/))?R.closed="read":o},-2),M(c,"$fileno",D("fd")),M(c,"$tty?",function(){var f=this;return f.tty==!0}),M(c,"$write",function(f){var h=this;return h.write_proc(f),f.$size()}),M(c,"$flush",X(o)),M(c,"$<<",function(f){var h=this;return h.$write(f),h}),M(c,"$print",function(f){var h,R,d=this;U[","]==null&&(U[","]=o),h=j(arguments),R=h;for(var l=0,u=R.length;l<u;l++)R[l]=b.$String(R[l]);return d.$write(R.join(U[","])),o},-1),M(c,"$puts",function(f){var h,R,d=this;h=j(arguments),R=h;var l;if(R.length===0)return d.$write(`
`),o;for(var u=0,i=R.length;u<i;u++)if(R[u].$$is_array){var n=R[u].$flatten();n.length>0&&F(d,"puts",J(n))}else R[u].$$is_string?l=R[u].valueOf():l=b.$String(R[u]),l.endsWith(`
`)||(l+=`
`),d.$write(l);return o},-1),M(c,"$getc",function(){var f=this,h=o,R=o,d=o;f.read_buffer=y(h=f.read_buffer)?h:"",R="";do if(f.read_buffer=H(f.read_buffer,R),B(f.read_buffer,""))return d=f.read_buffer["$[]"](0),f.read_buffer=f.read_buffer["$[]"](K(1,-1,!1)),d;while(y(R=f.$sysread_noraise(1)));return o}),M(c,"$getbyte",function(){var f,h=this;return f=h.$getc(),f===o||f==null?o:f.$ord()}),M(c,"$readbyte",function(){var f=this;return f.$readchar().$ord()}),M(c,"$readchar",function(){var f=this,h=o;return y(h=f.$getc())?h:b.$raise(A("EOFError"),"end of file reached")}),M(c,"$readline",function(f){var h,R,d=this,l=o;return h=j(arguments),R=h,y(l=F(d,"gets",J(R)))?l:b.$raise(A("EOFError"),"end of file reached")},-1),M(c,"$gets",function(f,h,R){var d,l,u=this,i=o,n=o,t=o,$=o,r=o,a=o;U["/"]==null&&(U["/"]=o),f==null&&(f=!1),h==null&&(h=o),R==null&&(R=k([],{})),y(f.$$is_number)&&g(h)&&(d=[!1,f,h],f=d[0],h=d[1],R=d[2]),y(f.$$is_hash)&&g(h)&&I(R,k([],{}))?(d=[!1,o,f],f=d[0],h=d[1],R=d[2]):y(h.$$is_hash)&&I(R,k([],{}))&&(d=[f,o,h],f=d[0],h=d[1],R=d[2]),i=f,I(f,!1)&&(f=U["/"]),I(f,"")&&(f=/\r?\n\r?\n/),f=y(n=f)?n:"",I(i,"")||(f=f.$to_str()),t=I(i,"")?2:f.$length(),I(f," ")&&(f=/ /),u.read_buffer=y(n=u.read_buffer)?n:"",$="",r=o;do if(u.read_buffer=H(u.read_buffer,$),B(f,"")&&y(y(f.$$is_regexp)?u.read_buffer["$match?"](f):u.read_buffer["$include?"](f))){a=u.read_buffer,l=u.read_buffer.$split(f,2),d=V(l),r=d[0]==null?o:d[0],u.read_buffer=d[1]==null?o:d[1],B(r,a)&&(r=H(r,a["$[]"](r.$length(),t)));break}while(y($=u.$sysread_noraise(I(f,"")?65536:1)));return y(r)||(d=[y(n=u.read_buffer)?n:"",""],r=d[0],u.read_buffer=d[1],I(r,"")&&(r=o)),y(r)&&(y(h)&&(r=r["$[]"](e.Range.$new(0,h,!0)),u.read_buffer=H(r["$[]"](e.Range.$new(h,-1,!1)),u.read_buffer)),y(R["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),I(i,"")&&(r=r.$sub(/^[\r\n]+/,""))),I(i,!1)&&(U._=r),r},-1),M(c,"$sysread",function(f){var h=this,R=o;return y(R=h.read_proc(f))?R:(h.eof=!0,b.$raise(A("EOFError"),"end of file reached"))}),M(c,"$sysread_noraise",function(f){var h=this;try{return h.$sysread(f)}catch(R){if(e.rescue(R,[A("EOFError")]))try{return o}finally{e.pop_exception()}else throw R}}),M(c,"$readpartial",function(f){var h,R=this,d=o,l=o,u=o;return R.read_buffer=y(d=R.read_buffer)?d:"",l=R.$sysread(f),h=[H(R.read_buffer,y(d=l)?d:""),""],u=h[0],R.read_buffer=h[1],I(u,"")&&(u=o),u}),M(c,"$read",function(f){var h,R=this,d=o,l=o,u=o;f==null&&(f=o),R.read_buffer=y(d=R.read_buffer)?d:"",l="",u=o;do if(R.read_buffer=H(R.read_buffer,l),y(f)&&y(v(R.read_buffer.$length(),f)))return h=[R.read_buffer["$[]"](e.Range.$new(0,f,!0)),R.read_buffer["$[]"](e.Range.$new(f,-1,!1))],u=h[0],R.read_buffer=h[1],u;while(y(l=R.$sysread_noraise(y(d=f)?d:65536)));return h=[R.read_buffer,""],u=h[0],R.read_buffer=h[1],u},-1),M(c,"$readlines",function(f){var h=this;return U["/"]==null&&(U["/"]=o),f==null&&(f=U["/"]),h.$each_line(f).$to_a()},-1),M(c,"$each",function m(f,h){var R=m.$$p||o,d,l,u,i=this,n=o;if(U["/"]==null&&(U["/"]=o),m.$$p=null,d=j(arguments),d.length>0&&(l=d.shift()),l==null&&(l=U["/"]),u=d,R===o)return F(i,"enum_for",["each",l].concat(J(u)));for(;y(n=F(i,"gets",[l].concat(J(u))));)e.yield1(R,n);return i},-1),M(c,"$each_byte",function m(){var f=m.$$p||o,h=this,R=o;if(m.$$p=null,f===o)return h.$enum_for("each_byte");for(;y(R=h.$getbyte());)e.yield1(f,R);return h}),M(c,"$each_char",function m(){var f=m.$$p||o,h=this,R=o;if(m.$$p=null,f===o)return h.$enum_for("each_char");for(;y(R=h.$getc());)e.yield1(f,R);return h}),M(c,"$close",x("closed","both")),M(c,"$close_read",function(){var f=this;return I(f.closed,"write")?f.closed="both":f.closed="read"}),M(c,"$close_write",function(){var f=this;return I(f.closed,"read")?f.closed="both":f.closed="write"}),M(c,"$closed?",function(){var f=this;return f.closed["$=="]("both")}),M(c,"$closed_read?",function(){var f=this,h=o;return y(h=f.closed["$=="]("read"))?h:f.closed["$=="]("both")}),M(c,"$closed_write?",function(){var f=this,h=o;return y(h=f.closed["$=="]("write"))?h:f.closed["$=="]("both")}),M(c,"$check_writable",function(){var f=this;return y(f["$closed_write?"]())?b.$raise(A("IOError"),"not opened for writing"):o}),M(c,"$check_readable",function(){var f=this;return y(f["$closed_read?"]())?b.$raise(A("IOError"),"not opened for reading"):o}),w(c,"each_line","each"),w(c,"eof?","eof")})("::",null),z("::","STDIN",U.stdin=A("IO").$new(0,"r")),z("::","STDOUT",U.stdout=A("IO").$new(1,"w")),z("::","STDERR",U.stderr=A("IO").$new(2,"w"));var N=e.global.console;return A("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(L){process.stdout.write(L)}:function(L){N.log(L)}),A("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(L){process.stderr.write(L)}:function(L){N.warn(L)}),T=[function(L){var S=prompt();return S!==null?S+`
`:o}],F(A("STDIN"),"read_proc=",T),T[T.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var C=e.module,z=e.const_set,g=[],y=e.nil,M=e.$$$;return function(D,X){var j=C(D,"Opal"),b=[j].concat(X),U=e.$r(b);return z(j,"REGEXP_START","^"),z(j,"REGEXP_END","$"),z(j,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),z(j,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),z(j,"INLINE_IDENTIFIER_REGEXP",U("Regexp").$new("[^"+M(j,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+M(j,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),z(j,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),z(j,"CONST_NAME_REGEXP",U("Regexp").$new(""+M(j,"REGEXP_START")+"(::)?[A-Z][^"+M(j,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+M(j,"REGEXP_END")))}(g[0],g)};Opal.modules["opal/mini"]=function(e){var C=e.Object,z=e.nil;return C.$require("opal/base"),C.$require("corelib/nil"),C.$require("corelib/boolean"),C.$require("corelib/string"),C.$require("corelib/comparable"),C.$require("corelib/enumerable"),C.$require("corelib/enumerator"),C.$require("corelib/array"),C.$require("corelib/hash"),C.$require("corelib/number"),C.$require("corelib/range"),C.$require("corelib/proc"),C.$require("corelib/method"),C.$require("corelib/regexp"),C.$require("corelib/variables"),C.$require("corelib/io"),C.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var C=e.coerce_to,z=e.module,g=e.slice,y=e.truthy,M=e.eqeq,D=e.Opal,X=e.Kernel,j=e.gvars,b=e.def,U=e.alias,F=e.nil,J=e.$$$;return function(H){var B=z(H,"Kernel");return b(B,"$format",function(k,I){var V,v,x=F;j.DEBUG==null&&(j.DEBUG=F),V=g(arguments,1),v=V,M(v.$length(),1)&&y(v["$[]"](0)["$respond_to?"]("to_ary"))&&(x=D["$coerce_to?"](v["$[]"](0),J("Array"),"to_ary"),y(x["$nil?"]())||(v=x.$to_a()));var w="",T=0,o,A,N=k.length,L,S,c,E,m,f,h,R,d,l,u,i,n,t=1,$=0,r,a=0,s=1,p=2,G=4,Z=8,ie=16,ne=32,se=64,O=128;function oe(){r&ne&&X.$raise(J("ArgumentError"),"flag after width"),r&O&&X.$raise(J("ArgumentError"),"flag after precision")}function ue(){r&ne&&X.$raise(J("ArgumentError"),"width given twice"),r&O&&X.$raise(J("ArgumentError"),"width after precision")}function te(_){return _>=v.length&&X.$raise(J("ArgumentError"),"too few arguments"),v[_]}function $e(){switch($){case-1:X.$raise(J("ArgumentError"),"unnumbered("+t+") mixed with numbered");case-2:X.$raise(J("ArgumentError"),"unnumbered("+t+") mixed with named")}return $=t++,te($-1)}function re(_){return $>0&&X.$raise(J("ArgumentError"),"numbered("+_+") after unnumbered("+$+")"),$===-2&&X.$raise(J("ArgumentError"),"numbered("+_+") after named"),_<1&&X.$raise(J("ArgumentError"),"invalid index - "+_+"$"),$=-1,te(_-1)}function P(){return n===void 0?$e():n}function W(_){for(var q,Y="";;A++){if(A===N&&X.$raise(J("ArgumentError"),"malformed format string - %*[0-9]"),k.charCodeAt(A)<48||k.charCodeAt(A)>57)return A--,q=parseInt(Y,10)||0,q>2147483647&&X.$raise(J("ArgumentError"),""+_+" too big"),q;Y+=k.charAt(A)}}function ee(_){var q,Y=W(_);return k.charAt(A+1)==="$"?(A++,q=re(Y)):q=$e(),q.$to_int()}for(A=k.indexOf("%");A!==-1;A=k.indexOf("%",A)){switch(S=void 0,r=a,E=-1,m=-1,n=void 0,o=A,A++,k.charAt(A)){case"%":T=A;case"":case`
`:case"\0":A++;continue}e:for(;A<N;A++)switch(k.charAt(A)){case" ":oe(),r|=ie;continue e;case"#":oe(),r|=s;continue e;case"+":oe(),r|=G;continue e;case"-":oe(),r|=p;continue e;case"0":oe(),r|=Z;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(f=W("width"),k.charAt(A+1)==="$"){if(A+2===N){S="%",A++;break e}n!==void 0&&X.$raise(J("ArgumentError"),"value given twice - %"+f+"$"),n=re(f),A++}else ue(),r|=ne,E=f;continue e;case"<":case"{":for(R=k.charAt(A)==="<"?">":"}",h="",A++;;A++){if(A===N&&X.$raise(J("ArgumentError"),"malformed name - unmatched parenthesis"),k.charAt(A)===R){if($>0&&X.$raise(J("ArgumentError"),"named "+h+" after unnumbered("+$+")"),$===-1&&X.$raise(J("ArgumentError"),"named "+h+" after numbered"),$=-2,(v[0]===void 0||!v[0].$$is_hash)&&X.$raise(J("ArgumentError"),"one hash required"),n=v[0].$fetch(h),R===">")continue e;if(S=n.toString(),m!==-1&&(S=S.slice(0,m)),r&p)for(;S.length<E;)S=S+" ";else for(;S.length<E;)S=" "+S;break e}h+=k.charAt(A)}case"*":A++,ue(),r|=ne,E=ee("width"),E<0&&(r|=p,E=-E);continue e;case".":if(r&O&&X.$raise(J("ArgumentError"),"precision given twice"),r|=se|O,m=0,A++,k.charAt(A)==="*"){A++,m=ee("precision"),m<0&&(r&=~se);continue e}m=W("precision");continue e;case"d":case"i":case"u":if(L=X.$Integer(P()),L>=0){for(S=L.toString();S.length<m;)S="0"+S;if(r&p)for((r&G||r&ie)&&(S=(r&G?"+":" ")+S);S.length<E;)S=S+" ";else if(r&Z&&m===-1){for(;S.length<E-(r&G||r&ie?1:0);)S="0"+S;(r&G||r&ie)&&(S=(r&G?"+":" ")+S)}else for((r&G||r&ie)&&(S=(r&G?"+":" ")+S);S.length<E;)S=" "+S}else{for(S=(-L).toString();S.length<m;)S="0"+S;if(r&p)for(S="-"+S;S.length<E;)S=S+" ";else if(r&Z&&m===-1){for(;S.length<E-1;)S="0"+S;S="-"+S}else for(S="-"+S;S.length<E;)S=" "+S}break e;case"b":case"B":case"o":case"x":case"X":switch(k.charAt(A)){case"b":case"B":d=2,l="0b",u=/^1+/,i="1";break;case"o":d=8,l="0",u=/^3?7+/,i="7";break;case"x":case"X":d=16,l="0x",u=/^f+/,i="f";break}if(L=X.$Integer(P()),L>=0){for(S=L.toString(d);S.length<m;)S="0"+S;if(r&p)for((r&G||r&ie)&&(S=(r&G?"+":" ")+S),r&s&&L!==0&&(S=l+S);S.length<E;)S=S+" ";else if(r&Z&&m===-1){for(;S.length<E-(r&G||r&ie?1:0)-(r&s&&L!==0?l.length:0);)S="0"+S;r&s&&L!==0&&(S=l+S),(r&G||r&ie)&&(S=(r&G?"+":" ")+S)}else for(r&s&&L!==0&&(S=l+S),(r&G||r&ie)&&(S=(r&G?"+":" ")+S);S.length<E;)S=" "+S}else if(r&G||r&ie){for(S=(-L).toString(d);S.length<m;)S="0"+S;if(r&p)for(r&s&&(S=l+S),S="-"+S;S.length<E;)S=S+" ";else if(r&Z&&m===-1){for(;S.length<E-1-(r&s?2:0);)S="0"+S;r&s&&(S=l+S),S="-"+S}else for(r&s&&(S=l+S),S="-"+S;S.length<E;)S=" "+S}else{for(S=(L>>>0).toString(d).replace(u,i);S.length<m-2;)S=i+S;if(r&p)for(S=".."+S,r&s&&(S=l+S);S.length<E;)S=S+" ";else if(r&Z&&m===-1){for(;S.length<E-2-(r&s?l.length:0);)S=i+S;S=".."+S,r&s&&(S=l+S)}else for(S=".."+S,r&s&&(S=l+S);S.length<E;)S=" "+S}k.charAt(A)===k.charAt(A).toUpperCase()&&(S=S.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(L=X.$Float(P()),L>=0||isNaN(L)){if(L===1/0)S="Inf";else switch(k.charAt(A)){case"f":S=L.toFixed(m===-1?6:m);break;case"e":case"E":S=L.toExponential(m===-1?6:m);break;case"g":case"G":S=L.toExponential(),c=parseInt(S.split("e")[1],10),c<-4||c>=(m===-1?6:m)||(S=L.toPrecision(m===-1?r&s?6:void 0:m));break}if(r&p)for((r&G||r&ie)&&(S=(r&G?"+":" ")+S);S.length<E;)S=S+" ";else if(r&Z&&L!==1/0&&!isNaN(L)){for(;S.length<E-(r&G||r&ie?1:0);)S="0"+S;(r&G||r&ie)&&(S=(r&G?"+":" ")+S)}else for((r&G||r&ie)&&(S=(r&G?"+":" ")+S);S.length<E;)S=" "+S}else{if(L===-1/0)S="Inf";else switch(k.charAt(A)){case"f":S=(-L).toFixed(m===-1?6:m);break;case"e":case"E":S=(-L).toExponential(m===-1?6:m);break;case"g":case"G":S=(-L).toExponential(),c=parseInt(S.split("e")[1],10),c<-4||c>=(m===-1?6:m)||(S=(-L).toPrecision(m===-1?r&s?6:void 0:m));break}if(r&p)for(S="-"+S;S.length<E;)S=S+" ";else if(r&Z&&L!==-1/0){for(;S.length<E-1;)S="0"+S;S="-"+S}else for(S="-"+S;S.length<E;)S=" "+S}k.charAt(A)===k.charAt(A).toUpperCase()&&L!==1/0&&L!==-1/0&&!isNaN(L)&&(S=S.toUpperCase()),S=S.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":X.$raise(J("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(L=P(),L["$respond_to?"]("to_ary")&&(L=L.$to_ary()[0]),L["$respond_to?"]("to_str")?S=L.$to_str():S=String.fromCharCode(C(L,J("Integer"),"to_int")),S.length!==1&&X.$raise(J("ArgumentError"),"%c requires a character"),r&p)for(;S.length<E;)S=S+" ";else for(;S.length<E;)S=" "+S;break e;case"p":if(S=P().$inspect(),m!==-1&&(S=S.slice(0,m)),r&p)for(;S.length<E;)S=S+" ";else for(;S.length<E;)S=" "+S;break e;case"s":if(S=P().$to_s(),m!==-1&&(S=S.slice(0,m)),r&p)for(;S.length<E;)S=S+" ";else for(;S.length<E;)S=" "+S;break e;default:X.$raise(J("ArgumentError"),"malformed format string - %"+k.charAt(A))}S===void 0&&X.$raise(J("ArgumentError"),"malformed format string - %"),w+=k.slice(T,o)+S,T=A+1}return j.DEBUG&&$>=0&&t<v.length&&X.$raise(J("ArgumentError"),"too many arguments for format string"),w+k.slice(T)},-2),U(B,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var C=e.klass,z=e.hash2,g=e.rb_plus,y=e.truthy,M=e.send,D=e.defs,X=e.eqeq,j=e.def,b=e.return_ivar,U=e.return_val,F=e.slice,J=e.Kernel,H=e.Opal,B=e.rb_lt,K,k=e.top,I=[],V=e.$r(I),v=e.nil,x=e.$$$;return k.$require("corelib/string"),function(w,T){var o=C(w,T,"Encoding"),A=o.$$prototype;return A.name=A.dummy=v,D(o,"$register",function N(L,S){var c=N.$$p||v,E=this,m=v,f=v,h=v,R=v,d=v,l=v;return N.$$p=null,S==null&&(S=z([],{})),m=g([L],y(f=S["$[]"]("aliases"))?f:[]),h=y(f=S["$[]"]("ascii"))&&f,R=y(f=S["$[]"]("dummy"))&&f,y(S["$[]"]("inherits"))?(d=S["$[]"]("inherits").$clone(),d.$initialize(L,m,h,R)):d=E.$new(L,m,h,R),c!==v&&M(d,"instance_eval",[],c.$to_proc()),l=e.encodings,M(m,"each",[],function u(i){var n=u.$$s==null?this:u.$$s;return i==null&&(i=v),n.$const_set(i.$tr("-","_"),d),l[i]=d},{$$s:E})},-2),D(o,"$find",function(L){var S=this;return X(L,"default_external")?S.$default_external():e.find_encoding(L)}),o.$singleton_class().$attr_accessor("default_external"),o.$attr_reader("name","names"),j(o,"$initialize",function(L,S,c,E){var m=this;return m.name=L,m.names=S,m.ascii=c,m.dummy=E}),j(o,"$ascii_compatible?",b("ascii")),j(o,"$dummy?",b("dummy")),j(o,"$binary?",U(!1)),j(o,"$to_s",b("name")),j(o,"$inspect",function(){var L=this;return"#<Encoding:"+L.name+(y(L.dummy)?" (dummy)":v)+">"}),j(o,"$charsize",function(L){for(var S=0,c=0,E=L.length;c<E;c++){var m=L.charCodeAt(c);m>=55296&&m<=56319||S++}return S}),j(o,"$each_char",function N(L){var S=N.$$p||v;N.$$p=null;for(var c="",E=0,m=L.length;E<m;E++){var f=L.charCodeAt(E),h=L.charAt(E);if(f>=56320&&f<=57343){c=h;continue}else f>=55296&&f<=56319&&(h=c+h);L.encoding.name!="UTF-8"&&(h=new String(h),h.encoding=L.encoding),e.yield1(S,h)}}),j(o,"$each_byte",function(L){var S,c;return S=F(arguments),c=S,J.$raise(x("NotImplementedError"))},-1),j(o,"$bytesize",function(L){var S,c;return S=F(arguments),c=S,J.$raise(x("NotImplementedError"))},-1),C("::",x("StandardError"),"EncodingError"),C("::",x("EncodingError"),"CompatibilityError"),v}("::",null),M(x("Encoding"),"register",["UTF-8",z(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})],function w(){var T=w.$$s==null?this:w.$$s;return j(T,"$each_byte",function o(A){var N=o.$$p||v;o.$$p=null;for(var L=1/0,S,c=A.length,E=null,m=0;m<c;++m){if(S=A.charCodeAt(m),S>55295&&S<57344){if(!E){if(S>56319){(L-=3)>-1&&(e.yield1(N,239),e.yield1(N,191),e.yield1(N,189));continue}else if(m+1===c){(L-=3)>-1&&(e.yield1(N,239),e.yield1(N,191),e.yield1(N,189));continue}E=S;continue}if(S<56320){(L-=3)>-1&&(e.yield1(N,239),e.yield1(N,191),e.yield1(N,189)),E=S;continue}S=(E-55296<<10|S-56320)+65536}else E&&(L-=3)>-1&&(e.yield1(N,239),e.yield1(N,191),e.yield1(N,189));if(E=null,S<128){if((L-=1)<0)break;e.yield1(N,S)}else if(S<2048){if((L-=2)<0)break;e.yield1(N,S>>6|192),e.yield1(N,S&63|128)}else if(S<65536){if((L-=3)<0)break;e.yield1(N,S>>12|224),e.yield1(N,S>>6&63|128),e.yield1(N,S&63|128)}else if(S<1114112){if((L-=4)<0)break;e.yield1(N,S>>18|240),e.yield1(N,S>>12&63|128),e.yield1(N,S>>6&63|128),e.yield1(N,S&63|128)}}}),j(T,"$bytesize",function(A){return A.$bytes().$length()})},{$$s:k}),M(x("Encoding"),"register",["UTF-16LE"],function w(){var T=w.$$s==null?this:w.$$s;return j(T,"$each_byte",function o(A){var N=o.$$p||v;o.$$p=null;for(var L=0,S=A.length;L<S;L++){var c=A.charCodeAt(L);e.yield1(N,c&255),e.yield1(N,c>>8)}}),j(T,"$bytesize",function(A){return A.length*2})},{$$s:k}),M(x("Encoding"),"register",["UTF-16BE",z(["inherits"],{inherits:x(x("Encoding"),"UTF_16LE")})],function w(){var T=w.$$s==null?this:w.$$s;return j(T,"$each_byte",function o(A){var N=o.$$p||v;o.$$p=null;for(var L=0,S=A.length;L<S;L++){var c=A.charCodeAt(L);e.yield1(N,c>>8),e.yield1(N,c&255)}})},{$$s:k}),M(x("Encoding"),"register",["UTF-32LE"],function w(){var T=w.$$s==null?this:w.$$s;return j(T,"$each_byte",function o(A){var N=o.$$p||v;o.$$p=null;for(var L=0,S=A.length;L<S;L++){var c=A.charCodeAt(L);e.yield1(N,c&255),e.yield1(N,c>>8),e.yield1(N,0),e.yield1(N,0)}}),j(T,"$bytesize",function(A){return A.length*4})},{$$s:k}),M(x("Encoding"),"register",["UTF-32BE",z(["inherits"],{inherits:x(x("Encoding"),"UTF_32LE")})],function w(){var T=w.$$s==null?this:w.$$s;return j(T,"$each_byte",function o(A){var N=o.$$p||v;o.$$p=null;for(var L=0,S=A.length;L<S;L++){var c=A.charCodeAt(L);e.yield1(N,0),e.yield1(N,0),e.yield1(N,c>>8),e.yield1(N,c&255)}})},{$$s:k}),M(x("Encoding"),"register",["ASCII-8BIT",z(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})],function w(){var T=w.$$s==null?this:w.$$s;return j(T,"$each_char",function o(A){var N=o.$$p||v;o.$$p=null;for(var L=0,S=A.length;L<S;L++){var c=new String(A.charAt(L));c.encoding=A.encoding,e.yield1(N,c)}}),j(T,"$charsize",function(A){return A.length}),j(T,"$each_byte",function o(A){var N=o.$$p||v;o.$$p=null;for(var L=0,S=A.length;L<S;L++){var c=A.charCodeAt(L);e.yield1(N,c&255)}}),j(T,"$bytesize",function(A){return A.length}),j(T,"$binary?",U(!0))},{$$s:k}),x("Encoding").$register("ISO-8859-1",z(["aliases","ascii","inherits"],{aliases:["ISO8859-1"],ascii:!0,inherits:x(x("Encoding"),"ASCII_8BIT")})),x("Encoding").$register("US-ASCII",z(["aliases","ascii","inherits"],{aliases:["ASCII"],ascii:!0,inherits:x(x("Encoding"),"ASCII_8BIT")})),function(w,T){var o=C(w,T,"String"),A=o.$$prototype;return A.internal_encoding=A.bytes=A.encoding=v,o.$attr_reader("encoding"),o.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",v),e.prop(String.prototype,"encoding",x(x("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",x(x("Encoding"),"UTF_8")),j(o,"$b",function(){var L=this;return L.$dup().$force_encoding("binary")}),j(o,"$bytesize",function(){var L=this;return L.internal_encoding.$bytesize(L)}),j(o,"$each_byte",function N(){var L=N.$$p||v,S=this;return N.$$p=null,L===v?M(S,"enum_for",["each_byte"],function c(){var E=c.$$s==null?this:c.$$s;return E.$bytesize()},{$$s:S}):(M(S.internal_encoding,"each_byte",[S],L.$to_proc()),S)}),j(o,"$bytes",function(){var L=this,S=v;return typeof L=="string"?new String(L).$each_byte().$to_a():(L.bytes=y(S=L.bytes)?S:L.$each_byte().$to_a(),L.bytes.$dup())}),j(o,"$each_char",function N(){var L=N.$$p||v,S=this;return N.$$p=null,L===v?M(S,"enum_for",["each_char"],function c(){var E=c.$$s==null?this:c.$$s;return E.$length()},{$$s:S}):(M(S.encoding,"each_char",[S],L.$to_proc()),S)}),j(o,"$chars",function N(){var L=N.$$p||v,S=this;return N.$$p=null,y(L)?M(S,"each_char",[],L.$to_proc()):S.$each_char().$to_a()}),j(o,"$each_codepoint",function N(){var L=N.$$p||v,S=this;if(N.$$p=null,L===v)return S.$enum_for("each_codepoint");for(var c=0,E=S.length;c<E;c++)e.yield1(L,S.codePointAt(c));return S}),j(o,"$codepoints",function N(){var L=N.$$p||v,S=this;return N.$$p=null,L!==v?M(S,"each_codepoint",[],L.$to_proc()):S.$each_codepoint().$to_a()}),j(o,"$encode",function(L){var S=this;return e.enc(S,L)}),j(o,"$force_encoding",function(L){var S=this,c=S;return L===c.encoding||(L=H["$coerce_to!"](L,x("String"),"to_s"),L=x("Encoding").$find(L),L===c.encoding)||(c=e.set_encoding(c,L)),c}),j(o,"$getbyte",function(L){var S=this,c=v;return c=S.$bytes(),L=H["$coerce_to!"](L,x("Integer"),"to_int"),y(B(c.$length(),L))?v:c["$[]"](L)}),j(o,"$initialize_copy",function(L){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),j(o,"$valid_encoding?",U(!0))}("::",null),K=[x(V("Encoding"),"UTF_8")],M(x("Encoding"),"default_external=",K),K[K.length-1]};Opal.modules["corelib/math"]=function(e){var C=e.type_error,z=e.module,g=e.const_set,y=e.Class,M=e.slice,D=e.Kernel,X=e.defs,j=e.truthy,b=e.send,U=e.def,F=e.rb_minus,J=e.eqeqeq,H=e.rb_divide,B=[],K=e.nil,k=e.$$$;return function(I,V){var v=z(I,"Math"),x=[v].concat(V),w=e.$r(x);return g(v,"E",Math.E),g(v,"PI",Math.PI),g(v,"DomainError",y.$new(k("StandardError"))),X(v,"$checked",function(o,A){var N,L;if(N=M(arguments,1),L=N,isNaN(L[0])||L.length==2&&isNaN(L[1]))return NaN;var S=Math[o].apply(null,L);return isNaN(S)&&D.$raise(w("DomainError"),'Numerical argument is out of domain - "'+o+'"'),S},-2),X(v,"$float!",function(o){try{return D.$Float(o)}catch(A){if(e.rescue(A,[k("ArgumentError")]))try{return D.$raise(C(o,k("Float")))}finally{e.pop_exception()}else throw A}}),X(v,"$integer!",function(o){try{return D.$Integer(o)}catch(A){if(e.rescue(A,[k("ArgumentError")]))try{return D.$raise(C(o,k("Integer")))}finally{e.pop_exception()}else throw A}}),v.$module_function(),j(typeof Math.erf!="undefined")||e.prop(Math,"erf",function(T){var o=.254829592,A=-.284496736,N=1.421413741,L=-1.453152027,S=1.061405429,c=.3275911,E=1;T<0&&(E=-1),T=Math.abs(T);var m=1/(1+c*T),f=1-((((S*m+L)*m+N)*m+A)*m+o)*m*Math.exp(-T*T);return E*f}),j(typeof Math.erfc!="undefined")||e.prop(Math,"erfc",function(T){var o=Math.abs(T),A=1/(.5*o+1),N=A*.17087277+-.82215223,L=A*N+1.48851587,S=A*L+-1.13520398,c=A*S+.27886807,E=A*c+-.18628806,m=A*E+.09678418,f=A*m+.37409196,h=A*f+1.00002368,R=A*h,d=-o*o-1.26551223+R,l=A*Math.exp(d);return T<0?2-l:l}),b(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function T(o){var A=T.$$s==null?this:T.$$s;return o==null&&(o=K),b(A,"define_method",[o],function(L){return L==null&&(L=K),k("Math").$checked(o,k("Math")["$float!"](L))})},{$$s:v}),U(v,"$atan2",function(o,A){return k("Math").$checked("atan2",k("Math")["$float!"](o),k("Math")["$float!"](A))}),U(v,"$hypot",function(o,A){return k("Math").$checked("hypot",k("Math")["$float!"](o),k("Math")["$float!"](A))}),U(v,"$frexp",function(o){if(o=w("Math")["$float!"](o),isNaN(o))return[NaN,0];var A=Math.floor(Math.log(Math.abs(o))/Math.log(2))+1,N=o/Math.pow(2,A);return[N,A]}),U(v,"$gamma",function(o){o=w("Math")["$float!"](o);var A,N,L,S,c,E,m,f,h,R=4.7421875,d=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(o))return NaN;if(o===0&&1/o<0)return-1/0;if((o===-1||o===-1/0)&&D.$raise(w("DomainError"),'Numerical argument is out of domain - "gamma"'),w("Integer")["$==="](o)){if(o<=0)return isFinite(o)?1/0:NaN;if(o>171)return 1/0;for(S=o-2,c=o-1;S>1;)c*=S,S--;return c==0&&(c=1),c}if(o<.5)return Math.PI/(Math.sin(Math.PI*o)*k("Math").$gamma(F(1,o)));if(o>=171.35)return 1/0;if(o>85)return E=o*o,m=E*o,f=m*o,h=f*o,Math.sqrt(2*Math.PI/o)*Math.pow(o/Math.E,o)*(1+1/(12*o)+1/(288*E)-139/(51840*m)-571/(2488320*f)+163879/(209018880*h)+5246819/(75246796800*h*o));for(o-=1,L=d[0],A=1;A<d.length;++A)L+=d[A]/(o+A);return N=o+R+.5,Math.sqrt(2*Math.PI)*Math.pow(N,o+.5)*Math.exp(-N)*L}),U(v,"$ldexp",function(o,A){return o=w("Math")["$float!"](o),A=w("Math")["$integer!"](A),isNaN(A)&&D.$raise(k("RangeError"),"float NaN out of range of integer"),o*Math.pow(2,A)}),U(v,"$lgamma",function(o){return o==-1?[1/0,1]:[Math.log(Math.abs(k("Math").$gamma(o))),k("Math").$gamma(o)<0?-1:1]}),U(v,"$log",function(o,A){return J(k("String"),o)&&D.$raise(C(o,k("Float"))),j(A==null)?k("Math").$checked("log",k("Math")["$float!"](o)):(J(k("String"),A)&&D.$raise(C(A,k("Float"))),H(k("Math").$checked("log",k("Math")["$float!"](o)),k("Math").$checked("log",k("Math")["$float!"](A))))},-2),U(v,"$log10",function(o){return J(k("String"),o)&&D.$raise(C(o,k("Float"))),k("Math").$checked("log10",k("Math")["$float!"](o))}),U(v,"$log2",function(o){return J(k("String"),o)&&D.$raise(C(o,k("Float"))),k("Math").$checked("log2",k("Math")["$float!"](o))}),U(v,"$tan",function(o){return o=k("Math")["$float!"](o),j(o["$infinite?"]())?k(k("Float"),"NAN"):k("Math").$checked("tan",k("Math")["$float!"](o))})}("::",B)};Opal.modules["corelib/complex/base"]=function(e){var C=e.module,z=e.truthy,g=e.def,y=e.klass,M=[],D=e.nil;return function(X,j){var b=C(X,"Kernel"),U=[b].concat(j),F=e.$r(U);return g(b,"$Complex",function(H,B){return B==null&&(B=D),z(B)?F("Complex").$new(H,B):F("Complex").$new(H,0)},-2)}("::",M),function(X,j,b){var U=y(X,j,"String"),F=[U].concat(b),J=e.$r(F);return g(U,"$to_c",function(){var B=this;return J("Complex").$from_string(B)})}("::",null,M)};Opal.modules["corelib/complex"]=function(e){var C=e.klass,z=e.truthy,g=e.eqeqeq,y=e.Kernel,M=e.defs,D=e.rb_times,X=e.def,j=e.rb_plus,b=e.rb_minus,U=e.rb_divide,F=e.eqeq,J=e.to_ary,H=e.rb_gt,B=e.neqeq,K=e.return_val,k=e.const_set,I=e.alias,V=e.top,v=[],x=e.nil,w=e.$$$;return V.$require("corelib/numeric"),V.$require("corelib/complex/base"),function(T,o,A){var N=C(T,o,"Complex"),L=[N].concat(A),S=e.$r(L),c=N.$$prototype;return c.real=c.imag=x,M(N,"$rect",function(m,f){var h=this;return f==null&&(f=0),g(w("Numeric"),m)&&z(m["$real?"]())&&g(w("Numeric"),f)&&z(f["$real?"]())||y.$raise(w("TypeError"),"not a real"),h.$new(m,f)},-2),M(N,"$polar",function(m,f){var h=this;return f==null&&(f=0),g(w("Numeric"),m)&&z(m["$real?"]())&&g(w("Numeric"),f)&&z(f["$real?"]())||y.$raise(w("TypeError"),"not a real"),h.$new(D(m,w("Math").$cos(f)),D(m,w("Math").$sin(f)))},-2),N.$attr_reader("real","imag"),X(N,"$initialize",function(m,f){var h=this;return f==null&&(f=0),h.real=m,h.imag=f,h.$freeze()},-2),X(N,"$coerce",function(m){var f=this;return g(w("Complex"),m)?[m,f]:g(w("Numeric"),m)&&z(m["$real?"]())?[w("Complex").$new(m,0),f]:y.$raise(w("TypeError"),""+m.$class()+" can't be coerced into Complex")}),X(N,"$==",function(m){var f=this,h=x;return g(w("Complex"),m)?z(h=f.real["$=="](m.$real()))?f.imag["$=="](m.$imag()):h:g(w("Numeric"),m)&&z(m["$real?"]())?z(h=f.real["$=="](m))?f.imag["$=="](0):h:m["$=="](f)}),X(N,"$-@",function(){var m=this;return y.$Complex(m.real["$-@"](),m.imag["$-@"]())}),X(N,"$+",function(m){var f=this;return g(w("Complex"),m)?y.$Complex(j(f.real,m.$real()),j(f.imag,m.$imag())):g(w("Numeric"),m)&&z(m["$real?"]())?y.$Complex(j(f.real,m),f.imag):f.$__coerced__("+",m)}),X(N,"$-",function(m){var f=this;return g(w("Complex"),m)?y.$Complex(b(f.real,m.$real()),b(f.imag,m.$imag())):g(w("Numeric"),m)&&z(m["$real?"]())?y.$Complex(b(f.real,m),f.imag):f.$__coerced__("-",m)}),X(N,"$*",function(m){var f=this;return g(w("Complex"),m)?y.$Complex(b(D(f.real,m.$real()),D(f.imag,m.$imag())),j(D(f.real,m.$imag()),D(f.imag,m.$real()))):g(w("Numeric"),m)&&z(m["$real?"]())?y.$Complex(D(f.real,m),D(f.imag,m)):f.$__coerced__("*",m)}),X(N,"$/",function(m){var f=this;return g(w("Complex"),m)?g(w("Number"),f.real)&&z(f.real["$nan?"]())||g(w("Number"),f.imag)&&z(f.imag["$nan?"]())||g(w("Number"),m.$real())&&z(m.$real()["$nan?"]())||g(w("Number"),m.$imag())&&z(m.$imag()["$nan?"]())?w("Complex").$new(w(w("Float"),"NAN"),w(w("Float"),"NAN")):U(D(f,m.$conj()),m.$abs2()):g(w("Numeric"),m)&&z(m["$real?"]())?y.$Complex(f.real.$quo(m),f.imag.$quo(m)):f.$__coerced__("/",m)}),X(N,"$**",function(m){var f,h,R=this,d=x,l=x,u=x,i=x,n=x,t=x,$=x,r=x,a=x,s=x,p=x;if(F(m,0))return w("Complex").$new(1,0);if(g(w("Complex"),m))return h=R.$polar(),f=J(h),d=f[0]==null?x:f[0],l=f[1]==null?x:f[1],u=m.$real(),i=m.$imag(),n=w("Math").$exp(b(D(u,w("Math").$log(d)),D(i,l))),t=j(D(l,u),D(i,w("Math").$log(d))),w("Complex").$polar(n,t);if(g(w("Integer"),m))if(z(H(m,0))){for($=R,r=$,a=b(m,1);B(a,0);){for(h=a.$divmod(2),f=J(h),s=f[0]==null?x:f[0],p=f[1]==null?x:f[1];F(p,0);)$=y.$Complex(b(D($.$real(),$.$real()),D($.$imag(),$.$imag())),D(D(2,$.$real()),$.$imag())),a=s,h=a.$divmod(2),f=J(h),s=f[0]==null?x:f[0],p=f[1]==null?x:f[1];r=D(r,$),a=b(a,1)}return r}else return U(w("Rational").$new(1,1),R)["$**"](m["$-@"]());else return g(w("Float"),m)||g(w("Rational"),m)?(h=R.$polar(),f=J(h),d=f[0]==null?x:f[0],l=f[1]==null?x:f[1],w("Complex").$polar(d["$**"](m),D(l,m))):R.$__coerced__("**",m)}),X(N,"$abs",function(){var m=this;return w("Math").$hypot(m.real,m.imag)}),X(N,"$abs2",function(){var m=this;return j(D(m.real,m.real),D(m.imag,m.imag))}),X(N,"$angle",function(){var m=this;return w("Math").$atan2(m.imag,m.real)}),X(N,"$conj",function(){var m=this;return y.$Complex(m.real,m.imag["$-@"]())}),X(N,"$denominator",function(){var m=this;return m.real.$denominator().$lcm(m.imag.$denominator())}),X(N,"$eql?",function(m){var f=this,h=x,R=x;return z(h=z(R=S("Complex")["$==="](m))?f.real.$class()["$=="](f.imag.$class()):R)?f["$=="](m):h}),X(N,"$fdiv",function(m){var f=this;return g(w("Numeric"),m)||y.$raise(w("TypeError"),""+m.$class()+" can't be coerced into Complex"),U(f,m)}),X(N,"$finite?",function(){var m=this,f=x;return z(f=m.real["$finite?"]())?m.imag["$finite?"]():f}),X(N,"$hash",function(){var m=this;return"Complex:"+m.real+":"+m.imag}),X(N,"$infinite?",function(){var m=this,f=x;return z(f=m.real["$infinite?"]())?f:m.imag["$infinite?"]()}),X(N,"$inspect",function(){var m=this;return"("+m+")"}),X(N,"$numerator",function(){var m=this,f=x;return f=m.$denominator(),y.$Complex(D(m.real.$numerator(),U(f,m.real.$denominator())),D(m.imag.$numerator(),U(f,m.imag.$denominator())))}),X(N,"$polar",function(){var m=this;return[m.$abs(),m.$arg()]}),X(N,"$rationalize",function(m){var f=this;return arguments.length>1&&y.$raise(w("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),B(f.imag,0)&&y.$raise(w("RangeError"),"can't convert "+f+" into Rational"),f.$real().$rationalize(m)},-1),X(N,"$real?",K(!1)),X(N,"$rect",function(){var m=this;return[m.real,m.imag]}),X(N,"$to_f",function(){var m=this;return F(m.imag,0)||y.$raise(w("RangeError"),"can't convert "+m+" into Float"),m.real.$to_f()}),X(N,"$to_i",function(){var m=this;return F(m.imag,0)||y.$raise(w("RangeError"),"can't convert "+m+" into Integer"),m.real.$to_i()}),X(N,"$to_r",function(){var m=this;return F(m.imag,0)||y.$raise(w("RangeError"),"can't convert "+m+" into Rational"),m.real.$to_r()}),X(N,"$to_s",function(){var m=this,f=x;return f=m.real.$inspect(),f=j(f,g(w("Number"),m.imag)&&z(m.imag["$nan?"]())||z(m.imag["$positive?"]())||z(m.imag["$zero?"]())?"+":"-"),f=j(f,m.imag.$abs().$inspect()),g(w("Number"),m.imag)&&(z(m.imag["$nan?"]())||z(m.imag["$infinite?"]()))&&(f=j(f,"*")),j(f,"i")}),k(L[0],"I",N.$new(0,1)),M(N,"$from_string",function(m){var f=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/,h=m.match(f),R,d,l;function u(){return f.test(m)}function i(){var t=m.match(f),$=t[0];return m=m.slice($.length),$.replace(/_/g,"")}function n(){if(u()){var t=parseFloat(i());if(m[0]==="/")if(m=m.slice(1),u()){var $=parseFloat(i());return y.$Rational(t,$)}else return m="/"+m,t;else return t}else return null}return R=n(),R?(d=n(),d?y.$Complex(R,d):m[0]==="i"?y.$Complex(0,R):y.$Complex(R,0)):m[0]==="i"?y.$Complex(0,1):m[0]==="-"&&m[1]==="i"?y.$Complex(0,-1):m[0]==="+"&&m[1]==="i"?y.$Complex(0,1):y.$Complex(0,0)}),function(E,m){return I(E,"rectangular","rect")}(e.get_singleton_class(N),L),I(N,"arg","angle"),I(N,"conjugate","conj"),I(N,"divide","/"),I(N,"imaginary","imag"),I(N,"magnitude","abs"),I(N,"phase","arg"),I(N,"quo","/"),I(N,"rectangular","rect"),e.udef(N,"$negative?"),e.udef(N,"$positive?"),e.udef(N,"$step"),x}("::",w("Numeric"),v)};Opal.modules["corelib/rational/base"]=function(e){var C=e.module,z=e.def,g=e.klass,y=e.nil,M=e.$$$;return function(D){var X=C(D,"Kernel");return z(X,"$Rational",function(b,U){return U==null&&(U=1),M("Rational").$convert(b,U)},-2)}("::"),function(D,X){var j=g(D,X,"String");return z(j,"$to_r",function(){var U=this;return M("Rational").$from_string(U)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var C=e.klass,z=e.eqeq,g=e.Kernel,y=e.truthy,M=e.rb_lt,D=e.rb_divide,X=e.defs,j=e.eqeqeq,b=e.not,U=e.Opal,F=e.def,J=e.return_ivar,H=e.rb_minus,B=e.rb_times,K=e.rb_plus,k=e.rb_gt,I=e.rb_le,V=e.return_self,v=e.alias,x=e.top,w=e.nil,T=e.$$$;return x.$require("corelib/numeric"),x.$require("corelib/rational/base"),function(o,A){var N=C(o,A,"Rational"),L=N.$$prototype;return L.num=L.den=w,X(N,"$reduce",function(c,E){var m=this,f=w;if(c=c.$to_i(),E=E.$to_i(),z(E,0))g.$raise(T("ZeroDivisionError"),"divided by 0");else if(y(M(E,0)))c=c["$-@"](),E=E["$-@"]();else if(z(E,1))return m.$new(c,E);return f=c.$gcd(E),m.$new(D(c,f),D(E,f))}),X(N,"$convert",function(c,E){var m=this;return(y(c["$nil?"]())||y(E["$nil?"]()))&&g.$raise(T("TypeError"),"cannot convert nil into Rational"),j(T("Integer"),c)&&j(T("Integer"),E)?m.$reduce(c,E):((j(T("Float"),c)||j(T("String"),c)||j(T("Complex"),c))&&(c=c.$to_r()),(j(T("Float"),E)||j(T("String"),E)||j(T("Complex"),E))&&(E=E.$to_r()),y(E["$equal?"](1))&&b(T("Integer")["$==="](c))?U["$coerce_to!"](c,T("Rational"),"to_r"):j(T("Numeric"),c)&&j(T("Numeric"),E)?D(c,E):m.$reduce(c,E))}),F(N,"$initialize",function(c,E){var m=this;return m.num=c,m.den=E,m.$freeze()}),F(N,"$numerator",J("num")),F(N,"$denominator",J("den")),F(N,"$coerce",function(c){var E=this,m=w;return j(T("Rational"),m=c)?[c,E]:j(T("Integer"),m)?[c.$to_r(),E]:j(T("Float"),m)?[c,E.$to_f()]:w}),F(N,"$==",function(c){var E=this,m=w,f=w;return j(T("Rational"),m=c)?y(f=E.num["$=="](c.$numerator()))?E.den["$=="](c.$denominator()):f:j(T("Integer"),m)?y(f=E.num["$=="](c))?E.den["$=="](1):f:j(T("Float"),m)?E.$to_f()["$=="](c):c["$=="](E)}),F(N,"$<=>",function(c){var E=this,m=w;return j(T("Rational"),m=c)?H(B(E.num,c.$denominator()),B(E.den,c.$numerator()))["$<=>"](0):j(T("Integer"),m)?H(E.num,B(E.den,c))["$<=>"](0):j(T("Float"),m)?E.$to_f()["$<=>"](c):E.$__coerced__("<=>",c)}),F(N,"$+",function(c){var E=this,m=w,f=w,h=w;return j(T("Rational"),m=c)?(f=K(B(E.num,c.$denominator()),B(E.den,c.$numerator())),h=B(E.den,c.$denominator()),g.$Rational(f,h)):j(T("Integer"),m)?g.$Rational(K(E.num,B(c,E.den)),E.den):j(T("Float"),m)?K(E.$to_f(),c):E.$__coerced__("+",c)}),F(N,"$-",function(c){var E=this,m=w,f=w,h=w;return j(T("Rational"),m=c)?(f=H(B(E.num,c.$denominator()),B(E.den,c.$numerator())),h=B(E.den,c.$denominator()),g.$Rational(f,h)):j(T("Integer"),m)?g.$Rational(H(E.num,B(c,E.den)),E.den):j(T("Float"),m)?H(E.$to_f(),c):E.$__coerced__("-",c)}),F(N,"$*",function(c){var E=this,m=w,f=w,h=w;return j(T("Rational"),m=c)?(f=B(E.num,c.$numerator()),h=B(E.den,c.$denominator()),g.$Rational(f,h)):j(T("Integer"),m)?g.$Rational(B(E.num,c),E.den):j(T("Float"),m)?B(E.$to_f(),c):E.$__coerced__("*",c)}),F(N,"$/",function(c){var E=this,m=w,f=w,h=w;return j(T("Rational"),m=c)?(f=B(E.num,c.$denominator()),h=B(E.den,c.$numerator()),g.$Rational(f,h)):j(T("Integer"),m)?z(c,0)?D(E.$to_f(),0):g.$Rational(E.num,B(E.den,c)):j(T("Float"),m)?D(E.$to_f(),c):E.$__coerced__("/",c)}),F(N,"$**",function(c){var E=this,m=w;return j(T("Integer"),m=c)?z(E,0)&&y(M(c,0))?T(T("Float"),"INFINITY"):y(k(c,0))?g.$Rational(E.num["$**"](c),E.den["$**"](c)):y(M(c,0))?g.$Rational(E.den["$**"](c["$-@"]()),E.num["$**"](c["$-@"]())):g.$Rational(1,1):j(T("Float"),m)?E.$to_f()["$**"](c):j(T("Rational"),m)?z(c,0)?g.$Rational(1,1):z(c.$denominator(),1)?y(M(c,0))?g.$Rational(E.den["$**"](c.$numerator().$abs()),E.num["$**"](c.$numerator().$abs())):g.$Rational(E.num["$**"](c.$numerator()),E.den["$**"](c.$numerator())):z(E,0)&&y(M(c,0))?g.$raise(T("ZeroDivisionError"),"divided by 0"):E.$to_f()["$**"](c):E.$__coerced__("**",c)}),F(N,"$abs",function(){var c=this;return g.$Rational(c.num.$abs(),c.den.$abs())}),F(N,"$ceil",function(c){var E=this;return c==null&&(c=0),z(c,0)?D(E.num["$-@"](),E.den)["$-@"]().$ceil():E.$with_precision("ceil",c)},-1),F(N,"$floor",function(c){var E=this;return c==null&&(c=0),z(c,0)?D(E.num["$-@"](),E.den)["$-@"]().$floor():E.$with_precision("floor",c)},-1),F(N,"$hash",function(){var c=this;return"Rational:"+c.num+":"+c.den}),F(N,"$inspect",function(){var c=this;return"("+c+")"}),F(N,"$rationalize",function(c){var E=this;if(arguments.length>1&&g.$raise(T("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),c==null)return E;for(var m=c.$abs(),f=H(E,m),h=K(E,m),R=0,d=1,l=1,u=0,i,n,t,$,r;t=f.$ceil(),!I(t,h);)$=t-1,i=$*d+R,n=$*u+l,r=D(1,H(h,$)),h=D(1,H(f,$)),f=r,R=d,l=u,d=i,u=n;return g.$Rational(t*d+R,t*u+l)},-1),F(N,"$round",function(c){var E=this,m=w,f=w,h=w;return c==null&&(c=0),z(c,0)?z(E.num,0)?0:z(E.den,1)?E.num:(m=K(B(E.num.$abs(),2),E.den),f=B(E.den,2),h=D(m,f).$truncate(),y(M(E.num,0))?h["$-@"]():h):E.$with_precision("round",c)},-1),F(N,"$to_f",function(){var c=this;return D(c.num,c.den)}),F(N,"$to_i",function(){var c=this;return c.$truncate()}),F(N,"$to_r",V),F(N,"$to_s",function(){var c=this;return""+c.num+"/"+c.den}),F(N,"$truncate",function(c){var E=this;return c==null&&(c=0),z(c,0)?y(M(E.num,0))?E.$ceil():E.$floor():E.$with_precision("truncate",c)},-1),F(N,"$with_precision",function(c,E){var m=this,f=w,h=w;return j(T("Integer"),E)||g.$raise(T("TypeError"),"not an Integer"),f=10["$**"](E),h=B(m,f),y(M(E,1))?D(h.$send(c),f).$to_i():g.$Rational(h.$send(c),f)}),X(N,"$from_string",function(c){var E=c.trimLeft(),m=/^[+-]?[\d_]+(\.[\d_]+)?/,f=E.match(m),h,R;function d(){return m.test(E)}function l(){var u=E.match(m),i=u[0];return E=E.slice(i.length),i.replace(/_/g,"")}return d()?(h=parseFloat(l()),E[0]==="/"?(E=E.slice(1),d()?(R=parseFloat(l()),g.$Rational(h,R)):g.$Rational(h,1)):g.$Rational(h,1)):g.$Rational(0,1)}),v(N,"divide","/"),v(N,"quo","/")}("::",T("Numeric"))};Opal.modules["corelib/time"]=function(e){var C=e.slice,z=e.deny_frozen_access,g=e.klass,y=e.Kernel,M=e.Opal,D=e.defs,X=e.eqeqeq,j=e.def,b=e.truthy,U=e.rb_gt,F=e.rb_lt,J=e.send,H=e.rb_plus,B=e.rb_divide,K=e.rb_minus,k=e.range,I=e.neqeq,V=e.rb_le,v=e.eqeq,x=e.alias,w=e.top,T=[],o=e.nil,A=e.$$$;return w.$require("corelib/comparable"),function(N,L,S){var c=g(N,L,"Time"),E=[c].concat(S),m=e.$r(E);c.$include(A("Comparable"));var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];D(c,"$at",function(i,n){var t;return A("Time")["$==="](i)?(n!==void 0&&y.$raise(A("TypeError"),"can't convert Time into an exact number"),t=new Date(i.getTime()),t.timezone=i.timezone,t):(i.$$is_number||(i=M["$coerce_to!"](i,A("Integer"),"to_int")),n===void 0?new Date(i*1e3):(n.$$is_number||(n=M["$coerce_to!"](n,A("Integer"),"to_int")),new Date(i*1e3+n/1e3)))},-2);function l(u,i,n,t,$,r){if(u.$$is_string?u=parseInt(u,10):u=M["$coerce_to!"](u,A("Integer"),"to_int"),i===o)i=1;else if(!i.$$is_number)if(i["$respond_to?"]("to_str"))switch(i=i.$to_str(),i.toLowerCase()){case"jan":i=1;break;case"feb":i=2;break;case"mar":i=3;break;case"apr":i=4;break;case"may":i=5;break;case"jun":i=6;break;case"jul":i=7;break;case"aug":i=8;break;case"sep":i=9;break;case"oct":i=10;break;case"nov":i=11;break;case"dec":i=12;break;default:i=i.$to_i()}else i=M["$coerce_to!"](i,A("Integer"),"to_int");return(i<1||i>12)&&y.$raise(A("ArgumentError"),"month out of range: "+i),i=i-1,n===o?n=1:n.$$is_string?n=parseInt(n,10):n=M["$coerce_to!"](n,A("Integer"),"to_int"),(n<1||n>31)&&y.$raise(A("ArgumentError"),"day out of range: "+n),t===o?t=0:t.$$is_string?t=parseInt(t,10):t=M["$coerce_to!"](t,A("Integer"),"to_int"),(t<0||t>24)&&y.$raise(A("ArgumentError"),"hour out of range: "+t),$===o?$=0:$.$$is_string?$=parseInt($,10):$=M["$coerce_to!"]($,A("Integer"),"to_int"),($<0||$>59)&&y.$raise(A("ArgumentError"),"min out of range: "+$),r===o?r=0:r.$$is_number||(r.$$is_string?r=parseInt(r,10):r=M["$coerce_to!"](r,A("Integer"),"to_int")),(r<0||r>60)&&y.$raise(A("ArgumentError"),"sec out of range: "+r),[u,i,n,t,$,r]}return D(c,"$new",function(i,n,t,$,r,a,s){var p=this;n==null&&(n=o),t==null&&(t=o),$==null&&($=o),r==null&&(r=o),a==null&&(a=o),s==null&&(s=o);var G,Z,ie,ne;return i===void 0?new Date:(G=l(i,n,t,$,r,a),i=G[0],n=G[1],t=G[2],$=G[3],r=G[4],a=G[5],s===o?(Z=new Date(i,n,t,$,r,0,a*1e3),i<100&&Z.setFullYear(i),Z):(ie=p.$_parse_offset(s),ne=new Date(Date.UTC(i,n,t,$,r,0,a*1e3)),i<100&&ne.setUTCFullYear(i),Z=new Date(ne.getTime()-ie*36e5),Z.timezone=ie,Z))},-1),D(c,"$_parse_offset",function(i){var n;if(i.$$is_string)if(i=="UTC")n=0;else if(/^[+-]\d\d:[0-5]\d$/.test(i)){var t,$,r;t=i[0],$=+(i[1]+i[2]),r=+(i[4]+i[5]),n=(t=="-"?-1:1)*($+r/60)}else y.$raise(A("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+i);else i.$$is_number?n=i/3600:y.$raise(A("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return n}),D(c,"$local",function(i,n,t,$,r,a,s,p,G,Z){n==null&&(n=o),t==null&&(t=o),$==null&&($=o),r==null&&(r=o),a==null&&(a=o),s==null&&(s=o),p==null&&(p=o),G==null&&(G=o),Z==null&&(Z=o);var ie,ne;return arguments.length===10&&(ie=C(arguments),i=ie[5],n=ie[4],t=ie[3],$=ie[2],r=ie[1],a=ie[0]),ie=l(i,n,t,$,r,a),i=ie[0],n=ie[1],t=ie[2],$=ie[3],r=ie[4],a=ie[5],ne=new Date(i,n,t,$,r,0,a*1e3),i<100&&ne.setFullYear(i),ne},-2),D(c,"$gm",function(i,n,t,$,r,a,s,p,G,Z){n==null&&(n=o),t==null&&(t=o),$==null&&($=o),r==null&&(r=o),a==null&&(a=o),s==null&&(s=o),p==null&&(p=o),G==null&&(G=o),Z==null&&(Z=o);var ie,ne;return arguments.length===10&&(ie=C(arguments),i=ie[5],n=ie[4],t=ie[3],$=ie[2],r=ie[1],a=ie[0]),ie=l(i,n,t,$,r,a),i=ie[0],n=ie[1],t=ie[2],$=ie[3],r=ie[4],a=ie[5],ne=new Date(Date.UTC(i,n,t,$,r,0,a*1e3)),i<100&&ne.setUTCFullYear(i),ne.timezone=0,ne},-2),D(c,"$now",function(){var i=this;return i.$new()}),j(c,"$+",function(i){var n=this;X(A("Time"),i)&&y.$raise(A("TypeError"),"time + time?"),i.$$is_number||(i=M["$coerce_to!"](i,A("Integer"),"to_int"));var t=new Date(n.getTime()+i*1e3);return t.timezone=n.timezone,t}),j(c,"$-",function(i){var n=this;if(X(A("Time"),i))return(n.getTime()-i.getTime())/1e3;i.$$is_number||(i=M["$coerce_to!"](i,A("Integer"),"to_int"));var t=new Date(n.getTime()-i*1e3);return t.timezone=n.timezone,t}),j(c,"$<=>",function(i){var n=this,t=o;return X(A("Time"),i)?n.$to_f()["$<=>"](i.$to_f()):(t=i["$<=>"](n),b(t["$nil?"]())?o:b(U(t,0))?-1:b(F(t,0))?1:0)}),j(c,"$==",function(i){var n=this,t=o;return b(t=A("Time")["$==="](i))?n.$to_f()===i.$to_f():t}),j(c,"$asctime",function(){var i=this;return i.$strftime("%a %b %e %H:%M:%S %Y")}),J([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function u(i,n,t,$){var r=u.$$s==null?this:u.$$s;return i==null&&(i=o),n==null&&(n=o),t==null&&(t=o),$==null&&($=0),J(r,"define_method",[i],function a(){var s=a.$$s==null?this:a.$$s;return $+(s.timezone!=null?new Date(s.getTime()+s.timezone*36e5)[t]():s[n]())},{$$s:r})},{$$arity:-4,$$s:c}),j(c,"$yday",function(){var i=this,n=o,t=o,$=o;return n=m("Time").$new(i.$year()).$to_i(),t=m("Time").$new(i.$year(),i.$month(),i.$day()).$to_i(),$=86400,H(B(K(t,n),$).$round(),1)}),j(c,"$isdst",function(){var i=this,n=new Date(i.getFullYear(),0,1),t=new Date(i.getFullYear(),6,1);return i.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),t.getTimezoneOffset())}),j(c,"$dup",function(){var i=this,n=o;return n=new Date(i.getTime()),n.$copy_instance_variables(i),n.$initialize_dup(i),n}),j(c,"$eql?",function(i){var n=this,t=o;return b(t=i["$is_a?"](A("Time")))?n["$<=>"](i)["$zero?"]():t}),J([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function u(i,n){var t=u.$$s==null?this:u.$$s;return i==null&&(i=o),n==null&&(n=o),J(t,"define_method",[i],function $(){var r=$.$$s==null?this:$.$$s;return r.$wday()===n},{$$s:t})},{$$s:c}),j(c,"$hash",function(){var i=this;return"Time:"+i.getTime()}),j(c,"$inspect",function(){var i=this;return b(i["$utc?"]())?i.$strftime("%Y-%m-%d %H:%M:%S UTC"):i.$strftime("%Y-%m-%d %H:%M:%S %z")}),j(c,"$succ",function(){var i=this,n=new Date(i.getTime()+1e3);return n.timezone=i.timezone,n}),j(c,"$usec",function(){var i=this;return i.getMilliseconds()*1e3}),j(c,"$zone",function(){var i=this;if(i.timezone===0)return"UTC";if(i.timezone!=null)return o;var n=i.toString(),t;return n.indexOf("(")==-1?t=n.match(/[A-Z]{3,4}/)[0]:t=n.match(/\((.+)\)(?:\s|$)/)[1],t=="GMT"&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:t}),j(c,"$getgm",function(){var i=this,n=new Date(i.getTime());return n.timezone=0,n}),j(c,"$gmtime",function(){var i=this;return i.timezone!==0&&(z(i),i.timezone=0),i}),j(c,"$gmt?",function(){var i=this;return i.timezone===0}),j(c,"$gmt_offset",function(){var i=this;return i.timezone!=null?i.timezone*60:-i.getTimezoneOffset()*60}),j(c,"$strftime",function(i){var n=this;return i.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,$,r,a,s){var p="",G,Z,ie,ne=$.indexOf("0")!==-1,se=$.indexOf("-")===-1,O=$.indexOf("_")!==-1,oe=$.indexOf("^")!==-1,ue=$.indexOf("#")!==-1,te=($.match(":")||[]).length;switch(r=parseInt(r,10),ne&&O&&($.indexOf("0")<$.indexOf("_")?ne=!1:O=!1),s){case"Y":p+=n.$year();break;case"C":ne=!O,p+=Math.round(n.$year()/100);break;case"y":ne=!O,p+=n.$year()%100;break;case"m":ne=!O,p+=n.$mon();break;case"B":p+=d[n.$mon()-1];break;case"b":case"h":O=!ne,p+=R[n.$mon()-1];break;case"d":ne=!O,p+=n.$day();break;case"e":O=!ne,p+=n.$day();break;case"j":ne=!O,r=isNaN(r)?3:r,p+=n.$yday();break;case"H":ne=!O,p+=n.$hour();break;case"k":O=!ne,p+=n.$hour();break;case"I":ne=!O,p+=n.$hour()%12||12;break;case"l":O=!ne,p+=n.$hour()%12||12;break;case"P":p+=n.$hour()>=12?"pm":"am";break;case"p":p+=n.$hour()>=12?"PM":"AM";break;case"M":ne=!O,p+=n.$min();break;case"S":ne=!O,p+=n.$sec();break;case"L":ne=!O,r=isNaN(r)?3:r,p+=n.getMilliseconds();break;case"N":r=isNaN(r)?9:r,p+=n.getMilliseconds().toString().$rjust(3,"0"),p=p.$ljust(r,"0");break;case"z":var $e=n.timezone==null?n.getTimezoneOffset():-n.timezone*60,re=Math.floor(Math.abs($e)/60),P=Math.abs($e)%60;p+=$e<0?"+":"-",p+=re<10?"0":"",p+=re,te>0&&(p+=":"),p+=P<10?"0":"",p+=P,te>1&&(p+=":00");break;case"Z":p+=n.$zone();break;case"A":p+=f[n.$wday()];break;case"a":p+=h[n.$wday()];break;case"u":p+=n.$wday()+1;break;case"w":p+=n.$wday();break;case"V":p+=n.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":p+=n.$cweek_cyear()["$[]"](1);break;case"g":p+=n.$cweek_cyear()["$[]"](1)["$[]"](k(-2,-1,!1));break;case"s":p+=n.$to_i();break;case"n":p+=`
`;break;case"t":p+="	";break;case"%":p+="%";break;case"c":p+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":p+=n.$strftime("%m/%d/%y");break;case"F":p+=n.$strftime("%Y-%m-%d");break;case"v":p+=n.$strftime("%e-%^b-%4Y");break;case"r":p+=n.$strftime("%I:%M:%S %p");break;case"R":p+=n.$strftime("%H:%M");break;case"T":case"X":p+=n.$strftime("%H:%M:%S");break;case"J":if(G=n.$to_date().$jd(),G<2405160){p+=n.$strftime("%Y-%m-%d");break}else G<2419614?(Z="M",ie=1867):G<2424875?(Z="T",ie=1911):G<2447535?(Z="S",ie=1925):G<2458605?(Z="H",ie=1988):(Z="R",ie=2018);p+=n.$format("%c%02d",Z,K(n.$year(),ie)),p+=n.$strftime("-%m-%d");break;default:return t}return oe&&(p=p.toUpperCase()),ue&&(p=p.replace(/[A-Z]/,function(W){W.toLowerCase()}).replace(/[a-z]/,function(W){W.toUpperCase()})),se&&(ne||O)&&(p=p.$rjust(isNaN(r)?2:r,O?" ":"0")),p})}),j(c,"$to_a",function(){var i=this;return[i.$sec(),i.$min(),i.$hour(),i.$day(),i.$month(),i.$year(),i.$wday(),i.$yday(),i.$isdst(),i.$zone()]}),j(c,"$to_f",function(){var i=this;return i.getTime()/1e3}),j(c,"$to_i",function(){var i=this;return parseInt(i.getTime()/1e3,10)}),j(c,"$cweek_cyear",function(){var i=this,n=o,t=o,$=o,r=o,a=o,s=o,p=o,G=o;return n=A("Time").$new(i.$year(),1,1),t=n.$wday(),$=0,r=i.$year(),b(V(t,4))&&I(t,0)?a=K(t,1):(a=K(K(t,7),1),v(a,-8)&&(a=-1)),s=B(H(i.$yday(),a),7).$ceil(),b(V(s,0))?A("Time").$new(K(i.$year(),1),12,31).$cweek_cyear():(v(s,53)&&(p=A("Time").$new(i.$year(),12,31),G=p.$wday(),b(V(G,3))&&I(G,0)&&(s=1,r=H(r,1))),[s,r])}),function(u,i){return x(u,"mktime","local"),x(u,"utc","gm")}(e.get_singleton_class(c),E),x(c,"ctime","asctime"),x(c,"dst?","isdst"),x(c,"getutc","getgm"),x(c,"gmtoff","gmt_offset"),x(c,"mday","day"),x(c,"month","mon"),x(c,"to_s","inspect"),x(c,"tv_sec","to_i"),x(c,"tv_usec","usec"),x(c,"utc","gmtime"),x(c,"utc?","gmt?"),x(c,"utc_offset","gmt_offset")}("::",Date,T)};Opal.modules["corelib/struct"]=function(e){var C=e.klass,z=e.slice,g=e.extract_kwargs,y=e.ensure_kwargs,M=e.truthy,D=e.neqeq,X=e.eqeq,j=e.Opal,b=e.send,U=e.Class,F=e.to_a,J=e.def,H=e.defs,B=e.Kernel,K=e.hash2,k=e.rb_gt,I=e.rb_minus,V=e.eqeqeq,v=e.rb_lt,x=e.rb_ge,w=e.rb_plus,T=e.alias,o=e.top,A=[],N=e.nil,L=e.$$$;return o.$require("corelib/enumerable"),function(S,c,E){var m=C(S,c,"Struct"),f=[m].concat(E),h=e.$r(f);m.$include(L("Enumerable")),H(m,"$new",function d(l,u,i){var n=d.$$p||N,t,$,r,a,s=this,p=N;if(d.$$p=null,t=z(arguments,1),$=g(t),$=y($),r=t,a=$.$$smap.keyword_init,a==null&&(a=!1),M(l))if(X(l.$class(),L("String"))&&D(l["$[]"](0).$upcase(),l["$[]"](0)))r.$unshift(l),l=N;else try{l=j["$const_name!"](l)}catch(G){if(e.rescue(G,[L("TypeError"),L("NameError")]))try{r.$unshift(l),l=N}finally{e.pop_exception()}else throw G}return b(r,"map",[],function(Z){return Z==null&&(Z=N),j["$coerce_to!"](Z,L("String"),"to_str")}),p=b(U,"new",[s],function G(){var Z=G.$$s==null?this:G.$$s;return b(r,"each",[],function ie(ne){var se=ie.$$s==null?this:ie.$$s;return ne==null&&(ne=N),se.$define_struct_attribute(ne)},{$$s:Z}),function(ie,ne){return J(ie,"$new",function(O){var oe,ue,te=this,$e=N;return oe=z(arguments),ue=oe,$e=te.$allocate(),$e.$$data={},b($e,"initialize",F(ue)),$e},-1),ie.$alias_method("[]","new")}(e.get_singleton_class(Z),f)},{$$s:s}),M(n)&&b(p,"module_eval",[],n.$to_proc()),p.$$keyword_init=a,M(l)&&L("Struct").$const_set(l,p),p},-2),H(m,"$define_struct_attribute",function(l){var u=this;return X(u,L("Struct"))&&B.$raise(L("ArgumentError"),"you cannot define attributes to the Struct class"),u.$members()["$<<"](l),b(u,"define_method",[l],function i(){var n=i.$$s==null?this:i.$$s;return n.$$data[l]},{$$s:u}),b(u,"define_method",[""+l+"="],function i(n){var t=i.$$s==null?this:i.$$s;return n==null&&(n=N),t.$$data[l]=n},{$$s:u})}),H(m,"$members",function(){var l=this,u=N;return l.members==null&&(l.members=N),X(l,L("Struct"))&&B.$raise(L("ArgumentError"),"the Struct class has no members"),l.members=M(u=l.members)?u:[]}),H(m,"$inherited",function(l){var u=this,i=N;return u.members==null&&(u.members=N),i=u.members,b(l,"instance_eval",[],function n(){var t=n.$$s==null?this:n.$$s;return t.members=i},{$$s:u})}),J(m,"$initialize",function(l){var u,i,n=this,t=N,$=N,r=N;return u=z(arguments),i=u,M(n.$class().$$keyword_init)?(t=M($=i.$last())?$:K([],{}),(M(k(i.$length(),1))||M(i.length===1&&!t.$$is_hash))&&B.$raise(L("ArgumentError"),"wrong number of arguments (given "+i.$length()+", expected 0)"),r=I(t.$keys(),n.$class().$members()),M(r["$any?"]())&&B.$raise(L("ArgumentError"),"unknown keywords: "+r.$join(", ")),b(n.$class().$members(),"each",[],function a(s){var p,G=a.$$s==null?this:a.$$s;return s==null&&(s=N),p=[s,t["$[]"](s)],b(G,"[]=",p),p[p.length-1]},{$$s:n})):(M(k(i.$length(),n.$class().$members().$length()))&&B.$raise(L("ArgumentError"),"struct size differs"),b(n.$class().$members(),"each_with_index",[],function a(s,p){var G,Z=a.$$s==null?this:a.$$s;return s==null&&(s=N),p==null&&(p=N),G=[s,i["$[]"](p)],b(Z,"[]=",G),G[G.length-1]},{$$s:n}))},-1),J(m,"$initialize_copy",function(l){var u=this;u.$$data={};var i=Object.keys(l.$$data),n,t,$;for(n=0,t=i.length;n<t;n++)$=i[n],u.$$data[$]=l.$$data[$]}),H(m,"$keyword_init?",function(){var l=this;return l.$$keyword_init}),J(m,"$members",function(){var l=this;return l.$class().$members()}),J(m,"$hash",function(){var l=this;return h("Hash").$new(l.$$data).$hash()}),J(m,"$[]",function(l){var u=this;return V(L("Integer"),l)?(M(v(l,u.$class().$members().$size()["$-@"]()))&&B.$raise(L("IndexError"),"offset "+l+" too small for struct(size:"+u.$class().$members().$size()+")"),M(x(l,u.$class().$members().$size()))&&B.$raise(L("IndexError"),"offset "+l+" too large for struct(size:"+u.$class().$members().$size()+")"),l=u.$class().$members()["$[]"](l)):V(L("String"),l)?u.$$data.hasOwnProperty(l)||B.$raise(L("NameError").$new("no member '"+l+"' in struct",l)):B.$raise(L("TypeError"),"no implicit conversion of "+l.$class()+" into Integer"),l=j["$coerce_to!"](l,L("String"),"to_str"),u.$$data[l]}),J(m,"$[]=",function(l,u){var i=this;return V(L("Integer"),l)?(M(v(l,i.$class().$members().$size()["$-@"]()))&&B.$raise(L("IndexError"),"offset "+l+" too small for struct(size:"+i.$class().$members().$size()+")"),M(x(l,i.$class().$members().$size()))&&B.$raise(L("IndexError"),"offset "+l+" too large for struct(size:"+i.$class().$members().$size()+")"),l=i.$class().$members()["$[]"](l)):V(L("String"),l)?M(i.$class().$members()["$include?"](l.$to_sym()))||B.$raise(L("NameError").$new("no member '"+l+"' in struct",l)):B.$raise(L("TypeError"),"no implicit conversion of "+l.$class()+" into Integer"),l=j["$coerce_to!"](l,L("String"),"to_str"),i.$$data[l]=u}),J(m,"$==",function(l){var u=this;if(!M(l["$instance_of?"](u.$class())))return!1;var i={},n={};function t($,r){var a,s,p;i[$.$__id__()]=!0,n[r.$__id__()]=!0;for(a in $.$$data)if(s=$.$$data[a],p=r.$$data[a],L("Struct")["$==="](s)){if((!i.hasOwnProperty(s.$__id__())||!n.hasOwnProperty(p.$__id__()))&&!t(s,p))return!1}else if(!s["$=="](p))return!1;return!0}return t(u,l)}),J(m,"$eql?",function(l){var u=this;if(!M(l["$instance_of?"](u.$class())))return!1;var i={},n={};function t($,r){var a,s,p;i[$.$__id__()]=!0,n[r.$__id__()]=!0;for(a in $.$$data)if(s=$.$$data[a],p=r.$$data[a],L("Struct")["$==="](s)){if((!i.hasOwnProperty(s.$__id__())||!n.hasOwnProperty(p.$__id__()))&&!t(s,p))return!1}else if(!s["$eql?"](p))return!1;return!0}return t(u,l)}),J(m,"$each",function d(){var l=d.$$p||N,u=this;return d.$$p=null,l===N?b(u,"enum_for",["each"],function i(){var n=i.$$s==null?this:i.$$s;return n.$size()},{$$s:u}):(b(u.$class().$members(),"each",[],function i(n){var t=i.$$s==null?this:i.$$s;return n==null&&(n=N),e.yield1(l,t["$[]"](n))},{$$s:u}),u)}),J(m,"$each_pair",function d(){var l=d.$$p||N,u=this;return d.$$p=null,l===N?b(u,"enum_for",["each_pair"],function i(){var n=i.$$s==null?this:i.$$s;return n.$size()},{$$s:u}):(b(u.$class().$members(),"each",[],function i(n){var t=i.$$s==null?this:i.$$s;return n==null&&(n=N),e.yield1(l,[n,t["$[]"](n)])},{$$s:u}),u)}),J(m,"$length",function(){var l=this;return l.$class().$members().$length()}),J(m,"$to_a",function(){var l=this;return b(l.$class().$members(),"map",[],function u(i){var n=u.$$s==null?this:u.$$s;return i==null&&(i=N),n["$[]"](i)},{$$s:l})});var R=[];return J(m,"$inspect",function(){var l=this,u=N,i=N;return function(){try{return u="#<struct ",M(R["$include?"](l.$__id__()))?w(u,":...>"):(R["$<<"](l.$__id__()),i=!0,V(L("Struct"),l)&&M(l.$class().$name())&&(u=w(u,""+l.$class()+" ")),u=w(u,b(l.$each_pair(),"map",[],function(t,$){return t==null&&(t=N),$==null&&($=N),""+t+"="+h("Opal").$inspect($)}).$join(", ")),u=w(u,">"),u)}finally{M(i)&&R.pop()}}()}),J(m,"$to_h",function d(){var l=d.$$p||N,u=this;return d.$$p=null,l!==N?b(b(u,"map",[],l.$to_proc()),"to_h",F(u.$args())):b(u.$class().$members(),"each_with_object",[K([],{})],function i(n,t){var $,r=i.$$s==null?this:i.$$s;return n==null&&(n=N),t==null&&(t=N),$=[n,r["$[]"](n)],b(t,"[]=",$),$[$.length-1]},{$$s:u})}),J(m,"$values_at",function(l){var u,i,n=this;u=z(arguments),i=u,i=b(i,"map",[],function(s){return s==null&&(s=N),s.$$is_range?s.$to_a():s}).$flatten();for(var t=[],$=0,r=i.length;$<r;$++)i[$].$$is_number||B.$raise(L("TypeError"),"no implicit conversion of "+i[$].$class()+" into Integer"),t.push(n["$[]"](i[$]));return t},-1),J(m,"$dig",function(l,u){var i,n,t=this,$=N;return i=z(arguments,1),n=i,$=M(l.$$is_string&&t.$$data.hasOwnProperty(l))&&t.$$data[l]||N,$===N||n.length===0?$:(M($["$respond_to?"]("dig"))||B.$raise(L("TypeError"),""+$.$class()+" does not have #dig method"),b($,"dig",F(n)))},-2),T(m,"size","length"),T(m,"to_s","inspect"),T(m,"values","to_a")}("::",null,A)};Opal.modules["corelib/set"]=function(e){var C=e.freeze,z=e.klass,g=e.slice,y=e.defs,M=e.hash2,D=e.truthy,X=e.eqeqeq,j=e.Kernel,b=e.send,U=e.def,F=e.eqeq,J=e.rb_lt,H=e.rb_le,B=e.alias,K=[],k=e.nil,I=e.$$$;return function(V,v,x){var w=z(V,v,"Set"),T=[w].concat(x),o=e.$r(T),A=k,N=w.$$prototype;N.hash=k,w.$include(I("Enumerable")),y(w,"$[]",function(c){var E,m,f=this;return E=g(arguments),m=E,f.$new(m)},-1),U(w,"$initialize",function S(c){var E=S.$$p||k,m=this;return S.$$p=null,c==null&&(c=k),m.hash=M([],{}),D(c["$nil?"]())?k:(X(I("Enumerable"),c)||j.$raise(I("ArgumentError"),"value must be enumerable"),D(E)?b(c,"each",[],function f(h){var R=f.$$s==null?this:f.$$s;return h==null&&(h=k),R.$add(e.yield1(E,h))},{$$s:m}):m.$merge(c))},-1),U(w,"$dup",function(){var c=this,E=k;return E=c.$class().$new(),E.$merge(c)}),U(w,"$-",function(c){var E=this;return D(c["$respond_to?"]("each"))||j.$raise(I("ArgumentError"),"value must be enumerable"),E.$dup().$subtract(c)}),U(w,"$inspect",function(){var c=this;return"#<Set: {"+c.$to_a().$join(",")+"}>"}),U(w,"$==",function(c){var E=this;return D(E["$equal?"](c))?!0:D(c["$instance_of?"](E.$class()))?E.hash["$=="](c.$instance_variable_get("@hash")):D(c["$is_a?"](I("Set")))&&F(E.$size(),c.$size())?b(c,"all?",[],function m(f){var h=m.$$s==null?this:m.$$s;return h.hash==null&&(h.hash=k),f==null&&(f=k),h.hash["$include?"](f)},{$$s:E}):!1}),U(w,"$add",function(c){var E=this;return E.hash["$[]="](c,!0),E}),U(w,"$classify",function S(){var c=S.$$p||k,E=this,m=k;return S.$$p=null,c===k?E.$enum_for("classify"):(m=b(I("Hash"),"new",[],function f(h,R){var d,l=f.$$s==null?this:f.$$s;return h==null&&(h=k),R==null&&(R=k),d=[R,l.$class().$new()],b(h,"[]=",d),d[d.length-1]},{$$s:E}),b(E,"each",[],function(h){return h==null&&(h=k),m["$[]"](e.yield1(c,h)).$add(h)}),m)}),U(w,"$collect!",function S(){var c=S.$$p||k,E=this,m=k;return S.$$p=null,c===k?E.$enum_for("collect!"):(m=E.$class().$new(),b(E,"each",[],function(h){return h==null&&(h=k),m["$<<"](e.yield1(c,h))}),E.$replace(m))}),U(w,"$compare_by_identity",function(){var c=this;return D(c.hash["$respond_to?"]("compare_by_identity"))?(c.hash.$compare_by_identity(),c):c.$raise(o("NotImplementedError"),""+c.$class().$name()+"#compare_by_identity is not implemented")}),U(w,"$compare_by_identity?",function(){var c=this,E=k;return D(E=c.hash["$respond_to?"]("compare_by_identity?"))?c.hash["$compare_by_identity?"]():E}),U(w,"$delete",function(c){var E=this;return E.hash.$delete(c),E}),U(w,"$delete?",function(c){var E=this;return D(E["$include?"](c))?(E.$delete(c),E):k}),U(w,"$delete_if",function S(){var c=S.$$p||k,E=this;return S.$$p=null,c===k?E.$enum_for("delete_if"):(b(b(E,"select",[],function(f){return f==null&&(f=k),e.yield1(c,f)}),"each",[],function m(f){var h=m.$$s==null?this:m.$$s;return h.hash==null&&(h.hash=k),f==null&&(f=k),h.hash.$delete(f)},{$$s:E}),E)}),U(w,"$freeze",function(){var c=this;return D(c["$frozen?"]())?c:(c.hash.$freeze(),C(c))}),U(w,"$keep_if",function S(){var c=S.$$p||k,E=this;return S.$$p=null,c===k?E.$enum_for("keep_if"):(b(b(E,"reject",[],function(f){return f==null&&(f=k),e.yield1(c,f)}),"each",[],function m(f){var h=m.$$s==null?this:m.$$s;return h.hash==null&&(h.hash=k),f==null&&(f=k),h.hash.$delete(f)},{$$s:E}),E)}),U(w,"$reject!",function S(){var c=S.$$p||k,E=this,m=k;return S.$$p=null,c===k?E.$enum_for("reject!"):(m=E.$size(),b(E,"delete_if",[],c.$to_proc()),F(E.$size(),m)?k:E)}),U(w,"$select!",function S(){var c=S.$$p||k,E=this,m=k;return S.$$p=null,c===k?E.$enum_for("select!"):(m=E.$size(),b(E,"keep_if",[],c.$to_proc()),F(E.$size(),m)?k:E)}),U(w,"$add?",function(c){var E=this;return D(E["$include?"](c))?k:E.$add(c)}),U(w,"$each",function S(){var c=S.$$p||k,E=this;return S.$$p=null,c===k?E.$enum_for("each"):(b(E.hash,"each_key",[],c.$to_proc()),E)}),U(w,"$empty?",function(){var c=this;return c.hash["$empty?"]()}),U(w,"$eql?",function(c){var E=this;return E.hash["$eql?"](b(c,"instance_eval",[],function m(){var f=m.$$s==null?this:m.$$s;return f.hash==null&&(f.hash=k),f.hash},{$$s:E}))}),U(w,"$clear",function(){var c=this;return c.hash.$clear(),c}),U(w,"$include?",function(c){var E=this;return E.hash["$include?"](c)}),U(w,"$merge",function(c){var E=this;return b(c,"each",[],function m(f){var h=m.$$s==null?this:m.$$s;return f==null&&(f=k),h.$add(f)},{$$s:E}),E}),U(w,"$replace",function(c){var E=this;return E.$clear(),E.$merge(c),E}),U(w,"$size",function(){var c=this;return c.hash.$size()}),U(w,"$subtract",function(c){var E=this;return b(c,"each",[],function m(f){var h=m.$$s==null?this:m.$$s;return f==null&&(f=k),h.$delete(f)},{$$s:E}),E}),U(w,"$|",function(c){var E=this;return D(c["$respond_to?"]("each"))||j.$raise(I("ArgumentError"),"value must be enumerable"),E.$dup().$merge(c)});function L(S){D(A=S["$is_a?"](I("Set")))||j.$raise(I("ArgumentError"),"value must be a set")}return U(w,"$superset?",function(c){var E=this;return L(c),D(J(E.$size(),c.$size()))?!1:b(c,"all?",[],function m(f){var h=m.$$s==null?this:m.$$s;return f==null&&(f=k),h["$include?"](f)},{$$s:E})}),U(w,"$proper_superset?",function(c){var E=this;return L(c),D(H(E.$size(),c.$size()))?!1:b(c,"all?",[],function m(f){var h=m.$$s==null?this:m.$$s;return f==null&&(f=k),h["$include?"](f)},{$$s:E})}),U(w,"$subset?",function(c){var E=this;return L(c),D(J(c.$size(),E.$size()))?!1:b(E,"all?",[],function(f){return f==null&&(f=k),c["$include?"](f)})}),U(w,"$proper_subset?",function(c){var E=this;return L(c),D(H(c.$size(),E.$size()))?!1:b(E,"all?",[],function(f){return f==null&&(f=k),c["$include?"](f)})}),U(w,"$intersect?",function(c){var E=this;return L(c),D(J(E.$size(),c.$size()))?b(E,"any?",[],function(f){return f==null&&(f=k),c["$include?"](f)}):b(c,"any?",[],function m(f){var h=m.$$s==null?this:m.$$s;return f==null&&(f=k),h["$include?"](f)},{$$s:E})}),U(w,"$disjoint?",function(c){var E=this;return E["$intersect?"](c)["$!"]()}),U(w,"$to_a",function(){var c=this;return c.hash.$keys()}),B(w,"+","|"),B(w,"<","proper_subset?"),B(w,"<<","add"),B(w,"<=","subset?"),B(w,">","proper_superset?"),B(w,">=","superset?"),B(w,"difference","-"),B(w,"filter!","select!"),B(w,"length","size"),B(w,"map!","collect!"),B(w,"member?","include?"),B(w,"union","|")}("::",null,K)};Opal.modules["corelib/dir"]=function(e){var C=e.klass,z=e.def,g=e.truthy,y=e.alias,M=[],D=e.nil,X=e.$$$;return function(j,b,U){var F=C(j,b,"Dir"),J=[F].concat(U);return function(H,B){return z(H,"$chdir",function K(k){var I=K.$$p||D,V=D;return K.$$p=null,function(){try{return V=e.current_dir,e.current_dir=k,e.yieldX(I,[])}finally{e.current_dir=V}}()}),z(H,"$pwd",function(){return e.current_dir||"."}),z(H,"$home",function(){var k=D;return g(k=X("ENV")["$[]"]("HOME"))?k:"."}),y(H,"getwd","pwd")}(e.get_singleton_class(F),J)}("::",null,M)};Opal.modules["corelib/file"]=function(e){var C=e.truthy,z=e.klass,g=e.const_set,y=e.Opal,M=e.regexp,D=e.rb_plus,X=e.def,j=e.Kernel,b=e.eqeq,U=e.rb_lt,F=e.rb_minus,J=e.range,H=e.send,B=e.slice,K=e.alias,k=[],I=e.nil,V=e.$$$;return function(v,x,w){var T=z(v,x,"File"),o=[T].concat(w),A=I;return g(o[0],"Separator",g(o[0],"SEPARATOR","/")),g(o[0],"ALT_SEPARATOR",I),g(o[0],"PATH_SEPARATOR",":"),g(o[0],"FNM_SYSCASE",0),A=/^[a-zA-Z]:(?:\\|\/)/,function(N,L){var S=[N].concat(L),c=e.$r(S);X(N,"$absolute_path",function(h,R){var d=I,l=I,u=I,i=I,n=I,t=I,$=I,r=I,a=I,s=I;R==null&&(R=I),d=c("SEPARATOR"),l=m(),u=[],h=C(h["$respond_to?"]("to_path"))?h.$to_path():h,h=y["$coerce_to!"](h,V("String"),"to_str"),R=C(i=R)?i:V("Dir").$pwd(),n=h.substr(0,d.length)===d||A.test(h),t=R.substr(0,d.length)===d||A.test(R),C(n)?($=h.$split(M(["[",l,"]"])),r=A.test(h)?"":h.$sub(M(["^([",l,"]+).*$"]),"\\1"),a=!0):($=D(R.$split(M(["[",l,"]"])),h.$split(M(["[",l,"]"]))),r=A.test(R)?"":R.$sub(M(["^([",l,"]+).*$"]),"\\1"),a=t);for(var p,G=0,Z=$.length;G<Z;G++)p=$[G],!(p===I||p===""&&(u.length===0||a)||p==="."&&(u.length===0||a))&&(p===".."?u.pop():u.push(p));return!a&&$[0]!=="."&&u.$unshift("."),s=u.$join(d),C(a)&&(s=D(r,s)),s},-2),X(N,"$expand_path",function(h,R){var d=this,l=I,u=I,i=I,n=I,t=I;return R==null&&(R=I),l=c("SEPARATOR"),u=m(),C(h[0]==="~"||R&&R[0]==="~")&&(i=c("Dir").$home(),C(i)||j.$raise(V("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),n=A.test(i)?"":i.$sub(M(["^([",u,"]+).*$"]),"\\1"),C(i["$start_with?"](n))||j.$raise(V("ArgumentError"),"non-absolute home"),i=D(i,l),t=M(["^\\~(?:",l,"|$)"]),h=h.$sub(t,i),C(R)&&(R=R.$sub(t,i))),d.$absolute_path(h,R)},-2);function E(f){return C(f["$respond_to?"]("to_path"))&&(f=f.$to_path()),f=y["$coerce_to!"](f,V("String"),"to_str"),f}function m(){return c("ALT_SEPARATOR")===I?e.escape_regexp(c("SEPARATOR")):e.escape_regexp(D(c("SEPARATOR"),c("ALT_SEPARATOR")))}return X(N,"$dirname",function(h,R){var d=this,l=I;if(R==null&&(R=1),b(R,0))return h;C(U(R,0))&&j.$raise(V("ArgumentError"),"level can't be negative"),l=m(),h=E(h);var u=h.match(new RegExp("^["+l+"]")),i;return h=h.replace(new RegExp("["+l+"]+$"),""),h=h.replace(new RegExp("[^"+l+"]+$"),""),h=h.replace(new RegExp("["+l+"]+$"),""),h===""?i=u?"/":".":i=h,R==1?i:d.$dirname(i,F(R,1))},-2),X(N,"$basename",function(h,R){var d=I;return R==null&&(R=I),d=m(),h=E(h),h.length==0||(R!==I?R=y["$coerce_to!"](R,V("String"),"to_str"):R=null,h=h.replace(new RegExp("(.)["+d+"]*$"),"$1"),h=h.replace(new RegExp("^(?:.*["+d+"])?([^"+d+"]+)$"),"$1"),R===".*"?h=h.replace(/\.[^\.]+$/,""):R!==null&&(R=e.escape_regexp(R),h=h.replace(new RegExp(""+R+"$"),""))),h},-2),X(N,"$extname",function(h){var R=this,d=I,l=I;return h=E(h),d=R.$basename(h),C(d["$empty?"]())||(l=d["$[]"](J(1,-1,!1)).$rindex("."),C(l["$nil?"]())||b(D(l,1),F(d.$length(),1)))?"":d["$[]"](e.Range.$new(D(l,1),-1,!1))}),X(N,"$exist?",function(h){return e.modules[h]!=null}),X(N,"$directory?",function(h){var R=I;R=[];for(var d in e.modules)R.push(d);return h=h.$gsub(M(["(^.",c("SEPARATOR"),"+|",c("SEPARATOR"),"+$)"])),H(R,"find",[],function(u){return u==null&&(u=I),u["$=~"](M(["^",h]))})}),X(N,"$join",function(h){var R,d,l=I;return R=B(arguments),d=R,C(d["$empty?"]())?"":(l="",d=H(d.$flatten().$each_with_index(),"map",[],function(i,n){return i==null&&(i=I),n==null&&(n=I),b(n,0)&&C(i["$empty?"]())||b(d.$length(),D(n,1))&&C(i["$empty?"]())?c("SEPARATOR"):i}),d=H(d,"reject",[],"empty?".$to_proc()),H(d,"each_with_index",[],function(i,n){var t=I;return i==null&&(i=I),n==null&&(n=I),t=d["$[]"](D(n,1)),C(t["$nil?"]())?l=""+l+i:(C(i["$end_with?"](c("SEPARATOR")))&&C(t["$start_with?"](c("SEPARATOR")))&&(i=i.$sub(M([c("SEPARATOR"),"+$"]),"")),l=C(i["$end_with?"](c("SEPARATOR")))||C(t["$start_with?"](c("SEPARATOR")))?""+l+i:""+l+i+c("SEPARATOR"))}),l)},-1),X(N,"$split",function(h){return h.$split(c("SEPARATOR"))}),K(N,"realpath","expand_path"),K(N,"exists?","exist?")}(e.get_singleton_class(T),o)}("::",V("IO"),k)};Opal.modules["corelib/process/base"]=function(e){var C=e.klass,z=e.slice,g=e.defs,y=e.return_val,M=e.nil;return function(D,X){var j=C(D,X,"Signal");return g(j,"$trap",function(U){var F,J;return F=z(arguments),J=F,M},-1)}("::",null),function(D,X){var j=C(D,X,"GC");return g(j,"$start",y(M))}("::",null)};Opal.modules["corelib/process"]=function(e){var C=e.module,z=e.defs,g=e.truthy,y=e.return_val,M=e.Kernel,D=e.nil,X=e.$$$;return function(j){var b=C(j,"Process"),U=D;if(b.__clocks__=[],z(b,"$__register_clock__",function(H,B){var K=this;return K.__clocks__==null&&(K.__clocks__=D),K.$const_set(H,K.__clocks__.$size()),K.__clocks__["$<<"](B)}),b.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),U=!1,e.global.performance)U=function(){return performance.now()};else if(e.global.process&&process.hrtime){var F=process.hrtime();U=function(){var J=process.hrtime(F),H=J[1]/1e3|0;return J[0]*1e3+H/1e3}}return g(U)&&b.$__register_clock__("CLOCK_MONOTONIC",U),z(b,"$pid",y(0)),z(b,"$times",function(){var H=D;return H=X("Time").$now().$to_f(),X(X("Benchmark"),"Tms").$new(H,H,H,H,H)}),z(b,"$clock_gettime",function(H,B){var K=this,k=D,I=D;K.__clocks__==null&&(K.__clocks__=D),B==null&&(B="float_second"),g(k=I=K.__clocks__["$[]"](H))||M.$raise(X(X("Errno"),"EINVAL"),"clock_gettime("+H+") "+K.__clocks__["$[]"](H));var V=I();switch(B){case"float_second":return V/1e3;case"float_millisecond":return V/1;case"float_microsecond":return V*1e3;case"second":return V/1e3|0;case"millisecond":return V/1|0;case"microsecond":return V*1e3|0;case"nanosecond":return V*1e6|0;default:M.$raise(X("ArgumentError"),"unexpected unit: "+B)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var C=e.klass,z=e.module,g=e.def,y=e.range,M=e.send,D=e.rb_divide,X=e.Kernel,j=e.Opal,b=[],U=e.nil,F=e.$$$;return function(J,H,B){var K=C(J,H,"Random"),k=[K].concat(B);return function(I,V){var v=z(I,"Formatter"),x=[v].concat(V),w=e.$r(x);return g(v,"$hex",function(o){var A=this;o==null&&(o=U),o=F("Random").$_verify_count(o);for(var N=A.$bytes(o),L="",S=0;S<o;S++)L+=N.charCodeAt(S).toString(16).padStart(2,"0");return L.$encode("US-ASCII")},-1),g(v,"$random_bytes",function(o){var A=this;return o==null&&(o=U),A.$bytes(o)},-1),g(v,"$base64",function(o){var A=this;return o==null&&(o=U),F("Base64").$strict_encode64(A.$random_bytes(o)).$encode("US-ASCII")},-1),g(v,"$urlsafe_base64",function(o,A){var N=this;return o==null&&(o=U),A==null&&(A=!1),F("Base64").$urlsafe_encode64(N.$random_bytes(o),A).$encode("US-ASCII")},-1),g(v,"$uuid",function(){var o=this,A=U;return A=o.$hex(16).$split(""),A["$[]="](12,"4"),A["$[]="](16,(parseInt(A["$[]"](16),16)&3|8).toString(16)),A=[A["$[]"](y(0,8,!0)),A["$[]"](y(8,12,!0)),A["$[]"](y(12,16,!0)),A["$[]"](y(16,20,!0)),A["$[]"](y(20,32,!0))],A=M(A,"map",[],"join".$to_proc()),A.$join("-")}),g(v,"$random_float",function(){var o=this,A=U,N=U;return A=o.$bytes(4),N=0,M(4,"times",[],function(S){return S==null&&(S=U),N=N["$<<"](8),N=N["$|"](A["$[]"](S).$ord())}),D(N.$abs(),2147483647)}),g(v,"$random_number",function(o){var A=this;function N(){return A.$random_float()}function L(c){return Math.floor(N()*c)}function S(){var c=o.begin,E=o.end;if(c===U||E===U)return U;var m=E-c;return m<0?U:m===0?c:(E%1===0&&c%1===0&&!o.excl&&m++,L(m)+c)}return o==null?N():o.$$is_range?S():o.$$is_number?(o<=0&&X.$raise(F("ArgumentError"),"invalid argument - "+o),o%1===0?L(o):N()*o):(o=j["$coerce_to!"](o,F("Integer"),"to_int"),o<=0&&X.$raise(F("ArgumentError"),"invalid argument - "+o),L(o))},-1),g(v,"$alphanumeric",function(o){var A=this,N=U;return o==null&&(o=U),o=w("Random").$_verify_count(o),N=M([y("0","9",!1),y("a","z",!1),y("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),M(F("Array"),"new",[o],function L(S){var c=L.$$s==null?this:L.$$s;return S==null&&(S=U),N["$[]"](c.$random_number(N.$length()))},{$$s:A}).$join()},-1)}(K,k),K.$include(F(F("Random"),"Formatter")),K.$extend(F(F("Random"),"Formatter"))}("::",null,b)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var C=e.klass,z=e.const_set,g=e.send,y=e.nil,M=e.$$$,D=y;return D=function(){var X=624,j=397,b=2567483615,U=2147483648,F=2147483647,J=function(x,w){return x&U|w&F},H=function(x,w){return J(x,w)>>>1^(w&1?b:0)};function B(x){var w={left:0,next:X,state:new Array(X)};return K(w,x),w}function K(x,w){var T,o;for(x.state[0]=w>>>0,T=1;T<X;T++)x.state[T]=1812433253*(x.state[T-1]^x.state[T-1]>>30>>>0)+T,x.state[T]&=4294967295;x.left=1,x.next=X}function k(x){var w=0,T=x.state,o;for(x.left=X,x.next=0,o=X-j+1;--o;w++)T[w]=T[w+j]^H(T[w+0],T[w+1]);for(o=j;--o;w++)T[w]=T[w+(j-X)]^H(T[w+0],T[w+1]);T[w]=T[w+(j-X)]^H(T[w+0],T[0])}function I(x){var w;return--x.left<=0&&k(x),w=x.state[x.next++],w^=w>>>11,w^=w<<7&2636928640,w^=w<<15&4022730752,w^=w>>>18,w>>>0}function V(x,w){return x>>>=5,w>>>=6,(x*67108864+w)*(1/9007199254740992)}function v(x){var w=I(x),T=I(x);return V(w,T)}return{genrand_real:v,init:B}}(),function(X,j){var b=C(X,j,"Random"),U,F=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return z(b,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*F)},reseed:function(J){return D.init(J)},rand:function(J){return D.genrand_real(J)}}),U=[M(b,"MERSENNE_TWISTER_GENERATOR")],g(b,"generator=",U),U[U.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var C=e.truthy,z=e.klass,g=e.Kernel,y=e.defs,M=e.Opal,D=e.def,X=e.eqeqeq,j=e.send,b=e.top,U=e.nil,F=e.$$$;return b.$require("corelib/random/formatter"),function(J,H){var B=z(J,H,"Random");return B.$attr_reader("seed","state"),y(B,"$_verify_count",function(k){return C(k)||(k=16),typeof k!="number"&&(k=k.$to_int()),k<0&&g.$raise(F("ArgumentError"),"negative string size (or size too big)"),k=Math.floor(k),k}),D(B,"$initialize",function(k){var I=this;return k==null&&(k=F("Random").$new_seed()),k=M["$coerce_to!"](k,F("Integer"),"to_int"),I.state=k,I.$reseed(k)},-1),D(B,"$reseed",function(k){var I=this;return I.seed=k,I.$rng=e.$$rand.reseed(k)}),y(B,"$new_seed",function(){return e.$$rand.new_seed()}),y(B,"$rand",function(k){var I=this;return F(I,"DEFAULT").$rand(k)},-1),y(B,"$srand",function(k){var I=this,V=U;return k==null&&(k=F("Random").$new_seed()),k=M["$coerce_to!"](k,F("Integer"),"to_int"),V=F(I,"DEFAULT").$seed(),F(I,"DEFAULT").$reseed(k),V},-1),y(B,"$urandom",function(k){return F("SecureRandom").$bytes(k)}),D(B,"$==",function(k){var I=this,V=U;return X(F("Random"),k)?C(V=I.$seed()["$=="](k.$seed()))?I.$state()["$=="](k.$state()):V:!1}),D(B,"$bytes",function(k){var I=this;return k=F("Random").$_verify_count(k),j(F("Array"),"new",[k],function V(){var v=V.$$s==null?this:V.$$s;return v.$rand(255).$chr()},{$$s:I}).$join().$encode("ASCII-8BIT")}),y(B,"$bytes",function(k){var I=this;return F(I,"DEFAULT").$bytes(k)}),D(B,"$rand",function(k){var I=this;return I.$random_number(k)},-1),D(B,"$random_float",function(){var k=this;return k.state++,e.$$rand.rand(k.$rng)}),y(B,"$random_float",function(){var k=this;return F(k,"DEFAULT").$random_float()}),y(B,"$generator=",function(k){var I=this;return e.$$rand=k,C(I["$const_defined?"]("DEFAULT"))?F(I,"DEFAULT").$reseed():I.$const_set("DEFAULT",I.$new(I.$new_seed()))})}("::",null),b.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var C=e.Kernel,z=e.klass,g=e.send,y=e.slice,M=e.module,D=e.def,X=e.return_val,j=e.alias,b=e.defs,U=e.top,F=[],J=e.nil,H=e.$$$,B={};function K(I){switch(e.config.unsupported_features_severity){case"error":C.$raise(H("NotImplementedError"),I);break;case"warning":k(I);break;default:}}function k(I){B[I]||(B[I]=!0,U.$warn(I))}return function(I,V){var v=z(I,V,"String"),x="String#%s not supported. Mutable String methods are not supported in Opal.";return g(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function w(T){var o=w.$$s==null?this:w.$$s;return T==null&&(T=J),g(o,"define_method",[T],function(N){var L,S;return L=y(arguments),S=L,C.$raise(H("NotImplementedError"),x["$%"](T))},-1)},{$$s:v})}("::",null),function(I){var V=M(I,"Kernel"),v="Object tainting is not supported by Opal";return D(V,"$taint",function(){var w=this;return K(v),w}),D(V,"$untaint",function(){var w=this;return K(v),w}),D(V,"$tainted?",function(){return K(v),!1})}("::"),function(I,V){var v=z(I,V,"Module");return D(v,"$public",function(w){var T,o,A=this;return T=y(arguments),o=T,o.length===0?(A.$$module_function=!1,J):o.length===1?o[0]:o},-1),D(v,"$private_class_method",function(w){var T,o;return T=y(arguments),o=T,o.length===1?o[0]:o},-1),D(v,"$private_method_defined?",X(!1)),D(v,"$private_constant",function(w){var T,o;return T=y(arguments),o=T,J},-1),j(v,"nesting","public"),j(v,"private","public"),j(v,"protected","public"),j(v,"protected_method_defined?","private_method_defined?"),j(v,"public_class_method","private_class_method"),j(v,"public_instance_method","instance_method"),j(v,"public_instance_methods","instance_methods"),j(v,"public_method_defined?","method_defined?")}("::",null),function(I){var V=M(I,"Kernel");return D(V,"$private_methods",function(x){var w,T;return w=y(arguments),T=w,[]},-1),j(V,"protected_methods","private_methods"),j(V,"private_instance_methods","private_methods"),j(V,"protected_instance_methods","private_methods")}("::"),function(I,V){var v=M(I,"Kernel"),x=[v].concat(V),w=e.$r(x);return D(v,"$eval",function(o){var A,N;return A=y(arguments),N=A,C.$raise(H("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+w("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",F),b(U,"$public",function(V){var v,x;return v=y(arguments),x=v,x.length===1?x[0]:x},-1),b(U,"$private",function(V){var v,x;return v=y(arguments),x=v,x.length===1?x[0]:x},-1)};Opal.modules["corelib/binding"]=function(e){var C=e.klass,z=e.truthy,g=e.def,y=e.slice,M=e.send,D=e.to_a,X=e.Kernel,j=e.return_ivar,b=e.eqeq,U=e.thrower,F=e.module,J=e.const_set,H=e.top,B=[],K=e.nil,k=e.$$$;return function(I,V){var v=C(I,V,"Binding"),x=v.$$prototype;return x.jseval=x.scope_variables=K,g(v,"$initialize",function(T,o,A,N){var L,S=this;return o==null&&(o=[]),N==null&&(N=K),L=[T,o,A,N],S.jseval=L[0],S.scope_variables=L[1],S.receiver=L[2],S.source_location=L[3],z(typeof A!==void 0)?K:A=S.$js_eval("self")},-2),g(v,"$js_eval",function(T){var o,A,N=this;return o=y(arguments),A=o,z(N.jseval)?M(N.jseval,"call",D(A)):X.$raise("Evaluation on a Proc#binding is not supported")},-1),g(v,"$local_variable_get",function(T){var o=this;try{return o.$js_eval(T)}catch(A){if(e.rescue(A,[k("Exception")]))try{return X.$raise(k("NameError"),"local variable `"+T+"' is not defined for "+o.$inspect())}finally{e.pop_exception()}else throw A}}),g(v,"$local_variable_set",function(T,o){var A=this;return e.Binding.tmp_value=o,A.$js_eval(""+T+" = Opal.Binding.tmp_value"),delete e.Binding.tmp_value,o}),g(v,"$local_variables",j("scope_variables")),g(v,"$local_variable_defined?",function(T){var o=this;return o.scope_variables["$include?"](T)}),g(v,"$eval",function(T,o,A){try{var N=U("eval_return"),L=this;return o==null&&(o=K),A==null&&(A=K),b(T,"self")?L.$receiver():X.$eval(T,L,o,A)}catch(S){if(S===e.t_eval_return)return S.$v;throw S}},-2),v.$attr_reader("receiver","source_location")}("::",null),function(I){var V=F(I,"Kernel");return g(V,"$binding",function(){return X.$raise("Opal doesn't support dynamic calls to binding")})}("::"),J(B[0],"TOPLEVEL_BINDING",k("Binding").$new(function(I){return new Function("self","return "+I)(H)},[],H,["<main>",0]))};Opal.modules["corelib/irb"]=function(e){var C=e.module,z=e.truthy,g=e.Kernel,y=e.defs,M=e.hash,D=e.gvars,X=e.lambda,j=e.send,b=e.rb_plus,U=e.const_set,F=e.klass,J=e.def,H=e.Opal,B=e.range,K=e.eqeq,k=e.thrower,I=[],V=e.nil,v=e.$$$;(function(x,w){var T=C(x,"Opal"),o=[T].concat(w);return function(A,N){var L=C(A,"IRB"),S=[L].concat(N),c=e.$r(S);return y(L,"$ensure_loaded",function(m){var f=V,h=V;if(z(e.loaded_features["$include?"](m)))return V;f=z(c("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":c("RUBY_ENGINE_VERSION"),h="https://cdn.opalrb.com/opal/"+f+"/"+m+".js";var R;if(typeof XMLHttpRequest!="undefined"){var d=new XMLHttpRequest;d.open("GET",h,!1),d.send(""),R=d.responseText}else g.$raise("You need to provision "+m+" yourself in this environment");return new Function("Opal",R)(e),e.require(m),z(e.loaded_features["$include?"](m))?V:g.$raise("Could not load "+m+" for some reason")}),L.$singleton_class().$attr_accessor("output"),y(L,"$prepare_console",function E(){var m=E.$$p||V,f,h=this,R=V,d=V;return D.stdout==null&&(D.stdout=V),D.stderr==null&&(D.stderr=V),D.stdin==null&&(D.stdin=V),E.$$p=null,function(){try{return h["$output="](""),R=M(D.stdout,X(function(u){return u==null&&(u=V),D.stdout=u}),D.stderr,X(function(u){return u==null&&(u=V),D.stderr=u})),z(h["$browser?"]())&&(j(R,"each",[],function l(u,i){var n=l.$$s==null?this:l.$$s,t=V;return u==null&&(u=V),i==null&&(i=V),t=u.$dup(),t["$write_proc="](j(n,"proc",[],function $(r){var a=$.$$s==null?this:$.$$s;return r==null&&(r=V),a["$output="](b(a.$output(),r)),a["$output="](a.$output().$split(`
`).$last(30).$join(`
`)),z(r["$end_with?"](`
`))&&a["$output="](b(a.$output(),`
`)),u.$write_proc().$call(r)},{$$s:n})),t["$tty="](!1),i.$call(t)},{$$s:h}),d=D.stdin.$read_proc(),D.stdin["$read_proc="](function(l){var u=prompt(h.$output());return u!==null?u+`
`:V})),e.yieldX(m,[])}finally{j(R,"each",[],function(u,i){return u==null&&(u=V),i==null&&(i=V),i.$call(u)}),f=[d],j(D.stdin,"read_proc=",f),f[f.length-1],f=[""],j(h,"output=",f),f[f.length-1]}}()}),y(L,"$browser?",function(){return typeof document!="undefined"&&typeof prompt!="undefined"}),U(S[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(E,m){var f=F(E,m,"Silencer"),h=f.$$prototype;return h.collector=h.stderr=V,J(f,"$initialize",function(){var d=this;return D.stderr==null&&(D.stderr=V),d.stderr=D.stderr}),J(f,"$silence",function R(){var d=R.$$p||V,l=this;return R.$$p=null,function(){try{return l.collector=v("StringIO").$new(),D.stderr=l.collector,e.yieldX(d,[])}finally{D.stderr=l.stderr}}()}),J(f,"$warnings",function(){var d=this;return d.collector.$string()})}(S[0],null)}(o[0],o)})(I[0],I),function(x,w,T){var o=F(x,w,"Binding"),A=[o].concat(T),N=e.$r(A);return J(o,"$irb",function(){try{var S=k("return"),c=this,E=V;return v(H,"IRB").$ensure_loaded("opal-replutils"),E=v(v(H,"IRB"),"Silencer").$new(),j(v(H,"IRB"),"prepare_console",[],function m(){var f=m.$$s==null?this:m.$$s;return function(){try{var h=k("break");return j(f,"loop",[],function R(){var d=R.$$s==null?this:R.$$s,l=V,u=V,i=V,n=V,t=V;d.$print(">> "),l=d.$gets(),z(l)||h.$throw(),u="",z(v(H,"IRB")["$browser?"]())&&d.$puts(l),z(l["$start_with?"]("ls "))?(u=l["$[]"](B(3,-1,!1)),i="ls"):K(l,`ls
`)?(u="self",i="ls"):z(l["$start_with?"]("show "))?(u=l["$[]"](B(5,-1,!1)),i="show"):(u=l,i="inspect"),n=V;do{try{j(E,"silence",[],function(){return n=e.compile(u,{irb:!0})})}catch($){if(e.rescue($,[N("SyntaxError")])){t=$;try{if(z(v(v(H,"IRB"),"LINEBREAKS")["$include?"](t.$message()))){d.$print(".. "),l=d.$gets(),z(l)||S.$throw(),z(v(H,"IRB")["$browser?"]())&&d.$puts(l),u=b(u,l);continue}else z(E.$warnings()["$empty?"]())?d.$warn(t.$full_message()):d.$warn(E.$warnings())}finally{e.pop_exception()}}else throw $}break}while(1);return K(i,"show")&&(d.$puts(n),S.$throw()),d.$puts(v("REPLUtils").$eval_and_print(n,i,!1,d))},{$$s:f,$$ret:S})}catch(R){if(R===h)return R.$v;throw R}}()},{$$s:c})}catch(m){if(m===S)return m.$v;throw m}})}("::",null,I),e.irb=function(x){v("Binding").$new(x).$irb()},e.load_parser=function(){e.Opal.IRB.$ensure_loaded("opal-parser")},typeof e.eval=="undefined"&&(e.eval=function(x){return e.load_parser(),e.eval(x)}),typeof e.compile=="undefined"&&(e.compile=function(x,w){return e.load_parser(),e.compile(x,w)})};Opal.queue(function(e){var C=e.Object,z=e.nil;return C.$require("opal/base"),C.$require("opal/mini"),C.$require("corelib/kernel/format"),C.$require("corelib/string/encoding"),C.$autoload("Math","corelib/math"),C.$require("corelib/complex/base"),C.$autoload("Complex","corelib/complex"),C.$require("corelib/rational/base"),C.$autoload("Rational","corelib/rational"),C.$require("corelib/time"),C.$autoload("Struct","corelib/struct"),C.$autoload("Set","corelib/set"),C.$autoload("Dir","corelib/dir"),C.$autoload("File","corelib/file"),C.$require("corelib/process/base"),C.$autoload("Process","corelib/process"),C.$autoload("Random","corelib/random"),C.$require("corelib/unsupported"),C.$require("corelib/binding"),C.$require("corelib/irb")});Opal.queue(function(e){var C=e.module,z=e.defs,g=e.slice,y=e.truthy,M=e.send,D=e.Kernel,X=e.extract_kwargs,j=e.ensure_kwargs,b=e.range,U=e.to_a,F=e.def,J=e.return_ivar,H=e.alias,B=e.klass,K=e.rb_minus,k=e.return_val,I=e.hash2,V=e.send2,v=e.find_super,x=e.eqeqeq,w=e.rb_ge,T=e.return_self,o=e.gvars,A=e.top,N=[],L=e.$r(N),S=e.nil,c=e.$$$;return function(E,m){var f=C(E,"Native"),h=[f].concat(m),R=e.$r(h);return z(f,"$is_a?",function(l,u){var i=this;try{return l instanceof i.$try_convert(u)}catch(n){return!1}}),z(f,"$try_convert",function(l,u){var i=this;return u==null&&(u=S),i["$native?"](l)?l:l["$respond_to?"]("to_n")?l.$to_n():u},-2),z(f,"$convert",function(l){var u=this;if(u["$native?"](l))return l;if(l["$respond_to?"]("to_n"))return l.$to_n();u.$raise(R("ArgumentError"),""+l.$inspect()+" isn't native")}),z(f,"$call",function d(l,u,i){var n=d.$$p||S,t,$,r=this;d.$$p=null,t=g(arguments,2),$=t;var a=l[u];if(a instanceof Function){for(var s=new Array($.length),p=0,G=$.length;p<G;p++){var Z=$[p],ie=r.$try_convert(Z);s[p]=ie===S?Z:ie}return n!==S&&s.push(n),r.$Native(a.apply(l,s))}else return r.$Native(a)},-3),z(f,"$proc",function d(){var l=d.$$p||S,u=this;return d.$$p=null,y(l)||u.$raise(R("LocalJumpError"),"no block given"),M(D,"proc",[],function i(n){var t,$,r=i.$$s==null?this:i.$$s,a=S;if(t=g(arguments),$=t,M($,"map!",[],function p(G){var Z=p.$$s==null?this:p.$$s;return G==null&&(G=S),Z.$Native(G)},{$$s:r}),a=r.$Native(this),this===e.global)return l.apply(r,$);var s=l.$$s;l.$$s=null;try{return l.apply(a,$)}finally{l.$$s=s}},{$$arity:-1,$$s:u})}),function(d,l){var u=C(d,"Helpers"),i=[u].concat(l),n=e.$r(i);return F(u,"$alias_native",function t($,r,a){var s,p,G,Z,ie=t.$$p||S,ne=this;return t.$$p=null,s=g(arguments,1),p=X(s),p=j(p),s.length>0&&(G=s.shift()),G==null&&(G=$),Z=p.$$smap.as,Z==null&&(Z=S),y(G["$end_with?"]("="))?M(ne,"define_method",[$],function se(O){var oe=se.$$s==null?this:se.$$s;return oe.native==null&&(oe.native=S),O==null&&(O=S),oe.native[G["$[]"](b(0,-2,!1))]=n("Native").$convert(O),O},{$$s:ne}):y(Z)?M(ne,"define_method",[$],function se(O){var oe=se.$$p||S,ue,te,$e=se.$$s==null?this:se.$$s,re=S;return $e.native==null&&($e.native=S),se.$$p=null,ue=g(arguments),te=ue,re=M(n("Native"),"call",[$e.native,G].concat(U(te)),oe.$to_proc()),y(re)?Z.$new(re.$to_n()):S},{$$arity:-1,$$s:ne}):M(ne,"define_method",[$],function se(O){var oe=se.$$p||S,ue,te,$e=se.$$s==null?this:se.$$s;return $e.native==null&&($e.native=S),se.$$p=null,ue=g(arguments),te=ue,M(n("Native"),"call",[$e.native,G].concat(U(te)),oe.$to_proc())},{$$arity:-1,$$s:ne})},-2),F(u,"$native_reader",function($){var r,a,s=this;return r=g(arguments),a=r,M(a,"each",[],function p(G){var Z=p.$$s==null?this:p.$$s;return G==null&&(G=S),M(Z,"define_method",[G],function ie(){var ne=ie.$$s==null?this:ie.$$s;return ne.native==null&&(ne.native=S),ne.$Native(ne.native[G])},{$$s:Z})},{$$s:s})},-1),F(u,"$native_writer",function($){var r,a,s=this;return r=g(arguments),a=r,M(a,"each",[],function p(G){var Z=p.$$s==null?this:p.$$s;return G==null&&(G=S),M(Z,"define_method",[""+G+"="],function ie(ne){var se=ie.$$s==null?this:ie.$$s;return se.native==null&&(se.native=S),ne==null&&(ne=S),se.$Native(se.native[G]=ne)},{$$s:Z})},{$$s:s})},-1),F(u,"$native_accessor",function($){var r,a,s=this;return r=g(arguments),a=r,M(s,"native_reader",U(a)),M(s,"native_writer",U(a))},-1)}(h[0],h),function(d,l){var u=C(d,"Wrapper"),i=[u].concat(l),n=e.$r(i);return F(u,"$initialize",function($){var r=this;return y(D["$native?"]($))||D.$raise(n("ArgumentError"),""+$.$inspect()+" isn't native"),r.native=$}),F(u,"$to_n",J("native")),z(u,"$included",function($){return $.$extend(n("Helpers"))})}(h[0],h),z(f,"$included",function(l){var u=this;return u.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),l.$include(R("Wrapper"))})}(N[0],N),function(E,m){var f=C(E,"Kernel"),h=[f].concat(m),R=e.$r(h);return F(f,"$native?",function(l){return l==null||!l.$$class}),F(f,"$Native",function d(l){var u=d.$$p||S,i=this;return d.$$p=null,y(l==null)?S:y(i["$native?"](l))?c(R("Native"),"Object").$new(l):y(l["$is_a?"](R("Array")))?M(l,"map",[],function n(t){var $=n.$$s==null?this:n.$$s;return t==null&&(t=S),$.$Native(t)},{$$s:i}):y(l["$is_a?"](R("Proc")))?M(i,"proc",[],function n(t){var $=n.$$p||S,r,a,s=n.$$s==null?this:n.$$s;return n.$$p=null,r=g(arguments),a=r,s.$Native(M(l,"call",U(a),$.$to_proc()))},{$$arity:-1,$$s:i}):l}),H(f,"_Array","Array"),F(f,"$Array",function d(l,u){var i=d.$$p||S,n,t,$=this;return d.$$p=null,n=g(arguments,1),t=n,y($["$native?"](l))?M(c(R("Native"),"Array"),"new",[l].concat(U(t)),i.$to_proc()).$to_a():$.$_Array(l)},-2)}(N[0],N),function(E,m){var f=B(E,m,"Object"),h=f.$$prototype;return h.native=S,f.$include(c(c("Native"),"Wrapper")),F(f,"$==",function(d){var l=this;return l.native===c("Native").$try_convert(d)}),F(f,"$has_key?",function(d){var l=this;return e.hasOwnProperty.call(l.native,d)}),F(f,"$each",function R(d){var l,u,i=R.$$p||S,n=this;if(R.$$p=null,l=g(arguments),u=l,i!==S){for(var t in n.native)e.yieldX(i,[t,n.native[t]]);return n}else return M(n,"method_missing",["each"].concat(U(u)))},-1),F(f,"$[]",function(d){var l=this,u=l.native[d];return u instanceof Function?u:c("Native").$call(l.native,d)}),F(f,"$[]=",function(d,l){var u=this,i=S;return i=c("Native").$try_convert(l),y(i===S)?u.native[d]=l:u.native[d]=i}),F(f,"$merge!",function(d){var l=this;d=c("Native").$convert(d);for(var u in d)l.native[u]=d[u];return l}),F(f,"$respond_to?",function(d,l){var u=this;return l==null&&(l=!1),D.$instance_method("respond_to?").$bind(u).$call(d,l)},-2),F(f,"$respond_to_missing?",function(d,l){var u=this;return l==null&&(l=!1),e.hasOwnProperty.call(u.native,d)},-2),F(f,"$method_missing",function R(d,l){var u=R.$$p||S,i,n,t,$=this;return R.$$p=null,i=g(arguments,1),n=i,d.charAt(d.length-1)==="="?(t=[d.$slice(0,K(d.$length(),1)),n["$[]"](0)],M($,"[]=",t),t[t.length-1]):M(c("Native"),"call",[$.native,d].concat(U(n)),u.$to_proc())},-2),F(f,"$nil?",k(!1)),F(f,"$is_a?",function(d){var l=this;return e.is_a(l,d)}),F(f,"$instance_of?",function(d){var l=this;return l.$$class===d}),F(f,"$class",function(){var d=this;return d.$$class}),F(f,"$to_a",function R(d){var l=R.$$p||S,u=this;return R.$$p=null,d==null&&(d=I([],{})),M(c(c("Native"),"Array"),"new",[u.native,d],l.$to_proc()).$to_a()},-1),F(f,"$inspect",function(){var d=this;return"#<Native:"+String(d.native)+">"}),H(f,"include?","has_key?"),H(f,"key?","has_key?"),H(f,"kind_of?","is_a?"),H(f,"member?","has_key?")}(L("Native"),L("BasicObject")),function(E,m,f){var h=B(E,m,"Array"),R=[h].concat(f),d=e.$r(R),l=h.$$prototype;return l.named=l.native=l.get=l.block=l.set=l.length=S,h.$include(c(d("Native"),"Wrapper")),h.$include(d("Enumerable")),F(h,"$initialize",function u(i,n){var t=u.$$p||S,$=this,r=S;return u.$$p=null,n==null&&(n=I([],{})),V($,v($,"initialize",u,!1,!0),"initialize",[i],null),$.get=y(r=n["$[]"]("get"))?r:n["$[]"]("access"),$.named=n["$[]"]("named"),$.set=y(r=n["$[]"]("set"))?r:n["$[]"]("access"),$.length=y(r=n["$[]"]("length"))?r:"length",$.block=t,y($.$length()==null)?$.$raise(d("ArgumentError"),"no length found on the array-like object"):S},-2),F(h,"$each",function u(){var i=u.$$p||S,n=this;if(u.$$p=null,!y(i))return n.$enum_for("each");for(var t=0,$=n.$length();t<$;t++)e.yield1(i,n["$[]"](t));return n}),F(h,"$[]",function(i){var n=this,t=S,$=S;return t=x(d("String"),$=i)||x(d("Symbol"),$)?y(n.named)?n.native[n.named](i):n.native[i]:x(d("Integer"),$)?y(n.get)?n.native[n.get](i):n.native[i]:S,y(t)?y(n.block)?n.block.$call(t):n.$Native(t):S}),F(h,"$[]=",function(i,n){var t=this;return y(t.set)?t.native[t.set](i,d("Native").$convert(n)):t.native[i]=d("Native").$convert(n)}),F(h,"$last",function(i){var n=this,t=S,$=S;if(i==null&&(i=S),y(i)){for(t=K(n.$length(),1),$=[];y(w(t,0));)$["$<<"](n["$[]"](t)),t=K(t,1);return $}else return n["$[]"](K(n.$length(),1))},-1),F(h,"$length",function(){var i=this;return i.native[i.length]}),F(h,"$inspect",function(){var i=this;return i.$to_a().$inspect()}),H(h,"to_ary","to_a")}(L("Native"),null,N),function(E,m){var f=B(E,m,"Numeric");return F(f,"$to_n",function(){var R=this;return R.valueOf()})}(N[0],null),function(E,m){var f=B(E,m,"Proc");return F(f,"$to_n",T)}(N[0],null),function(E,m){var f=B(E,m,"String");return F(f,"$to_n",function(){var R=this;return R.valueOf()})}(N[0],null),function(E,m){var f=B(E,m,"Regexp");return F(f,"$to_n",function(){var R=this;return R.valueOf()})}(N[0],null),function(E,m){var f=B(E,m,"MatchData");return F(f,"$to_n",J("matches"))}(N[0],null),function(E,m,f){var h=B(E,m,"Struct"),R=[h].concat(f),d=e.$r(R);return F(h,"$to_n",function(){var u=this,i=S;return i={},M(u,"each_pair",[],function(t,$){return t==null&&(t=S),$==null&&($=S),i[t]=d("Native").$try_convert($,$)}),i})}(N[0],null,N),function(E,m,f){var h=B(E,m,"Array"),R=[h].concat(f),d=e.$r(R);return F(h,"$to_n",function(){for(var u=this,i=[],n=0,t=u.length;n<t;n++){var $=u[n];i.push(d("Native").$try_convert($,$))}return i})}(N[0],null,N),function(E,m){var f=B(E,m,"Boolean");return F(f,"$to_n",function(){var R=this;return R.valueOf()})}(N[0],null),function(E,m){var f=B(E,m,"Time");return F(f,"$to_n",T)}(N[0],null),function(E,m){var f=B(E,m,"NilClass");return F(f,"$to_n",function(){return null})}(N[0],null),y(L("Hash")["$method_defined?"]("_initialize"))||function(E,m,f){var h=B(E,m,"Hash"),R=[h].concat(f),d=e.$r(R);return H(h,"_initialize","initialize"),F(h,"$initialize",function l(u){var i=l.$$p||S,n=this;if(l.$$p=null,u!=null&&(u.constructor===void 0||u.constructor===Object)){var t=n.$$smap,$=n.$$keys,r,a;for(r in u)a=u[r],a&&(a.constructor===void 0||a.constructor===Object)?t[r]=d("Hash").$new(a):a&&a.$$is_array?(a=a.map(function(s){return s&&(s.constructor===void 0||s.constructor===Object)?d("Hash").$new(s):n.$Native(s)}),t[r]=a):t[r]=n.$Native(a),$.push(r);return n}return M(n,"_initialize",[u],i.$to_proc())},-1),F(h,"$to_n",function(){for(var u=this,i={},n=u.$$keys,t=u.$$smap,$,r,a=0,s=n.length;a<s;a++)$=n[a],$.$$is_string?r=t[$]:($=$.key,r=$.value),i[$]=d("Native").$try_convert(r,r);return i})}(N[0],null,N),function(E,m){var f=B(E,m,"Module");return F(f,"$native_module",function(){var R=this;return e.global[R.$name()]=R})}(N[0],null),function(E,m,f){var h=B(E,m,"Class"),R=[h].concat(f),d=e.$r(R);return F(h,"$native_alias",function(u,i){var n=this,t=n.prototype[e.jsid(i)];t||n.$raise(d("NameError").$new("undefined method `"+i+"' for class `"+n.$inspect()+"'",i)),n.prototype[u]=t}),F(h,"$native_class",function(){var u=this;return u.$native_module(),u.new=u.$new})}(N[0],null,N),o.$=o.global=A.$Native(e.global)});Opal.modules.strscan=function(e){var C=e.klass,z=e.def,g=e.truthy,y=e.eqeqeq,M=e.Opal,D=e.return_ivar,X=e.send,j=e.alias,b=[],U=e.nil;return function(F,J,H){var B=C(F,J,"StringScanner"),K=[B].concat(H),k=e.$r(K),I=B.$$prototype;return I.pos=I.string=I.working=I.matched=I.prev_pos=I.match=U,B.$attr_reader("pos","matched"),z(B,"$initialize",function(v){var x=this;return x.string=v,x.pos=0,x.matched=U,x.working=v,x.match=[]}),B.$attr_reader("string"),z(B,"$beginning_of_line?",function(){var v=this;return v.pos===0||v.string.charAt(v.pos-1)===`
`}),z(B,"$scan",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:(x.prev_pos=x.pos,x.pos+=w[0].length,x.working=x.working.substring(w[0].length),x.matched=w[0],x.match=w,w[0])}),z(B,"$scan_until",function(v){var x=this;v=x.$anchor(v);for(var w=x.working,T=0;w.length!=T;++T){var o=v.exec(w.substr(T));if(o!==null){var A=T+o[0].length,N=w.substr(0,A);return x.matched=o[0],x.match=o,x.prev_pos=x.pos+T,x.pos+=A,x.working=w.substr(A),N}}return x.matched=U}),z(B,"$[]",function(v){var x=this,w=U;if(g(x.match["$empty?"]()))return U;y(k("Symbol"),w=v)?v=v.$to_s():y(k("String"),w)||(v=M["$coerce_to!"](v,k("Integer"),"to_int"));var T=x.match;return v<0&&(v+=T.length),v<0||v>=T.length||T[v]==null?U:T[v]}),z(B,"$check",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:x.matched=w[0]}),z(B,"$check_until",function(v){var x=this,w=x.prev_pos,T=x.pos,o=x.working,A=x.$scan_until(v);return x.prev_pos=w,x.pos=T,x.working=o,A}),z(B,"$peek",function(v){var x=this;return x.working.substring(0,v)}),z(B,"$eos?",function(){var v=this;return v.working.length===0}),z(B,"$exist?",function(v){var x=this,w=v.exec(x.working);return w==null?U:w.index==0?0:w.index+1}),z(B,"$skip",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);if(w==null)return x.match=[],x.matched=U;var T=w[0],o=T.length;return x.matched=T,x.match=w,x.prev_pos=x.pos,x.pos+=o,x.working=x.working.substring(o),o}),z(B,"$skip_until",function(v){var x=this,w=x.$scan_until(v);return w===U?U:(x.matched=w.substr(-1),w.length)}),z(B,"$get_byte",function(){var v=this,x=U;return v.pos<v.string.length?(v.prev_pos=v.pos,v.pos+=1,x=v.matched=v.working.substring(0,1),v.working=v.working.substring(1)):v.matched=U,x}),z(B,"$match?",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?U:(x.prev_pos=x.pos,w[0].length)}),z(B,"$pos=",function(v){var x=this;return v<0&&(v+=x.string.$length()),x.pos=v,x.working=x.string.slice(v)}),z(B,"$matched_size",function(){var v=this;return v.matched===U?U:v.matched.length}),z(B,"$post_match",function(){var v=this;return v.matched===U?U:v.string.substr(v.pos)}),z(B,"$pre_match",function(){var v=this;return v.matched===U?U:v.string.substr(0,v.prev_pos)}),z(B,"$reset",function(){var v=this;return v.working=v.string,v.matched=U,v.pos=0}),z(B,"$rest",D("working")),z(B,"$rest?",function(){var v=this;return v.working.length!==0}),z(B,"$rest_size",function(){var v=this;return v.$rest().$size()}),z(B,"$terminate",function(){var v,x=this;return x.match=U,v=[x.string.$length()],X(x,"pos=",v),v[v.length-1]}),z(B,"$unscan",function(){var v=this;return v.pos=v.prev_pos,v.prev_pos=U,v.match=U,v}),j(B,"bol?","beginning_of_line?"),j(B,"getch","get_byte"),B.$private(),z(B,"$anchor",function(v){var x=v.toString().match(/\/([^\/]+)$/);return x=x?x[1]:void 0,new RegExp("^(?:"+v.source+")",x)})}(b[0],null,b)};Opal.queue(function(e){var C=e.klass,z=e.def,g=e.module,y=e.top,M=[],D=e.$r(M),X=e.nil;return y.$require("strscan"),function(j,b,U){var F=C(j,b,"Dir"),J=[F].concat(U);return function(H,B){return z(H,"$[]",function(){return[]})}(e.get_singleton_class(F),J)}(M[0],null,M),function(j){var b=g(j,"StringScannerPatch");return z(b,"$scan_until",function(F){var J=this,J=this;F=J.$anchor(F);for(var H=J.pos,B=J.working,K;;){var k=B.length===0;if(K=F.exec(B),H+=1,B=B.substr(1),K==null){if(k)return J.matched=X;continue}return J.matched=J.string.substr(J.pos,H-J.pos-1+K[0].length),J.prev_pos=H-1,J.pos=H,J.working=B.substr(K[0].length-1),J.matched}})}(M[0]),D("StringScanner").$prepend(D("StringScannerPatch")),e.top.$__dir__=()=>"/",X})});var Ve=pe(()=>{Ee();Opal.queue(function(e){var C=e.module,z=e.ensure_kwargs,g=e.truthy,y=e.thrower,M=e.def,D=[],X=e.nil,j=e.$$$;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"ArithmeticEvaluator"),k=[K].concat(B);return function(I,V){var v=[I].concat(V),x=e.$r(v);return M(I,"$eval",function(T,o){try{var A=y("eval_return"),N,L=X;return o=z(o),N=o.$$smap.round_type,N==null&&(N=j(x("RoundType"),"FLOOR")),g(T)&&g(L=x("Arithmetic").$eval(T,N))?L:0}catch(S){if(S===e.t_eval_return)return S.$v;throw S}},-2)}(e.get_singleton_class(K),k)}(J[0],J)}(D[0],D)})});var Je=pe(()=>{Ee();Opal.modules["bcdice/normalize"]=function(e){var C=e.module,z=e.eqeqeq,g=e.def,y=e.eqeq,M=[],D=e.nil;return function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F){var J=C(F,"Normalize");return J.$module_function(),g(J,"$comparison_operator",function(B){var K=D;return z(/<=|=</,K=B)?"<=":z(/>=|=>/,K)?">=":z(/<>|!=|=!/,K)?"!=":z(/</,K)?"<":z(/>/,K)?">":z(/=/,K)?"==":D}),g(J,"$target_number",function(B){return y(B,"?")?B:B.$to_i()})}(U[0])}(M[0],M)};Opal.modules["racc/parser"]=function(e){var C=e.module,z=e.klass,g=e.truthy,y=e.const_set,M=e.defs,D=e.gvars,X=e.rb_lt,j=e.def,b=e.to_ary,U=e.send,F=e.neqeq,J=e.rb_plus,H=e.eqeq,B=e.rb_ge,K=e.rb_gt,k=e.rb_minus,I=e.rb_le,V=e.rb_times,v=e.assign_ivar_val,x,w=[],T=e.$r(w),o=e.nil,A=e.$$$;return function(N,L){var S=C(N,"Racc"),c=[S].concat(L),E=e.$r(c);return z(c[0],E("StandardError"),"ParseError"),o}(w[0],w),g((x=A("::","ParseError","skip_raise"))?"constant":o)||y(w[0],"ParseError",A(T("Racc"),"ParseError")),function(N,L){var S=C(N,"Racc"),c,E=[S].concat(L),m=e.$r(E);return g((c=m("Racc_No_Extensions","skip_raise"))?"constant":o)||y(E[0],"Racc_No_Extensions",!1),function(f,h,R){var d=z(f,h,"Parser"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.yydebug=i.racc_debug_out=i.racc_error_status=i.racc_t=i.racc_vstack=i.racc_val=i.racc_state=i.racc_tstack=o,y(l[0],"Racc_Runtime_Version","1.4.6"),y(l[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Runtime_Core_Version_R","1.4.6"),y(l[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),y(l[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),y(l[0],"Racc_Runtime_Core_Version",u("Racc_Runtime_Core_Version_R")),y(l[0],"Racc_Runtime_Core_Revision",u("Racc_Runtime_Core_Revision_R")),y(l[0],"Racc_Runtime_Type","ruby"),M(u("Parser"),"$racc_runtime_type",function(){return u("Racc_Runtime_Type")}),j(d,"$_racc_setup",function(){var t,$,r=this,a=o,s=o;return D.stderr==null&&(D.stderr=o),g(A(r.$class(),"Racc_debug_parser"))||(r.yydebug=!1),g((t=r.yydebug,t!=null&&t!==o?"instance-variable":o))||(r.yydebug=!1),g(r.yydebug)&&(g(($=r.racc_debug_out,$!=null&&$!==o?"instance-variable":o))||(r.racc_debug_out=D.stderr),r.racc_debug_out=g(a=r.racc_debug_out)?a:D.stderr),s=A(r.$class(),"Racc_arg"),g(X(s.$size(),14))&&s["$[]="](13,!0),s}),j(d,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=o,t.racc_val=o,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),j(d,"$do_parse",function(){var t=this;return t.$__send__(u("Racc_Main_Parsing_Routine"),t.$_racc_setup(),!1)}),j(d,"$next_token",function(){var t=this;return t.$raise(u("NotImplementedError"),""+t.$class()+"#next_token is not defined")}),j(d,"$_racc_do_parse_rb",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o;return a=t,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],ne=r[4]==null?o:r[4],ne=r[5]==null?o:r[5],ne=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],ne=r[8]==null?o:r[8],ne=r[9]==null?o:r[9],se=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],ne=r[12]==null?o:r[12],ne=r[13]==null?o:r[13],s.$_racc_init_sysvars(),O=oe=ue=o,U(s,"catch",["racc_end_parse"],function te(){var $e,re,P=te.$$s==null?this:te.$$s,W=o;for(P.racc_state==null&&(P.racc_state=o),P.racc_read_next==null&&(P.racc_read_next=o),P.racc_t==null&&(P.racc_t=o),P.yydebug==null&&(P.yydebug=o),P.racc_val==null&&(P.racc_val=o);g(!0);)for(g(ue=ie["$[]"](P.racc_state["$[]"](-1)))?(g(P.racc_read_next)&&F(P.racc_t,0)&&(re=P.$next_token(),$e=b(re),O=$e[0]==null?o:$e[0],P.racc_val=$e[1]==null?o:$e[1],g(O)?P.racc_t=g(W=se["$[]"](O))?W:1:P.racc_t=0,g(P.yydebug)&&P.$racc_read_token(P.racc_t,O,P.racc_val),P.racc_read_next=!1),ue=J(ue,P.racc_t),g(B(ue,0))&&g(oe=p["$[]"](ue))&&H(G["$[]"](ue),P.racc_state["$[]"](-1))||(oe=Z["$[]"](P.racc_state["$[]"](-1)))):oe=Z["$[]"](P.racc_state["$[]"](-1));g(oe=P.$_racc_evalact(oe,t)););},{$$s:s})}),j(d,"$yyparse",function(t,$){var r=this;return r.$__send__(u("Racc_YY_Parse_Method"),t,$,r.$_racc_setup(),!0)}),j(d,"$_racc_yyparse_rb",function(t,$,r,a){var s,p,G=this,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o;return p=r,s=b(p),Z=s[0]==null?o:s[0],ie=s[1]==null?o:s[1],ne=s[2]==null?o:s[2],se=s[3]==null?o:s[3],O=s[4]==null?o:s[4],O=s[5]==null?o:s[5],O=s[6]==null?o:s[6],O=s[7]==null?o:s[7],O=s[8]==null?o:s[8],O=s[9]==null?o:s[9],oe=s[10]==null?o:s[10],O=s[11]==null?o:s[11],O=s[12]==null?o:s[12],O=s[13]==null?o:s[13],G.$_racc_init_sysvars(),ue=o,te=o,U(G,"catch",["racc_end_parse"],function $e(){var re=$e.$$s==null?this:$e.$$s;for(re.racc_state==null&&(re.racc_state=o);!g(te=se["$[]"](re.racc_state["$[]"](-1)));)for(;g(ue=re.$_racc_evalact(ne["$[]"](re.racc_state["$[]"](-1)),r)););return U(t,"__send__",[$],function P(W,ee){var _=P.$$s==null?this:P.$$s,q=o,Y=o;for(_.racc_t==null&&(_.racc_t=o),_.racc_state==null&&(_.racc_state=o),_.racc_read_next==null&&(_.racc_read_next=o),W==null&&(W=o),ee==null&&(ee=o),g(W)?_.racc_t=g(q=oe["$[]"](W))?q:1:_.racc_t=0,_.racc_val=ee,_.racc_read_next=!1,te=J(te,_.racc_t),g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););for(;g(g(q=g(Y=(te=se["$[]"](_.racc_state["$[]"](-1)))["$!"]())?Y:_.racc_read_next["$!"]())?q:_.racc_t["$=="](0));)for(g(te)&&g(te=J(te,_.racc_t))&&g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););},{$$s:re})},{$$s:G})}),j(d,"$_racc_evalact",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o;if(a=$,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],Z=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],Z=r[6]==null?o:r[6],Z=r[7]==null?o:r[7],Z=r[8]==null?o:r[8],Z=r[9]==null?o:r[9],Z=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],se=r[12]==null?o:r[12],Z=r[13]==null?o:r[13],Z=r[14]==null?o:r[14],g(K(t,0))&&g(X(t,ne)))g(K(s.racc_error_status,0))&&(H(s.racc_t,1)||(s.racc_error_status=k(s.racc_error_status,1))),s.racc_vstack.$push(s.racc_val),s.racc_state.$push(t),s.racc_read_next=!0,g(s.yydebug)&&(s.racc_tstack.$push(s.racc_t),s.$racc_shift(s.racc_t,s.racc_tstack,s.racc_vstack));else if(g(X(t,0))&&g(K(t,se["$-@"]()))){if(O=U(s,"catch",["racc_jump"],function ue(){var te=ue.$$s==null?this:ue.$$s;return te.racc_state==null&&(te.racc_state=o),te.racc_state.$push(te.$_racc_do_reduce($,t)),!1},{$$s:s}),g(O))switch(O){case 1:return s.racc_user_yyerror=!0,se["$-@"]();case 2:return ne;default:s.$raise("[Racc Bug] unknown jump code")}}else if(H(t,ne))g(s.yydebug)&&s.$racc_accept(),s.$throw("racc_end_parse",s.racc_vstack["$[]"](0));else if(H(t,se["$-@"]())){switch(s.racc_error_status){case 0:g($["$[]"](21))||s.$on_error(s.racc_t,s.racc_val,s.racc_vstack);break;case 3:H(s.racc_t,0)&&s.$throw("racc_end_parse",o),s.racc_read_next=!0;break;default:}for(s.racc_user_yyerror=!1,s.racc_error_status=3;g(!0)&&!(g(oe=ie["$[]"](s.racc_state["$[]"](-1)))&&(oe=J(oe,1),g(B(oe,0))&&g(t=p["$[]"](oe))&&H(G["$[]"](oe),s.racc_state["$[]"](-1))));)g(I(s.racc_state.$size(),1))&&s.$throw("racc_end_parse",o),s.racc_state.$pop(),s.racc_vstack.$pop(),g(s.yydebug)&&(s.racc_tstack.$pop(),s.$racc_e_pop(s.racc_state,s.racc_tstack,s.racc_vstack));return t}else s.$raise("[Racc Bug] unknown action "+t.$inspect());return g(s.yydebug)&&s.$racc_next_state(s.racc_state["$[]"](-1),s.racc_state),o}),j(d,"$_racc_do_reduce",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o,$e=o,re=o,P=o,W=o,ee=o,_=o,q=o,Y=o,Q=o,ae=o;return a=t,r=b(a),p=r[0]==null?o:r[0],p=r[1]==null?o:r[1],p=r[2]==null?o:r[2],p=r[3]==null?o:r[3],G=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],ie=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],se=r[8]==null?o:r[8],O=r[9]==null?o:r[9],p=r[10]==null?o:r[10],p=r[11]==null?o:r[11],p=r[12]==null?o:r[12],oe=r[13]==null?o:r[13],ue=s.racc_state,te=s.racc_vstack,$e=s.racc_tstack,re=V($,-3),P=O["$[]"](re),W=O["$[]"](J(re,1)),ee=O["$[]"](J(re,2)),_=[],g(s.yydebug)&&(q=$e["$[]"](P["$-@"](),P)),Y=te["$[]"](P["$-@"](),P),g(s.yydebug)&&$e["$[]="](P["$-@"](),P,_),te["$[]="](P["$-@"](),P,_),ue["$[]="](P["$-@"](),P,_),g(oe)?te.$push(s.$__send__(ee,Y,te,Y["$[]"](0))):te.$push(s.$__send__(ee,Y,te)),$e.$push(W),g(s.yydebug)&&s.$racc_reduce(q,W,$e,te),Q=k(W,se),g(re=ne["$[]"](Q))&&(re=J(re,ue["$[]"](-1)),g(B(re,0))&&g(ae=G["$[]"](re))&&H(Z["$[]"](re),Q))?ae:ie["$[]"](Q)}),j(d,"$on_error",function(t,$,r){var a=this,s=o;return a.$raise(u("ParseError"),a.$sprintf(`
parse error on value %s (%s)`,$.$inspect(),g(s=a.$token_to_str(t))?s:"?"))}),j(d,"$yyerror",function(){var t=this;return t.$throw("racc_jump",1)}),j(d,"$yyaccept",function(){var t=this;return t.$throw("racc_jump",2)}),j(d,"$yyerrok",v("racc_error_status",0)),j(d,"$racc_read_token",function(t,$,r){var a=this;return a.racc_debug_out.$print("read    "),a.racc_debug_out.$print($.$inspect(),"(",a.$racc_token2str(t),") "),a.racc_debug_out.$puts(r.$inspect()),a.racc_debug_out.$puts()}),j(d,"$racc_shift",function(t,$,r){var a=this;return a.racc_debug_out.$puts("shift   "+a.$racc_token2str(t)),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_reduce",function(t,$,r,a){var s=this,p=o;return p=s.racc_debug_out,p.$print("reduce "),g(t["$empty?"]())?p.$print(" <none>"):U(t,"each",[],function G(Z){var ie=G.$$s==null?this:G.$$s;return Z==null&&(Z=o),p.$print(" ",ie.$racc_token2str(Z))},{$$s:s}),p.$puts(" --> "+s.$racc_token2str($)),s.$racc_print_stacks(r,a),s.racc_debug_out.$puts()}),j(d,"$racc_accept",function(){var t=this;return t.racc_debug_out.$puts("accept"),t.racc_debug_out.$puts()}),j(d,"$racc_e_pop",function(t,$,r){var a=this;return a.racc_debug_out.$puts("error recovering mode: pop token"),a.$racc_print_states(t),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_next_state",function(t,$){var r=this;return r.racc_debug_out.$puts("goto    "+t),r.$racc_print_states($),r.racc_debug_out.$puts()}),j(d,"$racc_print_stacks",function(t,$){var r=this,a=o;return a=r.racc_debug_out,a.$print("        ["),U(t,"each_index",[],function s(p){var G=s.$$s==null?this:s.$$s;return p==null&&(p=o),a.$print(" (",G.$racc_token2str(t["$[]"](p))," ",$["$[]"](p).$inspect(),")")},{$$s:r}),a.$puts(" ]")}),j(d,"$racc_print_states",function(t){var $=this,r=o;return r=$.racc_debug_out,r.$print("        ["),U(t,"each",[],function(s){return s==null&&(s=o),r.$print(" ",s)}),r.$puts(" ]")}),j(d,"$racc_token2str",function(t){var $=this,r=o;return g(r=A($.$class(),"Racc_token_to_s_table")["$[]"](t))?r:$.$raise("[Racc Bug] can't convert token "+t+" to string")}),j(d,"$token_to_str",function(t){var $=this;return A($.$class(),"Racc_token_to_s_table")["$[]"](t)})}(E[0],null,E)}(w[0],w)};Opal.modules.strscan=function(e){var C=e.klass,z=e.def,g=e.truthy,y=e.eqeqeq,M=e.Opal,D=e.return_ivar,X=e.send,j=e.alias,b=[],U=e.nil;return function(F,J,H){var B=C(F,J,"StringScanner"),K=[B].concat(H),k=e.$r(K),I=B.$$prototype;return I.pos=I.string=I.working=I.matched=I.prev_pos=I.match=U,B.$attr_reader("pos","matched"),z(B,"$initialize",function(v){var x=this;return x.string=v,x.pos=0,x.matched=U,x.working=v,x.match=[]}),B.$attr_reader("string"),z(B,"$beginning_of_line?",function(){var v=this;return v.pos===0||v.string.charAt(v.pos-1)===`
`}),z(B,"$scan",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:(x.prev_pos=x.pos,x.pos+=w[0].length,x.working=x.working.substring(w[0].length),x.matched=w[0],x.match=w,w[0])}),z(B,"$scan_until",function(v){var x=this;v=x.$anchor(v);for(var w=x.working,T=0;w.length!=T;++T){var o=v.exec(w.substr(T));if(o!==null){var A=T+o[0].length,N=w.substr(0,A);return x.matched=o[0],x.match=o,x.prev_pos=x.pos+T,x.pos+=A,x.working=w.substr(A),N}}return x.matched=U}),z(B,"$[]",function(v){var x=this,w=U;if(g(x.match["$empty?"]()))return U;y(k("Symbol"),w=v)?v=v.$to_s():y(k("String"),w)||(v=M["$coerce_to!"](v,k("Integer"),"to_int"));var T=x.match;return v<0&&(v+=T.length),v<0||v>=T.length||T[v]==null?U:T[v]}),z(B,"$check",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:x.matched=w[0]}),z(B,"$check_until",function(v){var x=this,w=x.prev_pos,T=x.pos,o=x.working,A=x.$scan_until(v);return x.prev_pos=w,x.pos=T,x.working=o,A}),z(B,"$peek",function(v){var x=this;return x.working.substring(0,v)}),z(B,"$eos?",function(){var v=this;return v.working.length===0}),z(B,"$exist?",function(v){var x=this,w=v.exec(x.working);return w==null?U:w.index==0?0:w.index+1}),z(B,"$skip",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);if(w==null)return x.match=[],x.matched=U;var T=w[0],o=T.length;return x.matched=T,x.match=w,x.prev_pos=x.pos,x.pos+=o,x.working=x.working.substring(o),o}),z(B,"$skip_until",function(v){var x=this,w=x.$scan_until(v);return w===U?U:(x.matched=w.substr(-1),w.length)}),z(B,"$get_byte",function(){var v=this,x=U;return v.pos<v.string.length?(v.prev_pos=v.pos,v.pos+=1,x=v.matched=v.working.substring(0,1),v.working=v.working.substring(1)):v.matched=U,x}),z(B,"$match?",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?U:(x.prev_pos=x.pos,w[0].length)}),z(B,"$pos=",function(v){var x=this;return v<0&&(v+=x.string.$length()),x.pos=v,x.working=x.string.slice(v)}),z(B,"$matched_size",function(){var v=this;return v.matched===U?U:v.matched.length}),z(B,"$post_match",function(){var v=this;return v.matched===U?U:v.string.substr(v.pos)}),z(B,"$pre_match",function(){var v=this;return v.matched===U?U:v.string.substr(0,v.prev_pos)}),z(B,"$reset",function(){var v=this;return v.working=v.string,v.matched=U,v.pos=0}),z(B,"$rest",D("working")),z(B,"$rest?",function(){var v=this;return v.working.length!==0}),z(B,"$rest_size",function(){var v=this;return v.$rest().$size()}),z(B,"$terminate",function(){var v,x=this;return x.match=U,v=[x.string.$length()],X(x,"pos=",v),v[v.length-1]}),z(B,"$unscan",function(){var v=this;return v.pos=v.prev_pos,v.prev_pos=U,v.match=U,v}),j(B,"bol?","beginning_of_line?"),j(B,"getch","get_byte"),B.$private(),z(B,"$anchor",function(v){var x=v.toString().match(/\/([^\/]+)$/);return x=x?x[1]:void 0,new RegExp("^(?:"+v.source+")",x)})}(b[0],null,b)};Opal.modules["bcdice/common_command/lexer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.hash2,M=e.truthy,D=e.def,X=e.top,j=[],b=e.nil;return X.$require("strscan"),X.$require("bcdice/normalize"),function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"CommonCommand"),I=[k].concat(K);return function(V,v,x){var w=z(V,v,"Lexer"),T=[w].concat(x),o=e.$r(T),A=w.$$prototype;return A.scanner=b,g(T[0],"SYMBOLS",y(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),D(w,"$initialize",function(L){var S=this,c=b;return L=M(c=L.$split(" ",2).$first())?c:"",S.scanner=o("StringScanner").$new(L)}),D(w,"$next_token",function(){var L=this,S=b,c=b,E=b,m=b,f=b;return M(L.scanner["$eos?"]())?[!1,"$"]:M(S=L.scanner.$scan(/\d+/))?["NUMBER",S.$to_i()]:M(c=L.scanner.$scan(/[<>!=]+/))?["CMP_OP",o("Normalize").$comparison_operator(c)]:(E=L.scanner.$getch().$upcase(),m=M(f=o("SYMBOLS")["$[]"](E))?f:E.$to_sym(),[m,E])}),D(w,"$source",function(){var L=this;return L.scanner.$string()})}(I[0],null,I)}(H[0],H)}(j[0],j)};Opal.modules.singleton=function(e){var C=e.module,z=e.def,g=e.send2,y=e.find_super,M=e.send,D=e.truthy,X=e.defs,j=[],b=e.nil;return function(U,F){var J=C(U,"Singleton"),H=[J].concat(F),B=e.$r(H);return z(J,"$clone",function(){var k=this;return k.$raise(B("TypeError"),"can't clone instance of singleton "+k.$class())}),z(J,"$dup",function(){var k=this;return k.$raise(B("TypeError"),"can't dup instance of singleton "+k.$class())}),function(K,k){var I=C(K,"SingletonClassMethods"),V=[I].concat(k),v=e.$r(V);return z(I,"$clone",function x(){var w=x.$$p||b,T=this;return x.$$p=null,v("Singleton").$__init__(g(T,y(T,"clone",x,!1,!0),"clone",[],w))}),z(I,"$inherited",function x(w){var T=x.$$p||b,o=this;return x.$$p=null,g(o,y(o,"inherited",x,!1,!0),"inherited",[w],T),v("Singleton").$__init__(w)})}(H[0],H),function(K,k){var I=[K].concat(k),V=e.$r(I);return z(K,"$__init__",function(x){var w=this;return M(x,"instance_eval",[],function T(){var o=T.$$s==null?this:T.$$s;return o.singleton__instance__=b},{$$s:w}),X(x,"$instance",function(){var o=this;return o.singleton__instance__==null&&(o.singleton__instance__=b),D(o.singleton__instance__)?o.singleton__instance__:o.singleton__instance__=o.$new()}),x}),z(K,"$included",function v(x){var w=v.$$p||b,T=this;return v.$$p=null,g(T,y(T,"included",v,!1,!0),"included",[x],w),x.$extend(V("SingletonClassMethods")),V("Singleton").$__init__(x)})}(e.get_singleton_class(B("Singleton")),H)}(j[0],j)};Opal.modules["bcdice/common_command/add_dice/node"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.rb_plus,M=e.thrower,D=e.truthy,X=e.rb_le,j=e.send,b=e.return_val,U=e.alias,F=e.return_ivar,J=e.send2,H=e.find_super,B=e.const_set,K=e.eqeqeq,k=e.rb_divide,I=e.assign_ivar,V=e.not,v=e.neqeq,x=e.top,w=[],T=e.nil,o=e.$$$;return x.$require("singleton"),function(A,N){var L=C(A,"BCDice"),S=[L].concat(N);return function(c,E){var m=C(c,"CommonCommand"),f=[m].concat(E);return function(h,R){var d=C(h,"AddDice"),l=[d].concat(R);return function(u,i){var n=C(u,"Node"),t=[n].concat(i),$=e.$r(t);return function(r,a,s){var p=z(r,a,"Command"),G=[p].concat(s),Z=e.$r(G),ie=p.$$prototype;return ie.lhs=ie.rhs=ie.cmp_op=T,p.$attr_reader("lhs"),p.$attr_reader("cmp_op"),p.$attr_reader("rhs"),g(p,"$initialize",function(se,O,oe,ue){var te=this;return oe==null&&(oe=T),ue==null&&(ue=T),te.secret=se,te.lhs=O,te.cmp_op=oe,te.rhs=ue},-3),g(p,"$expr",function(se){try{var O=M("eval_return"),oe,ue=this;return y(y(ue.lhs.$expr(se),ue.$cmp_op_text()),(oe=ue.rhs,oe===T||oe==null?T:oe.$eval(se,T)).$to_s())}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),g(p,"$s_exp",function(){var se=this;return D(se.cmp_op)?"(Command ("+se.cmp_op+" "+se.lhs.$s_exp()+" "+se.rhs.$s_exp()+"))":"(Command "+se.lhs.$s_exp()+")"}),g(p,"$eval",function(se,O){try{var oe=M("eval_return"),ue,te=this,$e=T,re=T,P=T,W=T,ee=T,_=T;return O=Z("Randomizer").$new(O,se),$e=te.lhs.$eval(se,O),re=D(X(O.$rand_results().$size(),1))&&D(te.lhs["$is_a?"](o(Z("Node"),"DiceRoll")))?T:te.lhs.$output(),P=D(te.cmp_op)?(W=te.rhs.$eval(se,T),se.$check_result($e,O.$rand_results(),te.cmp_op,W)):T,P=D(ee=P)?ee:Z("Result").$new(),_=["("+te.$expr(se)+")",re,$e,(ue=P,ue===T||ue==null?T:ue.$text())].$compact(),j(P,"tap",[],function q(Y){var Q,ae=q.$$s==null?this:q.$$s;return ae.secret==null&&(ae.secret=T),Y==null&&(Y=T),Y["$secret="](ae.secret),Q=[_.$join(" \uFF1E ")],j(Y,"text=",Q),Q[Q.length-1]},{$$s:te})}catch(q){if(q===e.t_eval_return)return q.$v;throw q}}),p.$private(),g(p,"$cmp_op_text",function(){var se=this;switch(se.cmp_op){case"!=":return"<>";case"==":return"=";default:return se.cmp_op.$to_s()}})}(t[0],null,t),function(r,a,s){var p=z(r,a,"UndecidedTarget"),G=[p].concat(s),Z=e.$r(G);return p.$include(Z("Singleton")),g(p,"$eval",b("?")),g(p,"$include_dice?",b(!1)),g(p,"$expr",b("?")),g(p,"$output",b("?")),U(p,"s_exp","output")}(t[0],null,t),function(r,a){var s=z(r,a,"BinaryOp"),p=s.$$prototype;return p.lhs=p.rhs=p.op=T,g(s,"$initialize",function(Z,ie,ne){var se=this;return se.lhs=Z,se.op=ie,se.rhs=ne}),g(s,"$eval",function(Z,ie){try{var ne=M("eval_return"),se=this,O=T,oe=T;return O=se.lhs.$eval(Z,ie),oe=se.rhs.$eval(Z,ie),se.$calc(O,oe,Z.$round_type()).$to_i()}catch(ue){if(ue===e.t_eval_return)return ue.$v;throw ue}}),g(s,"$include_dice?",function(){var Z=this,ie=T;return D(ie=Z.lhs["$include_dice?"]())?ie:Z.rhs["$include_dice?"]()}),g(s,"$expr",function(Z){var ie=this,ne=T,se=T;return ne=ie.lhs.$expr(Z),se=ie.rhs.$expr(Z),""+ne+ie.op+se}),g(s,"$output",function(){var Z=this;return""+Z.lhs.$output()+Z.op+Z.rhs.$output()}),g(s,"$s_exp",function(){var Z=this;return"("+Z.$op_for_s_exp()+" "+Z.lhs.$s_exp()+" "+Z.rhs.$s_exp()+")"}),s.$private(),g(s,"$calc",function(Z,ie,ne){var se=this;return Z.$send(se.op,ie).$to_i()}),g(s,"$op_for_s_exp",F("op"))}(t[0],null),function(r,a,s){var p=z(r,a,"DivideBase"),G=[p].concat(s),Z=e.$r(G),ie=p.$$prototype;return ie.op=T,g(p,"$initialize",function ne(se,O){var oe=ne.$$p||T,ue=this;return ne.$$p=null,J(ue,H(ue,"initialize",ne,!1,!0),"initialize",[se,"/",O],null)}),g(p,"$expr",function ne(se){var O=ne.$$p||T,oe=this;return ne.$$p=null,""+J(oe,H(oe,"expr",ne,!1,!0),"expr",[se],null)+oe.$rounding_method()}),g(p,"$output",function ne(){var se=ne.$$p||T,O=this;return ne.$$p=null,""+J(O,H(O,"output",ne,!1,!0),"output",[],se)+O.$rounding_method()}),p.$private(),g(p,"$rounding_method",function(){var se=this;return o(se.$class(),"ROUNDING_METHOD")}),g(p,"$op_for_s_exp",function(){var se=this;return""+se.op+se.$rounding_method()}),g(p,"$calc",function(se,O,oe){var ue=this;return D(O["$zero?"]())?1:ue.$divide_and_round(se,O,oe).$to_i()}),g(p,"$divide_and_round",function(se,O,oe){var ue=this;return ue.$raise(Z("NotImplementedError"))})}(t[0],$("BinaryOp"),t),function(r,a,s){var p=z(r,a,"DivideWithGameSystemDefault"),G=[p].concat(s),Z=e.$r(G);return B(G[0],"ROUNDING_METHOD",""),p.$private(),g(p,"$divide_and_round",function(ne,se,O){var oe=T,ue=T;return K(o(Z("RoundType"),"CEIL"),oe=O)?k(ne.$to_f(),se).$ceil():K(o(Z("RoundType"),"ROUND"),oe)?(ue=k(ne.$to_f(),se),D(ue["$negative?"]())?ue.$abs().$round()["$-@"]():ue.$round()):k(ne,se).$floor()})}(t[0],$("DivideBase"),t),function(r,a,s){var p=z(r,a,"DivideWithRoundingUp"),G=[p].concat(s);return B(G[0],"ROUNDING_METHOD","U"),p.$private(),g(p,"$divide_and_round",function(ie,ne,se){return k(ie.$to_f(),ne).$ceil()})}(t[0],$("DivideBase"),t),function(r,a,s){var p=z(r,a,"DivideWithRoundingOff"),G=[p].concat(s);return B(G[0],"ROUNDING_METHOD","R"),p.$private(),g(p,"$divide_and_round",function(ie,ne,se){var O=T;return O=k(ie.$to_f(),ne),D(O["$negative?"]())?O.$abs().$round()["$-@"]():O.$round()})}(t[0],$("DivideBase"),t),function(r,a,s){var p=z(r,a,"DivideWithRoundingDown"),G=[p].concat(s);return B(G[0],"ROUNDING_METHOD","F"),p.$private(),g(p,"$divide_and_round",function(ie,ne,se){return k(ie,ne).$floor()})}(t[0],$("DivideBase"),t),function(r,a){var s=z(r,a,"Negate"),p=s.$$prototype;return p.body=T,s.$attr_reader("body"),g(s,"$initialize",I("body")),g(s,"$eval",function(Z,ie){try{var ne=M("eval_return"),se=this;return se.body.$eval(Z,ie).$to_i()["$-@"]()}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),g(s,"$include_dice?",function(){var Z=this;return Z.body["$include_dice?"]()}),g(s,"$expr",function(Z){var ie=this;return"-"+ie.body.$expr(Z)}),g(s,"$output",function(){var Z=this;return"-"+Z.body.$output()}),g(s,"$s_exp",function(){var Z=this;return"(- "+Z.body.$s_exp()+")"})}(t[0],null),function(r,a){var s=z(r,a,"DiceRoll"),p=s.$$prototype;return p.times=p.sides=T,g(s,"$initialize",function(Z,ie){var ne=this;return ne.times=Z,ne.sides=ie,ne.text=T}),g(s,"$eval",function(Z,ie){try{var ne=M("eval_return"),se=this,O=T,oe=T,ue=T,te=T;return O=se.times.$eval(Z,T),oe=se.$eval_sides(Z),ue=ie.$roll(O,oe),te=ue.$sum(),se.text=""+te+"["+ue.$join(",")+"]",te.$to_i()}catch($e){if($e===e.t_eval_return)return $e.$v;throw $e}}),g(s,"$include_dice?",b(!0)),g(s,"$expr",function(Z){try{var ie=M("eval_return"),ne=this,se=T,O=T;return se=ne.times.$eval(Z,T),O=ne.$eval_sides(Z),""+se+"D"+O}catch(oe){if(oe===e.t_eval_return)return oe.$v;throw oe}}),g(s,"$output",F("text")),g(s,"$s_exp",function(){var Z=this;return"(DiceRoll "+Z.times.$s_exp()+" "+Z.sides.$s_exp()+")"}),s.$private(),g(s,"$eval_sides",function(Z){try{var ie=M("eval_return"),ne=this;return ne.sides.$eval(Z,T)}catch(se){if(se===e.t_eval_return)return se.$v;throw se}})}(t[0],null),function(r,a){var s=z(r,a,"ImplicitSidesDiceRoll"),p=s.$$prototype;return p.times=T,g(s,"$initialize",function(Z){var ie=this;return ie.times=Z,ie.text=T}),g(s,"$s_exp",function(){var Z=this;return"(ImplicitSidesDiceRoll "+Z.times.$s_exp()+")"}),s.$private(),g(s,"$eval_sides",function(Z){return Z.$sides_implicit_d()})}(t[0],$("DiceRoll")),function(r,a,s){var p=z(r,a,"DiceRollWithFilter"),G=[p].concat(s),Z=e.$r(G),ie=p.$$prototype;return ie.times=ie.n_filtering=ie.filter=ie.sides=T,B(G[0],"Filter",Z("Struct").$new("abbr","apply")),B(G[0],"KEEP_HIGHEST",Z("Filter").$new("KH",j(p,"lambda",[],function(se,O){return se==null&&(se=T),O==null&&(O=T),se.$reverse().$take(O)})).$freeze()),B(G[0],"KEEP_LOWEST",Z("Filter").$new("KL",j(p,"lambda",[],function(se,O){return se==null&&(se=T),O==null&&(O=T),se.$take(O)})).$freeze()),B(G[0],"DROP_HIGHEST",Z("Filter").$new("DH",j(p,"lambda",[],function(se,O){return se==null&&(se=T),O==null&&(O=T),se.$reverse().$drop(O)})).$freeze()),B(G[0],"DROP_LOWEST",Z("Filter").$new("DL",j(p,"lambda",[],function(se,O){return se==null&&(se=T),O==null&&(O=T),se.$drop(O)})).$freeze()),g(p,"$initialize",function(se,O,oe,ue){var te=this;return v(O,"implicit")&&V(O["$respond_to?"]("eval"))&&te.$raise(Z("TypeError"),"sides must be a Node or :implicit ("+O.$inspect()+")"),te.times=se,te.sides=O,te.n_filtering=oe,te.filter=ue,te.text=T}),g(p,"$eval",function(se,O){try{var oe=M("eval_return"),ue=this,te=T,$e=T,re=T,P=T,W=T;return te=ue.times.$eval(se,T),$e=ue.$eval_sides(se),re=ue.n_filtering.$eval(se,T),P=O.$roll(te,$e).$sort(),W=ue.filter.$apply()["$[]"](P,re).$sum(),ue.text=""+W+"["+P.$join(",")+"]",W.$to_i()}catch(ee){if(ee===e.t_eval_return)return ee.$v;throw ee}}),g(p,"$include_dice?",b(!0)),g(p,"$implicit_sides?",function(){var se=this;return se.sides["$=="]("implicit")}),g(p,"$expr",function(se){try{var O=M("eval_return"),oe=this,ue=T,te=T,$e=T;return ue=oe.times.$eval(se,T),te=oe.$eval_sides(se),$e=oe.n_filtering.$eval(se,T),""+ue+"D"+te+oe.filter.$abbr()+$e}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),g(p,"$output",F("text")),g(p,"$s_exp",function(){var se=this,O=T;return O=D(se["$implicit_sides?"]())?se.sides.$inspect():se.sides.$s_exp(),"(DiceRollWithFilter "+se.times.$s_exp()+" "+O+" "+se.filter.$abbr().$inspect()+" "+se.n_filtering.$s_exp()+")"}),p.$private(),g(p,"$eval_sides",function(se){try{var O=M("eval_return"),oe=this;return D(oe["$implicit_sides?"]())?se.$sides_implicit_d():oe.sides.$eval(se,T)}catch(ue){if(ue===e.t_eval_return)return ue.$v;throw ue}})}(t[0],null,t),function(r,a){var s=z(r,a,"Parenthesis"),p=s.$$prototype;return p.expr=T,g(s,"$initialize",I("expr")),g(s,"$eval",function(Z,ie){try{var ne=M("eval_return"),se=this;return se.expr.$eval(Z,ie).$to_i()}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),g(s,"$include_dice?",function(){var Z=this;return Z.expr["$include_dice?"]()}),g(s,"$expr",function(Z){var ie=this;return"("+ie.expr.$expr(Z)+")"}),g(s,"$output",function(){var Z=this;return"("+Z.expr.$output()+")"}),g(s,"$s_exp",function(){var Z=this;return"(Parenthesis "+Z.expr.$s_exp()+")"})}(t[0],null),function(r,a,s){var p=z(r,a,"Number"),G=[p].concat(s),Z=e.$r(G),ie=p.$$prototype;return ie.literal=T,p.$attr_reader("literal"),g(p,"$initialize",function(se){var O=this;return O.literal=se.$to_i()}),g(p,"$negate",function(){var se=this;return Z("Number").$new(se.literal["$-@"]())}),g(p,"$eval",function(se,O){var oe=this;return oe.literal.$to_i()}),g(p,"$include_dice?",b(!1)),g(p,"$expr",function(se){var O=this;return O.literal.$to_s()}),g(p,"$output",function(){var se=this;return se.literal.$to_s()}),U(p,"s_exp","output")}(t[0],null,t)}(l[0],l)}(f[0],f)}(S[0],S)}(w[0],w)};Opal.modules["bcdice/common_command/add_dice/parser"]=function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.truthy,D=e.eqeq,X=e.hash,j=e.const_set,b=e.to_ary,U=e.not,F=e.return_val,J=e.neqeq,H=e.hash2,B=e.top,K=[],k=e.nil,I=e.$$$;return B.$require("racc/parser.rb"),B.$require("bcdice/common_command/lexer"),B.$require("bcdice/common_command/add_dice/node"),function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"CommonCommand"),N=[A].concat(o);return function(L,S){var c=C(L,"AddDice"),E=[c].concat(S),m=e.$r(E);return function(f,h,R){var d=z(f,h,"Parser"),l=[d].concat(R),u=e.$r(l),i=k,n=k,t=k,$=k,r=k,a=k,s=k,p=k,G=k,Z=k,ie=k,ne=k,se=k,O=k,oe=d.$$prototype;return oe.lexer=k,g(d,"$parse",function(te){var $e=this;return $e.$new().$parse(te)}),y(d,"$parse",function(te){var $e=this;try{return $e.lexer=u("Lexer").$new(te),$e.$do_parse()}catch(re){if(e.rescue(re,[u("ParseError")]))try{return k}finally{e.pop_exception()}else throw re}}),d.$private(),y(d,"$next_token",function(){var te=this;return te.lexer.$next_token()}),y(d,"$expand_negate",function(te,$e){if(M($e["$is_a?"](I(u("Node"),"Negate")))){if(D(te,"+"))return["-",$e.$body()];if(D(te,"-"))return["+",$e.$body()]}return[te,$e]}),i=e.large_array_unpack("14,14,50,12,51,19,20,14,14,14,12,3,12,17,18,14,8,9,12,4,13,13,28,8,9,8,9,13,13,13,14,8,9,12,15,13,14,23,14,12,56,12,19,20,57,14,8,9,12,,13,,8,9,8,9,13,14,13,,12,8,9,14,16,13,-27,-27,19,20,-27,17,18,8,9,,42,13,,17,18,40,39,13,,38,-28,-28,40,39,-28,,38,45,47,44,46,52,53,54,55"),n=e.large_array_unpack("16,12,38,16,38,6,6,2,36,8,2,0,8,27,27,9,16,16,9,1,16,12,16,2,2,8,8,2,36,8,13,9,9,13,4,9,17,11,18,17,50,18,29,29,51,19,13,13,19,,13,,17,17,18,18,17,20,18,,20,19,19,23,5,19,23,23,30,30,23,25,25,20,20,,25,20,,5,5,24,24,23,,24,33,33,34,34,33,,34,32,32,32,32,39,39,40,40"),t=e.large_array_unpack("7,19,5,,34,61,-15,,7,13,,32,-1,28,,,-2,34,36,43,55,,,61,76,53,,-5,,22,48,,79,81,83,,6,,-8,90,92,,,,,,,,,,29,31,,,,,,"),$=e.large_array_unpack("-3,-41,-41,-4,-41,-1,-9,-12,-41,-41,-20,-26,-41,-41,-40,58,-41,-41,-41,-41,-41,-18,-19,-22,-24,-41,-2,-5,-6,-7,-8,-10,-13,-21,-41,-25,-37,-30,-41,-41,-41,-38,-39,-11,-14,-15,-16,-17,-23,-29,-41,-41,-33,-34,-35,-36,-31,-32"),r=[24,5,21,22,29,30,35,1,2,26,43,33,25,31,32,27,48,34,k,k,k,k,k,k,49],a=[9,3,6,6,5,5,11,1,2,4,7,9,3,6,6,3,11,10,k,k,k,k,k,k,9],s=[k,7,8,-1,-7,-13,-6,-22,k,-12,-6,-18,k,k,k],p=[k,k,k,k,k,6,7,k,10,11,k,k,36,37,41],G=e.large_array_unpack("0,0,racc_error,2,26,_reduce_1,4,26,_reduce_2,0,27,_reduce_3,1,27,_reduce_4,1,29,_reduce_none,1,29,_reduce_6,3,28,_reduce_7,3,28,_reduce_8,1,28,_reduce_none,3,30,_reduce_10,4,30,_reduce_11,1,30,_reduce_none,0,32,_reduce_13,1,32,_reduce_14,1,32,_reduce_15,1,32,_reduce_16,1,32,_reduce_17,2,31,_reduce_18,2,31,_reduce_19,1,31,_reduce_none,3,33,_reduce_21,2,33,_reduce_22,4,33,_reduce_23,2,33,_reduce_24,3,33,_reduce_25,1,33,_reduce_none,0,35,_reduce_27,1,35,_reduce_28,2,36,_reduce_29,1,36,_reduce_30,3,39,_reduce_31,3,39,_reduce_32,2,37,_reduce_33,2,37,_reduce_34,2,37,_reduce_35,2,37,_reduce_36,1,38,_reduce_none,1,38,_reduce_none,3,34,_reduce_39,1,34,_reduce_40"),Z=41,ie=58,ne=X(!1,0,"error",1,"NUMBER",2,"CMP_OP",3,"S",4,"D",5,"K",6,"H",7,"L",8,"M",9,"A",10,"X",11,"I",12,"N",13,"U",14,"R",15,"F",16,"C",17,"PLUS",18,"MINUS",19,"ASTERISK",20,"SLASH",21,"PARENL",22,"PARENR",23,"QUESTION",24),se=25,O=!0,j(l[0],"Racc_arg",[i,n,$,t,r,a,p,s,se,G,ne,ie,Z,O]),j(l[0],"Racc_token_to_s_table",e.large_array_unpack("$end,error,NUMBER,CMP_OP,S,D,K,H,L,M,A,X,I,N,U,R,F,C,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,QUESTION,$start,command,secret,add,target,mul,unary,round_type,dice,term,explicit_or_implicit_sides,filter,filter_type,filter_type_with_shorthand,filter_shorthand")),j(l[0],"Racc_debug_parser",!1),y(d,"$_reduce_1",function(te,$e,re){var P,W,ee=this,_=k,q=k;return W=te,P=b(W),_=P[0]==null?k:P[0],q=P[1]==null?k:P[1],M(q["$include_dice?"]())||ee.$raise(u("ParseError")),I(u("Node"),"Command").$new(_,q)}),y(d,"$_reduce_2",function(te,$e,re){var P,W,ee=this,_=k,q=k,Y=k,Q=k;return W=te,P=b(W),_=P[0]==null?k:P[0],q=P[1]==null?k:P[1],Y=P[2]==null?k:P[2],Q=P[3]==null?k:P[3],(U(q["$include_dice?"]())||M(Q["$include_dice?"]())||M(Y["$nil?"]()))&&ee.$raise(u("ParseError")),I(u("Node"),"Command").$new(_,q,Y,Q)}),y(d,"$_reduce_3",F(!1)),y(d,"$_reduce_4",F(!0)),y(d,"$_reduce_6",function(te,$e,re){return I(u("Node"),"UndecidedTarget").$instance()}),y(d,"$_reduce_7",function(te,$e,re){var P,W,ee=this,_=k,q=k,Y=k;return _=te["$[]"](0),W=ee.$expand_negate("+",te["$[]"](2)),P=b(W),q=P[0]==null?k:P[0],Y=P[1]==null?k:P[1],I(u("Node"),"BinaryOp").$new(_,q,Y)}),y(d,"$_reduce_8",function(te,$e,re){var P,W,ee=this,_=k,q=k,Y=k;return _=te["$[]"](0),W=ee.$expand_negate("-",te["$[]"](2)),P=b(W),q=P[0]==null?k:P[0],Y=P[1]==null?k:P[1],I(u("Node"),"BinaryOp").$new(_,q,Y)}),y(d,"$_reduce_10",function(te,$e,re){var P=k,W=k;return P=te["$[]"](0),W=te["$[]"](2),I(u("Node"),"BinaryOp").$new(P,"*",W)}),y(d,"$_reduce_11",function(te,$e,re){var P=k,W=k,ee=k;return P=te["$[]"](0),W=te["$[]"](2),ee=te["$[]"](3),ee.$new(P,W)}),y(d,"$_reduce_13",function(te,$e,re){return I(u("Node"),"DivideWithGameSystemDefault")}),y(d,"$_reduce_14",function(te,$e,re){return I(u("Node"),"DivideWithRoundingDown")}),y(d,"$_reduce_15",function(te,$e,re){return I(u("Node"),"DivideWithRoundingUp")}),y(d,"$_reduce_16",function(te,$e,re){return I(u("Node"),"DivideWithRoundingUp")}),y(d,"$_reduce_17",function(te,$e,re){return I(u("Node"),"DivideWithRoundingOff")}),y(d,"$_reduce_18",function(te,$e,re){return te["$[]"](1)}),y(d,"$_reduce_19",function(te,$e,re){var P=k;return P=te["$[]"](1),M(P["$is_a?"](I(u("Node"),"Negate")))?P.$body():I(u("Node"),"Negate").$new(P)}),y(d,"$_reduce_21",function(te,$e,re){var P=this,W=k,ee=k;return W=te["$[]"](0),ee=te["$[]"](2),(M(W["$include_dice?"]())||M(ee["$include_dice?"]()))&&P.$raise(u("ParseError")),I(u("Node"),"DiceRoll").$new(W,ee)}),y(d,"$_reduce_22",function(te,$e,re){var P=this,W=k;return W=te["$[]"](0),M(W["$include_dice?"]())&&P.$raise(u("ParseError")),I(u("Node"),"ImplicitSidesDiceRoll").$new(W)}),y(d,"$_reduce_23",function(te,$e,re){var P=this,W=k,ee=k,_=k,q=k;return W=te["$[]"](0),ee=te["$[]"](2),_=te["$[]"](3)["$[]"]("filter"),q=te["$[]"](3)["$[]"]("n_filtering"),J(ee,"implicit")&&M(ee["$include_dice?"]())&&P.$raise(u("ParseError")),(M(W["$include_dice?"]())||M(q["$include_dice?"]()))&&P.$raise(u("ParseError")),I(u("Node"),"DiceRollWithFilter").$new(W,ee,q,_)}),y(d,"$_reduce_24",function(te,$e,re){var P=this,W=k,ee=k;return W=I(u("Node"),"Number").$new(1),ee=te["$[]"](1),M(ee["$include_dice?"]())&&P.$raise(u("ParseError")),M(ee["$instance_of?"](I(u("Node"),"Number")))&&D(ee.$literal(),66)&&P.$raise(u("ParseError")),I(u("Node"),"DiceRoll").$new(W,ee)}),y(d,"$_reduce_25",function(te,$e,re){var P=this,W=k,ee=k,_=k,q=k;return W=I(u("Node"),"Number").$new(1),ee=te["$[]"](1),_=te["$[]"](2)["$[]"]("filter"),q=te["$[]"](2)["$[]"]("n_filtering"),J(ee,"implicit")&&M(ee["$include_dice?"]())&&P.$raise(u("ParseError")),M(q["$include_dice?"]())&&P.$raise(u("ParseError")),M(ee["$instance_of?"](I(u("Node"),"Number")))&&D(ee.$literal(),66)&&P.$raise(u("ParseError")),I(u("Node"),"DiceRollWithFilter").$new(W,ee,q,_)}),y(d,"$_reduce_27",F("implicit")),y(d,"$_reduce_28",function(te,$e,re){return te["$[]"](0)}),y(d,"$_reduce_29",function(te,$e,re){return H(["filter","n_filtering"],{filter:te["$[]"](0),n_filtering:te["$[]"](1)})}),y(d,"$_reduce_30",function(te,$e,re){return H(["filter","n_filtering"],{filter:te["$[]"](0),n_filtering:I(u("Node"),"Number").$new(1)})}),y(d,"$_reduce_31",function(te,$e,re){return I(I(u("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),y(d,"$_reduce_32",function(te,$e,re){return I(I(u("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),y(d,"$_reduce_33",function(te,$e,re){return I(I(u("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),y(d,"$_reduce_34",function(te,$e,re){return I(I(u("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),y(d,"$_reduce_35",function(te,$e,re){return I(I(u("Node"),"DiceRollWithFilter"),"DROP_HIGHEST")}),y(d,"$_reduce_36",function(te,$e,re){return I(I(u("Node"),"DiceRollWithFilter"),"DROP_LOWEST")}),y(d,"$_reduce_39",function(te,$e,re){return I(u("Node"),"Parenthesis").$new(te["$[]"](1))}),y(d,"$_reduce_40",function(te,$e,re){return I(u("Node"),"Number").$new(te["$[]"](0))}),y(d,"$_reduce_none",function(te,$e,re){return te["$[]"](0)})}(E[0],I(m("Racc"),"Parser"),E)}(N[0],N)}(w[0],w)}(K[0],K)};Opal.modules["bcdice/common_command/add_dice/randomizer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.def,M=e.eqeq,D=e.send,X=e.truthy,j=[],b=e.nil;return function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"CommonCommand"),I=[k].concat(K);return function(V,v){var x=C(V,"AddDice"),w=[x].concat(v);return function(T,o,A){var N=z(T,o,"Randomizer"),L=[N].concat(A),S=e.$r(L),c=N.$$prototype;return c.game_system=c.rand_source=c.rand_results=b,N.$attr_reader("rand_results"),g(L[0],"RandResult",S("Struct").$new("sides","value")),y(N,"$initialize",function(m,f){var h=this;return h.rand_source=m,h.game_system=f,h.rand_results=[]}),y(N,"$roll",function(m,f){var h=this,R=b,d=b;return R=M(f,66)?D(S("Array"),"new",[m],function l(){var u=l.$$s==null?this:l.$$s;return u.rand_source==null&&(u.rand_source=b),u.game_system==null&&(u.game_system=b),u.rand_source.$roll_d66(u.game_system.$d66_sort_type())},{$$s:h}):M(f,9)&&X(h.game_system["$enabled_d9?"]())?D(S("Array"),"new",[m],function l(){var u=l.$$s==null?this:l.$$s;return u.rand_source==null&&(u.rand_source=b),u.rand_source.$roll_d9()},{$$s:h}):h.rand_source.$roll_barabara(m,f),X(h.game_system["$sort_add_dice?"]())&&R["$sort!"](),d=D(R,"map",[],function(u){return u==null&&(u=b),S("RandResult").$new(f,u)}),h.rand_results.$concat(d),R})}(w[0],null,w)}(I[0],I)}(H[0],H)}(j[0],j)};Opal.modules["bcdice/common_command/add_dice"]=function(e){var C=e.module,z=e.const_set,g=e.thrower,y=e.def,M=e.top,D=[],X=e.nil;return M.$require("bcdice/normalize"),M.$require("bcdice/common_command/add_dice/parser"),M.$require("bcdice/common_command/add_dice/randomizer"),function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"CommonCommand"),K=[B].concat(H);return function(k,I){var V=C(k,"AddDice"),v=[V].concat(I);return z(v[0],"PREFIX_PATTERN",/[+\-(]*(\d+|D\d+)/.$freeze()),function(x,w){var T=[x].concat(w),o=e.$r(T);return y(x,"$eval",function(N,L,S){try{var c=g("eval_return"),E,m=X;return m=o("Parser").$parse(N),E=m,E===X||E==null?X:E.$eval(L,S)}catch(f){if(f===e.t_eval_return)return f.$v;throw f}})}(e.get_singleton_class(V),v)}(K[0],K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/common_command/reroll_dice/node"]=function(e){var C=e.module,z=e.klass,g=e.ensure_kwargs,y=e.get_kwarg,M=e.def,D=e.truthy,X=e.send,j=e.thrower,b=e.rb_lt,U=e.rb_plus,F=e.rb_gt,J=e.eqeq,H=e.rb_le,B=e.rb_ge,K=[],k=e.nil;return function(I,V){var v=C(I,"BCDice"),x=[v].concat(V);return function(w,T){var o=C(w,"CommonCommand"),A=[o].concat(T);return function(N,L){var S=C(N,"RerollDice"),c=[S].concat(L);return function(E,m){var f=C(E,"Node"),h=[f].concat(m);return function(R,d,l){var u=z(R,d,"Command"),i=[u].concat(l),n=e.$r(i),t=u.$$prototype;return t.cmp_op=t.reroll_cmp_op=t.target_number_node=t.reroll_threshold_node=t.notations=t.source=k,M(u,"$initialize",function(r){var a,s,p,G,Z,ie,ne,se=this;return r=g(r),a=y(r,"secret"),s=y(r,"notations"),p=y(r,"source"),G=r.$$smap.cmp_op,G==null&&(G=k),Z=r.$$smap.target_number,Z==null&&(Z=k),ie=r.$$smap.reroll_cmp_op,ie==null&&(ie=k),ne=r.$$smap.reroll_threshold,ne==null&&(ne=k),se.secret=a,se.notations=s,se.cmp_op=G,se.target_number_node=Z,se.reroll_cmp_op=ie,se.reroll_threshold_node=ne,se.source=p}),M(u,"$eval",function(r,a){try{var s=j("eval_return"),p,G,Z=this,ie=k,ne=k,se=k,O=k,oe=k,ue=k,te=k,$e=k,re=k,P=k,W=k,ee=k,_=k,q=k;return ie=r.$round_type(),ne=D(se=Z.cmp_op)?se:r.$default_cmp_op(),O=D(se=D(oe=Z.reroll_cmp_op)?oe:ne)?se:">=",ue=D(se=(p=Z.target_number_node,p===k||p==null?k:p.$eval(ie)))?se:r.$default_target_number(),te=D(se=D(oe=(G=Z.reroll_threshold_node,G===k||G==null?k:G.$eval(ie)))?oe:r.$reroll_dice_reroll_threshold())?se:ue,$e=n("RerollCondition").$new(O,te),re=X(Z.notations,"map",[],function(Q){return Q==null&&(Q=k),Q.$to_dice(ie)}),D(X(re,"all?",[],function(Q){return Q==null&&(Q=k),$e["$valid?"](Q.$sides())}))?(P=Z.$roll(re,a,$e,r["$sort_barabara_dice?"]()),W=P.$flatten(),ee=P.$take(Z.notations.$size()).$flatten().$count(1),_=D(ne)?X(W,"count",[],function(Q){return Q==null&&(Q=k),Q.$send(ne,ue)}):0,q=[Z.$expr(ie,$e,ne,ue),X(P,"map",[],function(Q){return Q==null&&(Q=k),Q.$join(",")}).$join(" + "),"\u6210\u529F\u6570"+_,r.$grich_text(ee,W.$size(),_)].$compact(),Z.$result_with_text(q.$join(" \uFF1E "))):Z.$result_with_text(""+Z.source+" \uFF1E \u6761\u4EF6\u304C\u9593\u9055\u3063\u3066\u3044\u307E\u3059\u30022R6>=5 \u3042\u308B\u3044\u306F 2R6[5] \u306E\u3088\u3046\u306B\u632F\u308A\u8DB3\u3057\u76EE\u6A19\u5024\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002")}catch(Y){if(Y===e.t_eval_return)return Y.$v;throw Y}}),u.$private(),M(u,"$roll",function(r,a,s,p){var G=k,Z=k,ie=k,ne=k,se=k,O=k;for(G=[],Z=0;D(D(ie=r["$empty?"]()["$!"]())?b(Z,n("REROLL_LIMIT")):ie);)ne=r.$shift(),Z=U(Z,1),se=ne.$roll(a),D(p)&&se["$sort!"](),G.$push(se),O=X(se,"count",[],function(ue){return ue==null&&(ue=k),s["$reroll?"](ue)}),D(F(O,0))&&r.$push(n("Dice").$new(O,ne.$sides()));return G}),M(u,"$expr",function(r,a,s,p){var G=this,Z=k,ie=k,ne=k;return Z=X(G.notations,"map",[],function(O){return O==null&&(O=k),O.$to_dice(r)}).$join("+"),ie=J(a.$cmp_op(),s)?"":n("Format").$comparison_operator(a.$cmp_op()),ne=n("Format").$comparison_operator(s),"("+Z+"["+ie+a.$threshold()+"]"+ne+p+")"}),M(u,"$result_with_text",function(r){var a=this;return X(n("Result").$new(),"tap",[],function s(p){var G,Z=s.$$s==null?this:s.$$s;return Z.secret==null&&(Z.secret=k),p==null&&(p=k),p["$secret="](Z.secret),G=[r],X(p,"text=",G),G[G.length-1]},{$$s:a})})}(h[0],null,h),function(R,d){var l=z(R,d,"RerollCondition"),u=l.$$prototype;return u.threshold=u.cmp_op=k,l.$attr_reader("cmp_op"),l.$attr_reader("threshold"),M(l,"$initialize",function(n,t){var $=this;return $.cmp_op=n,$.threshold=t}),M(l,"$valid?",function(n){var t=this;if(!D(t.threshold))return!1;switch(t.cmp_op){case"<=":return b(t.threshold,n);case"<":return H(t.threshold,n);case">=":return F(t.threshold,1);case">":return B(t.threshold,1);case"!=":return e.Range.$new(1,n,!1)["$include?"](t.threshold);default:return!0}}),M(l,"$reroll?",function(n){var t=this;return n.$send(t.cmp_op,t.threshold)})}(h[0],null),function(R,d,l){var u=z(R,d,"Notation"),i=[u].concat(l),n=e.$r(i),t=u.$$prototype;return t.times=t.sides=k,M(u,"$initialize",function(r,a){var s=this;return s.times=r,s.sides=a}),M(u,"$to_dice",function(r){try{var a=j("eval_return"),s=this,p=k,G=k;return p=s.times.$eval(r),G=s.sides.$eval(r),n("Dice").$new(p,G)}catch(Z){if(Z===e.t_eval_return)return Z.$v;throw Z}})}(h[0],null,h),function(R,d){var l=z(R,d,"Dice");return l.$attr_reader("times","sides"),M(l,"$initialize",function(i,n){var t=this;return t.times=i,t.sides=n}),M(l,"$roll",function(i){var n=this;return i.$roll_barabara(n.$times(),n.$sides())}),M(l,"$to_s",function(){var i=this;return""+i.$times()+"R"+i.$sides()})}(h[0],null)}(c[0],c)}(A[0],A)}(x[0],x)}(K[0],K)};Opal.modules["bcdice/arithmetic/node"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.thrower,M=e.return_ivar,D=e.send2,X=e.find_super,j=e.eqeq,b=e.const_set,U=e.eqeqeq,F=e.rb_divide,J=e.truthy,H=e.assign_ivar,B=e.alias,K=[],k=e.nil,I=e.$$$;return function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"Arithmetic"),N=[A].concat(o);return function(L,S){var c=C(L,"Node"),E=[c].concat(S),m=e.$r(E);return function(f,h){var R=z(f,h,"BinaryOp"),d=R.$$prototype;return d.lhs=d.rhs=d.op=k,g(R,"$initialize",function(u,i,n){var t=this;return t.lhs=u,t.op=i,t.rhs=n}),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this,t=k,$=k;return t=n.lhs.$eval(u),$=n.rhs.$eval(u),t.$send(n.op,$)}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),g(R,"$output",function(){var u=this;return""+u.lhs.$output()+u.op+u.rhs.$output()}),g(R,"$s_exp",function(){var u=this;return"("+u.$op_for_s_exp()+" "+u.lhs.$s_exp()+" "+u.rhs.$s_exp()+")"}),g(R,"$op_for_s_exp",M("op"))}(E[0],null),function(f,h,R){var d=z(f,h,"DivideBase"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.lhs=i.rhs=i.op=k,g(d,"$initialize",function n(t,$){var r=n.$$p||k,a=this;return n.$$p=null,D(a,X(a,"initialize",n,!1,!0),"initialize",[t,"/",$],null)}),g(d,"$eval",function(t){try{var $=y("eval_return"),r=this,a=k,s=k;return a=r.lhs.$eval(t),s=r.rhs.$eval(t),j(s,0)&&r.$raise(u("ZeroDivisionError")),r.$divide_and_round(a,s,t)}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),g(d,"$output",function n(){var t=n.$$p||k,$=this;return n.$$p=null,""+D($,X($,"output",n,!1,!0),"output",[],t)+$.$rounding_method()}),d.$private(),g(d,"$rounding_method",function(){var t=this;return I(t.$class(),"ROUNDING_METHOD")}),g(d,"$op_for_s_exp",function(){var t=this;return""+t.op+t.$rounding_method()}),g(d,"$divide_and_round",function(t,$,r){var a=this;return a.$raise(u("NotImplementedError"))})}(E[0],m("BinaryOp"),E),function(f,h,R){var d=z(f,h,"DivideWithGameSystemDefault"),l=[d].concat(R),u=e.$r(l);return b(l[0],"ROUNDING_METHOD",""),d.$private(),g(d,"$divide_and_round",function(n,t,$){var r=k,a=k;return U(I(u("RoundType"),"CEIL"),r=$)?F(n.$to_f(),t).$ceil():U(I(u("RoundType"),"ROUND"),r)?(a=F(n.$to_f(),t),J(a["$negative?"]())?a.$abs().$round()["$-@"]():a.$round()):F(n,t).$floor()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithCeil"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","C"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i.$to_f(),n).$ceil()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithRound"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","R"),d.$private(),g(d,"$divide_and_round",function(i,n,t){var $=k;return $=F(i.$to_f(),n),J($["$negative?"]())?$.$abs().$round()["$-@"]():$.$round()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithFloor"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","F"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i,n).$floor()})}(E[0],m("DivideBase"),E),function(f,h){var R=z(f,h,"Negative"),d=R.$$prototype;return d.body=k,g(R,"$initialize",H("body")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.body.$eval(u)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"-"+u.body.$output()}),g(R,"$s_exp",function(){var u=this;return"(- "+u.body.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Parenthesis"),d=R.$$prototype;return d.expr=k,g(R,"$initialize",H("expr")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.expr.$eval(u)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"("+u.expr.$output()+")"}),g(R,"$s_exp",function(){var u=this;return"(Parenthesis "+u.expr.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Number"),d=R.$$prototype;return d.value=k,g(R,"$initialize",H("value")),g(R,"$eval",M("value")),g(R,"$output",function(){var u=this;return u.value.$to_s()}),B(R,"s_exp","output")}(E[0],null)}(N[0],N)}(w[0],w)}(K[0],K)};Opal.modules["bcdice/common_command/barabara_dice/parser"]=function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.hash,D=e.const_set,X=e.hash2,j=e.return_val,b=e.to_ary,U=e.truthy,F=e.top,J=[],H=e.nil,B=e.$$$;return F.$require("racc/parser.rb"),F.$require("bcdice/common_command/lexer"),F.$require("bcdice/common_command/reroll_dice/node"),F.$require("bcdice/arithmetic/node"),function(K,k){var I=C(K,"BCDice"),V=[I].concat(k);return function(v,x){var w=C(v,"CommonCommand"),T=[w].concat(x);return function(o,A){var N=C(o,"BarabaraDice"),L=[N].concat(A),S=e.$r(L);return function(c,E,m){var f=z(c,E,"Parser"),h=[f].concat(m),R=e.$r(h),d=H,l=H,u=H,i=H,n=H,t=H,$=H,r=H,a=H,s=H,p=H,G=H,Z=H,ie=H,ne=f.$$prototype;return ne.lexer=H,g(f,"$parse",function(O){var oe=this;return oe.$new().$parse(O)}),y(f,"$parse",function(O){var oe=this;try{return oe.lexer=R("Lexer").$new(O),oe.$do_parse()}catch(ue){if(e.rescue(ue,[R("ParseError")]))try{return H}finally{e.pop_exception()}else throw ue}}),f.$private(),y(f,"$next_token",function(){var O=this;return O.lexer.$next_token()}),d=e.large_array_unpack("13,9,3,9,24,25,9,9,9,26,18,19,8,12,8,18,19,8,8,8,9,4,9,38,36,37,39,18,19,18,19,8,9,8,9,27,28,24,25,18,19,18,19,8,9,8,9,27,28,27,28,18,19,18,19,8,10,8,14"),l=e.large_array_unpack("5,2,0,8,15,15,13,14,12,15,8,8,2,5,8,12,12,13,14,12,18,1,19,34,34,34,34,18,18,19,19,18,24,19,25,16,16,21,21,24,24,25,25,24,27,25,28,31,31,32,32,27,27,28,28,27,4,28,7"),u=e.large_array_unpack("-6,21,-1,,56,-9,,55,1,,,,6,4,5,-5,24,,18,20,,28,,,30,32,,42,44,,,36,38,,19,,,,,"),i=e.large_array_unpack("-2,-25,-25,-3,-25,-4,-7,-25,-25,-24,40,-1,-25,-25,-25,-25,-11,-14,-25,-25,-22,-5,-6,-8,-25,-25,-23,-25,-25,-20,-21,-9,-10,-12,-15,-13,-16,-17,-18,-19"),n=[7,1,6,15,2,29,30,21,31,32,5,7,23,22,33,34,11,35],t=[7,1,6,5,2,9,9,5,8,8,3,7,7,6,9,9,4,10],$=[H,1,4,8,11,-5,0,-2,-16,-13,-17],r=[H,H,H,H,H,H,H,20,16,17,H],a=e.large_array_unpack("0,0,racc_error,3,24,_reduce_1,0,25,_reduce_2,1,25,_reduce_3,0,27,_reduce_4,2,27,_reduce_5,3,26,_reduce_6,1,26,_reduce_7,3,29,_reduce_8,3,28,_reduce_9,3,28,_reduce_10,1,28,_reduce_none,3,31,_reduce_12,4,31,_reduce_13,1,31,_reduce_none,0,33,_reduce_15,1,33,_reduce_16,1,33,_reduce_17,1,33,_reduce_18,1,33,_reduce_19,2,32,_reduce_20,2,32,_reduce_21,1,32,_reduce_none,3,30,_reduce_23,1,30,_reduce_24"),s=25,p=40,G=M(!1,0,"error",1,"NUMBER",2,"B",3,"R",4,"U",5,"C",6,"F",7,"S",8,"PLUS",9,"MINUS",10,"ASTERISK",11,"SLASH",12,"PARENL",13,"PARENR",14,"BRACKETL",15,"BRACKETR",16,"LESS",17,"GREATER",18,"EQUAL",19,"NOT",20,"AT",21,"CMP_OP",22),Z=23,ie=!0,D(h[0],"Racc_arg",[d,l,i,u,n,t,r,$,Z,a,G,p,s,ie]),D(h[0],"Racc_token_to_s_table",e.large_array_unpack("$end,error,NUMBER,B,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,add,dice,term,mul,unary,round_type")),D(h[0],"Racc_debug_parser",!1),y(f,"$_reduce_1",function(O,oe,ue){return B(R("Node"),"Command").$new(X(["secret","notations","cmp_op","target_number"],{secret:O["$[]"](0),notations:O["$[]"](1),cmp_op:O["$[]"](2)["$[]"]("cmp_op"),target_number:O["$[]"](2)["$[]"]("target")}))}),y(f,"$_reduce_2",j(!1)),y(f,"$_reduce_3",j(!0)),y(f,"$_reduce_4",function(O,oe,ue){return X([],{})}),y(f,"$_reduce_5",function(O,oe,ue){var te,$e,re=this,P=H,W=H;return $e=O,te=b($e),P=te[0]==null?H:te[0],W=te[1]==null?H:te[1],U(P)||re.$raise(R("ParseError")),X(["cmp_op","target"],{cmp_op:P,target:W})}),y(f,"$_reduce_6",function(O,oe,ue){var te=H;return te=O["$[]"](0),te.$push(O["$[]"](2)),te}),y(f,"$_reduce_7",function(O,oe,ue){return[O["$[]"](0)]}),y(f,"$_reduce_8",function(O,oe,ue){var te=H,$e=H;return te=O["$[]"](0),$e=O["$[]"](2),B(R("Node"),"Notation").$new(te,$e)}),y(f,"$_reduce_9",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"+",O["$[]"](2))}),y(f,"$_reduce_10",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"-",O["$[]"](2))}),y(f,"$_reduce_12",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"*",O["$[]"](2))}),y(f,"$_reduce_13",function(O,oe,ue){var te=H;return te=O["$[]"](3),te.$new(O["$[]"](0),O["$[]"](2))}),y(f,"$_reduce_15",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),y(f,"$_reduce_16",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithCeil")}),y(f,"$_reduce_17",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithCeil")}),y(f,"$_reduce_18",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithRound")}),y(f,"$_reduce_19",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithFloor")}),y(f,"$_reduce_20",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_21",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Negative").$new(O["$[]"](1))}),y(f,"$_reduce_23",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_24",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Number").$new(O["$[]"](0))}),y(f,"$_reduce_none",function(O,oe,ue){return O["$[]"](0)})}(L[0],B(S("Racc"),"Parser"),L)}(T[0],T)}(V[0],V)}(J[0],J)};Opal.modules["bcdice/common_command/barabara_dice"]=function(e){var C=e.module,z=e.const_set,g=e.thrower,y=e.def,M=e.top,D=[],X=e.nil;return M.$require("bcdice/common_command/barabara_dice/parser"),function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"CommonCommand"),K=[B].concat(H);return function(k,I){var V=C(k,"BarabaraDice"),v=[V].concat(I);return z(v[0],"PREFIX_PATTERN",/\d+B\d+/.$freeze()),function(x,w){var T=[x].concat(w),o=e.$r(T);return y(x,"$eval",function(N,L,S){try{var c=g("eval_return"),E,m=X;return m=o("Parser").$parse(N),E=m,E===X||E==null?X:E.$eval(L,S)}catch(f){if(f===e.t_eval_return)return f.$v;throw f}})}(e.get_singleton_class(V),v)}(K[0],K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/result"]=function(e){var C=e.module,z=e.klass,g=e.send,y=e.def,M=e.return_val,D=e.return_ivar,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B,K){var k=z(H,B,"Result"),I=[k].concat(K);return function(V,v){return y(V,"$success",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),N=[!0],g(A,"success=",N),N[N.length-1]})}),y(V,"$failure",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),N=[!0],g(A,"failure=",N),N[N.length-1]})}),y(V,"$critical",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),A["$critical="](!0),N=[!0],g(A,"success=",N),N[N.length-1]})}),y(V,"$fumble",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),A["$fumble="](!0),N=[!0],g(A,"failure=",N),N[N.length-1]})}),y(V,"$nothing",M("nothing"))}(e.get_singleton_class(k),I),y(k,"$initialize",function(v){var x=this;return v==null&&(v=j),x.text=v,x.rands=j,x.detailed_rands=j,x.secret=!1,x.success=!1,x.failure=!1,x.critical=!1,x.fumble=!1},-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),y(k,"$secret?",D("secret")),y(k,"$success?",D("success")),y(k,"$failure?",D("failure")),y(k,"$critical?",D("critical")),y(k,"$fumble?",D("fumble")),y(k,"$condition=",function(v){var x=this;return x.success=v,x.failure=v["$!"]()})}(J[0],null,J)}(X[0],X)};Opal.modules["bcdice/common_command/tally_dice/node"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.ensure_kwargs,M=e.get_kwarg,D=e.def,X=e.truthy,j=e.rb_gt,b=e.send,U=e.not,F=e.eqeq,J=e.hash2,H=e.thrower,B=e.alias,K=e.top,k=[],I=e.nil;return K.$require("bcdice/result"),function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"CommonCommand"),N=[A].concat(o);return function(L,S){var c=C(L,"TallyDice"),E=[c].concat(S);return function(m,f){var h=C(m,"Node"),R=[h].concat(f);return function(d,l,u){var i=z(d,l,"Command"),n=[i].concat(u),t=e.$r(n),$=i.$$prototype;return $.notation=I,g(n[0],"MAX_SIDES",20),D(i,"$initialize",function(a){var s,p,G=this;return a=y(a),s=M(a,"secret"),p=M(a,"notation"),G.secret=s,G.notation=p}),D(i,"$eval",function(a,s){var p=this,G=I,Z=I,ie=I,ne=I,se=I,O=I;return G=p.notation.$to_dice(a.$round_type()),X(G["$valid?"]())?X(j(G.$sides(),t("MAX_SIDES")))?t("Result").$new("("+G+") \uFF1E \u9762\u6570\u306F1\u4EE5\u4E0A\u3001"+t("MAX_SIDES")+"\u4EE5\u4E0B\u3068\u3057\u3066\u304F\u3060\u3055\u3044"):(Z=G.$roll(s),ie=(X(a["$sort_barabara_dice?"]())?Z.$sort():Z).$join(","),ne=b(b(Z,"group_by",[],"itself".$to_proc()),"transform_values",[],"length".$to_proc()),se=b(e.Range.$new(1,G.$sides(),!1),"map",[],function(ue){var te=I;return ue==null&&(ue=I),te=ne.$fetch(ue,0),F(te,0)&&U(G["$show_zeros?"]())?I:"["+ue+"]\xD7"+ne.$fetch(ue,0)}),O=["("+G+")",ie,se.$compact().$join(", ")].$compact(),b(t("Result").$new(),"tap",[],function oe(ue){var te,$e=oe.$$s==null?this:oe.$$s;return $e.secret==null&&($e.secret=I),ue==null&&(ue=I),ue["$secret="]($e.secret),te=[O.$join(" \uFF1E ")],b(ue,"text=",te),te[te.length-1]},{$$s:p})):I})}(R[0],null,R),function(d,l,u){var i=z(d,l,"Notation"),n=[i].concat(u),t=e.$r(n),$=i.$$prototype;return $.times=$.sides=$.show_zeros=I,i.$attr_reader("times"),i.$attr_reader("sides"),i.$attr_reader("show_zeros"),D(i,"$initialize",function(a){var s,p,G,Z=this;return a=y(a),s=M(a,"times"),p=M(a,"sides"),G=M(a,"show_zeros"),Z.times=s,Z.sides=p,Z.show_zeros=G}),D(i,"$to_dice",function(a){try{var s=H("eval_return"),p=this,G=I,Z=I;return G=p.times.$eval(a),Z=p.sides.$eval(a),t("Dice").$new(J(["times","sides","show_zeros"],{times:G,sides:Z,show_zeros:p.show_zeros}))}catch(ie){if(ie===e.t_eval_return)return ie.$v;throw ie}})}(R[0],null,R),function(d,l){var u=z(d,l,"Dice"),i=u.$$prototype;return i.times=i.sides=i.show_zeros=I,u.$attr_reader("times"),u.$attr_reader("sides"),u.$attr_reader("show_zeros"),B(u,"show_zeros?","show_zeros"),D(u,"$initialize",function(t){var $,r,a,s=this;return t=y(t),$=M(t,"times"),r=M(t,"sides"),a=M(t,"show_zeros"),s.times=$,s.sides=r,s.show_zeros=a}),D(u,"$valid?",function(){var t=this,$=I;return X($=j(t.times,0))?j(t.sides,0):$}),D(u,"$roll",function(t){var $=this;return t.$roll_barabara($.times,$.sides)}),D(u,"$to_s",function(){var t=this,$=I;return $=X(t.show_zeros)?"Z":"Y",""+t.times+"T"+$+t.sides})}(R[0],null)}(E[0],E)}(N[0],N)}(w[0],w)}(k[0],k)};Opal.modules["bcdice/common_command/tally_dice/parser"]=function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.hash,D=e.const_set,X=e.hash2,j=e.return_val,b=e.top,U=[],F=e.nil,J=e.$$$;return b.$require("racc/parser.rb"),b.$require("bcdice/common_command/lexer"),b.$require("bcdice/common_command/tally_dice/node"),b.$require("bcdice/arithmetic/node"),function(H,B){var K=C(H,"BCDice"),k=[K].concat(B);return function(I,V){var v=C(I,"CommonCommand"),x=[v].concat(V);return function(w,T){var o=C(w,"TallyDice"),A=[o].concat(T),N=e.$r(A);return function(L,S,c){var E=z(L,S,"Parser"),m=[E].concat(c),f=e.$r(m),h=F,R=F,d=F,l=F,u=F,i=F,n=F,t=F,$=F,r=F,a=F,s=F,p=F,G=F,Z=E.$$prototype;return Z.lexer=F,g(E,"$parse",function(ne){var se=this;return se.$new().$parse(ne)}),y(E,"$parse",function(ne){var se=this;try{return se.lexer=f("Lexer").$new(ne),se.$do_parse()}catch(O){if(e.rescue(O,[f("ParseError")]))try{return F}finally{e.pop_exception()}else throw O}}),E.$private(),y(E,"$next_token",function(){var ne=this;return ne.lexer.$next_token()}),h=e.large_array_unpack("8,8,18,19,20,21,8,8,8,22,14,15,3,7,7,14,15,14,15,7,7,7,8,4,8,35,33,34,36,8,9,14,15,14,15,7,8,7,14,15,23,24,7,23,24,14,15,23,24,7,10"),R=e.large_array_unpack("2,7,10,10,11,11,14,17,15,11,7,7,0,2,7,14,14,15,15,14,17,15,20,1,21,31,31,31,31,23,4,20,20,21,21,20,24,21,23,23,12,12,23,28,28,24,24,29,29,24,6"),d=e.large_array_unpack("2,23,-2,,30,,47,-1,,,-2,-7,27,,4,6,,5,,,20,22,,27,34,,,,30,34,,19,,,,,"),l=e.large_array_unpack("-2,-23,-23,-3,-23,-1,-23,-23,-22,37,-23,-23,-9,-12,-23,-23,-20,-23,-5,-6,-23,-23,-21,-23,-23,-18,-19,-4,-7,-8,-10,-13,-11,-14,-15,-16,-17"),u=[6,25,26,12,1,2,5,17,11,32,30,31,F,F,F,27,28,29],i=[4,8,8,7,1,2,3,5,6,9,8,8,F,F,F,4,7,7],n=[F,4,5,4,-2,-3,1,-4,-13,-22],t=[F,F,F,F,16,F,F,F,13,F],$=e.large_array_unpack("0,0,racc_error,2,18,_reduce_1,0,19,_reduce_2,1,19,_reduce_3,4,20,_reduce_4,1,22,_reduce_5,1,22,_reduce_6,3,23,_reduce_7,3,23,_reduce_8,1,23,_reduce_none,3,24,_reduce_10,4,24,_reduce_11,1,24,_reduce_none,0,26,_reduce_13,1,26,_reduce_14,1,26,_reduce_15,1,26,_reduce_16,1,26,_reduce_17,2,25,_reduce_18,2,25,_reduce_19,1,25,_reduce_none,3,21,_reduce_21,1,21,_reduce_22"),r=23,a=37,s=M(!1,0,"error",1,"NUMBER",2,"T",3,"Y",4,"Z",5,"R",6,"U",7,"C",8,"F",9,"S",10,"PLUS",11,"MINUS",12,"ASTERISK",13,"SLASH",14,"PARENL",15,"PARENR",16),p=17,G=!0,D(m[0],"Racc_arg",[h,R,l,d,u,i,t,n,p,$,s,a,r,G]),D(m[0],"Racc_token_to_s_table",["$end","error","NUMBER","T","Y","Z","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","notation","term","show_zeros","add","mul","unary","round_type"]),D(m[0],"Racc_debug_parser",!1),y(E,"$_reduce_1",function(ne,se,O){return J(f("Node"),"Command").$new(X(["secret","notation"],{secret:ne["$[]"](0),notation:ne["$[]"](1)}))}),y(E,"$_reduce_2",j(!1)),y(E,"$_reduce_3",j(!0)),y(E,"$_reduce_4",function(ne,se,O){return J(f("Node"),"Notation").$new(X(["times","sides","show_zeros"],{times:ne["$[]"](0),sides:ne["$[]"](3),show_zeros:ne["$[]"](2)}))}),y(E,"$_reduce_5",j(!1)),y(E,"$_reduce_6",j(!0)),y(E,"$_reduce_7",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"BinaryOp").$new(ne["$[]"](0),"+",ne["$[]"](2))}),y(E,"$_reduce_8",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"BinaryOp").$new(ne["$[]"](0),"-",ne["$[]"](2))}),y(E,"$_reduce_10",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"BinaryOp").$new(ne["$[]"](0),"*",ne["$[]"](2))}),y(E,"$_reduce_11",function(ne,se,O){var oe=F;return oe=ne["$[]"](3),oe.$new(ne["$[]"](0),ne["$[]"](2))}),y(E,"$_reduce_13",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),y(E,"$_reduce_14",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithCeil")}),y(E,"$_reduce_15",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithCeil")}),y(E,"$_reduce_16",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithRound")}),y(E,"$_reduce_17",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithFloor")}),y(E,"$_reduce_18",function(ne,se,O){return ne["$[]"](1)}),y(E,"$_reduce_19",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"Negative").$new(ne["$[]"](1))}),y(E,"$_reduce_21",function(ne,se,O){return ne["$[]"](1)}),y(E,"$_reduce_22",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"Number").$new(ne["$[]"](0))}),y(E,"$_reduce_none",function(ne,se,O){return ne["$[]"](0)})}(A[0],J(N("Racc"),"Parser"),A)}(x[0],x)}(k[0],k)}(U[0],U)};Opal.modules["bcdice/common_command/tally_dice"]=function(e){var C=e.module,z=e.const_set,g=e.thrower,y=e.def,M=e.top,D=[],X=e.nil;return M.$require("bcdice/common_command/tally_dice/parser"),function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"CommonCommand"),K=[B].concat(H);return function(k,I){var V=C(k,"TallyDice"),v=[V].concat(I);return z(v[0],"PREFIX_PATTERN",/\d+T[YZ]\d+/.$freeze()),function(x,w){var T=[x].concat(w),o=e.$r(T);return y(x,"$eval",function(N,L,S){try{var c=g("eval_return"),E,m=X;return m=o("Parser").$parse(N),E=m,E===X||E==null?X:E.$eval(L,S)}catch(f){if(f===e.t_eval_return)return f.$v;throw f}})}(e.get_singleton_class(V),v)}(K[0],K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/common_command/calc/node"]=function(e){var C=e.module,z=e.klass,g=e.ensure_kwargs,y=e.get_kwarg,M=e.def,D=e.truthy,X=e.send,j=e.thrower,b=e.top,U=[],F=e.nil,J=e.$$$;return b.$require("bcdice/arithmetic/node"),function(H,B){var K=C(H,"BCDice"),k=[K].concat(B);return function(I,V){var v=C(I,"CommonCommand"),x=[v].concat(V);return function(w,T){var o=C(w,"Calc"),A=[o].concat(T);return function(N,L){var S=C(N,"Node"),c=[S].concat(L);return function(E,m,f){var h=z(E,m,"Command"),R=[h].concat(f),d=e.$r(R),l=h.$$prototype;return l.expr=F,M(h,"$initialize",function(i){var n,t,$=this;return i=g(i),n=y(i,"secret"),t=y(i,"expr"),$.secret=n,$.expr=t}),M(h,"$eval",function(i){try{var n=j("eval_return"),t=this,$=F,r=F;return $=function(){try{return t.expr.$eval(i).$to_i()}catch(a){if(e.rescue(a,[d("ZeroDivisionError")]))try{return"\u30BC\u30ED\u9664\u7B97\u304C\u767A\u751F\u3057\u305F\u305F\u3081\u8A08\u7B97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F"}finally{e.pop_exception()}else throw a}}(),r=D(t.expr["$is_a?"](J(J(d("Arithmetic"),"Node"),"Parenthesis")))?t.expr.$output():"("+t.expr.$output()+")",X(d("Result").$new(),"tap",[],function a(s){var p,G=a.$$s==null?this:a.$$s;return G.secret==null&&(G.secret=F),s==null&&(s=F),s["$secret="](G.secret),p=["c"+r+" \uFF1E "+$],X(s,"text=",p),p[p.length-1]},{$$s:t})}catch(a){if(a===e.t_eval_return)return a.$v;throw a}})}(c[0],null,c)}(A[0],A)}(x[0],x)}(k[0],k)}(U[0],U)};Opal.modules["bcdice/common_command/calc/parser"]=function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.hash,D=e.const_set,X=e.hash2,j=e.return_val,b=e.top,U=[],F=e.nil,J=e.$$$;return b.$require("racc/parser.rb"),b.$require("bcdice/common_command/lexer"),b.$require("bcdice/common_command/calc/node"),b.$require("bcdice/arithmetic/node"),function(H,B){var K=C(H,"BCDice"),k=[K].concat(B);return function(I,V){var v=C(I,"CommonCommand"),x=[v].concat(V);return function(w,T){var o=C(w,"Calc"),A=[o].concat(T),N=e.$r(A);return function(L,S,c){var E=z(L,S,"Parser"),m=[E].concat(c),f=e.$r(m),h=F,R=F,d=F,l=F,u=F,i=F,n=F,t=F,$=F,r=F,a=F,s=F,p=F,G=F,Z=E.$$prototype;return Z.lexer=F,g(E,"$parse",function(ne){var se=this;return se.$new().$parse(ne)}),y(E,"$parse",function(ne){var se=this;try{return se.lexer=f("Lexer").$new(ne),se.$do_parse()}catch(O){if(e.rescue(O,[f("ParseError")]))try{return F}finally{e.pop_exception()}else throw O}}),E.$private(),y(E,"$next_token",function(){var ne=this;return ne.lexer.$next_token()}),h=e.large_array_unpack("14,3,14,15,16,4,10,11,10,11,13,14,13,14,17,18,5,10,11,10,11,13,14,13,14,17,18,6,10,11,10,11,13,14,13,14,17,18,,10,11,10,11,13,,13,15,16,,,,26,30,28,29,31"),R=e.large_array_unpack("5,0,10,7,7,1,5,5,10,10,5,11,10,13,8,8,2,11,11,13,13,11,15,13,16,22,22,4,15,15,16,16,15,17,16,18,23,23,,17,17,18,18,17,,18,21,21,,,,21,25,25,25,25"),d=[-6,5,11,F,27,-2,F,-5,4,F,0,9,F,11,F,20,22,31,33,F,F,38,15,26,F,49,F,F,F,F,F,F],l=[-2,-20,-20,-3,-20,-20,32,-1,-6,-9,-20,-20,-17,-20,-19,-20,-20,-20,-20,-15,-16,-20,-4,-5,-7,-10,-18,-8,-11,-12,-13,-14],u=[7,1,19,20,22,23,2,27,21,24,25],i=[3,1,5,5,4,4,2,6,3,5,5],n=[F,1,6,-5,-11,-8,-18,F],t=[F,F,F,F,8,9,F,12],$=e.large_array_unpack("0,0,racc_error,3,15,_reduce_1,0,16,_reduce_2,1,16,_reduce_3,3,17,_reduce_4,3,17,_reduce_5,1,17,_reduce_none,3,18,_reduce_7,4,18,_reduce_8,1,18,_reduce_none,0,20,_reduce_10,1,20,_reduce_11,1,20,_reduce_12,1,20,_reduce_13,1,20,_reduce_14,2,19,_reduce_15,2,19,_reduce_16,1,19,_reduce_none,3,21,_reduce_18,1,21,_reduce_19"),r=20,a=32,s=M(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13),p=14,G=!0,D(m[0],"Racc_arg",[h,R,l,d,u,i,t,n,p,$,s,a,r,G]),D(m[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","add","mul","unary","round_type","term"]),D(m[0],"Racc_debug_parser",!1),y(E,"$_reduce_1",function(ne,se,O){return J(f("Node"),"Command").$new(X(["secret","expr"],{secret:ne["$[]"](0),expr:ne["$[]"](2)}))}),y(E,"$_reduce_2",j(!1)),y(E,"$_reduce_3",j(!0)),y(E,"$_reduce_4",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"BinaryOp").$new(ne["$[]"](0),"+",ne["$[]"](2))}),y(E,"$_reduce_5",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"BinaryOp").$new(ne["$[]"](0),"-",ne["$[]"](2))}),y(E,"$_reduce_7",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"BinaryOp").$new(ne["$[]"](0),"*",ne["$[]"](2))}),y(E,"$_reduce_8",function(ne,se,O){var oe=F;return oe=ne["$[]"](3),oe.$new(ne["$[]"](0),ne["$[]"](2))}),y(E,"$_reduce_10",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),y(E,"$_reduce_11",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithCeil")}),y(E,"$_reduce_12",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithCeil")}),y(E,"$_reduce_13",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithRound")}),y(E,"$_reduce_14",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"DivideWithFloor")}),y(E,"$_reduce_15",function(ne,se,O){return ne["$[]"](1)}),y(E,"$_reduce_16",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"Negative").$new(ne["$[]"](1))}),y(E,"$_reduce_18",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"Parenthesis").$new(ne["$[]"](1))}),y(E,"$_reduce_19",function(ne,se,O){return J(J(f("Arithmetic"),"Node"),"Number").$new(ne["$[]"](0))}),y(E,"$_reduce_none",function(ne,se,O){return ne["$[]"](0)})}(A[0],J(N("Racc"),"Parser"),A)}(x[0],x)}(k[0],k)}(U[0],U)};Opal.modules["bcdice/common_command/calc"]=function(e){var C=e.module,z=e.const_set,g=e.thrower,y=e.def,M=e.top,D=[],X=e.nil;return M.$require("bcdice/common_command/calc/parser"),function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"CommonCommand"),K=[B].concat(H);return function(k,I){var V=C(k,"Calc"),v=[V].concat(I);return z(v[0],"PREFIX_PATTERN",/C[+\-(]*\d+/.$freeze()),function(x,w){var T=[x].concat(w),o=e.$r(T);return y(x,"$eval",function(N,L,S){try{var c=g("eval_return"),E,m=X;return m=o("Parser").$parse(N),E=m,E===X||E==null?X:E.$eval(L.$round_type())}catch(f){if(f===e.t_eval_return)return f.$v;throw f}})}(e.get_singleton_class(V),v)}(K[0],K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/common_command/choice"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.hash2,M=e.def,D=e.truthy,X=e.eqeq,j=e.eqeqeq,b=e.send,U=e.rb_lt,F=e.thrower,J=e.rb_gt,H=e.ensure_kwargs,B=e.get_kwarg,K=e.top,k=[],I=e.nil,V=e.$$$;return K.$require("strscan"),function(v,x){var w=C(v,"BCDice"),T=[w].concat(x);return function(o,A){var N=C(o,"CommonCommand"),L=[N].concat(A);return function(S,c,E){var m=z(S,c,"Choice"),f=[m].concat(E),h=e.$r(f),R=m.$$prototype;return R.items=R.takes=R.block_delimiter=I,g(f[0],"PREFIX_PATTERN",/choice/.$freeze()),function(d,l){var u=C(d,"BlockDelimiter"),i=[u].concat(l);return g(i[0],"BRACKET","bracket"),g(i[0],"PAREN","paren"),g(i[0],"SPACE","space")}(f[0],f),g(f[0],"DELIMITER",y(["bracket","paren","space"],{bracket:/,/,paren:/,/,space:/\s+/}).$freeze()),g(f[0],"DELIMITER_CHAR",y(["bracket","paren","space"],{bracket:", ",paren:", ",space:" "}).$freeze()),g(f[0],"TERMINATION",y(["bracket","paren","space"],{bracket:/\]/,paren:/\)/,space:/$/}).$freeze()),g(f[0],"SUFFIX",y(["bracket","paren","space"],{bracket:"]",paren:")",space:""}).$freeze()),function(d,l){var u=[d].concat(l),i=e.$r(u);return M(d,"$eval",function(t,$,r){var a,s=this,p=I;return p=s.$parse(t),a=p,a===I||a==null?I:a.$roll(r)}),d.$private(),M(d,"$parse",function(t){try{var $=F("return"),r,a=this,s=I,p=I,G=I,Z=I,ie=I,ne=I,se=I,O=I,oe=I,ue=I;if(s=i("StringScanner").$new(t),s.$skip(/\s+/),p=s.$scan(/S/i)["$nil?"]()["$!"](),!D(s.$scan(/choice/i))||(G=D(Z=(r=s.$scan(/\d+/),r===I||r==null?I:r.$to_i()))?Z:1,X(G,0)))return I;for(ie=function(){if(j("[",Z=s.$scan(/\(|\[|\s+/)))return V(i("BlockDelimiter"),"BRACKET");if(j("(",Z))return V(i("BlockDelimiter"),"PAREN");if(j(i("String"),Z))return V(i("BlockDelimiter"),"SPACE");$.$throw()}(),ne=i("DELIMITER")["$[]"](ie),se=i("TERMINATION")["$[]"](ie),O=[];D(oe=s.$scan_until(ne));)O.$push(oe.$delete_suffix(","));return ue=s.$scan_until(se),!D(ue)||(O.$push(ue.$delete_suffix(i("SUFFIX")["$[]"](ie))),O=b(b(O,"map",[],"strip".$to_proc()),"reject",[],"empty?".$to_proc()),X(O.$size(),1)&&(O=a.$parse_multi_item_shorthand(O.$first())),D(O["$empty?"]())||D(U(O.$size(),G)))?I:a.$new(y(["secret","block_delimiter","takes","items"],{secret:p,block_delimiter:ie,takes:G,items:O}))}catch(te){if(te===$)return te.$v;throw te}}),M(d,"$parse_multi_item_shorthand",function(t){var $=this,r=I,a=I;return D(r=D(a=$.$parse_multi_nums_shorthand(t))?a:$.$parse_multi_chars_shorthand(t))?r:[]}),M(d,"$parse_multi_nums_shorthand",function(t){var $=I,r=I,a=I;return $=/^(\d+)-(\d+)$/.$match(t),!D($)||(r=$["$[]"](1).$to_i(),a=$["$[]"](2).$to_i(),D(J(r,a)))?I:r.$upto(a).$to_a()}),M(d,"$parse_multi_chars_shorthand",function(t){var $=I,r=I,a=I,s=I;return $=D(r=/^([a-z])-([a-z])$/.$match(t))?r:/^([A-Z])-([A-Z])$/.$match(t),!D($)||(a=$["$[]"](1),s=$["$[]"](2),D(J(a,s)))?I:a.$upto(s).$to_a()})}(e.get_singleton_class(m),f),M(m,"$initialize",function(l){var u,i,n,t,$=this;return l=H(l),u=B(l,"secret"),i=B(l,"block_delimiter"),n=B(l,"takes"),t=B(l,"items"),$.secret=u,$.block_delimiter=i,$.takes=n,$.items=t}),M(m,"$roll",function(l){var u=this,i=I,n=I;return D(J(u.items.$size(),100))?h("Result").$new("\u9805\u76EE\u6570\u306F100\u4EE5\u4E0B\u3068\u3057\u3066\u304F\u3060\u3055\u3044"):(i=u.items.$dup(),n=[],b(u.takes,"times",[],function(){var $=I;return $=l.$roll_index(i.$size()),n["$<<"](i.$delete_at($))}),b(h("Result").$new(),"tap",[],function t($){var r,a=t.$$s==null?this:t.$$s,s=I;return a.block_delimiter==null&&(a.block_delimiter=I),a.secret==null&&(a.secret=I),$==null&&($=I),s=n.$join(h("DELIMITER_CHAR")["$[]"](a.block_delimiter)),$["$secret="](a.secret),r=["("+a.$expr()+") \uFF1E "+s],b($,"text=",r),r[r.length-1]},{$$s:u}))}),M(m,"$expr",function(){var l=this,u=I,i=I;return u=X(l.takes,1)?I:l.takes,j(V(h("BlockDelimiter"),"SPACE"),i=l.block_delimiter)?"choice"+u+" "+l.items.$join(" "):j(V(h("BlockDelimiter"),"BRACKET"),i)?"choice"+u+"["+l.items.$join(",")+"]":j(V(h("BlockDelimiter"),"PAREN"),i)?"choice"+u+"("+l.items.$join(",")+")":I})}(L[0],null,L)}(T[0],T)}(k[0],k)};Opal.modules["bcdice/common_command/d66_dice"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.thrower,M=e.def,D=e.truthy,X=e.hash2,j=e.ensure_kwargs,b=e.get_kwarg,U=e.send,F=e.eqeqeq,J=e.rb_plus,H=e.rb_times,B=[],K=e.nil,k=e.$$$;return function(I,V){var v=C(I,"BCDice"),x=[v].concat(V);return function(w,T){var o=C(w,"CommonCommand"),A=[o].concat(T);return function(N,L,S){var c=z(N,L,"D66Dice"),E=[c].concat(S),m=e.$r(E),f=c.$$prototype;return f.sort_type=K,g(E[0],"PREFIX_PATTERN",/D66/.$freeze()),function(h,R){var d=[h].concat(R),l=e.$r(d);return M(h,"$eval",function(i,n,t){try{var $=y("eval_return"),r,a=this,s=K;return s=a.$parse(i,n),r=s,r===K||r==null?K:r.$eval(t)}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),h.$private(),M(h,"$parse",function(i,n){var t=this,$=K,r=K;return i=i.$split(" ",2).$first(),$=/^(S)?D66([ANSD])?$/i.$match(i.$upcase()),D($)?t.$new(X(["secret","sort_type","suffix"],{secret:$["$[]"](1)["$nil?"]()["$!"](),sort_type:D(r=t.$sort_type_from_suffix($["$[]"](2)))?r:n.$d66_sort_type(),suffix:$["$[]"](2)})):K}),M(h,"$sort_type_from_suffix",function(i){switch(i){case"A":case"S":return k(l("D66SortType"),"ASC");case"D":return k(l("D66SortType"),"DESC");case"N":return k(l("D66SortType"),"NO_SORT");default:return K}})}(e.get_singleton_class(c),E),M(c,"$initialize",function(R){var d,l,u,i=this;return R=j(R),d=b(R,"secret"),l=b(R,"sort_type"),u=b(R,"suffix"),i.secret=d,i.sort_type=l,i.suffix=u}),M(c,"$eval",function(R){var d=this,l=K;return l=d.$roll(R),U(m("Result").$new(),"tap",[],function u(i){var n,t=u.$$s==null?this:u.$$s;return t.secret==null&&(t.secret=K),t.suffix==null&&(t.suffix=K),i==null&&(i=K),i["$secret="](t.secret),n=["(D66"+t.suffix+") \uFF1E "+l],U(i,"text=",n),n[n.length-1]},{$$s:d})}),c.$private(),M(c,"$roll",function(R){var d=this,l=K,u=K;return l=U(m("Array"),"new",[2],function(){return R.$roll_once(6)}),F(k(m("D66SortType"),"ASC"),u=d.sort_type)?l["$sort!"]():F(k(m("D66SortType"),"DESC"),u)&&l["$sort!"]()["$reverse!"](),J(H(l["$[]"](0),10),l["$[]"](1))})}(A[0],null,A)}(x[0],x)}(B[0],B)};Opal.modules["bcdice/common_command/repeat"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.def,M=e.truthy,D=e.hash2,X=e.ensure_kwargs,j=e.get_kwarg,b=e.send,U=e.eqeq,F=e.thrower,J=e.rb_lt,H=e.top,B=[],K=e.nil;return H.$require("strscan"),function(k,I){var V=C(k,"BCDice"),v=[V].concat(I);return function(x,w){var T=C(x,"CommonCommand"),o=[T].concat(w);return function(A,N,L){var S=z(A,N,"Repeat"),c=[S].concat(L),E=e.$r(c),m=S.$$prototype;return m.times=m.trailer=m.secret=K,g(c[0],"PREFIX_PATTERN",/(repeat|rep|x)\d+/.$freeze()),g(c[0],"REPEAT_LIMIT",100),function(f,h){var R=[f].concat(h),d=e.$r(R);return y(f,"$eval",function(u,i,n){var t,$=this,r=K;return r=$.$parse(u),t=r,t===K||t==null?K:t.$roll(i,n)}),f.$private(),y(f,"$parse",function(u){var i,n=this,t=K,$=K,r=K,a=K,s=K,p=K;return t=d("StringScanner").$new(u),$=t.$scan(/s/i)["$nil?"]()["$!"](),r=t.$scan(/repeat|rep|x/i),a=(i=t.$scan(/\d+/),i===K||i==null?K:i.$to_i()),s=t.$scan(/\s+/),M(r["$nil?"]())||M(a["$nil?"]())||M(s["$nil?"]())||(p=t.$post_match(),M(p["$nil?"]())||M(p["$empty?"]()))?K:n.$new(D(["secret","times","trailer"],{secret:$,times:a,trailer:p}))})}(e.get_singleton_class(S),c),y(S,"$initialize",function(h){var R,d,l,u=this;return h=X(h),R=j(h,"secret"),d=j(h,"times"),l=j(h,"trailer"),u.secret=R,u.times=d,u.trailer=l}),y(S,"$roll",function(h,R){try{var d=F("eval_return"),l=this,u=K,i=K,n=K,t=K,$=K;return u=l.$validate(),M(u)?u:(i=b(E("Array"),"new",[l.times],function r(){var a=r.$$s==null?this:r.$$s,s=K;return a.trailer==null&&(a.trailer=K),s=h.$class().$new(a.trailer),s["$randomizer="](R),s.$eval()},{$$s:l}),U(b(i,"count",[],function(a){return a==null&&(a=K),a["$=="](K)}),l.times)?l.$result_with_text("\u7E70\u308A\u8FD4\u3057\u5BFE\u8C61\u306E\u30B3\u30DE\u30F3\u30C9\u304C\u5B9F\u884C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F ("+l.trailer+")"):(n=b(i.$map(),"with_index",[1],function(a,s){return a==null&&(a=K),s==null&&(s=K),"#"+s+`
`+a.$text()}).$join(`

`),t=M($=l.secret)?$:b(i,"any?",[],"secret?".$to_proc()),b(E("Result").$new(),"tap",[],function(a){var s;return a==null&&(a=K),a["$secret="](t),s=[n],b(a,"text=",s),s[s.length-1]})))}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),S.$private(),y(S,"$validate",function(){var h=this;return M(/^(repeat|rep|x)\d+/["$match?"](h.trailer))?h.$result_with_text("Repeat\u30B3\u30DE\u30F3\u30C9\u306E\u91CD\u8907\u306F\u3067\u304D\u307E\u305B\u3093"):M(J(h.times,1))||M(J(E("REPEAT_LIMIT"),h.times))?h.$result_with_text("\u7E70\u308A\u8FD4\u3057\u56DE\u6570\u306F1\u4EE5\u4E0A\u3001"+E("REPEAT_LIMIT")+"\u4EE5\u4E0B\u3068\u3057\u3066\u304F\u3060\u3055\u3044"):K}),y(S,"$result_with_text",function(h){var R=this;return b(E("Result").$new(),"tap",[],function d(l){var u,i=d.$$s==null?this:d.$$s;return i.secret==null&&(i.secret=K),l==null&&(l=K),l["$secret="](i.secret),u=[h],b(l,"text=",u),u[u.length-1]},{$$s:R})})}(o[0],null,o)}(v[0],v)}(B[0],B)};Opal.modules["bcdice/format"]=function(e){var C=e.module,z=e.eqeqeq,g=e.def,y=e.truthy,M=e.eqeq,D=e.rb_gt,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"Format"),k=[K].concat(B),I=e.$r(k);return K.$module_function(),g(K,"$comparison_operator",function(v){var x=j;return z("==",x=v)?"=":z("!=",x)?"<>":z(I("Symbol"),x)?v.$to_s():j}),g(K,"$modifier",function(v){return y(v["$nil?"]())?j:M(v,0)?"":y(D(v,0))?"+"+v:v.$to_s()})}(J[0],J)}(X[0],X)};Opal.modules["bcdice/common_command/barabara_dice/result"]=function(e){var C=e.module,z=e.klass,g=e.send2,y=e.find_super,M=e.def,D=e.top,X=[],j=e.nil,b=e.$$$;return D.$require("bcdice/result"),function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"CommonCommand"),I=[k].concat(K);return function(V,v){var x=C(V,"BarabaraDice"),w=[x].concat(v);return function(T,o){var A=z(T,o,"Result");return A.$attr_accessor("last_dice_list_list"),A.$attr_accessor("last_dice_list"),A.$attr_accessor("success_num"),M(A,"$initialize",function N(L){var S=N.$$p||j,c=this;return N.$$p=null,L==null&&(L=j),g(c,y(c,"initialize",N,!1,!0),"initialize",[L],null),c.last_dice_list_list=[],c.last_dice_list=[],c.success_num=0},-1)}(w[0],b(b("BCDice"),"Result"))}(I[0],I)}(H[0],H)}(X[0],X)};Opal.modules["bcdice/common_command/barabara_dice/node"]=function(e){var C=e.module,z=e.klass,g=e.ensure_kwargs,y=e.get_kwarg,M=e.def,D=e.send,X=e.truthy,j=e.thrower,b=e.top,U=[],F=e.nil;return b.$require("bcdice/format"),b.$require("bcdice/common_command/barabara_dice/result"),function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I){var V=C(k,"CommonCommand"),v=[V].concat(I);return function(x,w){var T=C(x,"BarabaraDice"),o=[T].concat(w);return function(A,N){var L=C(A,"Node"),S=[L].concat(N);return function(c,E,m){var f=z(c,E,"Command"),h=[f].concat(m),R=e.$r(h),d=f.$$prototype;return d.notations=d.cmp_op=d.target_number=F,M(f,"$initialize",function(u){var i,n,t,$,r=this;return u=g(u),i=y(u,"secret"),n=y(u,"notations"),t=y(u,"cmp_op"),$=y(u,"target_number"),r.secret=i,r.notations=n,r.cmp_op=t,r.target_number=$}),M(f,"$eval",function(u,i){try{var n=j("eval_return"),t,$=this,r=F,a=F,s=F,p=F,G=F,Z=F,ie=F,ne=F,se=F,O=F,oe=F;return r=u.$round_type(),a=D($.notations,"map",[],function(te){return te==null&&(te=F),te.$to_dice(r)}),s=X(p=$.cmp_op)?p:u.$default_cmp_op(),G=X(p=(t=$.target_number,t===F||t==null?F:t.$eval(r)))?p:u.$default_target_number(),Z=D(a,"map",[],function(te){return te==null&&(te=F),te.$roll(i)}),X(u["$sort_barabara_dice?"]())&&D(Z,"map!",[],"sort".$to_proc()),ie=Z.$flatten(),ne=ie.$count(1),se=X(s)?D(ie,"count",[],function(te){return te==null&&(te=F),te.$send(s,G)}):0,X(s)&&(O="\u6210\u529F\u6570"+se),oe=["("+a.$join("+")+R("Format").$comparison_operator(s)+G+")",ie.$join(","),O,u.$grich_text(ne,ie.$size(),se)].$compact(),D(R("Result").$new(),"tap",[],function ue(te){var $e,re=ue.$$s==null?this:ue.$$s;return re.secret==null&&(re.secret=F),te==null&&(te=F),te["$secret="](re.secret),te["$text="](oe.$join(" \uFF1E ")),te["$last_dice_list_list="](Z),te["$last_dice_list="](ie),$e=[se],D(te,"success_num=",$e),$e[$e.length-1]},{$$s:$})}catch(ue){if(ue===e.t_eval_return)return ue.$v;throw ue}})}(S[0],null,S),function(c,E,m){var f=z(c,E,"Notation"),h=[f].concat(m),R=e.$r(h),d=f.$$prototype;return d.times=d.sides=F,M(f,"$initialize",function(u,i){var n=this;return n.times=u,n.sides=i}),M(f,"$to_dice",function(u){try{var i=j("eval_return"),n=this,t=F,$=F;return t=n.times.$eval(u),$=n.sides.$eval(u),R("Dice").$new(t,$)}catch(r){if(r===e.t_eval_return)return r.$v;throw r}})}(S[0],null,S),function(c,E){var m=z(c,E,"Dice"),f=m.$$prototype;return f.times=f.sides=F,M(m,"$initialize",function(R,d){var l=this;return l.times=R,l.sides=d}),M(m,"$roll",function(R){var d=this;return R.$roll_barabara(d.times,d.sides)}),M(m,"$to_s",function(){var R=this;return""+R.times+"B"+R.sides})}(S[0],null)}(o[0],o)}(v[0],v)}(K[0],K)}(U[0],U)};Opal.modules["bcdice/common_command/reroll_dice/parser"]=function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.hash,D=e.const_set,X=e.hash2,j=e.return_val,b=e.to_ary,U=e.truthy,F=e.top,J=[],H=e.nil,B=e.$$$;return F.$require("racc/parser.rb"),F.$require("bcdice/common_command/lexer"),F.$require("bcdice/common_command/barabara_dice/node"),F.$require("bcdice/arithmetic/node"),function(K,k){var I=C(K,"BCDice"),V=[I].concat(k);return function(v,x){var w=C(v,"CommonCommand"),T=[w].concat(x);return function(o,A){var N=C(o,"RerollDice"),L=[N].concat(A),S=e.$r(L);return function(c,E,m){var f=z(c,E,"Parser"),h=[f].concat(m),R=e.$r(h),d=H,l=H,u=H,i=H,n=H,t=H,$=H,r=H,a=H,s=H,p=H,G=H,Z=H,ie=H,ne=f.$$prototype;return ne.lexer=H,g(f,"$parse",function(O){var oe=this;return oe.$new().$parse(O)}),y(f,"$parse",function(O){var oe=this;try{return oe.lexer=R("Lexer").$new(O),oe.$do_parse()}catch(ue){if(e.rescue(ue,[R("ParseError")]))try{return H}finally{e.pop_exception()}else throw ue}}),f.$private(),y(f,"$next_token",function(){var O=this;return O.lexer.$next_token()}),d=e.large_array_unpack("9,3,9,9,9,15,20,21,20,21,8,14,8,8,8,9,9,4,13,28,10,39,20,21,9,8,8,31,32,9,20,21,33,16,8,20,21,9,24,8,34,35,9,20,21,31,32,8,20,21,9,13,8,31,32,9,20,21,34,35,8,20,21,9,,8,34,35,9,20,21,31,32,8,20,21,9,,8,,31,32,20,21,31,32,8,40,,,,47,51,49,50,52"),l=e.large_array_unpack("14,0,24,2,15,5,14,14,24,24,14,5,24,2,15,16,8,1,5,14,4,24,8,8,13,16,8,17,17,20,13,13,17,7,13,20,20,21,11,20,18,18,28,21,21,26,26,21,28,28,31,12,28,38,38,32,31,31,42,42,31,32,32,34,,32,43,43,35,34,34,46,46,34,35,35,39,,35,,27,27,39,39,41,41,39,27,,,,41,45,45,45,45"),u=e.large_array_unpack("-6,17,1,,20,-3,,30,14,,,18,30,22,-2,2,13,19,30,,27,35,,,0,,37,72,40,,,48,53,,61,66,,,45,74,,76,48,56,,89,63,,,,,,"),i=e.large_array_unpack("-4,-31,-31,-5,-31,-6,-13,-31,-31,-30,53,-1,-6,-31,-31,-31,-31,-31,-17,-20,-31,-31,-28,-3,-31,-2,-7,-31,-31,-12,-14,-31,-31,-29,-31,-31,-26,-27,-10,-31,-8,-31,-15,-16,-18,-21,-11,-9,-19,-22,-23,-24,-25"),n=[17,7,11,36,37,26,27,1,6,25,42,43,2,5,7,30,38,44,45,12,41,29,23,48,H,H,H,H,H,H,H,46],t=[7,9,4,11,11,7,7,1,8,4,10,10,2,3,9,9,7,11,11,5,7,8,6,12,H,H,H,H,H,H,H,7],$=[H,7,12,11,-3,14,11,-8,6,-1,-21,-17,-22],r=[H,H,H,H,H,H,H,H,H,22,18,19,H],a=e.large_array_unpack("0,0,racc_error,3,23,_reduce_1,4,23,_reduce_2,4,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,2,26,_reduce_7,3,27,_reduce_8,4,27,_reduce_9,2,28,_reduce_10,3,28,_reduce_11,3,25,_reduce_12,1,25,_reduce_13,3,30,_reduce_14,3,29,_reduce_15,3,29,_reduce_16,1,29,_reduce_none,3,32,_reduce_18,4,32,_reduce_19,1,32,_reduce_none,0,34,_reduce_21,1,34,_reduce_22,1,34,_reduce_23,1,34,_reduce_24,1,34,_reduce_25,2,33,_reduce_26,2,33,_reduce_27,1,33,_reduce_none,3,31,_reduce_29,1,31,_reduce_30"),s=31,p=53,G=M(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),Z=22,ie=!0,D(h[0],"Racc_arg",[d,l,i,u,n,t,r,$,Z,a,G,p,s,ie]),D(h[0],"Racc_token_to_s_table",e.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,bracket,at,add,dice,term,mul,unary,round_type")),D(h[0],"Racc_debug_parser",!1),y(f,"$_reduce_1",function(O,oe,ue){var te=this;return B(R("Node"),"Command").$new(X(["secret","notations","cmp_op","target_number","source"],{secret:O["$[]"](0),notations:O["$[]"](1),cmp_op:O["$[]"](2)["$[]"]("cmp_op"),target_number:O["$[]"](2)["$[]"]("target"),source:te.lexer.$source()}))}),y(f,"$_reduce_2",function(O,oe,ue){var te=this,$e=H,re=H;return $e=O["$[]"](3),re=O["$[]"](2),B(R("Node"),"Command").$new(X(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:O["$[]"](0),notations:O["$[]"](1),cmp_op:$e["$[]"]("cmp_op"),target_number:$e["$[]"]("target"),reroll_cmp_op:re["$[]"]("cmp_op"),reroll_threshold:re["$[]"]("threshold"),source:te.lexer.$source()}))}),y(f,"$_reduce_3",function(O,oe,ue){var te=this,$e=H,re=H;return $e=O["$[]"](2),re=O["$[]"](3),B(R("Node"),"Command").$new(X(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:O["$[]"](0),notations:O["$[]"](1),cmp_op:$e["$[]"]("cmp_op"),target_number:$e["$[]"]("target"),reroll_cmp_op:re["$[]"]("cmp_op"),reroll_threshold:re["$[]"]("threshold"),source:te.lexer.$source()}))}),y(f,"$_reduce_4",j(!1)),y(f,"$_reduce_5",j(!0)),y(f,"$_reduce_6",function(O,oe,ue){return X([],{})}),y(f,"$_reduce_7",function(O,oe,ue){var te,$e,re=this,P=H,W=H;return $e=O,te=b($e),P=te[0]==null?H:te[0],W=te[1]==null?H:te[1],U(P)||re.$raise(R("ParseError")),X(["cmp_op","target"],{cmp_op:P,target:W})}),y(f,"$_reduce_8",function(O,oe,ue){return X(["threshold"],{threshold:O["$[]"](1)})}),y(f,"$_reduce_9",function(O,oe,ue){var te=this,$e=H,re=H;return $e=O["$[]"](1),re=O["$[]"](2),U($e)||te.$raise(R("ParseError")),X(["cmp_op","threshold"],{cmp_op:$e,threshold:re})}),y(f,"$_reduce_10",function(O,oe,ue){return X(["threshold"],{threshold:O["$[]"](1)})}),y(f,"$_reduce_11",function(O,oe,ue){var te=this,$e=H,re=H;return $e=O["$[]"](1),re=O["$[]"](2),U($e)||te.$raise(R("ParseError")),X(["cmp_op","threshold"],{cmp_op:$e,threshold:re})}),y(f,"$_reduce_12",function(O,oe,ue){var te=H;return te=O["$[]"](0),te.$push(O["$[]"](2)),te}),y(f,"$_reduce_13",function(O,oe,ue){return[O["$[]"](0)]}),y(f,"$_reduce_14",function(O,oe,ue){var te=H,$e=H;return te=O["$[]"](0),$e=O["$[]"](2),B(R("Node"),"Notation").$new(te,$e)}),y(f,"$_reduce_15",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"+",O["$[]"](2))}),y(f,"$_reduce_16",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"-",O["$[]"](2))}),y(f,"$_reduce_18",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"*",O["$[]"](2))}),y(f,"$_reduce_19",function(O,oe,ue){var te=H;return te=O["$[]"](3),te.$new(O["$[]"](0),O["$[]"](2))}),y(f,"$_reduce_21",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),y(f,"$_reduce_22",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithCeil")}),y(f,"$_reduce_23",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithCeil")}),y(f,"$_reduce_24",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithRound")}),y(f,"$_reduce_25",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithFloor")}),y(f,"$_reduce_26",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_27",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Negative").$new(O["$[]"](1))}),y(f,"$_reduce_29",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_30",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Number").$new(O["$[]"](0))}),y(f,"$_reduce_none",function(O,oe,ue){return O["$[]"](0)})}(L[0],B(S("Racc"),"Parser"),L)}(T[0],T)}(V[0],V)}(J[0],J)};Opal.modules["bcdice/common_command/reroll_dice"]=function(e){var C=e.module,z=e.const_set,g=e.thrower,y=e.def,M=e.top,D=[],X=e.nil;return M.$require("bcdice/normalize"),M.$require("bcdice/format"),M.$require("bcdice/common_command/reroll_dice/parser"),function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"CommonCommand"),K=[B].concat(H);return function(k,I){var V=C(k,"RerollDice"),v=[V].concat(I);return z(v[0],"PREFIX_PATTERN",/\d+R\d+/.$freeze()),z(v[0],"REROLL_LIMIT",1e4),function(x,w){var T=[x].concat(w),o=e.$r(T);return y(x,"$eval",function(N,L,S){try{var c=g("eval_return"),E,m=X;return m=o("Parser").$parse(N),E=m,E===X||E==null?X:E.$eval(L,S)}catch(f){if(f===e.t_eval_return)return f.$v;throw f}})}(e.get_singleton_class(V),v)}(K[0],K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/common_command/upper_dice/node"]=function(e){var C=e.module,z=e.klass,g=e.ensure_kwargs,y=e.get_kwarg,M=e.def,D=e.send,X=e.truthy,j=e.rb_le,b=e.thrower,U=e.rb_plus,F=e.eqeq,J=e.hash2,H=e.rb_lt,B=[],K=e.nil;return function(k,I){var V=C(k,"BCDice"),v=[V].concat(I);return function(x,w){var T=C(x,"CommonCommand"),o=[T].concat(w);return function(A,N){var L=C(A,"UpperDice"),S=[L].concat(N);return function(c,E){var m=C(c,"Node"),f=[m].concat(E);return function(h,R,d){var l=z(h,R,"Command"),u=[l].concat(d),i=e.$r(u),n=l.$$prototype;return n.notations=n.reroll_threshold=n.modifier=n.target_number=n.cmp_op=K,M(l,"$initialize",function($){var r,a,s,p,G,Z,ie=this;return $=g($),r=y($,"secret"),a=y($,"notations"),s=y($,"modifier"),p=y($,"cmp_op"),G=y($,"target_number"),Z=$.$$smap.reroll_threshold,Z==null&&(Z=K),ie.secret=r,ie.notations=a,ie.modifier=s,ie.cmp_op=p,ie.target_number=G,ie.reroll_threshold=Z}),M(l,"$eval",function($,r){try{var a=b("eval_return"),s,p,G,Z=this,ie=K,ne=K,se=K,O=K,oe=K,ue=K,te=K,$e=K,re=K,P=K,W=K;return ie=$.$round_type(),ne=D(Z.notations,"map",[],function(_){return _==null&&(_=K),_.$to_dice(ie)}),se=X(O=X(oe=(s=Z.reroll_threshold,s===K||s==null?K:s.$eval(ie)))?oe:$.$upper_dice_reroll_threshold())?O:0,ue=X(O=(p=Z.modifier,p===K||p==null?K:p.$eval(ie)))?O:0,te=(G=Z.target_number,G===K||G==null?K:G.$eval(ie)),$e=Z.$expr(ne,se,ue,te),X(j(se,1))?Z.$result_with_text("("+$e+") \uFF1E \u7121\u9650\u30ED\u30FC\u30EB\u306E\u6761\u4EF6\u304C\u307E\u3061\u304C\u3063\u3066\u3044\u307E\u3059"):(re=D(ne,"map",[],function(_){return _==null&&(_=K),_.$roll(r,se,$["$sort_barabara_dice?"]())}).$reduce([],"concat"),P=X(Z.cmp_op)?Z.$result_success_count(re,ue,te):Z.$result_max_sum(re,ue),W=["("+$e+")",Z.$interlim_expr(re,ue),P],Z.$result_with_text(W.$join(" \uFF1E ")))}catch(ee){if(ee===e.t_eval_return)return ee.$v;throw ee}}),l.$private(),M(l,"$result_success_count",function($,r,a){var s=this,p=K;return p=D($,"count",[],function G(Z){var ie=G.$$s==null?this:G.$$s,ne=K;return ie.cmp_op==null&&(ie.cmp_op=K),Z==null&&(Z=K),ne=U(Z["$[]"]("sum"),r),ne.$send(ie.cmp_op,a)},{$$s:s}),"\u6210\u529F\u6570"+p}),M(l,"$result_max_sum",function($,r){var a=K,s=K,p=K;return a=D($,"map",[],function(Z){return Z==null&&(Z=K),Z["$[]"]("sum")}),s=U(a.$sum(),r),p=D(a,"map",[],function(Z){return Z==null&&(Z=K),U(Z,r)}).$max(),""+p+"/"+s+"(\u6700\u5927/\u5408\u8A08)"}),M(l,"$interlim_expr",function($,r){var a=K;return a=D($,"map",[],function(p){return p==null&&(p=K),F(p["$[]"]("list").$size(),1)?p["$[]"]("sum"):""+p["$[]"]("sum")+"["+p["$[]"]("list").$join(",")+"]"}).$join(","),U(a,i("Format").$modifier(r))}),M(l,"$expr",function($,r,a,s){var p=this,G=K,Z=K;return G=i("Format").$comparison_operator(p.cmp_op),Z=i("Format").$modifier(a),""+$.$join("+")+"["+r+"]"+Z+G+s}),M(l,"$result_with_text",function($){var r=this;return D(i("Result").$new(),"tap",[],function a(s){var p,G=a.$$s==null?this:a.$$s;return G.secret==null&&(G.secret=K),s==null&&(s=K),s["$secret="](G.secret),p=[$],D(s,"text=",p),p[p.length-1]},{$$s:r})})}(f[0],null,f),function(h,R,d){var l=z(h,R,"Notation"),u=[l].concat(d),i=e.$r(u),n=l.$$prototype;return n.roll_times=n.sides=K,M(l,"$initialize",function($,r){var a=this;return a.roll_times=$,a.sides=r}),M(l,"$to_dice",function($){try{var r=b("eval_return"),a=this,s=K,p=K;return s=a.roll_times.$eval($),p=a.sides.$eval($),i("Dice").$new(s,p)}catch(G){if(G===e.t_eval_return)return G.$v;throw G}})}(f[0],null,f),function(h,R,d){var l=z(h,R,"Dice"),u=[l].concat(d),i=e.$r(u),n=l.$$prototype;return n.roll_times=n.sides=K,M(l,"$initialize",function($,r){var a=this;return a.roll_times=$,a.sides=r}),M(l,"$roll",function($,r,a){var s=this,p=K;return p=D(i("Array"),"new",[s.roll_times],function G(){var Z=G.$$s==null?this:G.$$s,ie=K;return ie=Z.$roll_ones($,r),J(["sum","list"],{sum:ie.$sum(),list:ie})},{$$s:s}),X(a)&&(p=D(p,"sort_by",[],function(Z){return Z==null&&(Z=K),Z["$[]"]("sum")})),p}),M(l,"$to_s",function(){var $=this;return""+$.roll_times+"U"+$.sides}),l.$private(),M(l,"$roll_ones",function($,r){var a=this,s=K;return s=[],function(){try{var p=b("break");return D(a,"loop",[],function G(){var Z=G.$$s==null?this:G.$$s,ie=K;if(Z.sides==null&&(Z.sides=K),ie=$.$roll_once(Z.sides),s.$push(ie),X(H(ie,r)))p.$throw();else return K},{$$s:a})}catch(G){if(G===p)return G.$v;throw G}}(),s})}(f[0],null,f)}(S[0],S)}(o[0],o)}(v[0],v)}(B[0],B)};Opal.modules["bcdice/common_command/upper_dice/parser"]=function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.hash,D=e.const_set,X=e.hash2,j=e.return_val,b=e.to_ary,U=e.truthy,F=e.top,J=[],H=e.nil,B=e.$$$;return F.$require("racc/parser.rb"),F.$require("bcdice/common_command/lexer"),F.$require("bcdice/common_command/upper_dice/node"),F.$require("bcdice/arithmetic/node"),function(K,k){var I=C(K,"BCDice"),V=[I].concat(k);return function(v,x){var w=C(v,"CommonCommand"),T=[w].concat(x);return function(o,A){var N=C(o,"UpperDice"),L=[N].concat(A),S=e.$r(L);return function(c,E,m){var f=z(c,E,"Parser"),h=[f].concat(m),R=e.$r(h),d=H,l=H,u=H,i=H,n=H,t=H,$=H,r=H,a=H,s=H,p=H,G=H,Z=H,ie=H,ne=f.$$prototype;return ne.lexer=H,g(f,"$parse",function(O){var oe=this;return oe.$new().$parse(O)}),y(f,"$parse",function(O){var oe=this;try{return oe.lexer=R("Lexer").$new(O),oe.$do_parse()}catch(ue){if(e.rescue(ue,[R("ParseError")]))try{return H}finally{e.pop_exception()}else throw ue}}),f.$private(),y(f,"$next_token",function(){var O=this;return O.lexer.$next_token()}),d=e.large_array_unpack("9,9,36,37,3,9,9,21,22,49,8,8,21,22,9,8,8,14,15,9,21,22,4,16,8,21,22,9,10,8,36,37,9,21,22,38,17,8,21,22,9,25,8,27,15,9,21,22,28,29,8,21,22,9,44,8,39,40,9,21,22,39,40,8,21,22,9,25,8,39,40,9,21,22,36,37,8,21,22,9,17,8,39,40,9,21,22,39,40,8,21,22,9,,8,39,40,,21,22,39,40,8,58,56,57,59,36,37"),l=e.large_array_unpack("2,8,34,34,0,17,14,8,8,34,2,8,14,14,15,17,14,5,5,16,15,15,1,5,15,16,16,21,4,16,18,18,22,21,21,18,7,21,22,22,25,11,22,12,12,27,25,25,13,13,25,27,27,28,24,27,19,19,29,28,28,30,30,28,29,29,36,26,29,33,33,37,36,36,45,45,36,37,37,39,32,37,47,47,40,39,39,48,48,39,40,40,44,,40,50,50,,44,44,51,51,44,53,53,53,53,54,54"),u=e.large_array_unpack("-3,22,-2,,28,9,,32,-1,,,20,35,40,4,12,17,3,22,46,,25,30,,34,38,46,43,51,56,51,,76,59,-6,,64,69,,77,82,,,,90,66,,72,77,,85,90,,100,99,,,,,"),i=e.large_array_unpack("-4,-35,-35,-5,-35,-6,-17,-35,-35,-34,60,-12,-6,-7,-35,-35,-35,-35,-35,-21,-24,-35,-35,-32,-1,-35,-12,-35,-35,-35,-8,-16,-32,-9,-35,-18,-35,-35,-33,-35,-35,-30,-31,-3,-35,-13,-2,-10,-11,-14,-19,-20,-22,-25,-15,-23,-26,-27,-28,-29"),n=e.large_array_unpack("18,30,33,41,42,24,6,1,34,2,5,12,11,7,30,47,48,45,31,26,46,52,53,50,51,32,43,55,35,,,,,,,,54"),t=e.large_array_unpack("10,9,9,13,13,5,11,1,10,2,3,6,4,12,9,9,9,10,11,4,5,13,13,9,9,12,7,14,12,,,,,,,,10"),$=[H,7,9,8,7,-6,6,2,H,-13,-8,4,11,-18,-26],r=[H,H,H,H,H,H,H,H,13,19,H,H,23,20,H],a=e.large_array_unpack("0,0,racc_error,4,23,_reduce_1,5,23,_reduce_2,5,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,1,26,_reduce_7,2,30,_reduce_8,2,30,_reduce_9,3,30,_reduce_10,3,30,_reduce_11,0,27,_reduce_12,2,27,_reduce_13,3,28,_reduce_14,2,29,_reduce_15,3,25,_reduce_16,1,25,_reduce_17,3,33,_reduce_18,3,32,_reduce_19,3,32,_reduce_20,1,32,_reduce_none,3,31,_reduce_22,4,31,_reduce_23,1,31,_reduce_none,0,36,_reduce_25,1,36,_reduce_26,1,36,_reduce_27,1,36,_reduce_28,1,36,_reduce_29,2,35,_reduce_30,2,35,_reduce_31,1,35,_reduce_none,3,34,_reduce_33,1,34,_reduce_34"),s=35,p=60,G=M(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),Z=22,ie=!0,D(h[0],"Racc_arg",[d,l,i,u,n,t,r,$,Z,a,G,p,s,ie]),D(h[0],"Racc_token_to_s_table",e.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,modifier,target,bracket,at,modifier_expr,mul,add,dice,term,unary,round_type")),D(h[0],"Racc_debug_parser",!1),y(f,"$_reduce_1",function(O,oe,ue){return B(B(R("UpperDice"),"Node"),"Command").$new(X(["secret","notations","modifier","cmp_op","target_number"],{secret:O["$[]"](0),notations:O["$[]"](1),modifier:O["$[]"](2),cmp_op:O["$[]"](3)["$[]"]("cmp_op"),target_number:O["$[]"](3)["$[]"]("target")}))}),y(f,"$_reduce_2",function(O,oe,ue){return B(B(R("UpperDice"),"Node"),"Command").$new(X(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:O["$[]"](0),notations:O["$[]"](1),modifier:O["$[]"](3),cmp_op:O["$[]"](4)["$[]"]("cmp_op"),target_number:O["$[]"](4)["$[]"]("target"),reroll_threshold:O["$[]"](2)}))}),y(f,"$_reduce_3",function(O,oe,ue){return B(B(R("UpperDice"),"Node"),"Command").$new(X(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:O["$[]"](0),notations:O["$[]"](1),modifier:O["$[]"](2),cmp_op:O["$[]"](3)["$[]"]("cmp_op"),target_number:O["$[]"](3)["$[]"]("target"),reroll_threshold:O["$[]"](4)}))}),y(f,"$_reduce_4",j(!1)),y(f,"$_reduce_5",j(!0)),y(f,"$_reduce_6",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Number").$new(0)}),y(f,"$_reduce_7",function(O,oe,ue){return O["$[]"](0)}),y(f,"$_reduce_8",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_9",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Negative").$new(O["$[]"](1))}),y(f,"$_reduce_10",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"+",O["$[]"](2))}),y(f,"$_reduce_11",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"-",O["$[]"](2))}),y(f,"$_reduce_12",function(O,oe,ue){return X([],{})}),y(f,"$_reduce_13",function(O,oe,ue){var te,$e,re=this,P=H,W=H;return $e=O,te=b($e),P=te[0]==null?H:te[0],W=te[1]==null?H:te[1],U(P)||re.$raise(R("ParseError")),X(["cmp_op","target"],{cmp_op:P,target:W})}),y(f,"$_reduce_14",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_15",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_16",function(O,oe,ue){var te=H;return te=O["$[]"](0),te.$push(O["$[]"](2)),te}),y(f,"$_reduce_17",function(O,oe,ue){return[O["$[]"](0)]}),y(f,"$_reduce_18",function(O,oe,ue){var te=H,$e=H;return te=O["$[]"](0),$e=O["$[]"](2),B(B(R("UpperDice"),"Node"),"Notation").$new(te,$e)}),y(f,"$_reduce_19",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"+",O["$[]"](2))}),y(f,"$_reduce_20",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"-",O["$[]"](2))}),y(f,"$_reduce_22",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"BinaryOp").$new(O["$[]"](0),"*",O["$[]"](2))}),y(f,"$_reduce_23",function(O,oe,ue){var te=H;return te=O["$[]"](3),te.$new(O["$[]"](0),O["$[]"](2))}),y(f,"$_reduce_25",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),y(f,"$_reduce_26",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithCeil")}),y(f,"$_reduce_27",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithCeil")}),y(f,"$_reduce_28",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithRound")}),y(f,"$_reduce_29",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"DivideWithFloor")}),y(f,"$_reduce_30",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_31",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Negative").$new(O["$[]"](1))}),y(f,"$_reduce_33",function(O,oe,ue){return O["$[]"](1)}),y(f,"$_reduce_34",function(O,oe,ue){return B(B(R("Arithmetic"),"Node"),"Number").$new(O["$[]"](0))}),y(f,"$_reduce_none",function(O,oe,ue){return O["$[]"](0)})}(L[0],B(S("Racc"),"Parser"),L)}(T[0],T)}(V[0],V)}(J[0],J)};Opal.modules["bcdice/common_command/upper_dice"]=function(e){var C=e.module,z=e.const_set,g=e.thrower,y=e.def,M=e.top,D=[],X=e.nil;return M.$require("bcdice/common_command/upper_dice/parser"),function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"CommonCommand"),K=[B].concat(H);return function(k,I){var V=C(k,"UpperDice"),v=[V].concat(I);return z(v[0],"PREFIX_PATTERN",/\d+U\d+/.$freeze()),function(x,w){var T=[x].concat(w),o=e.$r(T);return y(x,"$eval",function(N,L,S){try{var c=g("eval_return"),E,m=X;return m=o("Parser").$parse(N),E=m,E===X||E==null?X:E.$eval(L,S)}catch(f){if(f===e.t_eval_return)return f.$v;throw f}})}(e.get_singleton_class(V),v)}(K[0],K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/common_command/version"]=function(e){var C=e.module,z=e.const_set,g=e.truthy,y=e.send,M=e.def,D=[],X=e.nil,j=e.$$$;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"CommonCommand"),k=[K].concat(B);return function(I,V){var v=C(I,"Version"),x=[v].concat(V);return z(x[0],"PREFIX_PATTERN",/BCDiceVersion/.$freeze()),function(w,T){var o=[w].concat(T),A=e.$r(o);return M(w,"$eval",function(L,S,c){return L=L.$split(" ",2).$first(),g(L["$match?"](/^BCDiceVersion$/i))?y(A("Result").$new(),"tap",[],function(m){var f;return m==null&&(m=X),f=["BCDice "+j(A("BCDice"),"VERSION")],y(m,"text=",f),f[f.length-1]}):X})}(e.get_singleton_class(v),x)}(k[0],k)}(J[0],J)}(D[0],D)};Opal.queue(function(e){var C=e.module,z=e.const_set,g=e.top,y=[],M=e.nil;return g.$require("bcdice/common_command/add_dice"),g.$require("bcdice/common_command/barabara_dice"),g.$require("bcdice/common_command/tally_dice"),g.$require("bcdice/common_command/calc"),g.$require("bcdice/common_command/choice"),g.$require("bcdice/common_command/d66_dice"),g.$require("bcdice/common_command/repeat"),g.$require("bcdice/common_command/reroll_dice"),g.$require("bcdice/common_command/upper_dice"),g.$require("bcdice/common_command/version"),function(D,X){var j=C(D,"BCDice"),b=[j].concat(X);return function(U,F){var J=C(U,"CommonCommand"),H=[J].concat(F),B=e.$r(H);return z(H[0],"COMMANDS",[B("AddDice"),B("BarabaraDice"),B("TallyDice"),B("Calc"),B("Choice"),B("D66Dice"),B("Repeat"),B("RerollDice"),B("UpperDice"),B("Version")].$freeze())}(b[0],b)}(y[0],y)})});var Ze=pe((Nt,Cr)=>{Cr.exports={ja_jp:{success:"\u6210\u529F",failure:"\u5931\u6557",critical:"\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB",fumble:"\u30D5\u30A1\u30F3\u30D6\u30EB"},ko_kr:{success:"\uC131\uACF5",failure:"\uC2E4\uD328",fumble:"\uD38C\uBE14",RTT:{rtt_format:"\uB79C\uB364 \uD2B9\uAE30 \uACB0\uC815\uD45C(%<category_dice>d,%<row_dice>d) \uFF1E %<text>s",rttn_format:"\uC9C0\uC815\uD2B9\uAE30(%<category_name>s)\uD45C(%<row_dice>d) \uFF1E %<text>s"}},zh_hant:{success:"\u6210\u529F",failure:"\u5931\u6557"},zh_hans:{success:"\u6210\u529F",failure:"\u5931\u8D25",fumble:"\u5927\u5931\u8D25",RTT:{rtt_format:"\u968F\u673A\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uFF1E %<text>s",rttn_format:"%<category_name>s\u9886\u57DF\u968F\u673A\u7279\u6280\u8868(%<row_dice>d) \uFF1E %<text>s"}}}});var Qe=pe(()=>{Ee();Opal.modules.json=function(e){var C=e.module,z=e.klass,g=e.send,y=e.Object,M=e.hash2,D=e.eqeqeq,X=e.defs,j=e.truthy,b=e.def,U=e.return_val,F=[],J=e.nil,H=e.$$$;return function(B,K){var k=C(B,"JSON"),I,V=[k].concat(K),v=e.$r(V);z(V[0],v("StandardError"),"JSONError"),z(V[0],v("JSONError"),"ParserError");var x=e.hasOwnProperty;function w(o){try{return JSON.parse(o)}catch(A){k.$raise(H(v("JSON"),"ParserError"),A.message)}}function T(o,A){var N,L,S,c,E,m;switch(typeof o){case"string":return o;case"number":return o;case"boolean":return!!o;case"undefined":return J;case"object":if(!o)return J;if(o.$$is_array){for(L=A.array_class.$new(),c=0,E=o.length;c<E;c++)L.$push(T(o[c],A));return L}else{S=A.object_class.$new();for(m in o)x.call(o,m)&&(I=[m,T(o[m],A)],g(S,"[]=",I),I[I.length-1]);return!A.parse&&(N=S["$[]"](v("JSON").$create_id()))!=J?y.$const_get(N).$json_create(S):S}}}return function(o,A){return o.$attr_accessor("create_id")}(e.get_singleton_class(k),V),k["$create_id="]("json_class"),X(k,"$[]",function(A,N){var L=this;return N==null&&(N=M([],{})),D(v("String"),A)?L.$parse(A,N):L.$generate(A,N)},-2),X(k,"$parse",function(A,N){var L=this;return N==null&&(N=M([],{})),L.$from_object(w(A),N.$merge(M(["parse"],{parse:!0})))},-2),X(k,"$parse!",function(A,N){var L=this;return N==null&&(N=M([],{})),L.$parse(A,N)},-2),X(k,"$load",function(A,N){var L=this;return N==null&&(N=M([],{})),L.$from_object(w(A),N)},-2),X(k,"$from_object",function(A,N){var L=J;return N==null&&(N=M([],{})),j(L=N["$[]"]("object_class"))||N["$[]="]("object_class",v("Hash")),j(L=N["$[]"]("array_class"))||N["$[]="]("array_class",v("Array")),T(A,N.$$smap)},-2),X(k,"$generate",function(A,N){return N==null&&(N=M([],{})),A.$to_json(N)},-2),X(k,"$dump",function(A,N,L){var S=this,c=J;return N==null&&(N=J),L==null&&(L=J),c=S.$generate(A),j(N)?(j(N["$responds_to?"]("to_io"))&&(N=N.$to_io()),N.$write(c),N):c},-2)}(F[0],F),function(B,K){var k=z(B,K,"Object");return b(k,"$to_json",function(){var V=this;return V.$to_s().$to_json()})}(F[0],null),function(B){var K=C(B,"Enumerable");return b(K,"$to_json",function(){var I=this;return I.$to_a().$to_json()})}(F[0]),function(B,K){var k=z(B,K,"Array");return b(k,"$to_json",function(){for(var V=this,v=[],x=0,w=V.length;x<w;x++)v.push(V[x].$to_json());return"["+v.join(",")+"]"})}(F[0],null),function(B,K){var k=z(B,K,"Boolean");return b(k,"$to_json",function(){var V=this;return V==!0?"true":"false"})}(F[0],null),function(B,K){var k=z(B,K,"Hash");return b(k,"$to_json",function(){for(var V=this,v=[],x=0,w=V.$$keys,T=w.length,o,A;x<T;x++)o=w[x],o.$$is_string?A=V.$$smap[o]:(A=o.value,o=o.key),v.push(o.$to_s().$to_json()+":"+A.$to_json());return"{"+v.join(",")+"}"})}(F[0],null),function(B,K){var k=z(B,K,"NilClass");return b(k,"$to_json",U("null"))}(F[0],null),function(B,K){var k=z(B,K,"Numeric");return b(k,"$to_json",function(){var V=this;return V.toString()})}(F[0],null),function(B,K){var k=z(B,K,"String");return b(k,"$to_json",function(){var V=this;return JSON.stringify(V)})}(F[0],null),function(B,K){var k=z(B,K,"Time");return b(k,"$to_json",function(){var V=this;return V.$strftime("%FT%T%z").$to_json()})}(F[0],null),function(B,K){var k=z(B,K,"Date");return b(k,"$to_json",function(){var V=this;return V.$to_s().$to_json()}),b(k,"$as_json",function(){var V=this;return V.$to_s()})}(F[0],null)};Opal.modules.i18n=function(e){var C=e.module,z=e.class_variable_set,g=e.class_variable_get,y=e.def,M=e.truthy,D=e.hash2,X=e.send,j=e.ensure_kwargs,b=e.kwrestargs,U=e.to_a,F=e.hash,J=e.alias,H=e.klass,B=e.return_val,K=e.top,k=[],I=e.nil,V=e.$$$;return K.$require("json"),function(v,x){var w=C(v,"I18n"),T=[w].concat(x);return function(o,A){var N=[o].concat(A),L=e.$r(N);return z(N[1],"@@load_path",[]),z(N[1],"@@table",I),y(o,"$load_path",function(){return g(N[1],"@@load_path",!1)}),y(o,"$default_locale",function(){return g(N[1],"@@default_locale",!1)}),y(o,"$default_locale=",function(c){return z(N[1],"@@default_locale",c)}),y(o,"$fallbacks",function(){return V(V(L("I18n"),"Locale"),"Fallbacks").$new()}),y(o,"$load_default_translation",function(){var c=this;return M(g(N[1],"@@table",!1)["$nil?"]())?(z(N[1],"@@table",D([],{})),c.$load_translation(JSON.stringify(Ze()))):I}),y(o,"$load_translation",function(c){var E=this,m=I;return E.$load_default_translation(),m=L("JSON").$parse(c,D(["symbolize_names"],{symbolize_names:!0})),z(N[1],"@@table",X(g(N[1],"@@table",!1),"merge",[m],function(h,R,d){return h==null&&(h=I),R==null&&(R=I),d==null&&(d=I),R.$merge(d)}))}),y(o,"$clear_translate_table",function(){return z(N[1],"@@table",I)}),y(o,"$translate",function(c,E){var m,f,h=this,R=I,d=I,l=I,u=I,i=I;E=j(E),m=E.$$smap.locale,m==null&&(m=I),f=b(E,{locale:!0}),h.$load_default_translation(),R=X(c.$split("."),"map",[],"to_sym".$to_proc()),d=g(N[1],"@@table",!1),l=g(N[1],"@@default_locale",!1),u=M(i=X(d,"dig",[m].concat(U(R))))?i:X(d,"dig",[l].concat(U(R)));try{M(u["$is_a?"](L("String")))&&(u=h.$format(u,e.to_hash(f)))}catch(n){if(e.rescue(n,[L("ArgumentError"),L("KeyError")]))try{}finally{e.pop_exception()}else throw n}return M(i=u)?i:f["$[]"]("default")},-2),J(o,"t","translate")}(e.get_singleton_class(w),T),function(o,A){var N=C(o,"Locale"),L=[N].concat(A),S=e.$r(L);return function(c,E){var m=H(c,E,"Fallbacks");return y(m,"$defaults=",B(I))}(L[0],S("Hash"))}(T[0],T),function(o,A){var N=C(o,"Backend"),L=[N].concat(A);return C(L[0],"Simple"),I}(T[0],T),function(o,A){var N=C(o,"Thread"),L=[N].concat(A);return function(S,c){return y(S,"$current",function(){return D(["i18n_fallbacks"],{i18n_fallbacks:I})})}(e.get_singleton_class(N),L)}(T[0],T)}(k[0],k)};Opal.modules["i18n/backend/fallbacks"]=function(e){var C=e.module,z=e.class_variable_set,g=e.truthy,y=e.class_variable_get,M=e.def,D=e.send,X=e.send2,j=e.find_super,b=e.hash2,U=e.find_block_super,F=e.neqeq,J=e.thrower,H=e.return_val,B=[],K=e.nil,k=e.$$$;return function(I,V){var v=C(I,"I18n"),x=[v].concat(V);return z(x[0],"@@fallbacks",K),function(w,T){var o=[w].concat(T),A=e.$r(o);return M(w,"$fallbacks",function(){var L,S=K;return z(o[1],"@@fallbacks",g((L=o[1].$$cvars["@@fallbacks"],L!=null?"class variable":K))&&g(S=y(o[1],"@@fallbacks",!1))?S:k(k(A("I18n"),"Locale"),"Fallbacks").$new()),g(S=A("Thread").$current()["$[]"]("i18n_fallbacks"))?S:y(o[1],"@@fallbacks",!1)}),M(w,"$fallbacks=",function(L){var S;return z(o[1],"@@fallbacks",g(L["$is_a?"](A("Array")))?k(k(A("I18n"),"Locale"),"Fallbacks").$new(L):L),S=["i18n_fallbacks",y(o[1],"@@fallbacks",!1)],D(A("Thread").$current(),"[]=",S),S[S.length-1]})}(e.get_singleton_class(v),x),function(w,T){var o=C(w,"Backend"),A=[o].concat(T);return function(N,L){var S=C(N,"Fallbacks"),c=[S].concat(L),E=e.$r(c);return M(S,"$translate",function m(f,h,R){try{var d=J("return"),l=m.$$p||K,u=this,i=K,n=K;return m.$$p=null,R==null&&(R=E("EMPTY_HASH")),g(R.$fetch("fallback",!0))?g(R["$[]"]("fallback_in_progress"))?X(u,j(u,"translate",m,!1,!0),"translate",[f,h,R],l):(g(R["$[]"]("default"))&&(i=u["$extract_non_symbol_default!"](R)),n=R.$merge(b(["fallback_in_progress"],{fallback_in_progress:!0})),D(E("I18n").$fallbacks()["$[]"](f),"each",[],function t($){var r=t.$$s==null?this:t.$$s;$==null&&($=K);try{return D(r,"catch",["exception"],function a(){var s=a.$$s==null?this:a.$$s,p=K;if(p=X(s,U(s,"translate",a.$$def||t.$$def||m,!1,!1),"translate",[$,h,n],null),g(p["$nil?"]()))return K;F(f.$to_s(),$.$to_s())&&s.$on_fallback(f,$,h,R),d.$throw(p)},{$$s:r,$$ret:d})}catch(a){if(e.rescue(a,[k(E("I18n"),"InvalidLocale")]))try{return K}finally{e.pop_exception()}else throw a}},{$$s:u}),g(R["$key?"]("default"))&&g(R["$[]"]("default")["$nil?"]())?K:g(i)?X(u,j(u,"translate",m,!1,!0),"translate",[f,K,R.$merge(b(["default"],{default:i}))],null):u.$throw("exception",k(E("I18n"),"MissingTranslation").$new(f,h,R))):X(u,j(u,"translate",m,!1,!0),"translate",[f,h,R],l)}catch(t){if(t===d)return t.$v;throw t}},-3),M(S,"$extract_non_symbol_default!",function(f){var h=K,R=K;return h=[f["$[]"]("default")].$flatten(),R=D(h,"detect",[],function(l){return l==null&&(l=K),l["$is_a?"](E("Symbol"))["$!"]()}),g(R)&&f["$[]="]("default",h["$[]"](0,h.$index(R))),R}),M(S,"$exists?",function m(f,h,R){try{var d=J("return"),l=m.$$p||K,u=this;return m.$$p=null,R==null&&(R=E("EMPTY_HASH")),g(R.$fetch("fallback",!0))?(D(E("I18n").$fallbacks()["$[]"](f),"each",[],function i(n){var t=i.$$s==null?this:i.$$s;n==null&&(n=K);try{if(g(X(t,U(t,"exists?",i.$$def||m,!1,!1),"exists?",[n,h],null)))d.$throw(!0);else return K}catch($){if(e.rescue($,[k(E("I18n"),"InvalidLocale")]))try{return K}finally{e.pop_exception()}else throw $}},{$$s:u,$$ret:d}),!1):X(u,j(u,"exists?",m,!1,!0),"exists?",[f,h,R],l)}catch(i){if(i===d)return i.$v;throw i}},-3),S.$private(),M(S,"$on_fallback",H(K))}(A[0],A)}(x[0],x)}(B[0],B)};Opal.modules["bcdice/randomizer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.def,M=e.truthy,D=e.rb_gt,X=e.rb_plus,j=e.rb_le,b=e.send,U=e.rb_minus,F=e.eqeq,J=e.rb_times,H=e.eqeqeq,B=e.rb_ge,K=[],k=e.nil,I=e.$$$;return function(V,v){var x=C(V,"BCDice"),w=[x].concat(v),T=e.$r(w);return function(o,A,N){var L=z(o,A,"Randomizer"),S=[L].concat(N),c=e.$r(S),E=L.$$prototype;return E.rand_results=E.detailed_rand_results=k,g(S[0],"UPPER_LIMIT_DICE_TIMES",200),g(S[0],"UPPER_LIMIT_DICE_SIDES",1e4),g(S[0],"UPPER_LIMIT_RANDS",1e4),y(L,"$initialize",function(){var f=this;return f.rand_results=[],f.detailed_rand_results=[]}),L.$attr_reader("rand_results"),L.$attr_reader("detailed_rand_results"),g(S[0],"DetailedRandResult",c("Struct").$new("kind","sides","value")),y(L,"$roll_barabara",function(f,h){var R=this;return M(D(X(R.rand_results.$size(),f),c("UPPER_LIMIT_RANDS")))&&R.$raise(c("TooManyRandsError")),M(j(f,0))||M(D(f,c("UPPER_LIMIT_DICE_TIMES")))?[]:b(c("Array"),"new",[f],function d(){var l=d.$$s==null?this:d.$$s;return l.$roll_once(h)},{$$s:R})}),y(L,"$roll_sum",function(f,h){var R=this;return R.$roll_barabara(f,h).$sum()}),y(L,"$roll_once",function(f){var h=this,R=k;return M(j(f,0))||M(D(f,c("UPPER_LIMIT_DICE_SIDES")))?0:(R=h.$rand_inner(f),h.$push_to_detail("normal",f,R),R)}),y(L,"$roll_index",function(f){var h=this;return U(h.$roll_once(f),1)}),y(L,"$roll_tens_d10",function(){var f=this,h=k,R=k;return h=f.$rand_inner(10),F(h,10)&&(h=0),R=J(h,10),f.$push_to_detail("tens_d10",10,R),R}),y(L,"$roll_d9",function(){var f=this,h=k;return h=U(f.$rand_inner(10),1),f.$push_to_detail("d9",10,h),h}),y(L,"$roll_d66",function(f){var h=this,R=k,d=k;return R=b(c("Array"),"new",[2],function l(){var u=l.$$s==null?this:l.$$s;return u.$roll_once(6)},{$$s:h}),H(I(c("D66SortType"),"ASC"),d=f)?R["$sort!"]():H(I(c("D66SortType"),"DESC"),d)&&R["$sort!"]()["$reverse!"](),X(J(R["$[]"](0),10),R["$[]"](1))}),L.$private(),y(L,"$rand_inner",function(f){var h=this,R=k;return M(B(h.rand_results.$size(),c("UPPER_LIMIT_RANDS")))&&h.$raise(c("TooManyRandsError")),R=h.$random(f),h.rand_results["$<<"]([R,f]),R}),y(L,"$random",function(f){return X(c("Kernel").$rand(f),1)}),y(L,"$push_to_detail",function(f,h,R){var d=this,l=k;return l=c("DetailedRandResult").$new(f,h,R),d.detailed_rand_results.$push(l)})}(w[0],null,w),z(w[0],T("StandardError"),"TooManyRandsError"),k}(K[0],K)};Opal.modules["bcdice/dice_table/roll_result"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.truthy,M=e.return_val,D=[],X=e.nil;return function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"DiceTable"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"RollResult"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.table_name=T.value=T.body=X,g(v,"$initialize",function(A,N,L){var S=this;return S.table_name=A,S.value=N,S.body=L}),v.$attr_reader("table_name"),v.$attr_reader("value"),v.$attr_reader("body"),g(v,"$to_s",function(){var A=this;return""+A.table_name+"("+A.value+") \uFF1E "+A.body}),g(v,"$last_body",function(){var A=this;return y(A.body["$is_a?"](w("RollResult")))?A.body.$last_body():A.body}),g(v,"$empty?",M(!1))}(K[0],null,K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/dice_table/chain_table"]=function(e){var C=e.module,z=e.klass,g=e.truthy,y=e.def,M=e.rb_minus,D=[],X=e.nil;return function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"DiceTable"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"ChainTable"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.times=T.sides=T.items=T.name=X,y(v,"$initialize",function(A,N,L){var S=this,c=X;return S.name=A,S.items=L.$freeze(),c=/(\d+)D(\d+)/i.$match(N),g(c)||S.$raise(w("ArgumentError"),"Unexpected table type: "+N),S.times=c["$[]"](1).$to_i(),S.sides=c["$[]"](2).$to_i()}),y(v,"$roll",function(A){var N=this,L=X,S=X,c=X;return L=A.$roll_sum(N.times,N.sides),S=M(L,N.times),c=N.items["$[]"](S),g(c["$respond_to?"]("roll"))&&(c=c.$roll(A)),w("RollResult").$new(N.name,L,c)})}(K[0],null,K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.rb_plus,X=e.rb_times,j=e.rb_minus,b=[],U=e.nil;return function(F,J){var H=C(F,"BCDice"),B=[H].concat(J);return function(K,k){var I=C(K,"DiceTable"),V=[I].concat(k);return function(v,x,w){var T=z(v,x,"D66GridTable"),o=[T].concat(w),A=e.$r(o),N=T.$$prototype;return N.name=N.items=U,y(T,"$from_i18n",function(S,c){var E=this,m=U;return m=A("I18n").$t(S,g(["locale","raise"],{locale:c,raise:!0})),E.$new(m["$[]"]("name"),m["$[]"]("items"))}),M(T,"$initialize",function(S,c){var E=this;return E.name=S,E.items=c.$freeze()}),M(T,"$roll",function(S){var c=this,E=U,m=U,f=U,h=U,R=U;return E=S.$roll_once(6),m=S.$roll_once(6),f=D(X(E,10),m),h=j(E,1),R=j(m,1),A("RollResult").$new(c.name,f,c.items["$[]"](h)["$[]"](R))})}(V[0],null,V)}(B[0],B)}(b[0],b)};Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.top,X=[],j=e.nil;return D.$require("bcdice/dice_table/d66_grid_table"),function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"DiceTable"),k=[K].concat(B),I=e.$r(k);return function(V,v,x){var w=z(V,v,"D66HalfGridTable"),T=[w].concat(x),o=e.$r(T);return y(w,"$from_i18n",function(N,L){var S=this,c=j;return c=o("I18n").$t(N,g(["locale","raise"],{locale:L,raise:!0})),S.$new(c["$[]"]("name"),c["$[]"]("items_1_2_3"),c["$[]"]("items_4_5_6"))}),M(w,"$initialize",function(N,L,S){var c=this;return c.name=N,c.items=[L,L,L,S,S,S].$freeze()})}(k[0],I("D66GridTable"),k)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.top,X=[],j=e.nil;return D.$require("bcdice/dice_table/d66_grid_table"),function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"DiceTable"),k=[K].concat(B),I=e.$r(k);return function(V,v,x){var w=z(V,v,"D66OneThirdTable"),T=[w].concat(x),o=e.$r(T);return y(w,"$from_i18n",function(N,L){var S=this,c=j;return c=o("I18n").$t(N,g(["locale","raise"],{locale:L,raise:!0})),S.$new(c["$[]"]("name"),c["$[]"]("items_1_2"),c["$[]"]("items_3_4"),c["$[]"]("items_5_6"))}),M(w,"$initialize",function(N,L,S,c){var E=this;return E.name=N,E.items=[L,L,S,S,c,c].$freeze()})}(k[0],I("D66GridTable"),k)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/dice_table/d66_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.eqeqeq,X=e.rb_plus,j=e.rb_times,b=e.truthy,U=[],F=e.nil,J=e.$$$;return function(H,B){var K=C(H,"BCDice"),k=[K].concat(B);return function(I,V){var v=C(I,"DiceTable"),x=[v].concat(V);return function(w,T,o){var A=z(w,T,"D66Table"),N=[A].concat(o),L=e.$r(N),S=A.$$prototype;return S.sort_type=S.items=S.name=F,y(A,"$from_i18n",function(E,m){var f=this,h=F,R=F;return h=L("I18n").$t(E,g(["locale"],{locale:m})),R=L("D66SortType").$const_get(h["$[]"]("d66_sort_type")),f.$new(h["$[]"]("name"),R,h["$[]"]("items"))}),M(A,"$initialize",function(E,m,f){var h=this;return h.name=E,h.sort_type=m,h.items=f.$freeze()}),M(A,"$roll",function(E){var m=this,f=F,h=F,R=F,d=F;return f=E.$roll_barabara(2,6),D(J(L("D66SortType"),"ASC"),h=m.sort_type)?f["$sort!"]():D(J(L("D66SortType"),"DESC"),h)&&f["$sort!"]()["$reverse!"](),R=X(j(f["$[]"](0),10),f["$[]"](1)),d=b(h=m.items["$[]"](R))?h:m.items["$[]"](R.$to_s()),b(d["$respond_to?"]("roll"))&&(d=d.$roll(E)),L("RollResult").$new(m.name,R,d)}),M(A,"$choice",function(E){var m=this;return L("RollResult").$new(m.name,E,m.items["$[]"](E))})}(x[0],null,x)}(k[0],k)}(U[0],U)};Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.send,M=e.to_ary,D=e.rb_plus,X=e.rb_times,j=e.send2,b=e.find_super,U=e.def,F=e.top,J=[],H=e.nil;return F.$require("bcdice/dice_table/d66_table"),function(B,K){var k=C(B,"BCDice"),I=[k].concat(K);return function(V,v){var x=C(V,"DiceTable"),w=[x].concat(v),T=e.$r(w);return function(o,A){var N=z(o,A,"D66LeftRangeTable");return U(N,"$initialize",function L(S,c,E){var m=L.$$p||H,f=this,h=H;return L.$$p=null,h=g([],{}),y(E,"each",[],function(d){var l,u,i=H,n=H;return d==null&&(d=H),u=d,l=M(u),i=l[0]==null?H:l[0],n=l[1]==null?H:l[1],y(i,"each",[],function($){return $==null&&($=H),y(n,"each_with_index",[],function(a,s){var p,G=H;return a==null&&(a=H),s==null&&(s=H),G=D(X($,10),D(s,1)),p=[G,a],y(h,"[]=",p),p[p.length-1]})})}),j(f,b(f,"initialize",L,!1,!0),"initialize",[S,c,h],null)})}(w[0],T("D66Table"))}(I[0],I)}(J[0],J)};Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.truthy,X=e.rb_minus,j=e.rb_plus,b=e.rb_times,U=[],F=e.nil;return function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I){var V=C(k,"DiceTable"),v=[V].concat(I);return function(x,w,T){var o=z(x,w,"D66ParityTable"),A=[o].concat(T),N=e.$r(A),L=o.$$prototype;return L.odd=L.even=L.name=F,y(o,"$from_i18n",function(c,E){var m=this,f=F;return f=N("I18n").$t(c,g(["locale","raise"],{locale:E,raise:!0})),m.$new(f["$[]"]("name"),f["$[]"]("odd"),f["$[]"]("even"))}),M(o,"$initialize",function(c,E,m){var f=this;return f.name=c,f.odd=E.$freeze(),f.even=m.$freeze()}),M(o,"$roll",function(c){var E=this,m=F,f=F,h=F,R=F,d=F;return m=c.$roll_once(6),f=c.$roll_once(6),D(m["$odd?"]())?h=E.odd:h=E.even,R=h["$[]"](X(f,1)),d=j(b(m,10),f),N("RollResult").$new(E.name,d,R)})}(v[0],null,v)}(K[0],K)}(U[0],U)};Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.rb_plus,M=e.rb_times,D=e.send,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"DiceTable"),k=[K].concat(B);return function(I,V,v){var x=z(I,V,"D66RangeTable"),w=[x].concat(v),T=e.$r(w),o=x.$$prototype;return o.items=o.name=j,g(x,"$initialize",function(N,L){var S=this;return S.name=N,S.items=L.$freeze()}),g(x,"$roll",function(N){var L=this,S=j,c=j,E=j,m=j;return S=N.$roll_once(6),c=N.$roll_once(6),E=y(M(S,10),c),m=D(L.items,"find",[],function(h){return h==null&&(h=j),h["$[]"](0)["$include?"](E)}),T("RollResult").$new(L.name,E,m["$[]"](1))})}(k[0],null,k)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/dice_table/range_table"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.send,M=e.truthy,D=e.def,X=e.eqeqeq,j=e.rb_times,b=e.rb_plus,U=[],F=e.nil;return function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I){var V=C(k,"DiceTable"),v=[V].concat(I);return function(x,w,T){var o=z(x,w,"RangeTable"),A=[o].concat(T),N=e.$r(A),L=o.$$prototype;return L.name=L.items=L.num_of_dice=L.num_of_sides=L.formatter=F,g(A[0],"RollResult",y(N("Struct"),"new",["sum","values","content","formatted"],function S(){var c=S.$$s==null?this:S.$$s;return c.$alias_method("to_s","formatted")},{$$s:o})),g(A[0],"Item",N("Struct").$new("range","content")),g(A[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),g(A[0],"DEFAULT_FORMATTER",y(o,"lambda",[],function(c,E){return c==null&&(c=F),E==null&&(E=F),""+c.$name()+"("+E.$sum()+") \uFF1E "+E.$content()})),o.$attr_reader("name"),o.$attr_reader("num_of_dice"),o.$attr_reader("num_of_sides"),D(o,"$initialize",function S(c,E,m){var f=S.$$p||F,h=this,R=F,d=F;return S.$$p=null,h.name=c.$freeze(),h.formatter=M(R=f)?R:N("DEFAULT_FORMATTER"),d=N("DICE_ROLL_METHOD_RE").$match(E),M(d)||h.$raise(N("ArgumentError"),""+h.name+": invalid dice roll method: "+E),h.num_of_dice=d["$[]"](1).$to_i(),h.num_of_sides=d["$[]"](2).$to_i(),h.$store(m)}),D(o,"$fetch",function(c){var E=this,m=F;return m=y(E.items,"find",[],function(h){return h==null&&(h=F),h.$range()["$include?"](c)}),M(m)||E.$raise(N("RangeError"),""+E.name+": value is out of range: "+c),m}),D(o,"$roll",function(c){var E=this,m=F,f=F,h=F;return m=c.$roll_barabara(E.num_of_dice,E.num_of_sides),f=m.$sum(),h=N("RollResult").$new(f,m,E.$fetch(f).$content()),h["$formatted="](E.formatter["$[]"](E,h)),h}),o.$private(),D(o,"$store",function(c){var E=this,m=F,f=F;return m=y(c,"map",[],function h(R,d){var l=h.$$s==null?this:h.$$s;return R==null&&(R=F),d==null&&(d=F),[l.$coerce_to_int_range(R),d]},{$$s:E}),f=y(m,"sort_by",[],function(R,d){return R==null&&(R=F),d==null&&(d=F),R.$min()}),E.$assert_min_sum_is_covered(f),E.$assert_max_sum_is_covered(f),E.$assert_no_gap_or_overlap_in_ranges(f),E.items=y(f,"map",[],function(R,d){return R==null&&(R=F),d==null&&(d=F),N("Item").$new(R,d.$freeze()).$freeze()}).$freeze(),E}),D(o,"$coerce_to_int_range",function(c){var E=this,m=F;return X(N("Integer"),m=c)?N("Range").$new(c,c):X(N("Range"),m)&&M(c.$begin()["$is_a?"](N("Integer")))&&M(c.$end()["$is_a?"](N("Integer")))?c:E.$raise(N("TypeError"),""+E.name+": "+c+" ("+c.$class()+") must be an Integer or a Range with Integers ")}),D(o,"$assert_min_sum_is_covered",function(c){var E=this,m=F,f=F;return m=E.num_of_dice,f=c.$first()["$[]"](0),M(f["$include?"](m))||E.$raise(N("RangeError"),""+E.name+": min value ("+m+") is not covered: "+f),E}),D(o,"$assert_max_sum_is_covered",function(c){var E=this,m=F,f=F;return m=j(E.num_of_dice,E.num_of_sides),f=c.$last()["$[]"](0),M(f["$include?"](m))||E.$raise(N("RangeError"),""+E.name+": max value ("+m+") is not covered: "+f),E}),D(o,"$assert_no_gap_or_overlap_in_ranges",function(c){var E=this;return y(c,"each_cons",[2],function m(f,h){var R=m.$$s==null?this:m.$$s,d=F,l=F,u=F,i=F;return R.name==null&&(R.name=F),f==null&&(f=F),h==null&&(h=F),d=f["$[]"](0),l=h["$[]"](0),u=d.$max(),i=b(u,1),M(l["$include?"](u))&&R.$raise(N("RangeError"),""+R.name+": Range overlap: "+d+" and "+l),M(l["$include?"](i))?F:R.$raise(N("RangeError"),""+R.name+": Range gap: "+d+" and "+l)},{$$s:E}),E})}(v[0],null,v)}(K[0],K)}(U[0],U)};Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var C=e.module,z=e.klass,g=e.send,y=e.def,M=e.rb_minus,D=e.return_ivar,X=[],j=e.nil,b=e.$$$;return function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"DiceTable"),I=[k].concat(K);return function(V,v,x){var w=z(V,v,"SaiFicSkillTable"),T=[w].concat(x);return function(o,A,N){var L=z(o,A,"Category"),S=[L].concat(N),c=e.$r(S);return y(L,"$initialize",function(m,f,h,R){var d=this;return d.name=m,d.skills=g(f.$map(),"with_index",[2],function(u,i){return u==null&&(u=j),i==null&&(i=j),b(c("SaiFicSkillTable"),"Skill").$new(m,u,h,i,R)}),d.dice=h}),y(L,"$roll",function(m){var f=this;return f.$skills()["$[]"](M(m.$roll_sum(2,6),2))}),y(L,"$to_s",D("name")),L.$attr_reader("name","dice","skills")}(T[0],null,T)}(I[0],null,I)}(H[0],H)}(X[0],X)};Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.hash2,M=[],D=e.nil;return function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F,J){var H=C(F,"DiceTable"),B=[H].concat(J);return function(K,k,I){var V=z(K,k,"SaiFicSkillTable"),v=[V].concat(I);return function(x,w){var T=z(x,w,"Skill"),o=T.$$prototype;return o.s_format=o.category_dice=o.row_dice=o.category_name=o.name=D,g(T,"$initialize",function(N,L,S,c,E){var m=this;return m.category_name=N,m.name=L,m.category_dice=S,m.row_dice=c,m.s_format=E}),g(T,"$to_s",function(){var N=this;return N.$format(N.s_format,y(["category_dice","row_dice","category_name","skill_name"],{category_dice:N.category_dice,row_dice:N.row_dice,category_name:N.category_name,skill_name:N.name}))}),T.$attr_reader("category_name","name","category_dice","row_dice")}(v[0],null)}(B[0],null,B)}(U[0],U)}(M[0],M)};Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var C=e.module,z=e.klass,g=e.ensure_kwargs,y=e.hash2,M=e.send,D=e.hash,X=e.defs,j=e.const_set,b=e.to_ary,U=e.def,F=e.truthy,J=e.rb_minus,H=e.rb_plus,B=e.top,K=[],k=e.nil,I=e.$$$;return B.$require("bcdice/dice_table/sai_fic_skill_table/category"),B.$require("bcdice/dice_table/sai_fic_skill_table/skill"),function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"DiceTable"),N=[A].concat(o);return function(L,S,c){var E=z(L,S,"SaiFicSkillTable"),m=[E].concat(c),f=e.$r(m),h=E.$$prototype;return h.rtt=h.rtt_format=h.rct=h.rct_format=h.rttn=h.rttn_format=h.categories=k,X(E,"$from_i18n",function(d,l,u){var i,n,t,$=this,r=k,a=k,s=k;return u=g(u),i=u.$$smap.rtt,i==null&&(i=k),n=u.$$smap.rct,n==null&&(n=k),t=u.$$smap.rttn,t==null&&(t=k),r=f("I18n").$t("RTT",y(["locale","raise","default"],{locale:l,raise:!1,default:y([],{})})),a=r.$merge(f("I18n").$t(d,y(["locale","raise"],{locale:l,raise:!0}))),s=a["$[]"]("items"),a=M(a,"select",[],function(G,Z){return G==null&&(G=k),Z==null&&(Z=k),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](G)}),$.$new(s,e.to_hash(a).$merge(y(["rtt","rct","rttn"],{rtt:i,rct:n,rttn:t})))},-3),j(m[0],"DEFAULT_RTT","\u30E9\u30F3\u30C0\u30E0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uFF1E %<text>s"),j(m[0],"DEFAULT_RCT","\u30E9\u30F3\u30C0\u30E0\u5206\u91CE\u8868(%<category_dice>d) \uFF1E %<category_name>s"),j(m[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91CE\u30E9\u30F3\u30C0\u30E0\u7279\u6280\u8868(%<row_dice>d) \uFF1E %<text>s"),j(m[0],"DEFAULT_S","\u300A%<skill_name>s\uFF0F%<category_name>s%<row_dice>d\u300B"),U(E,"$initialize",function(d,l){var u,i,n,t,$,r,a,s=this;return l=g(l),u=l.$$smap.rtt,u==null&&(u=k),i=l.$$smap.rct,i==null&&(i=k),n=l.$$smap.rttn,n==null&&(n=k),t=l.$$smap.rtt_format,t==null&&(t=f("DEFAULT_RTT")),$=l.$$smap.rct_format,$==null&&($=f("DEFAULT_RCT")),r=l.$$smap.rttn_format,r==null&&(r=f("DEFAULT_RTTN")),a=l.$$smap.s_format,a==null&&(a=f("DEFAULT_S")),s.categories=M(d.$map(),"with_index",[1],function(G,Z){var ie,ne,se=k,O=k;return G==null&&(G=k),Z==null&&(Z=k),ne=G,ie=b(ne),se=ie[0]==null?k:ie[0],O=ie[1]==null?k:ie[1],I(f("SaiFicSkillTable"),"Category").$new(se,O,Z,a)},{$$has_top_level_mlhs_arg:!0}),s.rtt=u,s.rct=i,s.rttn=n.$to_a(),s.rtt_format=t,s.rct_format=$,s.rttn_format=r},-2),j(m[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),E.$attr_reader("categories"),U(E,"$roll_command",function(d,l){var u=this,i=k,n=k,t=k;return i=l,F(["RTT",u.rtt]["$include?"](i))?u.$format_skill(u.rtt_format,u.$roll_skill(d)):F(["RCT",u.rct]["$include?"](i))?(n=u.$roll_category(d),u.$format(u.rct_format,y(["category_dice","category_name"],{category_dice:n.$dice(),category_name:n.$name()}))):F(t=f("RTTN").$index(i))||F(t=u.rttn.$index(i))?u.$format_skill(u.rttn_format,u.categories["$[]"](t).$roll(d)):k}),U(E,"$roll_category",function(d){var l=this;return l.categories["$[]"](J(d.$roll_once(6),1))}),U(E,"$roll_skill",function(d){var l=this;return l.$roll_category(d).$roll(d)}),U(E,"$prefixes",function(){var d=this;return H(["RTT[1-6]?","RCT",d.rtt,d.rct],d.rttn).$compact()}),E.$private(),U(E,"$format_skill",function(d,l){var u=this;return u.$format(d,y(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:l.$category_dice(),row_dice:l.$row_dice(),category_name:l.$category_name(),skill_name:l.$name(),text:l.$to_s()}))})}(N[0],null,N)}(w[0],w)}(K[0],K)};Opal.modules["bcdice/dice_table/table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.truthy,D=e.def,X=e.rb_minus,j=[],b=e.nil;return function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"DiceTable"),I=[k].concat(K);return function(V,v,x){var w=z(V,v,"Table"),T=[w].concat(x),o=e.$r(T),A=w.$$prototype;return A.times=A.sides=A.name=A.items=b,y(w,"$from_i18n",function(L,S){var c=this,E=b;return E=o("I18n").$t(L,g(["locale"],{locale:S})),c.$new(E["$[]"]("name"),E["$[]"]("type"),E["$[]"]("items"))}),D(w,"$initialize",function(L,S,c){var E=this,m=b;return E.name=L,E.items=c.$freeze(),m=/(\d+)D(\d+)/i.$match(S),M(m)||E.$raise(o("ArgumentError"),"Unexpected table type: "+S),E.times=m["$[]"](1).$to_i(),E.sides=m["$[]"](2).$to_i()}),D(w,"$roll",function(L){var S=this,c=b;return c=L.$roll_sum(S.times,S.sides),S.$choice(c)}),D(w,"$choice",function(L){var S=this,c=b;return c=X(L,S.times),o("RollResult").$new(S.name,L,S.items["$[]"](c))})}(I[0],null,I)}(H[0],H)}(j[0],j)};Opal.modules["bcdice/dice_table"]=function(e){var C=e.top,z=e.nil;return C.$require("bcdice/dice_table/roll_result"),C.$require("bcdice/dice_table/chain_table"),C.$require("bcdice/dice_table/d66_grid_table"),C.$require("bcdice/dice_table/d66_half_grid_table"),C.$require("bcdice/dice_table/d66_one_third_table"),C.$require("bcdice/dice_table/d66_left_range_table"),C.$require("bcdice/dice_table/d66_parity_table"),C.$require("bcdice/dice_table/d66_range_table"),C.$require("bcdice/dice_table/d66_table"),C.$require("bcdice/dice_table/range_table"),C.$require("bcdice/dice_table/sai_fic_skill_table"),C.$require("bcdice/dice_table/table")};Opal.modules["bcdice/enum"]=function(e){var C=e.module,z=e.const_set,g=[],y=e.nil;return function(M,D){var X=C(M,"BCDice"),j=[X].concat(D);return function(b,U){var F=C(b,"D66SortType"),J=[F].concat(U);return z(J[0],"NO_SORT","no_sort"),z(J[0],"ASC","asc"),z(J[0],"DESC","desc")}(j[0],j),function(b,U){var F=C(b,"RoundType"),J=[F].concat(U);return z(J[0],"CEIL","ceil"),z(J[0],"FLOOR","floor"),z(J[0],"ROUND","round")}(j[0],j)}(g[0],g)};Opal.modules["bcdice/translate"]=function(e){var C=e.module,z=e.ensure_kwargs,g=e.kwrestargs,y=e.hash,M=e.hash2,D=e.def,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"Translate"),k=[K].concat(B),I=e.$r(k);return D(K,"$translate",function(v,x){var w,T=this;return T.locale==null&&(T.locale=j),x=z(x),w=g(x,{}),I("I18n").$translate(v,M(["locale","raise"],{locale:T.locale,raise:!0}).$merge(e.to_hash(w)))},-2)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/result"]=function(e){var C=e.module,z=e.klass,g=e.send,y=e.def,M=e.return_val,D=e.return_ivar,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B,K){var k=z(H,B,"Result"),I=[k].concat(K);return function(V,v){return y(V,"$success",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),N=[!0],g(A,"success=",N),N[N.length-1]})}),y(V,"$failure",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),N=[!0],g(A,"failure=",N),N[N.length-1]})}),y(V,"$critical",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),A["$critical="](!0),N=[!0],g(A,"success=",N),N[N.length-1]})}),y(V,"$fumble",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),A["$fumble="](!0),N=[!0],g(A,"failure=",N),N[N.length-1]})}),y(V,"$nothing",M("nothing"))}(e.get_singleton_class(k),I),y(k,"$initialize",function(v){var x=this;return v==null&&(v=j),x.text=v,x.rands=j,x.detailed_rands=j,x.secret=!1,x.success=!1,x.failure=!1,x.critical=!1,x.fumble=!1},-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),y(k,"$secret?",D("secret")),y(k,"$success?",D("success")),y(k,"$failure?",D("failure")),y(k,"$critical?",D("critical")),y(k,"$fumble?",D("fumble")),y(k,"$condition=",function(v){var x=this;return x.success=v,x.failure=v["$!"]()})}(J[0],null,J)}(X[0],X)};Opal.modules["racc/parser"]=function(e){var C=e.module,z=e.klass,g=e.truthy,y=e.const_set,M=e.defs,D=e.gvars,X=e.rb_lt,j=e.def,b=e.to_ary,U=e.send,F=e.neqeq,J=e.rb_plus,H=e.eqeq,B=e.rb_ge,K=e.rb_gt,k=e.rb_minus,I=e.rb_le,V=e.rb_times,v=e.assign_ivar_val,x,w=[],T=e.$r(w),o=e.nil,A=e.$$$;return function(N,L){var S=C(N,"Racc"),c=[S].concat(L),E=e.$r(c);return z(c[0],E("StandardError"),"ParseError"),o}(w[0],w),g((x=A("::","ParseError","skip_raise"))?"constant":o)||y(w[0],"ParseError",A(T("Racc"),"ParseError")),function(N,L){var S=C(N,"Racc"),c,E=[S].concat(L),m=e.$r(E);return g((c=m("Racc_No_Extensions","skip_raise"))?"constant":o)||y(E[0],"Racc_No_Extensions",!1),function(f,h,R){var d=z(f,h,"Parser"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.yydebug=i.racc_debug_out=i.racc_error_status=i.racc_t=i.racc_vstack=i.racc_val=i.racc_state=i.racc_tstack=o,y(l[0],"Racc_Runtime_Version","1.4.6"),y(l[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Runtime_Core_Version_R","1.4.6"),y(l[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),y(l[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),y(l[0],"Racc_Runtime_Core_Version",u("Racc_Runtime_Core_Version_R")),y(l[0],"Racc_Runtime_Core_Revision",u("Racc_Runtime_Core_Revision_R")),y(l[0],"Racc_Runtime_Type","ruby"),M(u("Parser"),"$racc_runtime_type",function(){return u("Racc_Runtime_Type")}),j(d,"$_racc_setup",function(){var t,$,r=this,a=o,s=o;return D.stderr==null&&(D.stderr=o),g(A(r.$class(),"Racc_debug_parser"))||(r.yydebug=!1),g((t=r.yydebug,t!=null&&t!==o?"instance-variable":o))||(r.yydebug=!1),g(r.yydebug)&&(g(($=r.racc_debug_out,$!=null&&$!==o?"instance-variable":o))||(r.racc_debug_out=D.stderr),r.racc_debug_out=g(a=r.racc_debug_out)?a:D.stderr),s=A(r.$class(),"Racc_arg"),g(X(s.$size(),14))&&s["$[]="](13,!0),s}),j(d,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=o,t.racc_val=o,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),j(d,"$do_parse",function(){var t=this;return t.$__send__(u("Racc_Main_Parsing_Routine"),t.$_racc_setup(),!1)}),j(d,"$next_token",function(){var t=this;return t.$raise(u("NotImplementedError"),""+t.$class()+"#next_token is not defined")}),j(d,"$_racc_do_parse_rb",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o;return a=t,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],ne=r[4]==null?o:r[4],ne=r[5]==null?o:r[5],ne=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],ne=r[8]==null?o:r[8],ne=r[9]==null?o:r[9],se=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],ne=r[12]==null?o:r[12],ne=r[13]==null?o:r[13],s.$_racc_init_sysvars(),O=oe=ue=o,U(s,"catch",["racc_end_parse"],function te(){var $e,re,P=te.$$s==null?this:te.$$s,W=o;for(P.racc_state==null&&(P.racc_state=o),P.racc_read_next==null&&(P.racc_read_next=o),P.racc_t==null&&(P.racc_t=o),P.yydebug==null&&(P.yydebug=o),P.racc_val==null&&(P.racc_val=o);g(!0);)for(g(ue=ie["$[]"](P.racc_state["$[]"](-1)))?(g(P.racc_read_next)&&F(P.racc_t,0)&&(re=P.$next_token(),$e=b(re),O=$e[0]==null?o:$e[0],P.racc_val=$e[1]==null?o:$e[1],g(O)?P.racc_t=g(W=se["$[]"](O))?W:1:P.racc_t=0,g(P.yydebug)&&P.$racc_read_token(P.racc_t,O,P.racc_val),P.racc_read_next=!1),ue=J(ue,P.racc_t),g(B(ue,0))&&g(oe=p["$[]"](ue))&&H(G["$[]"](ue),P.racc_state["$[]"](-1))||(oe=Z["$[]"](P.racc_state["$[]"](-1)))):oe=Z["$[]"](P.racc_state["$[]"](-1));g(oe=P.$_racc_evalact(oe,t)););},{$$s:s})}),j(d,"$yyparse",function(t,$){var r=this;return r.$__send__(u("Racc_YY_Parse_Method"),t,$,r.$_racc_setup(),!0)}),j(d,"$_racc_yyparse_rb",function(t,$,r,a){var s,p,G=this,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o;return p=r,s=b(p),Z=s[0]==null?o:s[0],ie=s[1]==null?o:s[1],ne=s[2]==null?o:s[2],se=s[3]==null?o:s[3],O=s[4]==null?o:s[4],O=s[5]==null?o:s[5],O=s[6]==null?o:s[6],O=s[7]==null?o:s[7],O=s[8]==null?o:s[8],O=s[9]==null?o:s[9],oe=s[10]==null?o:s[10],O=s[11]==null?o:s[11],O=s[12]==null?o:s[12],O=s[13]==null?o:s[13],G.$_racc_init_sysvars(),ue=o,te=o,U(G,"catch",["racc_end_parse"],function $e(){var re=$e.$$s==null?this:$e.$$s;for(re.racc_state==null&&(re.racc_state=o);!g(te=se["$[]"](re.racc_state["$[]"](-1)));)for(;g(ue=re.$_racc_evalact(ne["$[]"](re.racc_state["$[]"](-1)),r)););return U(t,"__send__",[$],function P(W,ee){var _=P.$$s==null?this:P.$$s,q=o,Y=o;for(_.racc_t==null&&(_.racc_t=o),_.racc_state==null&&(_.racc_state=o),_.racc_read_next==null&&(_.racc_read_next=o),W==null&&(W=o),ee==null&&(ee=o),g(W)?_.racc_t=g(q=oe["$[]"](W))?q:1:_.racc_t=0,_.racc_val=ee,_.racc_read_next=!1,te=J(te,_.racc_t),g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););for(;g(g(q=g(Y=(te=se["$[]"](_.racc_state["$[]"](-1)))["$!"]())?Y:_.racc_read_next["$!"]())?q:_.racc_t["$=="](0));)for(g(te)&&g(te=J(te,_.racc_t))&&g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););},{$$s:re})},{$$s:G})}),j(d,"$_racc_evalact",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o;if(a=$,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],Z=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],Z=r[6]==null?o:r[6],Z=r[7]==null?o:r[7],Z=r[8]==null?o:r[8],Z=r[9]==null?o:r[9],Z=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],se=r[12]==null?o:r[12],Z=r[13]==null?o:r[13],Z=r[14]==null?o:r[14],g(K(t,0))&&g(X(t,ne)))g(K(s.racc_error_status,0))&&(H(s.racc_t,1)||(s.racc_error_status=k(s.racc_error_status,1))),s.racc_vstack.$push(s.racc_val),s.racc_state.$push(t),s.racc_read_next=!0,g(s.yydebug)&&(s.racc_tstack.$push(s.racc_t),s.$racc_shift(s.racc_t,s.racc_tstack,s.racc_vstack));else if(g(X(t,0))&&g(K(t,se["$-@"]()))){if(O=U(s,"catch",["racc_jump"],function ue(){var te=ue.$$s==null?this:ue.$$s;return te.racc_state==null&&(te.racc_state=o),te.racc_state.$push(te.$_racc_do_reduce($,t)),!1},{$$s:s}),g(O))switch(O){case 1:return s.racc_user_yyerror=!0,se["$-@"]();case 2:return ne;default:s.$raise("[Racc Bug] unknown jump code")}}else if(H(t,ne))g(s.yydebug)&&s.$racc_accept(),s.$throw("racc_end_parse",s.racc_vstack["$[]"](0));else if(H(t,se["$-@"]())){switch(s.racc_error_status){case 0:g($["$[]"](21))||s.$on_error(s.racc_t,s.racc_val,s.racc_vstack);break;case 3:H(s.racc_t,0)&&s.$throw("racc_end_parse",o),s.racc_read_next=!0;break;default:}for(s.racc_user_yyerror=!1,s.racc_error_status=3;g(!0)&&!(g(oe=ie["$[]"](s.racc_state["$[]"](-1)))&&(oe=J(oe,1),g(B(oe,0))&&g(t=p["$[]"](oe))&&H(G["$[]"](oe),s.racc_state["$[]"](-1))));)g(I(s.racc_state.$size(),1))&&s.$throw("racc_end_parse",o),s.racc_state.$pop(),s.racc_vstack.$pop(),g(s.yydebug)&&(s.racc_tstack.$pop(),s.$racc_e_pop(s.racc_state,s.racc_tstack,s.racc_vstack));return t}else s.$raise("[Racc Bug] unknown action "+t.$inspect());return g(s.yydebug)&&s.$racc_next_state(s.racc_state["$[]"](-1),s.racc_state),o}),j(d,"$_racc_do_reduce",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o,$e=o,re=o,P=o,W=o,ee=o,_=o,q=o,Y=o,Q=o,ae=o;return a=t,r=b(a),p=r[0]==null?o:r[0],p=r[1]==null?o:r[1],p=r[2]==null?o:r[2],p=r[3]==null?o:r[3],G=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],ie=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],se=r[8]==null?o:r[8],O=r[9]==null?o:r[9],p=r[10]==null?o:r[10],p=r[11]==null?o:r[11],p=r[12]==null?o:r[12],oe=r[13]==null?o:r[13],ue=s.racc_state,te=s.racc_vstack,$e=s.racc_tstack,re=V($,-3),P=O["$[]"](re),W=O["$[]"](J(re,1)),ee=O["$[]"](J(re,2)),_=[],g(s.yydebug)&&(q=$e["$[]"](P["$-@"](),P)),Y=te["$[]"](P["$-@"](),P),g(s.yydebug)&&$e["$[]="](P["$-@"](),P,_),te["$[]="](P["$-@"](),P,_),ue["$[]="](P["$-@"](),P,_),g(oe)?te.$push(s.$__send__(ee,Y,te,Y["$[]"](0))):te.$push(s.$__send__(ee,Y,te)),$e.$push(W),g(s.yydebug)&&s.$racc_reduce(q,W,$e,te),Q=k(W,se),g(re=ne["$[]"](Q))&&(re=J(re,ue["$[]"](-1)),g(B(re,0))&&g(ae=G["$[]"](re))&&H(Z["$[]"](re),Q))?ae:ie["$[]"](Q)}),j(d,"$on_error",function(t,$,r){var a=this,s=o;return a.$raise(u("ParseError"),a.$sprintf(`
parse error on value %s (%s)`,$.$inspect(),g(s=a.$token_to_str(t))?s:"?"))}),j(d,"$yyerror",function(){var t=this;return t.$throw("racc_jump",1)}),j(d,"$yyaccept",function(){var t=this;return t.$throw("racc_jump",2)}),j(d,"$yyerrok",v("racc_error_status",0)),j(d,"$racc_read_token",function(t,$,r){var a=this;return a.racc_debug_out.$print("read    "),a.racc_debug_out.$print($.$inspect(),"(",a.$racc_token2str(t),") "),a.racc_debug_out.$puts(r.$inspect()),a.racc_debug_out.$puts()}),j(d,"$racc_shift",function(t,$,r){var a=this;return a.racc_debug_out.$puts("shift   "+a.$racc_token2str(t)),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_reduce",function(t,$,r,a){var s=this,p=o;return p=s.racc_debug_out,p.$print("reduce "),g(t["$empty?"]())?p.$print(" <none>"):U(t,"each",[],function G(Z){var ie=G.$$s==null?this:G.$$s;return Z==null&&(Z=o),p.$print(" ",ie.$racc_token2str(Z))},{$$s:s}),p.$puts(" --> "+s.$racc_token2str($)),s.$racc_print_stacks(r,a),s.racc_debug_out.$puts()}),j(d,"$racc_accept",function(){var t=this;return t.racc_debug_out.$puts("accept"),t.racc_debug_out.$puts()}),j(d,"$racc_e_pop",function(t,$,r){var a=this;return a.racc_debug_out.$puts("error recovering mode: pop token"),a.$racc_print_states(t),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_next_state",function(t,$){var r=this;return r.racc_debug_out.$puts("goto    "+t),r.$racc_print_states($),r.racc_debug_out.$puts()}),j(d,"$racc_print_stacks",function(t,$){var r=this,a=o;return a=r.racc_debug_out,a.$print("        ["),U(t,"each_index",[],function s(p){var G=s.$$s==null?this:s.$$s;return p==null&&(p=o),a.$print(" (",G.$racc_token2str(t["$[]"](p))," ",$["$[]"](p).$inspect(),")")},{$$s:r}),a.$puts(" ]")}),j(d,"$racc_print_states",function(t){var $=this,r=o;return r=$.racc_debug_out,r.$print("        ["),U(t,"each",[],function(s){return s==null&&(s=o),r.$print(" ",s)}),r.$puts(" ]")}),j(d,"$racc_token2str",function(t){var $=this,r=o;return g(r=A($.$class(),"Racc_token_to_s_table")["$[]"](t))?r:$.$raise("[Racc Bug] can't convert token "+t+" to string")}),j(d,"$token_to_str",function(t){var $=this;return A($.$class(),"Racc_token_to_s_table")["$[]"](t)})}(E[0],null,E)}(w[0],w)};Opal.modules["bcdice/arithmetic/node"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.thrower,M=e.return_ivar,D=e.send2,X=e.find_super,j=e.eqeq,b=e.const_set,U=e.eqeqeq,F=e.rb_divide,J=e.truthy,H=e.assign_ivar,B=e.alias,K=[],k=e.nil,I=e.$$$;return function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"Arithmetic"),N=[A].concat(o);return function(L,S){var c=C(L,"Node"),E=[c].concat(S),m=e.$r(E);return function(f,h){var R=z(f,h,"BinaryOp"),d=R.$$prototype;return d.lhs=d.rhs=d.op=k,g(R,"$initialize",function(u,i,n){var t=this;return t.lhs=u,t.op=i,t.rhs=n}),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this,t=k,$=k;return t=n.lhs.$eval(u),$=n.rhs.$eval(u),t.$send(n.op,$)}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),g(R,"$output",function(){var u=this;return""+u.lhs.$output()+u.op+u.rhs.$output()}),g(R,"$s_exp",function(){var u=this;return"("+u.$op_for_s_exp()+" "+u.lhs.$s_exp()+" "+u.rhs.$s_exp()+")"}),g(R,"$op_for_s_exp",M("op"))}(E[0],null),function(f,h,R){var d=z(f,h,"DivideBase"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.lhs=i.rhs=i.op=k,g(d,"$initialize",function n(t,$){var r=n.$$p||k,a=this;return n.$$p=null,D(a,X(a,"initialize",n,!1,!0),"initialize",[t,"/",$],null)}),g(d,"$eval",function(t){try{var $=y("eval_return"),r=this,a=k,s=k;return a=r.lhs.$eval(t),s=r.rhs.$eval(t),j(s,0)&&r.$raise(u("ZeroDivisionError")),r.$divide_and_round(a,s,t)}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),g(d,"$output",function n(){var t=n.$$p||k,$=this;return n.$$p=null,""+D($,X($,"output",n,!1,!0),"output",[],t)+$.$rounding_method()}),d.$private(),g(d,"$rounding_method",function(){var t=this;return I(t.$class(),"ROUNDING_METHOD")}),g(d,"$op_for_s_exp",function(){var t=this;return""+t.op+t.$rounding_method()}),g(d,"$divide_and_round",function(t,$,r){var a=this;return a.$raise(u("NotImplementedError"))})}(E[0],m("BinaryOp"),E),function(f,h,R){var d=z(f,h,"DivideWithGameSystemDefault"),l=[d].concat(R),u=e.$r(l);return b(l[0],"ROUNDING_METHOD",""),d.$private(),g(d,"$divide_and_round",function(n,t,$){var r=k,a=k;return U(I(u("RoundType"),"CEIL"),r=$)?F(n.$to_f(),t).$ceil():U(I(u("RoundType"),"ROUND"),r)?(a=F(n.$to_f(),t),J(a["$negative?"]())?a.$abs().$round()["$-@"]():a.$round()):F(n,t).$floor()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithCeil"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","C"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i.$to_f(),n).$ceil()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithRound"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","R"),d.$private(),g(d,"$divide_and_round",function(i,n,t){var $=k;return $=F(i.$to_f(),n),J($["$negative?"]())?$.$abs().$round()["$-@"]():$.$round()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithFloor"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","F"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i,n).$floor()})}(E[0],m("DivideBase"),E),function(f,h){var R=z(f,h,"Negative"),d=R.$$prototype;return d.body=k,g(R,"$initialize",H("body")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.body.$eval(u)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"-"+u.body.$output()}),g(R,"$s_exp",function(){var u=this;return"(- "+u.body.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Parenthesis"),d=R.$$prototype;return d.expr=k,g(R,"$initialize",H("expr")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.expr.$eval(u)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"("+u.expr.$output()+")"}),g(R,"$s_exp",function(){var u=this;return"(Parenthesis "+u.expr.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Number"),d=R.$$prototype;return d.value=k,g(R,"$initialize",H("value")),g(R,"$eval",M("value")),g(R,"$output",function(){var u=this;return u.value.$to_s()}),B(R,"s_exp","output")}(E[0],null)}(N[0],N)}(w[0],w)}(K[0],K)};Opal.modules.strscan=function(e){var C=e.klass,z=e.def,g=e.truthy,y=e.eqeqeq,M=e.Opal,D=e.return_ivar,X=e.send,j=e.alias,b=[],U=e.nil;return function(F,J,H){var B=C(F,J,"StringScanner"),K=[B].concat(H),k=e.$r(K),I=B.$$prototype;return I.pos=I.string=I.working=I.matched=I.prev_pos=I.match=U,B.$attr_reader("pos","matched"),z(B,"$initialize",function(v){var x=this;return x.string=v,x.pos=0,x.matched=U,x.working=v,x.match=[]}),B.$attr_reader("string"),z(B,"$beginning_of_line?",function(){var v=this;return v.pos===0||v.string.charAt(v.pos-1)===`
`}),z(B,"$scan",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:(x.prev_pos=x.pos,x.pos+=w[0].length,x.working=x.working.substring(w[0].length),x.matched=w[0],x.match=w,w[0])}),z(B,"$scan_until",function(v){var x=this;v=x.$anchor(v);for(var w=x.working,T=0;w.length!=T;++T){var o=v.exec(w.substr(T));if(o!==null){var A=T+o[0].length,N=w.substr(0,A);return x.matched=o[0],x.match=o,x.prev_pos=x.pos+T,x.pos+=A,x.working=w.substr(A),N}}return x.matched=U}),z(B,"$[]",function(v){var x=this,w=U;if(g(x.match["$empty?"]()))return U;y(k("Symbol"),w=v)?v=v.$to_s():y(k("String"),w)||(v=M["$coerce_to!"](v,k("Integer"),"to_int"));var T=x.match;return v<0&&(v+=T.length),v<0||v>=T.length||T[v]==null?U:T[v]}),z(B,"$check",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:x.matched=w[0]}),z(B,"$check_until",function(v){var x=this,w=x.prev_pos,T=x.pos,o=x.working,A=x.$scan_until(v);return x.prev_pos=w,x.pos=T,x.working=o,A}),z(B,"$peek",function(v){var x=this;return x.working.substring(0,v)}),z(B,"$eos?",function(){var v=this;return v.working.length===0}),z(B,"$exist?",function(v){var x=this,w=v.exec(x.working);return w==null?U:w.index==0?0:w.index+1}),z(B,"$skip",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);if(w==null)return x.match=[],x.matched=U;var T=w[0],o=T.length;return x.matched=T,x.match=w,x.prev_pos=x.pos,x.pos+=o,x.working=x.working.substring(o),o}),z(B,"$skip_until",function(v){var x=this,w=x.$scan_until(v);return w===U?U:(x.matched=w.substr(-1),w.length)}),z(B,"$get_byte",function(){var v=this,x=U;return v.pos<v.string.length?(v.prev_pos=v.pos,v.pos+=1,x=v.matched=v.working.substring(0,1),v.working=v.working.substring(1)):v.matched=U,x}),z(B,"$match?",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?U:(x.prev_pos=x.pos,w[0].length)}),z(B,"$pos=",function(v){var x=this;return v<0&&(v+=x.string.$length()),x.pos=v,x.working=x.string.slice(v)}),z(B,"$matched_size",function(){var v=this;return v.matched===U?U:v.matched.length}),z(B,"$post_match",function(){var v=this;return v.matched===U?U:v.string.substr(v.pos)}),z(B,"$pre_match",function(){var v=this;return v.matched===U?U:v.string.substr(0,v.prev_pos)}),z(B,"$reset",function(){var v=this;return v.working=v.string,v.matched=U,v.pos=0}),z(B,"$rest",D("working")),z(B,"$rest?",function(){var v=this;return v.working.length!==0}),z(B,"$rest_size",function(){var v=this;return v.$rest().$size()}),z(B,"$terminate",function(){var v,x=this;return x.match=U,v=[x.string.$length()],X(x,"pos=",v),v[v.length-1]}),z(B,"$unscan",function(){var v=this;return v.pos=v.prev_pos,v.prev_pos=U,v.match=U,v}),j(B,"bol?","beginning_of_line?"),j(B,"getch","get_byte"),B.$private(),z(B,"$anchor",function(v){var x=v.toString().match(/\/([^\/]+)$/);return x=x?x[1]:void 0,new RegExp("^(?:"+v.source+")",x)})}(b[0],null,b)};Opal.modules["bcdice/normalize"]=function(e){var C=e.module,z=e.eqeqeq,g=e.def,y=e.eqeq,M=[],D=e.nil;return function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F){var J=C(F,"Normalize");return J.$module_function(),g(J,"$comparison_operator",function(B){var K=D;return z(/<=|=</,K=B)?"<=":z(/>=|=>/,K)?">=":z(/<>|!=|=!/,K)?"!=":z(/</,K)?"<":z(/>/,K)?">":z(/=/,K)?"==":D}),g(J,"$target_number",function(B){return y(B,"?")?B:B.$to_i()})}(U[0])}(M[0],M)};Opal.modules["bcdice/command/lexer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.hash2,M=e.truthy,D=e.send,X=e.def,j=e.thrower,b=e.top,U=[],F=e.nil;return b.$require("strscan"),b.$require("bcdice/normalize"),function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I){var V=C(k,"Command"),v=[V].concat(I);return function(x,w,T){var o=z(x,w,"Lexer"),A=[o].concat(T),N=e.$r(A),L=o.$$prototype;return L.scanner=L.notations=F,g(A[0],"SYMBOLS",y(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),X(o,"$initialize",function(c,E){var m,f,h=this,R=F;return c=M(R=(m=(f=c,f===F||f==null?F:f.$split(" ",2)),m===F||m==null?F:m.$first()))?R:"",h.scanner=N("StringScanner").$new(c),h.notations=D(E,"map",[],function(l){return l==null&&(l=F),M(l["$is_a?"](N("String")))?N("Regexp").$new(l):l})}),X(o,"$next_token",function(){try{var c=j("return"),E=this,m=F,f=F,h=F,R=F,d=F;return M(E.scanner["$eos?"]())?[!1,"$"]:(D(E.notations,"each",[],function l(u){var i=l.$$s==null?this:l.$$s,n=F;if(i.scanner==null&&(i.scanner=F),u==null&&(u=F),n=i.scanner.$scan(u),M(n))c.$throw(["NOTATION",n]);else return F},{$$s:E,$$ret:c}),M(m=E.scanner.$scan(/\d+/))?["NUMBER",m.$to_i()]:M(f=E.scanner.$scan(/[<>!=]+/))?(f=N("Normalize").$comparison_operator(f),h=M(f)?"CMP_OP":"ILLEGAL",[h,f]):(R=E.scanner.$getch().$upcase(),h=M(d=N("SYMBOLS")["$[]"](R))?d:R.$to_sym(),[h,R]))}catch(l){if(l===c)return l.$v;throw l}}),X(o,"$source",function(){var c=this;return c.scanner.$string()})}(v[0],null,v)}(K[0],K)}(U[0],U)};Opal.modules["bcdice/command/parsed"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.return_ivar,M=e.truthy,D=[],X=e.nil;return function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"Command"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"Parsed"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.critical=T.fumble=T.dollar=T.modify_number=T.question_target=T.target_number=T.prefix_number=T.command=T.suffix_number=T.cmp_op=X,v.$attr_accessor("command"),v.$attr_accessor("prefix_number"),v.$attr_accessor("suffix_number"),v.$attr_accessor("critical"),v.$attr_accessor("fumble"),v.$attr_accessor("dollar"),v.$attr_accessor("modify_number"),v.$attr_accessor("cmp_op"),v.$attr_accessor("target_number"),v.$attr_writer("question_target"),g(v,"$initialize",function(){var A=this;return A.prefix_number=X,A.suffix_number=X,A.critical=X,A.fumble=X,A.dollar=X,A.cmp_op=X,A.target_number=X,A.question_target=!1}),g(v,"$question_target?",y("question_target")),g(v,"$to_s",function(A){var N=this,L=X,S=X,c=X,E=X,m=X;switch(A==null&&(A="after_command"),L=M(N.critical)?"@"+N.critical:X,S=M(N.fumble)?"#"+N.fumble:X,c=M(N.dollar)?"$"+N.dollar:X,E=w("Format").$modifier(N.modify_number),m=M(N.question_target)?"?":N.target_number,A){case"after_command":return[N.prefix_number,N.command,N.suffix_number,L,S,c,E,N.cmp_op,m].$join();case"after_modify_number":return[N.prefix_number,N.command,N.suffix_number,E,L,S,c,N.cmp_op,m].$join();case"after_target_number":return[N.prefix_number,N.command,N.suffix_number,E,N.cmp_op,m,L,S,c].$join();default:return X}},-1)}(K[0],null,K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/command/parser"]=function(e){var C=e.klass,z=e.module,g=e.slice,y=e.extract_kwargs,M=e.ensure_kwargs,D=e.get_kwarg,X=e.send2,j=e.find_super,b=e.def,U=e.send,F=e.eqeq,J=e.thrower,H=e.hash,B=e.const_set,K=e.truthy,k=e.to_ary,I=e.hash2,V=e.top,v=[],x=e.$r(v),w=e.nil,T=e.$$$;return V.$require("racc/parser.rb"),V.$require("bcdice/arithmetic/node"),V.$require("bcdice/command/lexer"),V.$require("bcdice/command/parsed"),C(T(x("BCDice"),"Command"),T(x("Racc"),"Parser"),"Parser"),function(o,A){var N=z(o,"BCDice"),L=[N].concat(A);return function(S,c){var E=z(S,"Command"),m=[E].concat(c),f=e.$r(m);return function(h,R,d){var l=C(h,R,"Parser"),u=[l].concat(d),i=e.$r(u),n=w,t=w,$=w,r=w,a=w,s=w,p=w,G=w,Z=w,ie=w,ne=w,se=w,O=w,oe=w,ue=l.$$prototype;return ue.notations=ue.lexer=ue.modifier=ue.suffix_number=ue.prefix_number=ue.need_suffix_number=ue.need_prefix_number=ue.critical=ue.fumble=ue.dollar=ue.allowed_cmp_op=ue.question_target=w,b(l,"$initialize",function te($e,re){var P,W,ee,_,q=te.$$p||w,Y=this;return te.$$p=null,P=g(arguments),W=y(P),W=M(W),ee=P,_=D(W,"round_type"),X(Y,j(Y,"initialize",te,!1,!0),"initialize",[],null),Y.notations=ee,Y.round_type=_,Y.prefix_number=!1,Y.suffix_number=!1,Y.need_prefix_number=!1,Y.need_suffix_number=!1,Y.modifier=!0,Y.critical=!1,Y.fumble=!1,Y.dollar=!1,Y.allowed_cmp_op=[w,">=",">","<=","<","==","!="],Y.question_target=!1},-2),b(l,"$disable_modifier",function(){var $e=this;return $e.modifier=!1,$e}),b(l,"$enable_prefix_number",function(){var $e=this;return $e.prefix_number=!0,$e}),b(l,"$enable_suffix_number",function(){var $e=this;return $e.suffix_number=!0,$e}),b(l,"$has_prefix_number",function(){var $e=this;return $e.prefix_number=!0,$e.need_prefix_number=!0,$e}),b(l,"$has_suffix_number",function(){var $e=this;return $e.suffix_number=!0,$e.need_suffix_number=!0,$e}),b(l,"$enable_critical",function(){var $e=this;return $e.critical=!0,$e}),b(l,"$enable_fumble",function(){var $e=this;return $e.fumble=!0,$e}),b(l,"$enable_dollar",function(){var $e=this;return $e.dollar=!0,$e}),b(l,"$restrict_cmp_op_to",function($e){var re,P,W=this;return re=g(arguments),P=re,W.allowed_cmp_op=P,W},-1),b(l,"$enable_question_target",function(){var $e=this;return $e.question_target=!0,$e}),b(l,"$parse",function($e){var re=this;try{return re.lexer=i("Lexer").$new($e,re.notations),re.$do_parse()}catch(P){if(e.rescue(P,[i("ParseError"),i("ZeroDivisionError")]))try{return w}finally{e.pop_exception()}else throw P}}),l.$private(),b(l,"$parsed",function($e,re,P,W){try{var ee=J("eval_return"),_=this;return U(i("Parsed").$new(),"tap",[],function q(Y){var Q,ae,le,ce,_e,fe,de,he=q.$$s==null?this:q.$$s;return he.round_type==null&&(he.round_type=w),Y==null&&(Y=w),Y["$command="]($e["$[]"]("command")),Y["$prefix_number="]((Q=$e["$[]"]("prefix"),Q===w||Q==null?w:Q.$eval(he.round_type))),Y["$suffix_number="]((ae=$e["$[]"]("suffix"),ae===w||ae==null?w:ae.$eval(he.round_type))),Y["$critical="]((le=re["$[]"]("critical"),le===w||le==null?w:le.$eval(he.round_type))),Y["$fumble="]((ce=re["$[]"]("fumble"),ce===w||ce==null?w:ce.$eval(he.round_type))),Y["$dollar="]((_e=re["$[]"]("dollar"),_e===w||_e==null?w:_e.$eval(he.round_type))),Y["$modify_number="](P.$eval(he.round_type)),Y["$cmp_op="](W["$[]"]("cmp_op")),F(W["$[]"]("target"),"?")?(Y["$question_target="](!0),fe=[0],U(Y,"target_number=",fe),fe[fe.length-1]):(Y["$question_target="](!1),fe=[(de=W["$[]"]("target"),de===w||de==null?w:de.$eval(he.round_type))],U(Y,"target_number=",fe),fe[fe.length-1])},{$$s:_})}catch(q){if(q===e.t_eval_return)return q.$v;throw q}}),b(l,"$next_token",function(){var $e=this;return $e.lexer.$next_token()}),n=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),t=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),$=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),r=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),a=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),s=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),p=[w,6,13,3,9,-1,27,-15,-10,-1,-38],G=[w,w,w,w,w,w,19,16,15,w,w],Z=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ie=35,ne=58,se=H(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),O=19,oe=!0,B(u[0],"Racc_arg",[n,t,r,$,a,s,G,p,O,Z,se,ne,ie,oe]),B(u[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),B(u[0],"Racc_debug_parser",!1),b(l,"$_reduce_1",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w,ae=w;return K(_.modifier)||_.$raise(i("ParseError")),ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],ae=W[3]==null?w:W[3],_.$parsed(q,Y,Q,ae)}),b(l,"$_reduce_2",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w,ae=w;return K(_.modifier)||_.$raise(i("ParseError")),ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],ae=W[3]==null?w:W[3],_.$parsed(q,Q,Y,ae)}),b(l,"$_reduce_3",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],_.$parsed(q,Y,T(T(i("Arithmetic"),"Node"),"Number").$new(0),Q)}),b(l,"$_reduce_4",function($e,re,P){var W=this;return K(W.prefix_number)&&K(W.suffix_number)||W.$raise(i("ParseError")),I(["command","prefix","suffix"],{command:$e["$[]"](1),prefix:$e["$[]"](0),suffix:$e["$[]"](2)})}),b(l,"$_reduce_5",function($e,re,P){var W=this;return K(W.prefix_number)||W.$raise(i("ParseError")),K(W.need_suffix_number)&&W.$raise(i("ParseError")),I(["command","prefix"],{command:$e["$[]"](1),prefix:$e["$[]"](0)})}),b(l,"$_reduce_6",function($e,re,P){var W=this;return K(W.suffix_number)||W.$raise(i("ParseError")),K(W.need_prefix_number)&&W.$raise(i("ParseError")),I(["command","suffix"],{command:$e["$[]"](0),suffix:$e["$[]"](1)})}),b(l,"$_reduce_7",function($e,re,P){var W=this;return(K(W.need_prefix_number)||K(W.need_suffix_number))&&W.$raise(i("ParseError")),I(["command"],{command:$e["$[]"](0)})}),b(l,"$_reduce_8",function($e,re,P){return I([],{})}),b(l,"$_reduce_9",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],K(_.critical)&&K(q["$[]"]("critical")["$nil?"]())||_.$raise(i("ParseError")),q["$[]="]("critical",Q),q}),b(l,"$_reduce_10",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],K(_.fumble)&&K(q["$[]"]("fumble")["$nil?"]())||_.$raise(i("ParseError")),q["$[]="]("fumble",Q),q}),b(l,"$_reduce_11",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],K(_.dollar)&&K(q["$[]"]("dollar")["$nil?"]())||_.$raise(i("ParseError")),q["$[]="]("dollar",Q),q}),b(l,"$_reduce_12",function($e,re,P){return $e["$[]"](1)}),b(l,"$_reduce_13",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"Negative").$new($e["$[]"](1))}),b(l,"$_reduce_14",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"+",$e["$[]"](2))}),b(l,"$_reduce_15",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"-",$e["$[]"](2))}),b(l,"$_reduce_16",function($e,re,P){var W=this;return K(W.allowed_cmp_op["$include?"](w))||W.$raise(i("ParseError")),I([],{})}),b(l,"$_reduce_17",function($e,re,P){var W,ee,_=this,q=w,Y=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],K(_.allowed_cmp_op["$include?"](q))||_.$raise(i("ParseError")),I(["cmp_op","target"],{cmp_op:q,target:Y})}),b(l,"$_reduce_18",function($e,re,P){var W=this,ee=w;return ee=$e["$[]"](0),K(W.question_target)||W.$raise(i("ParseError")),K(W.allowed_cmp_op["$include?"](ee))||W.$raise(i("ParseError")),I(["cmp_op","target"],{cmp_op:ee,target:"?"})}),b(l,"$_reduce_19",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"+",$e["$[]"](2))}),b(l,"$_reduce_20",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"-",$e["$[]"](2))}),b(l,"$_reduce_22",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"*",$e["$[]"](2))}),b(l,"$_reduce_23",function($e,re,P){var W=w;return W=$e["$[]"](3),W.$new($e["$[]"](0),$e["$[]"](2))}),b(l,"$_reduce_25",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),b(l,"$_reduce_26",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithCeil")}),b(l,"$_reduce_27",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithCeil")}),b(l,"$_reduce_28",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithRound")}),b(l,"$_reduce_29",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithFloor")}),b(l,"$_reduce_30",function($e,re,P){return $e["$[]"](1)}),b(l,"$_reduce_31",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"Negative").$new($e["$[]"](1))}),b(l,"$_reduce_33",function($e,re,P){return $e["$[]"](1)}),b(l,"$_reduce_34",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"Number").$new($e["$[]"](0))}),b(l,"$_reduce_none",function($e,re,P){return $e["$[]"](0)})}(m[0],T(f("Racc"),"Parser"),m)}(L[0],L)}(v[0],v)};Opal.modules["bcdice/deprecated/checker"]=function(e){var C=e.module,z=e.send,g=e.eqeqeq,y=e.truthy,M=e.def,D=e.return_val,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"Deprecated"),k=[K].concat(B);return function(I,V){var v=C(I,"Checker"),x=[v].concat(V),w=e.$r(x);return v.$private(),M(v,"$check_result_legacy",function(o,A,N,L){var S=this,c=j,E=j,m=j,f=j,h=j;return c=z(A,"map",[],"sides".$to_proc()),E=z(A,"map",[],"value".$to_proc()),m=E.$sum(),f=g([100],h=c)?S.$check_1D100(o,m,N,L):g([20],h)?S.$check_1D20(o,m,N,L):g([6,6],h)?S.$check_2D6(o,m,E,N,L):j,!(y(f["$nil?"]())||y(f["$empty?"]()))||(f=g([10],h=c.$uniq())?S.$check_nD10(o,m,E,N,L):g([6],h)?S.$check_nD6(o,m,E,N,L):j,!(y(f["$nil?"]())||y(f["$empty?"]())))?w("Result").$new(f.$delete_prefix(" \uFF1E ")):j}),M(v,"$check_1D100",D(j)),M(v,"$check_1D20",D(j)),M(v,"$check_nD10",D(j)),M(v,"$check_2D6",D(j)),M(v,"$check_nD6",D(j))}(k[0],k)}(J[0],J)}(X[0],X)};Opal.queue(function(e){var C=e.module,z=e.klass,g=e.slice,y=e.rb_plus,M=e.truthy,D=e.def,X=e.regexp,j=e.send,b=e.thrower,U=e.return_ivar,F=e.assign_ivar_val,J=e.eqeqeq,H=e.eqeq,B=e.return_val,K=e.range,k=e.rb_minus,I=e.rb_divide,V=e.rb_times,v=e.rb_ge,x,w=e.top,T=[],o=e.$r(T),A=e.nil,N=e.$$$;return w.$require("i18n"),w.$require("i18n/backend/fallbacks"),w.$require("bcdice/randomizer"),w.$require("bcdice/dice_table"),w.$require("bcdice/enum"),w.$require("bcdice/translate"),w.$require("bcdice/result"),w.$require("bcdice/command/parser"),w.$require("bcdice/deprecated/checker"),function(L,S){var c=C(L,"BCDice"),E=[c].concat(S);return function(m,f,h){var R=z(m,f,"Base"),d=[R].concat(h),l=e.$r(d),u=R.$$prototype;return u.raw_input=u.randomizer=u.enabled_upcase_input=u.debug=A,function(i,n){var t=[i].concat(n),$=e.$r(t);return i.$attr_reader("prefixes"),D(i,"$register_prefix",function(a){var s,p,G=this,Z=A;return G.prefixes==null&&(G.prefixes=A),s=g(arguments),p=s,G.prefixes=y(M(Z=G.prefixes)?Z:[],p.$flatten())},-1),D(i,"$register_prefix_from_super_class",function(){var a=this;return a.$register_prefix(a.$superclass().$prefixes())}),D(i,"$prefixes_pattern",function(){var a=this,s=A;return a.prefixes_pattern==null&&(a.prefixes_pattern=A),a.prefixes==null&&(a.prefixes=A),a.prefixes_pattern=M(s=a.prefixes_pattern)?s:A,M(a.prefixes_pattern)?a.prefixes_pattern:(a.prefixes=M(s=a.prefixes)?s:[],a.prefixes.$freeze(),a.prefixes_pattern=(M(a.prefixes["$empty?"]())?/(?!)/:X(["^(S)?(",a.prefixes.$join("|"),")"],"i")).$freeze())}),D(i,"$command_pattern",function(){var a=this,s=A,p=A;return a.command_pattern==null&&(a.command_pattern=A),a.prefixes==null&&(a.prefixes=A),a.command_pattern=M(s=a.command_pattern)?s:A,M(a.command_pattern)?a.command_pattern:(a.prefixes=M(s=a.prefixes)?s:[],a.prefixes.$freeze(),p=y(j(N($("CommonCommand"),"COMMANDS"),"map",[],function(Z){return Z==null&&(Z=A),N(Z,"PREFIX_PATTERN").$source()}),a.prefixes),a.command_pattern=X(["^S?(",p.$join("|"),")"],"i").$freeze())}),D(i,"$eval",function(a){try{var s=b("eval_return"),p=this;return p.$new(a).$eval()}catch(G){if(G===e.t_eval_return)return G.$v;throw G}})}(e.get_singleton_class(R),d),R.$include(l("Translate")),R.$include(N(l("Deprecated"),"Checker")),D(R,"$initialize",function(n){var t=this;return t.raw_input=n,t.sort_add_dice=!1,t.sort_barabara_dice=!1,t.d66_sort_type=N(l("D66SortType"),"NO_SORT"),t.enabled_d9=!1,t.round_type=N(l("RoundType"),"FLOOR"),t.sides_implicit_d=6,t.upper_dice_reroll_threshold=A,t.reroll_dice_reroll_threshold=A,t.default_cmp_op=A,t.default_target_number=A,t.enabled_upcase_input=!0,t.locale="ja_jp",t.randomizer=N(l("BCDice"),"Randomizer").$new(),t.debug=!1}),R.$attr_accessor("randomizer"),R.$attr_reader("d66_sort_type"),R.$attr_reader("round_type"),R.$attr_reader("sides_implicit_d"),R.$attr_reader("upper_dice_reroll_threshold"),R.$attr_reader("reroll_dice_reroll_threshold"),R.$attr_reader("default_cmp_op"),R.$attr_reader("default_target_number"),D(R,"$sort_add_dice?",U("sort_add_dice")),D(R,"$sort_barabara_dice?",U("sort_barabara_dice")),D(R,"$enabled_d9?",U("enabled_d9")),D(R,"$enable_debug",F("debug",!0)),D(R,"$eval",function(){var n=this,t=A,$=A,r=A;return t=N(l("BCDice"),"Preprocessor").$process(n.raw_input,n),$=M(r=n.$dice_command(t))?r:n.$eval_common_command(n.raw_input),M($)?($["$rands="](n.randomizer.$rand_results()),$["$detailed_rands="](n.randomizer.$detailed_rand_results()),$):A}),D(R,"$change_text",function(n){return n}),D(R,"$check_result",function(n,t,$,r){var a=this,s=A,p=A,G=A,Z=A,ie=A;return s=a.$check_result_legacy(n,t,$,r),M(s)?s:(p=j(t,"map",[],"sides".$to_proc()),G=j(t,"map",[],"value".$to_proc()),Z=G.$sum(),s=J([100],ie=p)?a.$result_1d100(n,Z,$,r):J([20],ie)?a.$result_1d20(n,Z,$,r):J([6,6],ie)?a.$result_2d6(n,Z,G,$,r):A,H(s,l("Result").$nothing())?A:M(s)?s:(s=J([10],ie=p.$uniq())?a.$result_nd10(n,Z,G,$,r):J([6],ie)?a.$result_nd6(n,Z,G,$,r):A,H(s,l("Result").$nothing())?A:M(s)?s:a.$result_ndx(n,$,r)))}),D(R,"$grich_text",B(A)),R.$private(),D(R,"$eval_common_command",function(n){try{var t=b("eval_return"),$=b("return"),r=this;return n=r.$change_text(n),j(N(l("CommonCommand"),"COMMANDS"),"each",[],function a(s){var p=a.$$s==null?this:a.$$s,G=A;if(p.randomizer==null&&(p.randomizer=A),s==null&&(s=A),G=s.$eval(n,p,p.randomizer),M(G))$.$throw(G);else return A},{$$s:r,$$ret:$}),A}catch(a){if(a===e.t_eval_return||a===$)return a.$v;throw a}}),D(R,"$dice_command",function(n){var t=this,$=A,r=A,a=A,s=A;return M(t.enabled_upcase_input)&&(n=n.$upcase()),$=t.$class().$prefixes_pattern().$match(n),M($)?(r=$["$[]"](1)["$nil?"]()["$!"](),M(r)&&(n=n["$[]"](K(1,-1,!1))),a=t.$eval_game_system_specific_command(n),M(a["$is_a?"](l("Result")))?(a["$secret="](M(s=a["$secret?"]())?s:r),a):M(a["$nil?"]())||M(a["$empty?"]())||H(a,"1")?A:j(l("Result").$new(),"tap",[],function(G){var Z;return G==null&&(G=A),G["$text="](a.$to_s()),Z=[r],j(G,"secret=",Z),Z[Z.length-1]})):A}),D(R,"$eval_game_system_specific_command",B(A)),D(R,"$result_ndx",function(n,t,$){var r=this;return M($["$is_a?"](l("String")))?A:M(n.$send(t,$))?l("Result").$success(r.$translate("success")):l("Result").$failure(r.$translate("failure"))}),D(R,"$result_1d100",B(A)),D(R,"$result_1d20",B(A)),D(R,"$result_nd10",B(A)),D(R,"$result_2d6",B(A)),D(R,"$result_nd6",B(A)),D(R,"$get_table_by_2d6",function(n){var t=this;return t.$get_table_by_nD6(n,2)}),D(R,"$get_table_by_1d6",function(n){var t=this;return t.$get_table_by_nD6(n,1)}),D(R,"$get_table_by_nD6",function(n,t){var $=this;return $.$get_table_by_nDx(n,t,6)}),D(R,"$get_table_by_nDx",function(n,t,$){var r=this,a=A,s=A;return a=r.randomizer.$roll_sum(t,$),s=r.$get_table_value(n["$[]"](k(a,t))),M(s["$nil?"]())?["1",0]:[s,a]}),D(R,"$get_table_by_1d3",function(n){var t=this,$=A,r=A,a=A,s=A;return t.$debug("get_table_by_1d3"),$=1,r=t.randomizer.$roll_sum($,6),t.$debug("num",r),a=I(k(r,1),2).$to_i(),t.$debug("index",a),s=n["$[]"](a),M(s["$nil?"]())?["1",0]:[s,r]}),D(R,"$get_table_by_d66_swap",function(n){var t=this,$=A;return $=t.randomizer.$roll_d66(N(l("D66SortType"),"ASC")),[t.$get_table_by_number($,n),$]}),D(R,"$get_table_by_d66",function(n){var t=this,$=A,r=A,a=A,s=A,p=A;return $=t.randomizer.$roll_once(6),r=t.randomizer.$roll_once(6),a=y(V(k($,1),6),k(r,1)),s=n["$[]"](a),p=""+$+r,M(s["$nil?"]())?["1",p]:[s,p]}),D(R,"$get_table_by_number",function(n,t,$){try{var r=b("return"),a=this;return $==null&&($="1"),j(t,"each",[],function s(p){var G=s.$$s==null?this:s.$$s,Z=A;if(p==null&&(p=A),Z=p["$[]"](0),M(v(Z,n)))r.$throw(G.$get_table_value(p["$[]"](1)));else return A},{$$s:a,$$ret:r}),a.$get_table_value($)}catch(s){if(s===r)return s.$v;throw s}},-3),D(R,"$get_table_value",function(n){return M(n["$is_a?"](l("Proc")))?n.$call():n}),D(R,"$roll_tables",function(n,t){var $=this,r=A;return r=t["$[]"](n),M(r)?r.$roll($.randomizer).$to_s():A}),D(R,"$debug",function(n,t){var $,r,a=this,s=A,p=A;return $=g(arguments,1),r=$,M(a.debug)?(s=M(n["$is_a?"](l("String")))?n:n.$inspect(),M(r["$empty?"]())?a.$warn(s):(p=j(r,"map",[],function(Z){return Z==null&&(Z=A),M(Z["$is_a?"](l("String")))?'"'+Z+'"':Z.$inspect()}),a.$warn(""+s+": "+p.$join(", ")))):A},-2)}(E[0],null,E)}(T[0],T),N(N(o("I18n"),"Backend"),"Simple").$include(N(N(o("I18n"),"Backend"),"Fallbacks")),o("I18n").$load_path()["$<<"](o("Dir")["$[]"](o("File").$join("bcdice","../../i18n/**/*.yml"))),o("I18n")["$default_locale="]("ja_jp"),x=[["ja_jp"]],j(o("I18n").$fallbacks(),"defaults=",x),x[x.length-1]})});var Oe=pe(()=>{Ee();Opal.modules["bcdice/arithmetic/node"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.thrower,M=e.return_ivar,D=e.send2,X=e.find_super,j=e.eqeq,b=e.const_set,U=e.eqeqeq,F=e.rb_divide,J=e.truthy,H=e.assign_ivar,B=e.alias,K=[],k=e.nil,I=e.$$$;return function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"Arithmetic"),N=[A].concat(o);return function(L,S){var c=C(L,"Node"),E=[c].concat(S),m=e.$r(E);return function(f,h){var R=z(f,h,"BinaryOp"),d=R.$$prototype;return d.lhs=d.rhs=d.op=k,g(R,"$initialize",function(u,i,n){var t=this;return t.lhs=u,t.op=i,t.rhs=n}),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this,t=k,$=k;return t=n.lhs.$eval(u),$=n.rhs.$eval(u),t.$send(n.op,$)}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),g(R,"$output",function(){var u=this;return""+u.lhs.$output()+u.op+u.rhs.$output()}),g(R,"$s_exp",function(){var u=this;return"("+u.$op_for_s_exp()+" "+u.lhs.$s_exp()+" "+u.rhs.$s_exp()+")"}),g(R,"$op_for_s_exp",M("op"))}(E[0],null),function(f,h,R){var d=z(f,h,"DivideBase"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.lhs=i.rhs=i.op=k,g(d,"$initialize",function n(t,$){var r=n.$$p||k,a=this;return n.$$p=null,D(a,X(a,"initialize",n,!1,!0),"initialize",[t,"/",$],null)}),g(d,"$eval",function(t){try{var $=y("eval_return"),r=this,a=k,s=k;return a=r.lhs.$eval(t),s=r.rhs.$eval(t),j(s,0)&&r.$raise(u("ZeroDivisionError")),r.$divide_and_round(a,s,t)}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),g(d,"$output",function n(){var t=n.$$p||k,$=this;return n.$$p=null,""+D($,X($,"output",n,!1,!0),"output",[],t)+$.$rounding_method()}),d.$private(),g(d,"$rounding_method",function(){var t=this;return I(t.$class(),"ROUNDING_METHOD")}),g(d,"$op_for_s_exp",function(){var t=this;return""+t.op+t.$rounding_method()}),g(d,"$divide_and_round",function(t,$,r){var a=this;return a.$raise(u("NotImplementedError"))})}(E[0],m("BinaryOp"),E),function(f,h,R){var d=z(f,h,"DivideWithGameSystemDefault"),l=[d].concat(R),u=e.$r(l);return b(l[0],"ROUNDING_METHOD",""),d.$private(),g(d,"$divide_and_round",function(n,t,$){var r=k,a=k;return U(I(u("RoundType"),"CEIL"),r=$)?F(n.$to_f(),t).$ceil():U(I(u("RoundType"),"ROUND"),r)?(a=F(n.$to_f(),t),J(a["$negative?"]())?a.$abs().$round()["$-@"]():a.$round()):F(n,t).$floor()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithCeil"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","C"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i.$to_f(),n).$ceil()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithRound"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","R"),d.$private(),g(d,"$divide_and_round",function(i,n,t){var $=k;return $=F(i.$to_f(),n),J($["$negative?"]())?$.$abs().$round()["$-@"]():$.$round()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithFloor"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","F"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i,n).$floor()})}(E[0],m("DivideBase"),E),function(f,h){var R=z(f,h,"Negative"),d=R.$$prototype;return d.body=k,g(R,"$initialize",H("body")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.body.$eval(u)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"-"+u.body.$output()}),g(R,"$s_exp",function(){var u=this;return"(- "+u.body.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Parenthesis"),d=R.$$prototype;return d.expr=k,g(R,"$initialize",H("expr")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.expr.$eval(u)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"("+u.expr.$output()+")"}),g(R,"$s_exp",function(){var u=this;return"(Parenthesis "+u.expr.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Number"),d=R.$$prototype;return d.value=k,g(R,"$initialize",H("value")),g(R,"$eval",M("value")),g(R,"$output",function(){var u=this;return u.value.$to_s()}),B(R,"s_exp","output")}(E[0],null)}(N[0],N)}(w[0],w)}(K[0],K)};Opal.modules["racc/parser"]=function(e){var C=e.module,z=e.klass,g=e.truthy,y=e.const_set,M=e.defs,D=e.gvars,X=e.rb_lt,j=e.def,b=e.to_ary,U=e.send,F=e.neqeq,J=e.rb_plus,H=e.eqeq,B=e.rb_ge,K=e.rb_gt,k=e.rb_minus,I=e.rb_le,V=e.rb_times,v=e.assign_ivar_val,x,w=[],T=e.$r(w),o=e.nil,A=e.$$$;return function(N,L){var S=C(N,"Racc"),c=[S].concat(L),E=e.$r(c);return z(c[0],E("StandardError"),"ParseError"),o}(w[0],w),g((x=A("::","ParseError","skip_raise"))?"constant":o)||y(w[0],"ParseError",A(T("Racc"),"ParseError")),function(N,L){var S=C(N,"Racc"),c,E=[S].concat(L),m=e.$r(E);return g((c=m("Racc_No_Extensions","skip_raise"))?"constant":o)||y(E[0],"Racc_No_Extensions",!1),function(f,h,R){var d=z(f,h,"Parser"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.yydebug=i.racc_debug_out=i.racc_error_status=i.racc_t=i.racc_vstack=i.racc_val=i.racc_state=i.racc_tstack=o,y(l[0],"Racc_Runtime_Version","1.4.6"),y(l[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Runtime_Core_Version_R","1.4.6"),y(l[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),y(l[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),y(l[0],"Racc_Runtime_Core_Version",u("Racc_Runtime_Core_Version_R")),y(l[0],"Racc_Runtime_Core_Revision",u("Racc_Runtime_Core_Revision_R")),y(l[0],"Racc_Runtime_Type","ruby"),M(u("Parser"),"$racc_runtime_type",function(){return u("Racc_Runtime_Type")}),j(d,"$_racc_setup",function(){var t,$,r=this,a=o,s=o;return D.stderr==null&&(D.stderr=o),g(A(r.$class(),"Racc_debug_parser"))||(r.yydebug=!1),g((t=r.yydebug,t!=null&&t!==o?"instance-variable":o))||(r.yydebug=!1),g(r.yydebug)&&(g(($=r.racc_debug_out,$!=null&&$!==o?"instance-variable":o))||(r.racc_debug_out=D.stderr),r.racc_debug_out=g(a=r.racc_debug_out)?a:D.stderr),s=A(r.$class(),"Racc_arg"),g(X(s.$size(),14))&&s["$[]="](13,!0),s}),j(d,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=o,t.racc_val=o,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),j(d,"$do_parse",function(){var t=this;return t.$__send__(u("Racc_Main_Parsing_Routine"),t.$_racc_setup(),!1)}),j(d,"$next_token",function(){var t=this;return t.$raise(u("NotImplementedError"),""+t.$class()+"#next_token is not defined")}),j(d,"$_racc_do_parse_rb",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o;return a=t,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],ne=r[4]==null?o:r[4],ne=r[5]==null?o:r[5],ne=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],ne=r[8]==null?o:r[8],ne=r[9]==null?o:r[9],se=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],ne=r[12]==null?o:r[12],ne=r[13]==null?o:r[13],s.$_racc_init_sysvars(),O=oe=ue=o,U(s,"catch",["racc_end_parse"],function te(){var $e,re,P=te.$$s==null?this:te.$$s,W=o;for(P.racc_state==null&&(P.racc_state=o),P.racc_read_next==null&&(P.racc_read_next=o),P.racc_t==null&&(P.racc_t=o),P.yydebug==null&&(P.yydebug=o),P.racc_val==null&&(P.racc_val=o);g(!0);)for(g(ue=ie["$[]"](P.racc_state["$[]"](-1)))?(g(P.racc_read_next)&&F(P.racc_t,0)&&(re=P.$next_token(),$e=b(re),O=$e[0]==null?o:$e[0],P.racc_val=$e[1]==null?o:$e[1],g(O)?P.racc_t=g(W=se["$[]"](O))?W:1:P.racc_t=0,g(P.yydebug)&&P.$racc_read_token(P.racc_t,O,P.racc_val),P.racc_read_next=!1),ue=J(ue,P.racc_t),g(B(ue,0))&&g(oe=p["$[]"](ue))&&H(G["$[]"](ue),P.racc_state["$[]"](-1))||(oe=Z["$[]"](P.racc_state["$[]"](-1)))):oe=Z["$[]"](P.racc_state["$[]"](-1));g(oe=P.$_racc_evalact(oe,t)););},{$$s:s})}),j(d,"$yyparse",function(t,$){var r=this;return r.$__send__(u("Racc_YY_Parse_Method"),t,$,r.$_racc_setup(),!0)}),j(d,"$_racc_yyparse_rb",function(t,$,r,a){var s,p,G=this,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o;return p=r,s=b(p),Z=s[0]==null?o:s[0],ie=s[1]==null?o:s[1],ne=s[2]==null?o:s[2],se=s[3]==null?o:s[3],O=s[4]==null?o:s[4],O=s[5]==null?o:s[5],O=s[6]==null?o:s[6],O=s[7]==null?o:s[7],O=s[8]==null?o:s[8],O=s[9]==null?o:s[9],oe=s[10]==null?o:s[10],O=s[11]==null?o:s[11],O=s[12]==null?o:s[12],O=s[13]==null?o:s[13],G.$_racc_init_sysvars(),ue=o,te=o,U(G,"catch",["racc_end_parse"],function $e(){var re=$e.$$s==null?this:$e.$$s;for(re.racc_state==null&&(re.racc_state=o);!g(te=se["$[]"](re.racc_state["$[]"](-1)));)for(;g(ue=re.$_racc_evalact(ne["$[]"](re.racc_state["$[]"](-1)),r)););return U(t,"__send__",[$],function P(W,ee){var _=P.$$s==null?this:P.$$s,q=o,Y=o;for(_.racc_t==null&&(_.racc_t=o),_.racc_state==null&&(_.racc_state=o),_.racc_read_next==null&&(_.racc_read_next=o),W==null&&(W=o),ee==null&&(ee=o),g(W)?_.racc_t=g(q=oe["$[]"](W))?q:1:_.racc_t=0,_.racc_val=ee,_.racc_read_next=!1,te=J(te,_.racc_t),g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););for(;g(g(q=g(Y=(te=se["$[]"](_.racc_state["$[]"](-1)))["$!"]())?Y:_.racc_read_next["$!"]())?q:_.racc_t["$=="](0));)for(g(te)&&g(te=J(te,_.racc_t))&&g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););},{$$s:re})},{$$s:G})}),j(d,"$_racc_evalact",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o;if(a=$,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],Z=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],Z=r[6]==null?o:r[6],Z=r[7]==null?o:r[7],Z=r[8]==null?o:r[8],Z=r[9]==null?o:r[9],Z=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],se=r[12]==null?o:r[12],Z=r[13]==null?o:r[13],Z=r[14]==null?o:r[14],g(K(t,0))&&g(X(t,ne)))g(K(s.racc_error_status,0))&&(H(s.racc_t,1)||(s.racc_error_status=k(s.racc_error_status,1))),s.racc_vstack.$push(s.racc_val),s.racc_state.$push(t),s.racc_read_next=!0,g(s.yydebug)&&(s.racc_tstack.$push(s.racc_t),s.$racc_shift(s.racc_t,s.racc_tstack,s.racc_vstack));else if(g(X(t,0))&&g(K(t,se["$-@"]()))){if(O=U(s,"catch",["racc_jump"],function ue(){var te=ue.$$s==null?this:ue.$$s;return te.racc_state==null&&(te.racc_state=o),te.racc_state.$push(te.$_racc_do_reduce($,t)),!1},{$$s:s}),g(O))switch(O){case 1:return s.racc_user_yyerror=!0,se["$-@"]();case 2:return ne;default:s.$raise("[Racc Bug] unknown jump code")}}else if(H(t,ne))g(s.yydebug)&&s.$racc_accept(),s.$throw("racc_end_parse",s.racc_vstack["$[]"](0));else if(H(t,se["$-@"]())){switch(s.racc_error_status){case 0:g($["$[]"](21))||s.$on_error(s.racc_t,s.racc_val,s.racc_vstack);break;case 3:H(s.racc_t,0)&&s.$throw("racc_end_parse",o),s.racc_read_next=!0;break;default:}for(s.racc_user_yyerror=!1,s.racc_error_status=3;g(!0)&&!(g(oe=ie["$[]"](s.racc_state["$[]"](-1)))&&(oe=J(oe,1),g(B(oe,0))&&g(t=p["$[]"](oe))&&H(G["$[]"](oe),s.racc_state["$[]"](-1))));)g(I(s.racc_state.$size(),1))&&s.$throw("racc_end_parse",o),s.racc_state.$pop(),s.racc_vstack.$pop(),g(s.yydebug)&&(s.racc_tstack.$pop(),s.$racc_e_pop(s.racc_state,s.racc_tstack,s.racc_vstack));return t}else s.$raise("[Racc Bug] unknown action "+t.$inspect());return g(s.yydebug)&&s.$racc_next_state(s.racc_state["$[]"](-1),s.racc_state),o}),j(d,"$_racc_do_reduce",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o,$e=o,re=o,P=o,W=o,ee=o,_=o,q=o,Y=o,Q=o,ae=o;return a=t,r=b(a),p=r[0]==null?o:r[0],p=r[1]==null?o:r[1],p=r[2]==null?o:r[2],p=r[3]==null?o:r[3],G=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],ie=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],se=r[8]==null?o:r[8],O=r[9]==null?o:r[9],p=r[10]==null?o:r[10],p=r[11]==null?o:r[11],p=r[12]==null?o:r[12],oe=r[13]==null?o:r[13],ue=s.racc_state,te=s.racc_vstack,$e=s.racc_tstack,re=V($,-3),P=O["$[]"](re),W=O["$[]"](J(re,1)),ee=O["$[]"](J(re,2)),_=[],g(s.yydebug)&&(q=$e["$[]"](P["$-@"](),P)),Y=te["$[]"](P["$-@"](),P),g(s.yydebug)&&$e["$[]="](P["$-@"](),P,_),te["$[]="](P["$-@"](),P,_),ue["$[]="](P["$-@"](),P,_),g(oe)?te.$push(s.$__send__(ee,Y,te,Y["$[]"](0))):te.$push(s.$__send__(ee,Y,te)),$e.$push(W),g(s.yydebug)&&s.$racc_reduce(q,W,$e,te),Q=k(W,se),g(re=ne["$[]"](Q))&&(re=J(re,ue["$[]"](-1)),g(B(re,0))&&g(ae=G["$[]"](re))&&H(Z["$[]"](re),Q))?ae:ie["$[]"](Q)}),j(d,"$on_error",function(t,$,r){var a=this,s=o;return a.$raise(u("ParseError"),a.$sprintf(`
parse error on value %s (%s)`,$.$inspect(),g(s=a.$token_to_str(t))?s:"?"))}),j(d,"$yyerror",function(){var t=this;return t.$throw("racc_jump",1)}),j(d,"$yyaccept",function(){var t=this;return t.$throw("racc_jump",2)}),j(d,"$yyerrok",v("racc_error_status",0)),j(d,"$racc_read_token",function(t,$,r){var a=this;return a.racc_debug_out.$print("read    "),a.racc_debug_out.$print($.$inspect(),"(",a.$racc_token2str(t),") "),a.racc_debug_out.$puts(r.$inspect()),a.racc_debug_out.$puts()}),j(d,"$racc_shift",function(t,$,r){var a=this;return a.racc_debug_out.$puts("shift   "+a.$racc_token2str(t)),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_reduce",function(t,$,r,a){var s=this,p=o;return p=s.racc_debug_out,p.$print("reduce "),g(t["$empty?"]())?p.$print(" <none>"):U(t,"each",[],function G(Z){var ie=G.$$s==null?this:G.$$s;return Z==null&&(Z=o),p.$print(" ",ie.$racc_token2str(Z))},{$$s:s}),p.$puts(" --> "+s.$racc_token2str($)),s.$racc_print_stacks(r,a),s.racc_debug_out.$puts()}),j(d,"$racc_accept",function(){var t=this;return t.racc_debug_out.$puts("accept"),t.racc_debug_out.$puts()}),j(d,"$racc_e_pop",function(t,$,r){var a=this;return a.racc_debug_out.$puts("error recovering mode: pop token"),a.$racc_print_states(t),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_next_state",function(t,$){var r=this;return r.racc_debug_out.$puts("goto    "+t),r.$racc_print_states($),r.racc_debug_out.$puts()}),j(d,"$racc_print_stacks",function(t,$){var r=this,a=o;return a=r.racc_debug_out,a.$print("        ["),U(t,"each_index",[],function s(p){var G=s.$$s==null?this:s.$$s;return p==null&&(p=o),a.$print(" (",G.$racc_token2str(t["$[]"](p))," ",$["$[]"](p).$inspect(),")")},{$$s:r}),a.$puts(" ]")}),j(d,"$racc_print_states",function(t){var $=this,r=o;return r=$.racc_debug_out,r.$print("        ["),U(t,"each",[],function(s){return s==null&&(s=o),r.$print(" ",s)}),r.$puts(" ]")}),j(d,"$racc_token2str",function(t){var $=this,r=o;return g(r=A($.$class(),"Racc_token_to_s_table")["$[]"](t))?r:$.$raise("[Racc Bug] can't convert token "+t+" to string")}),j(d,"$token_to_str",function(t){var $=this;return A($.$class(),"Racc_token_to_s_table")["$[]"](t)})}(E[0],null,E)}(w[0],w)};Opal.modules.strscan=function(e){var C=e.klass,z=e.def,g=e.truthy,y=e.eqeqeq,M=e.Opal,D=e.return_ivar,X=e.send,j=e.alias,b=[],U=e.nil;return function(F,J,H){var B=C(F,J,"StringScanner"),K=[B].concat(H),k=e.$r(K),I=B.$$prototype;return I.pos=I.string=I.working=I.matched=I.prev_pos=I.match=U,B.$attr_reader("pos","matched"),z(B,"$initialize",function(v){var x=this;return x.string=v,x.pos=0,x.matched=U,x.working=v,x.match=[]}),B.$attr_reader("string"),z(B,"$beginning_of_line?",function(){var v=this;return v.pos===0||v.string.charAt(v.pos-1)===`
`}),z(B,"$scan",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:(x.prev_pos=x.pos,x.pos+=w[0].length,x.working=x.working.substring(w[0].length),x.matched=w[0],x.match=w,w[0])}),z(B,"$scan_until",function(v){var x=this;v=x.$anchor(v);for(var w=x.working,T=0;w.length!=T;++T){var o=v.exec(w.substr(T));if(o!==null){var A=T+o[0].length,N=w.substr(0,A);return x.matched=o[0],x.match=o,x.prev_pos=x.pos+T,x.pos+=A,x.working=w.substr(A),N}}return x.matched=U}),z(B,"$[]",function(v){var x=this,w=U;if(g(x.match["$empty?"]()))return U;y(k("Symbol"),w=v)?v=v.$to_s():y(k("String"),w)||(v=M["$coerce_to!"](v,k("Integer"),"to_int"));var T=x.match;return v<0&&(v+=T.length),v<0||v>=T.length||T[v]==null?U:T[v]}),z(B,"$check",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:x.matched=w[0]}),z(B,"$check_until",function(v){var x=this,w=x.prev_pos,T=x.pos,o=x.working,A=x.$scan_until(v);return x.prev_pos=w,x.pos=T,x.working=o,A}),z(B,"$peek",function(v){var x=this;return x.working.substring(0,v)}),z(B,"$eos?",function(){var v=this;return v.working.length===0}),z(B,"$exist?",function(v){var x=this,w=v.exec(x.working);return w==null?U:w.index==0?0:w.index+1}),z(B,"$skip",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);if(w==null)return x.match=[],x.matched=U;var T=w[0],o=T.length;return x.matched=T,x.match=w,x.prev_pos=x.pos,x.pos+=o,x.working=x.working.substring(o),o}),z(B,"$skip_until",function(v){var x=this,w=x.$scan_until(v);return w===U?U:(x.matched=w.substr(-1),w.length)}),z(B,"$get_byte",function(){var v=this,x=U;return v.pos<v.string.length?(v.prev_pos=v.pos,v.pos+=1,x=v.matched=v.working.substring(0,1),v.working=v.working.substring(1)):v.matched=U,x}),z(B,"$match?",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?U:(x.prev_pos=x.pos,w[0].length)}),z(B,"$pos=",function(v){var x=this;return v<0&&(v+=x.string.$length()),x.pos=v,x.working=x.string.slice(v)}),z(B,"$matched_size",function(){var v=this;return v.matched===U?U:v.matched.length}),z(B,"$post_match",function(){var v=this;return v.matched===U?U:v.string.substr(v.pos)}),z(B,"$pre_match",function(){var v=this;return v.matched===U?U:v.string.substr(0,v.prev_pos)}),z(B,"$reset",function(){var v=this;return v.working=v.string,v.matched=U,v.pos=0}),z(B,"$rest",D("working")),z(B,"$rest?",function(){var v=this;return v.working.length!==0}),z(B,"$rest_size",function(){var v=this;return v.$rest().$size()}),z(B,"$terminate",function(){var v,x=this;return x.match=U,v=[x.string.$length()],X(x,"pos=",v),v[v.length-1]}),z(B,"$unscan",function(){var v=this;return v.pos=v.prev_pos,v.prev_pos=U,v.match=U,v}),j(B,"bol?","beginning_of_line?"),j(B,"getch","get_byte"),B.$private(),z(B,"$anchor",function(v){var x=v.toString().match(/\/([^\/]+)$/);return x=x?x[1]:void 0,new RegExp("^(?:"+v.source+")",x)})}(b[0],null,b)};Opal.modules["bcdice/normalize"]=function(e){var C=e.module,z=e.eqeqeq,g=e.def,y=e.eqeq,M=[],D=e.nil;return function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F){var J=C(F,"Normalize");return J.$module_function(),g(J,"$comparison_operator",function(B){var K=D;return z(/<=|=</,K=B)?"<=":z(/>=|=>/,K)?">=":z(/<>|!=|=!/,K)?"!=":z(/</,K)?"<":z(/>/,K)?">":z(/=/,K)?"==":D}),g(J,"$target_number",function(B){return y(B,"?")?B:B.$to_i()})}(U[0])}(M[0],M)};Opal.modules["bcdice/common_command/lexer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.hash2,M=e.truthy,D=e.def,X=e.top,j=[],b=e.nil;return X.$require("strscan"),X.$require("bcdice/normalize"),function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"CommonCommand"),I=[k].concat(K);return function(V,v,x){var w=z(V,v,"Lexer"),T=[w].concat(x),o=e.$r(T),A=w.$$prototype;return A.scanner=b,g(T[0],"SYMBOLS",y(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),D(w,"$initialize",function(L){var S=this,c=b;return L=M(c=L.$split(" ",2).$first())?c:"",S.scanner=o("StringScanner").$new(L)}),D(w,"$next_token",function(){var L=this,S=b,c=b,E=b,m=b,f=b;return M(L.scanner["$eos?"]())?[!1,"$"]:M(S=L.scanner.$scan(/\d+/))?["NUMBER",S.$to_i()]:M(c=L.scanner.$scan(/[<>!=]+/))?["CMP_OP",o("Normalize").$comparison_operator(c)]:(E=L.scanner.$getch().$upcase(),m=M(f=o("SYMBOLS")["$[]"](E))?f:E.$to_sym(),[m,E])}),D(w,"$source",function(){var L=this;return L.scanner.$string()})}(I[0],null,I)}(H[0],H)}(j[0],j)};Opal.modules["bcdice/arithmetic/parser"]=function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.hash,D=e.const_set,X=e.top,j=[],b=e.nil,U=e.$$$;return X.$require("racc/parser.rb"),X.$require("bcdice/common_command/lexer"),X.$require("bcdice/arithmetic/node"),function(F,J){var H=C(F,"BCDice"),B=[H].concat(J);return function(K,k){var I=C(K,"Arithmetic"),V=[I].concat(k),v=e.$r(V);return function(x,w,T){var o=z(x,w,"Parser"),A=[o].concat(T),N=e.$r(A),L=b,S=b,c=b,E=b,m=b,f=b,h=b,R=b,d=b,l=b,u=b,i=b,n=b,t=b,$=o.$$prototype;return $.lexer=b,g(o,"$parse",function(a){var s=this;return s.$new().$parse(a)}),y(o,"$parse",function(a){var s=this;try{return s.lexer=U(U(N("BCDice"),"CommonCommand"),"Lexer").$new(a),s.$do_parse()}catch(p){if(e.rescue(p,[N("ParseError")]))try{return b}finally{e.pop_exception()}else throw p}}),o.$private(),y(o,"$next_token",function(){var a=this;return a.lexer.$next_token()}),L=e.large_array_unpack("8,17,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,,,4,5,4,5,7,9,7,,,10,11,,10,11,22,26,24,25,27"),S=e.large_array_unpack("0,9,4,2,2,0,0,4,4,0,5,4,7,18,18,5,5,7,7,5,10,7,11,19,19,10,10,11,11,10,12,11,13,,,12,12,13,13,12,1,13,,,16,16,,1,1,16,21,21,21,21"),c=[-2,40,-6,b,0,8,b,10,b,1,18,20,28,30,b,b,37,b,4,14,b,47,b,b,b,b,b,b],E=[-17,-17,-3,-6,-17,-17,-14,-17,-16,-17,-17,-17,-17,-17,-12,-13,-17,28,-1,-2,-4,-7,-15,-5,-8,-9,-10,-11],m=[14,15,23,1,18,19,b,b,20,21,16],f=[3,3,4,1,2,2,b,b,3,3,1],h=[b,3,-6,-4,-19,b],R=[b,b,2,3,b,6],d=e.large_array_unpack("0,0,racc_error,3,14,_reduce_1,3,14,_reduce_2,1,14,_reduce_none,3,15,_reduce_4,4,15,_reduce_5,1,15,_reduce_none,0,17,_reduce_7,1,17,_reduce_8,1,17,_reduce_9,1,17,_reduce_10,1,17,_reduce_11,2,16,_reduce_12,2,16,_reduce_13,1,16,_reduce_none,3,18,_reduce_15,1,18,_reduce_16"),l=17,u=28,i=M(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12),n=13,t=!0,D(A[0],"Racc_arg",[L,S,E,c,m,f,R,h,n,d,i,u,l,t]),D(A[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","add","mul","unary","round_type","term"]),D(A[0],"Racc_debug_parser",!1),y(o,"$_reduce_1",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"BinaryOp").$new(a["$[]"](0),"+",a["$[]"](2))}),y(o,"$_reduce_2",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"BinaryOp").$new(a["$[]"](0),"-",a["$[]"](2))}),y(o,"$_reduce_4",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"BinaryOp").$new(a["$[]"](0),"*",a["$[]"](2))}),y(o,"$_reduce_5",function(a,s,p){var G=b;return G=a["$[]"](3),G.$new(a["$[]"](0),a["$[]"](2))}),y(o,"$_reduce_7",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),y(o,"$_reduce_8",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"DivideWithCeil")}),y(o,"$_reduce_9",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"DivideWithCeil")}),y(o,"$_reduce_10",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"DivideWithRound")}),y(o,"$_reduce_11",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"DivideWithFloor")}),y(o,"$_reduce_12",function(a,s,p){return a["$[]"](1)}),y(o,"$_reduce_13",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"Negative").$new(a["$[]"](1))}),y(o,"$_reduce_15",function(a,s,p){return a["$[]"](1)}),y(o,"$_reduce_16",function(a,s,p){return U(U(N("Arithmetic"),"Node"),"Number").$new(a["$[]"](0))}),y(o,"$_reduce_none",function(a,s,p){return a["$[]"](0)})}(V[0],U(v("Racc"),"Parser"),V)}(B[0],B)}(j[0],j)};Opal.modules["bcdice/arithmetic"]=function(e){var C=e.module,z=e.thrower,g=e.def,y=e.top,M=[],D=e.nil;return y.$require("bcdice/arithmetic/node"),y.$require("bcdice/arithmetic/parser"),function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F,J){var H=C(F,"Arithmetic"),B=[H].concat(J);return function(K,k){var I=[K].concat(k),V=e.$r(I);return g(K,"$eval",function(x,w){try{var T=z("eval_return"),o,A=D;try{return A=V("Parser").$parse(x),o=A,o===D||o==null?D:o.$eval(w)}catch(N){if(e.rescue(N,[V("ZeroDivisionError")]))try{return D}finally{e.pop_exception()}else throw N}}catch(N){if(N===e.t_eval_return)return N.$v;throw N}})}(e.get_singleton_class(H),B)}(U[0],U)}(M[0],M)};Opal.queue(function(e){var C=e.module,z=e.klass,g=e.defs,y=e.def,M=e.send,D=e.truthy,X=e.eqeq,j=e.thrower,b=e.top,U=[],F=e.nil;return b.$require("bcdice/arithmetic"),function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"Preprocessor"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.game_system=T.text=F,g(v,"$process",function(A,N){return w("Preprocessor").$new(A,N).$process()}),y(v,"$initialize",function(A,N){var L=this;return L.text=A,L.game_system=N}),y(v,"$process",function(){var A=this;return A.$trim_after_whitespace(),A.$replace_parentheses(),A.text=A.game_system.$change_text(A.text),A.$replace_implicit_d(),A.text}),v.$private(),y(v,"$trim_after_whitespace",function(){var A=this;return A.text=A.text.$strip().$split(/\s/,2).$first()}),y(v,"$replace_parentheses",function(){try{var A=j("eval_return"),N=this;return function(){try{var L=j("break");return M(N,"loop",[],function S(){var c=S.$$s==null?this:S.$$s,E=F;if(c.text==null&&(c.text=F),E=c.text,c.text=M(c.text,"gsub",[/\([\d\/+*\-CURF]+\)/],function m(f){var h=m.$$s==null?this:m.$$s,R=F;return h.game_system==null&&(h.game_system=F),f==null&&(f=F),D(R=w("Arithmetic").$eval(f,h.game_system.$round_type()))?R:f},{$$s:c}),X(E,c.text))L.$throw();else return F},{$$s:N})}catch(S){if(S===L)return S.$v;throw S}}()}catch(L){if(L===e.t_eval_return)return L.$v;throw L}}),y(v,"$replace_implicit_d",function(){var A=this;return A.text=M(A.text,"gsub",[/(\d+)D([^\w]|$)/i],function N(){var L=N.$$s==null?this:N.$$s,S=F,c=F,E=F;return L.game_system==null&&(L.game_system=F),S=w("Regexp").$last_match(1),c=L.game_system.$sides_implicit_d(),E=w("Regexp").$last_match(2),""+S+"D"+c+E},{$$s:A})})}(K[0],null,K)}(U[0],U)})});var er=pe(()=>{Ee();Opal.queue(function(e){var C=e.module,z=e.const_set,g=[],y=e.nil;return function(M,D){var X=C(M,"BCDice"),j=[X].concat(D);return z(j[0],"VERSION","3.8.0")}(g[0],g)})});var Pe=pe(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.nilToNull=void 0;Ee();Opal.config.unsupported_features_severity="ignore";qe.default=Opal;function Tr(e){return e===Opal.nil?null:e}qe.nilToNull=Tr});var Re=pe(Ne=>{"use strict";var rr=Ne&&Ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.Opal=Ne.I18n=Ne.BCDice=void 0;er();var tr=rr(Pe());Ne.BCDice=tr.default.module(null,"BCDice");Ne.I18n=tr.default.module(null,"I18n");var zr=Pe();Object.defineProperty(Ne,"Opal",{enumerable:!0,get:function(){return rr(zr).default}})});var ze=pe(xe=>{"use strict";var Te=xe&&xe.__assign||function(){return Te=Object.assign||function(e){for(var C,z=1,g=arguments.length;z<g;z++){C=arguments[z];for(var y in C)Object.prototype.hasOwnProperty.call(C,y)&&(e[y]=C[y])}return e},Te.apply(this,arguments)},Dr=xe&&xe.__rest||function(e,C){var z={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&C.indexOf(g)<0&&(z[g]=e[g]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,g=Object.getOwnPropertySymbols(e);y<g.length;y++)C.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(e,g[y])&&(z[g[y]]=e[g[y]]);return z};Object.defineProperty(xe,"__esModule",{value:!0});xe.parseResult=void 0;var Ir=Re();function jr(e){if(e===Ir.Opal.nil)return null;var C=e.detailed_rands,z=Dr(e,["detailed_rands"]);return Te(Te({},z),{detailedRands:C.map(function(g){return g.$to_n()})})}xe.parseResult=jr});var Ke=pe(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Ve();Je();Qe();Oe();var nr=Re(),ir=ze(),Pr=function(){function e(C,z){this.internal=z!=null?z:nr.BCDice.Base.$new(C)}return e.eval=function(C){var z=nr.BCDice.Base.$eval(C);return ir.parseResult(z)},Object.defineProperty(e.prototype,"randomizer",{get:function(){return this.internal.randomizer},enumerable:!1,configurable:!0}),e.prototype.eval=function(){var C=this.internal.$eval();return ir.parseResult(C)},e}();Be.default=Pr});var $r=pe((It,Br)=>{Br.exports={gameSystems:[{id:"PulpCthulhu",name:"\u30D1\u30EB\u30D7\u30FB\u30AF\u30C8\u30A5\u30EB\u30D5",className:"PulpCthulhu",superClassName:"Cthulhu7th",sortKey:"\u306F\u308B\u3075\u304F\u3068\u3046\u308B\u3075",locale:"ja_jp"},{id:"ToshiakiHolyGrailWar",name:"\u3068\u3057\u3042\u304D\u306E\u8056\u676F\u6226\u4E89TRPG",className:"ToshiakiHolyGrailWar",superClassName:"Base",sortKey:"\u3068\u3057\u3042\u304D\u306E\u305B\u3044\u306F\u3044\u305B\u3093\u305D\u3046TRPG",locale:"ja_jp"},{id:"Raisondetre",name:"\u53DB\u9006\u30EC\u30BE\u30F3\u30C7\u30FC\u30C8\u30EB",className:"Raisondetre",superClassName:"Base",sortKey:"\u306F\u3093\u304D\u3084\u304F\u308C\u305D\u3093\u3066\u3068\u304A\u308B",locale:"ja_jp"},{id:"TrinitySeven",name:"\u30C8\u30EA\u30CB\u30C6\u30A3\u30BB\u30D6\u30F3RPG",className:"TrinitySeven",superClassName:"Base",sortKey:"\u3068\u308A\u306B\u3066\u3044\u305B\u3075\u3093RPG",locale:"ja_jp"},{id:"BladeOfArcana",name:"\u30D6\u30EC\u30A4\u30C9\u30FB\u30AA\u30D6\u30FB\u30A2\u30EB\u30AB\u30CA",className:"BladeOfArcana",superClassName:"Base",sortKey:"\u3075\u308C\u3044\u3068\u304A\u3075\u3042\u308B\u304B\u306A",locale:"ja_jp"},{id:"RecordOfLodossWar",name:"\u30ED\u30FC\u30C9\u30B9\u5CF6\u6226\u8A18RPG",className:"RecordOfLodossWar",superClassName:"Base",sortKey:"\u308D\u304A\u3068\u3059\u3068\u3046\u305B\u3093\u304DRPG",locale:"ja_jp"},{id:"RecordOfSteam",name:"Record of Steam",className:"RecordOfSteam",superClassName:"Base",sortKey:"\u308C\u3053\u304A\u3068\u304A\u3075\u3059\u3061\u3044\u3080",locale:"ja_jp"},{id:"TunnelsAndTrolls",name:"\u30C8\u30F3\u30CD\u30EB\u30BA\uFF06\u30C8\u30ED\u30FC\u30EB\u30BA",className:"TunnelsAndTrolls",superClassName:"Base",sortKey:"\u3068\u3093\u306D\u308B\u3059\u3042\u3093\u3068\u3068\u308D\u304A\u308B\u3059",locale:"ja_jp"},{id:"EarthDawn4",name:"\u30A2\u30FC\u30B9\u30C9\u30FC\u30F34\u7248",className:"EarthDawn4",superClassName:"EarthDawn",sortKey:"\u3042\u3042\u3059\u3068\u304A\u30934",locale:"ja_jp"},{id:"BlindMythos",name:"\u30D6\u30E9\u30A4\u30F3\u30C9\u30FB\u30DF\u30C8\u30B9RPG",className:"BlindMythos",superClassName:"Base",sortKey:"\u3075\u3089\u3044\u3093\u3068\u307F\u3068\u3059RPG",locale:"ja_jp"},{id:"LogHorizon:Korean",name:"\uB85C\uADF8 \uD638\uB77C\uC774\uC98C",className:"LogHorizon_Korean",superClassName:"LogHorizon",sortKey:"\u56FD\u969B\u5316:Korean:\uB85C\uADF8 \uD638\uB77C\uC774\uC98C",locale:"ko_kr"},{id:"LostRecord",name:"\u30ED\u30B9\u30C8\u30EC\u30B3\u30FC\u30C9",className:"LostRecord",superClassName:"Base",sortKey:"\u308D\u3059\u3068\u308C\u3053\u304A\u3068",locale:"ja_jp"},{id:"LostRoyal",name:"\u30ED\u30B9\u30C8\u30ED\u30A4\u30E4\u30EB",className:"LostRoyal",superClassName:"Base",sortKey:"\u308D\u3059\u3068\u308D\u3044\u3084\u308B",locale:"ja_jp"},{id:"EclipsePhase",name:"\u30A8\u30AF\u30EA\u30D7\u30B9\u30FB\u30D5\u30A7\u30A4\u30BA",className:"EclipsePhase",superClassName:"Base",sortKey:"\u3048\u304F\u308A\u3075\u3059\u3075\u3048\u3044\u3059",locale:"ja_jp"},{id:"Revulture",name:"\u5149\u7815\u306E\u30EA\u30F4\u30A1\u30EB\u30C1\u30E3\u30FC",className:"Revulture",superClassName:"Base",sortKey:"\u3053\u3046\u3055\u3044\u306E\u308A\u3046\u3042\u308B\u3061\u3084\u3042",locale:"ja_jp"},{id:"TwilightGunsmoke",name:"\u30C8\u30EF\u30A4\u30E9\u30A4\u30C8\u30AC\u30F3\u30B9\u30E2\u30FC\u30AF",className:"TwilightGunsmoke",superClassName:"Base",sortKey:"\u3068\u308F\u3044\u3089\u3044\u3068\u304B\u3093\u3059\u3082\u304A\u304F",locale:"ja_jp"},{id:"Elric",name:"\u30A8\u30EB\u30EA\u30C3\u30AF\uFF01",className:"Elric",superClassName:"Base",sortKey:"\u3048\u308B\u308A\u3064\u304F",locale:"ja_jp"},{id:"Elysion",name:"\u30A8\u30EA\u30E5\u30B7\u30AA\u30F3",className:"Elysion",superClassName:"Base",sortKey:"\u3048\u308A\u3086\u3057\u304A\u3093",locale:"ja_jp"},{id:"UnsungDuet",name:"\u30A2\u30F3\u30B5\u30F3\u30B0\u30FB\u30C7\u30E5\u30A8\u30C3\u30C8",className:"UnsungDuet",superClassName:"Base",sortKey:"\u3042\u3093\u3055\u3093\u304F\u3066\u3086\u3048\u3064\u3068",locale:"ja_jp"},{id:"RokumonSekai2",name:"\u516D\u9580\u4E16\u754CRPG \u30BB\u30AB\u30F3\u30C9\u30A8\u30C7\u30A3\u30B7\u30E7\u30F3",className:"RokumonSekai2",superClassName:"Base",sortKey:"\u308D\u304F\u3082\u3093\u305B\u304B\u3044RPG2",locale:"ja_jp"},{id:"Utakaze",name:"\u30A6\u30BF\u30AB\u30BC",className:"Utakaze",superClassName:"Base",sortKey:"\u3046\u305F\u304B\u305B",locale:"ja_jp"},{id:"MagicaLogia",name:"\u30DE\u30AE\u30AB\u30ED\u30AE\u30A2",className:"MagicaLogia",superClassName:"Base",sortKey:"\u307E\u304D\u304B\u308D\u304D\u3042",locale:"ja_jp"},{id:"RoleMaster",name:"\u30ED\u30FC\u30EB\u30DE\u30B9\u30BF\u30FC",className:"RoleMaster",superClassName:"Base",sortKey:"\u308D\u304A\u308B\u307E\u3059\u305F\u3042",locale:"ja_jp"},{id:"RuinBreakers",name:"\u30EB\u30FC\u30A4\u30F3\u30D6\u30EC\u30A4\u30AB\u30FC\u30BA",className:"RuinBreakers",superClassName:"Base",sortKey:"\u308B\u3046\u3044\u3093\u3075\u308C\u3044\u304B\u3042\u3059",locale:"ja_jp"},{id:"BloodCrusade",name:"\u30D6\u30E9\u30C3\u30C9\u30FB\u30AF\u30EB\u30BB\u30A4\u30C9",className:"BloodCrusade",superClassName:"Base",sortKey:"\u3075\u3089\u3064\u3068\u304F\u308B\u305B\u3044\u3068",locale:"ja_jp"},{id:"VampireTheMasquerade5th",name:"Vampire: The Masquerade 5th Edition",className:"VampireTheMasquerade5th",superClassName:"Base",sortKey:"\u3046\u3042\u3093\u306F\u3044\u3042\u3055\u307E\u3059\u304B\u308C\u3048\u30685",locale:"ja_jp"},{id:"AFF2e",name:"ADVANCED FIGHTING FANTASY 2nd Edition",className:"AFF2e",superClassName:"Base",sortKey:"\u3042\u3068\u306F\u3093\u3059\u3068\u3075\u3042\u3044\u3066\u3044\u3093\u304F\u3075\u3042\u3093\u305F\u3057\u30442",locale:"ja_jp"},{id:"BloodMoon",name:"\u30D6\u30E9\u30C3\u30C9\u30E0\u30FC\u30F3",className:"BloodMoon",superClassName:"Base",sortKey:"\u3075\u3089\u3064\u3068\u3080\u3046\u3093",locale:"ja_jp"},{id:"Bloodorium",name:"\u30D6\u30E9\u30C9\u30EA\u30A6\u30E0",className:"Bloodorium",superClassName:"Base",sortKey:"\u3075\u3089\u3068\u308A\u3046\u3080",locale:"ja_jp"},{id:"RuneQuest",name:"\u30EB\u30FC\u30F3\u30AF\u30A8\u30B9\u30C8",className:"RuneQuest",superClassName:"Base",sortKey:"\u308B\u3046\u3093\u304F\u3048\u3059\u3068",locale:"ja_jp"},{id:"RyuTuber",name:"\u30EA\u30E5\u30FC\u30C1\u30E5\u30FC\u30D0\u30FC\u3068\u3061\u3044\u3055\u306A\u5947\u8DE1",className:"RyuTuber",superClassName:"Base",sortKey:"\u308A\u3086\u3046\u3061\u3086\u3046\u306F\u3042\u3068\u3061\u3044\u3055\u306A\u304D\u305B\u304D",locale:"ja_jp"},{id:"Ryutama",name:"\u308A\u3085\u3046\u305F\u307E",className:"Ryutama",superClassName:"Base",sortKey:"\u308A\u3086\u3046\u305F\u307E",locale:"ja_jp"},{id:"CardRanker",name:"\u30AB\u30FC\u30C9\u30E9\u30F3\u30AB\u30FC",className:"CardRanker",superClassName:"Base",sortKey:"\u304B\u3042\u3068\u3089\u3093\u304B\u3042",locale:"ja_jp"},{id:"CastleInGray",name:"\u7070\u8272\u57CE\u7DBA\u8B5A",className:"CastleInGray",superClassName:"Base",sortKey:"\u306F\u3044\u3044\u308D\u3057\u3088\u3046\u304D\u305F\u3093",locale:"ja_jp"},{id:"MagicaLogia:Korean",name:"\uB9C8\uAE30\uCE74\uB85C\uAE30\uC544",className:"MagicaLogia_Korean",superClassName:"MagicaLogia",sortKey:"\u56FD\u969B\u5316:Korean:\uB9C8\uAE30\uCE74\uB85C\uAE30\uC544",locale:"ko_kr"},{id:"MagicaLogia:SimplifiedChinese",name:"\u9B54\u5BFC\u4E66\u5927\u6218",className:"MagicaLogia_SimplifiedChinese",superClassName:"MagicaLogia",sortKey:"\u56FD\u969B\u5316:Simplified Chinese:\u9B54\u5BFC\u4E66\u5927\u6218",locale:"zh_hans"},{id:"AceKillerGene",name:"\u30A8\u30FC\u30B9\u30AD\u30E9\u30FC\u30B8\u30FC\u30F3",className:"AceKillerGene",superClassName:"GardenOrder",sortKey:"\u3048\u3048\u3059\u304D\u3089\u3042\u3057\u3044\u3093",locale:"ja_jp"},{id:"GardenOrder",name:"\u30AC\u30FC\u30C7\u30F3\u30AA\u30FC\u30C0\u30FC",className:"GardenOrder",superClassName:"Base",sortKey:"\u304B\u3042\u3066\u3093\u304A\u304A\u305F\u3042",locale:"ja_jp"},{id:"MeikyuDays",name:"\u8FF7\u5BAE\u30C7\u30A4\u30BA",className:"MeikyuDays",superClassName:"Base",sortKey:"\u3081\u3044\u304D\u3086\u3046\u3066\u3044\u3059",locale:"ja_jp"},{id:"ChaosFlare",name:"\u30AB\u30AA\u30B9\u30D5\u30EC\u30A2",className:"ChaosFlare",superClassName:"Base",sortKey:"\u304B\u304A\u3059\u3075\u308C\u3042",locale:"ja_jp"},{id:"SajinsenkiAGuS",name:"\u7802\u5875\u6226\u6A5F\u30A2\u30FC\u30AC\u30B9",className:"SajinsenkiAGuS",superClassName:"Base",sortKey:"\u3055\u3057\u3093\u305B\u3093\u304D\u3042\u3042\u304B\u3059",locale:"ja_jp"},{id:"Villaciel",name:"\u84BC\u5929\u306E\u30F4\u30A3\u30E9\u30B7\u30A8\u30EB",className:"Villaciel",superClassName:"Base",sortKey:"\u305D\u3046\u3066\u3093\u306E\u3046\u3044\u3089\u3057\u3048\u308B",locale:"ja_jp"},{id:"MeikyuKingdom",name:"\u8FF7\u5BAE\u30AD\u30F3\u30B0\u30C0\u30E0",className:"MeikyuKingdom",superClassName:"Base",sortKey:"\u3081\u3044\u304D\u3086\u3046\u304D\u3093\u304F\u305F\u3080",locale:"ja_jp"},{id:"Chill",name:"Chill",className:"Chill",superClassName:"Base",sortKey:"\u3061\u308B",locale:"ja_jp"},{id:"SamsaraBallad",name:"\u30B5\u30F3\u30B5\u30FC\u30E9\u30FB\u30D0\u30E9\u30C3\u30C9",className:"SamsaraBallad",superClassName:"Base",sortKey:"\u3055\u3093\u3055\u3042\u3089\u306F\u3089\u3064\u3068",locale:"ja_jp"},{id:"EmbryoMachine",name:"\u30A8\u30E0\u30D6\u30EA\u30AA\u30DE\u30B7\u30F3RPG",className:"EmbryoMachine",superClassName:"Base",sortKey:"\u3048\u3080\u3075\u308A\u304A\u307E\u3057\u3093RPG",locale:"ja_jp"},{id:"Satasupe",name:"\u30B5\u30BF\u30B9\u30DA",className:"Satasupe",superClassName:"Base",sortKey:"\u3055\u305F\u3059\u3078",locale:"ja_jp"},{id:"Ainecadette",name:"\u30A8\u30CD\u30AB\u30C7\u30C3\u30C8",className:"Ainecadette",superClassName:"Base",sortKey:"\u3048\u306D\u304B\u3066\u3064\u3068",locale:"ja_jp"},{id:"Chill3",name:"Chill 3rd Edition",className:"Chill3",superClassName:"Base",sortKey:"\u3061\u308B3",locale:"ja_jp"},{id:"Emoklore",name:"\u30A8\u30E2\u30AF\u30ED\u30A2TRPG",className:"Emoklore",superClassName:"Base",sortKey:"\u3048\u3082\u304F\u308D\u3042TRPG",locale:"ja_jp"},{id:"Airgetlamh",name:"\u6731\u306E\u5B64\u5854\u306E\u30A8\u30A2\u30B2\u30C8\u30E9\u30E0",className:"Airgetlamh",superClassName:"Base",sortKey:"\u3042\u3051\u306E\u3053\u3068\u3046\u306E\u3048\u3042\u3051\u3068\u3089\u3080",locale:"ja_jp"},{id:"CodeLayerd",name:"\u30B3\u30FC\u30C9\uFF1A\u30EC\u30A4\u30E4\u30FC\u30C9",className:"CodeLayerd",superClassName:"Base",sortKey:"\u3053\u304A\u3068\u308C\u3044\u3084\u3042\u3068",locale:"ja_jp"},{id:"ColossalHunter",name:"\u30B3\u30ED\u30C3\u30B5\u30EB\u30CF\u30F3\u30BF\u30FC",className:"ColossalHunter",superClassName:"Base",sortKey:"\u3053\u308D\u3064\u3055\u308B\u306F\u3093\u305F\u3042",locale:"ja_jp"},{id:"EndBreaker",name:"\u30A8\u30F3\u30C9\u30D6\u30EC\u30A4\u30AB\u30FC\uFF01",className:"EndBreaker",superClassName:"Base",sortKey:"\u3048\u3093\u3068\u3075\u308C\u3044\u304B\u3042",locale:"ja_jp"},{id:"EtrianOdysseySRS",name:"\u4E16\u754C\u6A39\u306E\u8FF7\u5BAESRS",className:"EtrianOdysseySRS",superClassName:"SRS",sortKey:"\u305B\u304B\u3044\u3057\u3086\u306E\u3081\u3044\u304D\u3086\u3046SRS",locale:"ja_jp"},{id:"FateCoreSystem",name:"Fate Core System",className:"FateCoreSystem",superClassName:"Base",sortKey:"\u3075\u3048\u3044\u3068\u3053\u3042\u3057\u3059\u3066\u3080",locale:"ja_jp"},{id:"AlchemiaStruggle",name:"\u30A2\u30EB\u30B1\u30DF\u30A2\u30FB\u30B9\u30C8\u30E9\u30B0\u30EB",className:"AlchemiaStruggle",superClassName:"Base",sortKey:"\u3042\u308B\u3051\u307F\u3042\u3059\u3068\u3089\u304F\u308B",locale:"ja_jp"},{id:"Fiasco",name:"\u30D5\u30A3\u30A2\u30B9\u30B3",className:"Fiasco",superClassName:"Base",sortKey:"\u3075\u3044\u3042\u3059\u3053",locale:"ja_jp"},{id:"Comes",name:"\u30AB\u30E0\u30BA",className:"Comes",superClassName:"Base",sortKey:"\u304B\u3080\u3059",locale:"ja_jp"},{id:"ConvictorDrive",name:"\u30B3\u30F3\u30F4\u30A3\u30AF\u30BF\u30FC\u30FB\u30C9\u30E9\u30A4\u30D6",className:"ConvictorDrive",superClassName:"Base",sortKey:"\u3053\u3093\u3046\u3044\u304F\u305F\u3042\u3068\u3089\u3044\u3075",locale:"ja_jp"},{id:"CrashWorld",name:"\u589C\u843D\u4E16\u754C",className:"CrashWorld",superClassName:"Base",sortKey:"\u3064\u3044\u3089\u304F\u305B\u304B\u3044",locale:"ja_jp"},{id:"Fiasco:Korean",name:"\uD53C\uC544\uC2A4\uCF54",className:"Fiasco_Korean",superClassName:"Fiasco",sortKey:"\u56FD\u969B\u5316:Korean:\uD53C\uC544\uC2A4\uCF54",locale:"ko_kr"},{id:"FilledWith",name:"\u30D5\u30A3\u30EB\u30C8\u30A6\u30A3\u30BA",className:"FilledWith",superClassName:"Base",sortKey:"\u3075\u3044\u308B\u3068\u3046\u3044\u3059",locale:"ja_jp"},{id:"Cthulhu",name:"\u30AF\u30C8\u30A5\u30EB\u30D5\u795E\u8A71TRPG",className:"Cthulhu",superClassName:"Base",sortKey:"\u304F\u3068\u3046\u308B\u3075\u3057\u3093\u308FTRPG",locale:"ja_jp"},{id:"VisionConnect",name:"\u30F4\u30A3\u30B8\u30E7\u30F3\u30B3\u30CD\u30AF\u30C8",className:"VisionConnect",superClassName:"Base",sortKey:"\u3046\u3044\u3057\u3088\u3093\u3053\u306D\u304F\u3068",locale:"ja_jp"},{id:"WARPS",name:"\u30EF\u30FC\u30D7\u30B9",className:"WARPS",superClassName:"Base",sortKey:"\u308F\u3042\u3075\u3059",locale:"ja_jp"},{id:"WaresBlade",name:"\u30EF\u30FC\u30B9\u30D6\u30EC\u30A4\u30C9",className:"WaresBlade",superClassName:"Base",sortKey:"\u308F\u3042\u3059\u3075\u308C\u3044\u3068",locale:"ja_jp"},{id:"Alsetto",name:"\u8A69\u7247\u306E\u30A2\u30EB\u30BB\u30C3\u30C8",className:"Alsetto",superClassName:"Base",sortKey:"\u3046\u305F\u304B\u305F\u306E\u3042\u308B\u305B\u3064\u3068",locale:"ja_jp"},{id:"ScreamHighSchool",name:"\u30B9\u30AF\u30EA\u30FC\u30E0\u30CF\u30A4\u30B9\u30AF\u30FC\u30EB",className:"ScreamHighSchool",superClassName:"GardenOrder",sortKey:"\u3059\u304F\u308A\u3044\u3080\u306F\u3044\u3059\u304F\u3046\u308B",locale:"ja_jp"},{id:"Alshard",name:"\u30A2\u30EB\u30B7\u30E3\u30FC\u30C9",className:"Alshard",superClassName:"SRS",sortKey:"\u3042\u308B\u3057\u3084\u3042\u3068",locale:"ja_jp"},{id:"SRS",name:"\u30B9\u30BF\u30F3\u30C0\u30FC\u30C9RPG\u30B7\u30B9\u30C6\u30E0",className:"SRS",superClassName:"Base",sortKey:"\u3059\u305F\u3093\u305F\u3042\u3068RPG\u3057\u3059\u3066\u3080",locale:"ja_jp"},{id:"Sengensyou",name:"\u5343\u5E7B\u6284",className:"Sengensyou",superClassName:"Base",sortKey:"\u305B\u3093\u3051\u3093\u3057\u3088\u3046",locale:"ja_jp"},{id:"SevenFortressMobius",name:"\u30BB\u30D6\u30F3\uFF1D\u30D5\u30A9\u30FC\u30C8\u30EC\u30B9 \u30E1\u30D3\u30A6\u30B9",className:"SevenFortressMobius",superClassName:"NightWizard",sortKey:"\u305B\u3075\u3093\u3075\u304A\u304A\u3068\u308C\u3059\u3081\u3072\u3046\u3059",locale:"ja_jp"},{id:"ShadowRun",name:"\u30B7\u30E3\u30C9\u30A6\u30E9\u30F3",className:"ShadowRun",superClassName:"Base",sortKey:"\u3057\u3084\u3068\u3046\u3089\u3093",locale:"ja_jp"},{id:"ShadowRun4",name:"\u30B7\u30E3\u30C9\u30A6\u30E9\u30F3 4th Edition",className:"ShadowRun4",superClassName:"Base",sortKey:"\u3057\u3084\u3068\u3046\u3089\u30934",locale:"ja_jp"},{id:"ShadowRun5",name:"\u30B7\u30E3\u30C9\u30A6\u30E9\u30F3 5th Edition",className:"ShadowRun5",superClassName:"ShadowRun4",sortKey:"\u3057\u3084\u3068\u3046\u3089\u30935",locale:"ja_jp"},{id:"Cthulhu7th",name:"\u65B0\u30AF\u30C8\u30A5\u30EB\u30D5\u795E\u8A71TRPG",className:"Cthulhu7th",superClassName:"Base",sortKey:"\u3057\u3093\u304F\u3068\u3046\u308B\u3075\u3057\u3093\u308FTRPG",locale:"ja_jp"},{id:"Warhammer",name:"\u30A6\u30A9\u30FC\u30CF\u30F3\u30DE\u30FC",className:"Warhammer",superClassName:"Base",sortKey:"\u3046\u304A\u304A\u306F\u3093\u307E\u3042",locale:"ja_jp"},{id:"SharedFantasia",name:"Shared\u2020Fantasia",className:"SharedFantasia",superClassName:"Base",sortKey:"\u3057\u3048\u3042\u3042\u3068\u3075\u3042\u3093\u305F\u3057\u3042",locale:"ja_jp"},{id:"ShinMegamiTenseiKakuseihen",name:"\u771F\u30FB\u5973\u795E\u8EE2\u751FTRPG \u899A\u9192\u7BC7",className:"ShinMegamiTenseiKakuseihen",superClassName:"Base",sortKey:"\u3057\u3093\u3081\u304B\u307F\u3066\u3093\u305B\u3044TRPG\u304B\u304F\u305B\u3044\u3078\u3093",locale:"ja_jp"},{id:"Warhammer4",name:"\u30A6\u30A9\u30FC\u30CF\u30F3\u30DE\u30FCRPG\u7B2C4\u7248",className:"Warhammer4",superClassName:"Base",sortKey:"\u3046\u304A\u304A\u306F\u3093\u307E\u30424",locale:"ja_jp"},{id:"ShinkuuGakuen",name:"\u771F\u7A7A\u5B66\u5712",className:"ShinkuuGakuen",superClassName:"Base",sortKey:"\u3057\u3093\u304F\u3046\u304B\u304F\u3048\u3093",locale:"ja_jp"},{id:"FullMetalPanic",name:"\u30D5\u30EB\u30E1\u30BF\u30EB\u30FB\u30D1\u30CB\u30C3\u30AF\uFF01RPG",className:"FullMetalPanic",superClassName:"SRS",sortKey:"\u3075\u308B\u3081\u305F\u308B\u306F\u306B\u3064\u304FRPG",locale:"ja_jp"},{id:"FutariSousa",name:"\u30D5\u30BF\u30EA\u30BD\u30A6\u30B5",className:"FutariSousa",superClassName:"Base",sortKey:"\u3075\u305F\u308A\u305D\u3046\u3055",locale:"ja_jp"},{id:"FutariSousa:Korean",name:"\uB458\uC774\uC11C \uC218\uC0AC(\uD6C4\uD0C0\uB9AC\uC18C\uC6B0\uC0AC)",className:"FutariSousa_Korean",superClassName:"FutariSousa",sortKey:"\u56FD\u969B\u5316:Korean:\uB458\uC774\uC11C \uC218\uC0AC",locale:"ko_kr"},{id:"Garako",name:"\u30AC\u30E9\u30B3\u3068\u7834\u754C\u306E\u5854",className:"Garako",superClassName:"Base",sortKey:"\u304B\u3089\u3053\u3068\u306F\u304B\u3044\u306E\u3068\u3046",locale:"ja_jp"},{id:"MeikyuKingdomBasic",name:"\u8FF7\u5BAE\u30AD\u30F3\u30B0\u30C0\u30E0 \u57FA\u672C\u30EB\u30FC\u30EB\u30D6\u30C3\u30AF",className:"MeikyuKingdomBasic",superClassName:"MeikyuKingdom",sortKey:"\u3081\u3044\u304D\u3086\u3046\u304D\u3093\u304F\u305F\u3080\u304D\u307B\u3093\u308B\u3046\u308B\u3075\u3064\u304F",locale:"ja_jp"},{id:"WitchQuest",name:"\u30A6\u30A3\u30C3\u30C1\u30AF\u30A8\u30B9\u30C8",className:"WitchQuest",superClassName:"Base",sortKey:"\u3046\u3044\u3064\u3061\u304F\u3048\u3059\u3068",locale:"ja_jp"},{id:"AlterRaise",name:"\u30A2\u30EB\u30C8\u30EC\u30A4\u30BA",className:"AlterRaise",superClassName:"Base",sortKey:"\u3042\u308B\u3068\u308C\u3044\u3059",locale:"ja_jp"},{id:"WorldOfDarkness",name:"\u30EF\u30FC\u30EB\u30C9\u30FB\u30AA\u30D6\u30FB\u30C0\u30FC\u30AF\u30CD\u30B9",className:"WorldOfDarkness",superClassName:"Base",sortKey:"\u308F\u3042\u308B\u3068\u304A\u3075\u305F\u3042\u304F\u306D\u3059",locale:"ja_jp"},{id:"GehennaAn",name:"\u30B2\u30D8\u30CA\u30FB\u30A2\u30CA\u30B9\u30BF\u30B7\u30B9",className:"GehennaAn",superClassName:"Base",sortKey:"\u3051\u3078\u306A\u3042\u306A\u3059\u305F\u3057\u3059",locale:"ja_jp"},{id:"GeishaGirlwithKatana",name:"\u30B2\u30A4\u30B7\u30E3\u30FB\u30AC\u30FC\u30EB\u30FB\u30A6\u30A3\u30BA\u30FB\u30AB\u30BF\u30CA",className:"GeishaGirlwithKatana",superClassName:"Base",sortKey:"\u3051\u3044\u3057\u3084\u304B\u3042\u308B\u3046\u3044\u3059\u304B\u305F\u306A",locale:"ja_jp"},{id:"Amadeus",name:"\u30A2\u30DE\u30C7\u30A6\u30B9",className:"Amadeus",superClassName:"Base",sortKey:"\u3042\u307E\u3066\u3046\u3059",locale:"ja_jp"},{id:"YankeeYogSothoth",name:"\u30E4\u30F3\u30AD\u30FC\uFF06\u30E8\u30B0\uFF1D\u30BD\u30C8\u30FC\u30B9",className:"YankeeYogSothoth",superClassName:"Base",sortKey:"\u3084\u3093\u304D\u3044\u3042\u3093\u3068\u3088\u304F\u305D\u3068\u304A\u3059",locale:"ja_jp"},{id:"YearZeroEngine",name:"YearZeroEngine",className:"YearZeroEngine",superClassName:"Base",sortKey:"\u3044\u3084\u3042\u305B\u308D\u3048\u3093\u3057\u3093",locale:"ja_jp"},{id:"ShinobiGami",name:"\u30B7\u30CE\u30D3\u30AC\u30DF",className:"ShinobiGami",superClassName:"Base",sortKey:"\u3057\u306E\u3072\u304B\u307F",locale:"ja_jp"},{id:"Amadeus:Korean",name:"\uC544\uB9C8\uB370\uC6B0\uC2A4",className:"Amadeus_Korean",superClassName:"Amadeus",sortKey:"\u56FD\u969B\u5316:Korean:\uC544\uB9C8\uB370\uC6B0\uC2A4",locale:"ko_kr"},{id:"GhostLive",name:"\u5B9F\u6CC1\u30B4\u30FC\u30B9\u30C8\u30E9\u30A4\u30F4",className:"GhostLive",superClassName:"Base",sortKey:"\u3057\u3064\u304D\u3088\u3046\u3053\u304A\u3059\u3068\u3089\u3044\u3075",locale:"ja_jp"},{id:"AngelGear",name:"\u30A8\u30F3\u30BC\u30EB\u30AE\u30A2 \u5929\u4F7F\u5927\u6226TRPG The 2nd Editon",className:"AngelGear",superClassName:"Base",sortKey:"\u3048\u3093\u305B\u308B\u304D\u30422",locale:"ja_jp"},{id:"GoblinSlayer",name:"\u30B4\u30D6\u30EA\u30F3\u30B9\u30EC\u30A4\u30E4\u30FCTRPG",className:"GoblinSlayer",superClassName:"Base",sortKey:"\u3053\u3075\u308A\u3093\u3059\u308C\u3044\u3084\u3042TRPG",locale:"ja_jp"},{id:"Shiranui",name:"\u4E0D\u77E5\u706B",className:"Shiranui",superClassName:"Base",sortKey:"\u3057\u3089\u306C\u3044",locale:"ja_jp"},{id:"AnimaAnimus",name:"\u30A2\u30CB\u30DE\u30A2\u30CB\u30E0\u30B9",className:"AnimaAnimus",superClassName:"Base",sortKey:"\u3042\u306B\u307E\u3042\u306B\u3080\u3059",locale:"ja_jp"},{id:"Yggdrasill",name:"\u92FC\u9244\u306E\u30E6\u30B0\u30C9\u30E9\u30B7\u30EB",className:"Yggdrasill",superClassName:"Base",sortKey:"\u3053\u3046\u3066\u3064\u306E\u3086\u304F\u3068\u3089\u3057\u308B",locale:"ja_jp"},{id:"Aoharubaan",name:"\u3042\u304A\u306F\u308B\u3070\u30FC\u3093\u3063",className:"Aoharubaan",superClassName:"Base",sortKey:"\u3042\u304A\u306F\u308B\u306F\u3042\u3093\u3064",locale:"ja_jp"},{id:"ShuumatsuKikou",name:"\u7D42\u672B\u7D00\u884C\uFF32\uFF30\uFF27",className:"ShuumatsuKikou",superClassName:"Base",sortKey:"\u3057\u3086\u3046\u307E\u3064\u304D\u3053\u3046",locale:"ja_jp"},{id:"Cthulhu7th:ChineseTraditional",name:"\u514B\u8607\u9B6F\u795E\u8A71\u7B2C7\u7248",className:"Cthulhu7th_ChineseTraditional",superClassName:"Base",sortKey:"\u56FD\u969B\u5316:Chinese Traditional:\u514B\u8607\u9B6F\u795E\u8A71\u7B2C7\u7248",locale:"ja_jp"},{id:"GoldenSkyStories",name:"\u3086\u3046\u3084\u3051\u3053\u3084\u3051",className:"GoldenSkyStories",superClassName:"Base",sortKey:"\u3086\u3046\u3084\u3051\u3053\u3084\u3051",locale:"ja_jp"},{id:"Skynauts",name:"\u6B6F\u8ECA\u306E\u5854\u306E\u63A2\u7A7A\u58EB\uFF08\u516D\u7573\u9593\u5E7B\u60F3\u7A7A\u9593\uFF09",className:"Skynauts",superClassName:"Base",sortKey:"\u306F\u304F\u308B\u307E\u306E\u3068\u3046\u306E\u3059\u304B\u3044\u306E\u304A\u3064",locale:"ja_jp"},{id:"Gorilla",name:"\u30B4\u30EA\u30E9TRPG",className:"Gorilla",superClassName:"Base",sortKey:"\u3053\u308A\u3089TRPG",locale:"ja_jp"},{id:"GranCrest",name:"\u30B0\u30E9\u30F3\u30AF\u30EC\u30B9\u30C8RPG",className:"GranCrest",superClassName:"Base",sortKey:"\u304F\u3089\u3093\u304F\u308C\u3059\u3068RPG",locale:"ja_jp"},{id:"Gundog",name:"\u30AC\u30F3\u30C9\u30C3\u30B0",className:"Gundog",superClassName:"Base",sortKey:"\u304B\u3093\u3068\u3064\u304F",locale:"ja_jp"},{id:"Arianrhod",name:"\u30A2\u30EA\u30A2\u30F3\u30ED\u30C3\u30C9RPG",className:"Arianrhod",superClassName:"Base",sortKey:"\u3042\u308A\u3042\u3093\u308D\u3064\u3068RPG",locale:"ja_jp"},{id:"Cthulhu7th:Korean",name:"\uD06C\uD234\uB8E8\uC758 \uBD80\uB984 7\uD310",className:"Cthulhu7th_Korean",superClassName:"Base",sortKey:"\u56FD\u969B\u5316:Korean:\uD06C\uD234\uB8E8\uC758 \uBD80\uB984 7\uD310",locale:"ja_jp"},{id:"CthulhuTech",name:"\u30AF\u30C8\u30A5\u30EB\u30D5\u30C6\u30C3\u30AF",className:"CthulhuTech",superClassName:"Base",sortKey:"\u304F\u3068\u3046\u308B\u3075\u3066\u3064\u304F",locale:"ja_jp"},{id:"ArsMagica",name:"\u30A2\u30EB\u30B9\u30DE\u30AE\u30AB",className:"ArsMagica",superClassName:"Base",sortKey:"\u3042\u308B\u3059\u307E\u304D\u304B",locale:"ja_jp"},{id:"GundogRevised",name:"\u30AC\u30F3\u30C9\u30C3\u30B0\u30FB\u30EA\u30F4\u30A1\u30A4\u30BA\u30C9",className:"GundogRevised",superClassName:"Base",sortKey:"\u304B\u3093\u3068\u3064\u304F\u308A\u3046\u3042\u3044\u3059\u3068",locale:"ja_jp"},{id:"GundogZero",name:"\u30AC\u30F3\u30C9\u30C3\u30B0\u30BC\u30ED",className:"GundogZero",superClassName:"Gundog",sortKey:"\u304B\u3093\u3068\u3064\u304F\u305B\u308D",locale:"ja_jp"},{id:"MetalHead",name:"\u30E1\u30BF\u30EB\u30D8\u30C3\u30C9",className:"MetalHead",superClassName:"Base",sortKey:"\u3081\u305F\u308B\u3078\u3064\u3068",locale:"ja_jp"},{id:"GURPS",name:"\u30AC\u30FC\u30D7\u30B9",className:"GURPS",superClassName:"Base",sortKey:"\u304B\u3042\u3075\u3059",locale:"ja_jp"},{id:"GurpsFW",name:"\u30AC\u30FC\u30D7\u30B9\u30D5\u30A3\u30EB\u30C8\u30A6\u30A3\u30BA",className:"GurpsFW",superClassName:"Base",sortKey:"\u304B\u3042\u3075\u3059\u3075\u3044\u308B\u3068\u3046\u3044\u3059",locale:"ja_jp"},{id:"AssaultEngine",name:"\u30A2\u30B5\u30EB\u30C8\u30A8\u30F3\u30B8\u30F3",className:"AssaultEngine",superClassName:"Base",sortKey:"\u3042\u3055\u308B\u3068\u3048\u3093\u3057\u3093",locale:"ja_jp"},{id:"MetalHeadExtream",name:"\u30E1\u30BF\u30EB\u30D8\u30C3\u30C9\u30A8\u30AF\u30B9\u30C8\u30EA\u30FC\u30E0",className:"MetalHeadExtream",superClassName:"Base",sortKey:"\u3081\u305F\u308B\u3078\u3064\u3068\u3048\u304F\u3059\u3068\u308A\u3044\u3080",locale:"ja_jp"},{id:"SkynautsBouken",name:"\u6B6F\u8ECA\u306E\u5854\u306E\u63A2\u7A7A\u58EB\uFF08\u5192\u967A\u4F01\u753B\u5C40\uFF09",className:"SkynautsBouken",superClassName:"Base",sortKey:"\u306F\u304F\u308B\u307E\u306E\u3068\u3046\u306E\u3059\u304B\u3044\u306E\u304A\u30642",locale:"ja_jp"},{id:"Cthulhu:ChineseTraditional",name:"\u514B\u8607\u9B6F\u795E\u8A71",className:"Cthulhu_ChineseTraditional",superClassName:"Cthulhu",sortKey:"\u56FD\u969B\u5316:Chinese Traditional:\u514B\u8607\u9B6F\u795E\u8A71",locale:"zh_hant"},{id:"Avandner",name:"\u9ED2\u7D62\u306E\u30A2\u30F4\u30A1\u30F3\u30C9\u30CA\u30FC",className:"Avandner",superClassName:"Base",sortKey:"\u3053\u3064\u3051\u3093\u306E\u3042\u3046\u3042\u3093\u3068\u306A\u3042",locale:"ja_jp"},{id:"Cthulhu:Korean",name:"\uD06C\uD234\uB8E8",className:"Cthulhu_Korean",superClassName:"Cthulhu",sortKey:"\u56FD\u969B\u5316:Korean:\uD06C\uD234\uB8E8",locale:"ko_kr"},{id:"Ayabito",name:"\u3042\u3084\u3073\u3068",className:"Ayabito",superClassName:"Base",sortKey:"\u3042\u3084\u3072\u3068",locale:"ja_jp"},{id:"CyberpunkRed",name:"\u30B5\u30A4\u30D0\u30FC\u30D1\u30F3\u30AFRED",className:"CyberpunkRed",superClassName:"Base",sortKey:"\u3055\u3044\u306F\u3042\u306F\u3093\u304F\u308C\u3064\u3068",locale:"ja_jp"},{id:"Cthulhu:SimplifiedChinese",name:"\u514B\u82CF\u9C81\u7684\u547C\u5524 \u7B2C\u516D\u7248",className:"Cthulhu_SimplifiedChinese",superClassName:"Cthulhu",sortKey:"\u56FD\u969B\u5316:Simplified Chinese:\u514B\u82CF\u9C81\u7684\u547C\u5524 \u7B2C\u516D\u7248",locale:"zh_hans"},{id:"ZettaiReido",name:"\u7D76\u5BFE\u96B7\u5974",className:"ZettaiReido",superClassName:"Base",sortKey:"\u305B\u3064\u305F\u3044\u308C\u3044\u3068",locale:"ja_jp"},{id:"Bakenokawa",name:"\u30D0\u30B1\u30CE\u30AB\u30EF",className:"Bakenokawa",superClassName:"Base",sortKey:"\u306F\u3051\u306E\u304B\u308F",locale:"ja_jp"},{id:"BBN",name:"BBNTRPG",className:"BBN",superClassName:"Base",sortKey:"\u3072\u3044\u3072\u3044\u3048\u306CTRPG",locale:"ja_jp"},{id:"HarnMaster",name:"\u30CF\u30FC\u30F3\u30DE\u30B9\u30BF\u30FC",className:"HarnMaster",superClassName:"Base",sortKey:"\u306F\u3042\u3093\u307E\u3059\u305F\u3042",locale:"ja_jp"},{id:"StarryDolls",name:"\u30B9\u30BF\u30EA\u30A3\u30C9\u30FC\u30EB",className:"StarryDolls",superClassName:"Base",sortKey:"\u3059\u305F\u308A\u3044\u3068\u304A\u308B",locale:"ja_jp"},{id:"SteamPunkers",name:"\u30B9\u30C1\u30FC\u30E0\u30D1\u30F3\u30AB\u30FC\u30BA",className:"SteamPunkers",superClassName:"Base",sortKey:"\u3059\u3061\u3044\u3080\u306F\u3093\u304B\u3042\u3059",locale:"ja_jp"},{id:"BadLife",name:"\u30D0\u30C3\u30C9\u30E9\u30A4\u30D5",className:"BadLife",superClassName:"Base",sortKey:"\u306F\u3064\u3068\u3089\u3044\u3075",locale:"ja_jp"},{id:"HatsuneMiku",name:"\u521D\u97F3\u30DF\u30AFTRPG \u30B3\u30B3\u30ED\u30C0\u30F3\u30B8\u30E7\u30F3",className:"HatsuneMiku",superClassName:"Base",sortKey:"\u306F\u3064\u306D\u307F\u304FTRPG\u3053\u3053\u308D\u305F\u3093\u3057\u3088\u3093",locale:"ja_jp"},{id:"StellarKnights",name:"\u9280\u5263\u306E\u30B9\u30C6\u30E9\u30CA\u30A4\u30C4",className:"StellarKnights",superClassName:"Base",sortKey:"\u304D\u3093\u3051\u3093\u306E\u3059\u3066\u3089\u306A\u3044\u3064",locale:"ja_jp"},{id:"StellarKnights:Korean",name:"\uC740\uAC80\uC758 \uC2A4\uD154\uB77C\uB098\uC774\uCE20",className:"StellarKnights_Korean",superClassName:"StellarKnights",sortKey:"\u56FD\u969B\u5316:Korean:\uC740\uAC80\uC758 \uC2A4\uD154\uB77C\uB098\uC774\uCE20",locale:"ko_kr"},{id:"BarnaKronika",name:"\u30D0\u30EB\u30CA\u30FB\u30AF\u30ED\u30CB\u30AB",className:"BarnaKronika",superClassName:"Base",sortKey:"\u306F\u308B\u306A\u304F\u308D\u306B\u304B",locale:"ja_jp"},{id:"Hieizan",name:"\u6BD4\u53E1\u5C71\u708E\u4E0A",className:"Hieizan",superClassName:"Base",sortKey:"\u3072\u3048\u3044\u3055\u3093\u3048\u3093\u3057\u3088\u3046",locale:"ja_jp"},{id:"HouraiGakuen",name:"\u84EC\u83B1\u5B66\u5712\u306E\u5192\u967A!!",className:"HouraiGakuen",superClassName:"Base",sortKey:"\u307B\u3046\u3089\u3044\u304B\u304F\u3048\u3093\u306E\u307B\u3046\u3051\u3093",locale:"ja_jp"},{id:"MonotoneMuseum",name:"\u30E2\u30CE\u30C8\u30FC\u30F3\u30DF\u30E5\u30FC\u30B8\u30A2\u30E0RPG",className:"MonotoneMuseum",superClassName:"Base",sortKey:"\u3082\u306E\u3068\u304A\u3093\u307F\u3086\u3046\u3057\u3042\u3080RPG",locale:"ja_jp"},{id:"DarkBlaze",name:"\u30C0\u30FC\u30AF\u30D6\u30EC\u30A4\u30BA",className:"DarkBlaze",superClassName:"Base",sortKey:"\u305F\u3042\u304F\u3075\u308C\u3044\u3059",locale:"ja_jp"},{id:"MonotoneMuseum:Korean",name:"\uBAA8\uB178\uD1A4 \uBBA4\uC9C0\uC5C4",className:"MonotoneMuseum_Korean",superClassName:"MonotoneMuseum",sortKey:"\u56FD\u969B\u5316:Korean:\uBAA8\uB178\uD1A4 \uBBA4\uC9C0\uC5C4",locale:"ko_kr"},{id:"Nechronica",name:"\u30CD\u30AF\u30ED\u30CB\u30AB",className:"Nechronica",superClassName:"Base",sortKey:"\u306D\u304F\u308D\u306B\u304B",locale:"ja_jp"},{id:"MetallicGuardian",name:"\u30E1\u30BF\u30EA\u30C3\u30AF\u30AC\u30FC\u30C7\u30A3\u30A2\u30F3RPG",className:"MetallicGuardian",superClassName:"SRS",sortKey:"\u3081\u305F\u308A\u3064\u304F\u304B\u3042\u3066\u3044\u3042\u3093RPG",locale:"ja_jp"},{id:"StellarLife",name:"\u30B9\u30C6\u30E9\u30FC\u30E9\u30A4\u30D5TRPG",className:"StellarLife",superClassName:"Base",sortKey:"\u3059\u3066\u3089\u3042\u3089\u3044\u3075TRPG",locale:"ja_jp"},{id:"StrangerOfSwordCity",name:"\u5263\u306E\u8857\u306E\u7570\u90A6\u4EBATRPG",className:"StrangerOfSwordCity",superClassName:"Base",sortKey:"\u3064\u308B\u304D\u306E\u307E\u3061\u306E\u3044\u307B\u3046\u3057\u3093TRPG",locale:"ja_jp"},{id:"Nechronica:Korean",name:"\uB124\uD06C\uB85C\uB2C8\uCE74",className:"Nechronica_Korean",superClassName:"Nechronica",sortKey:"\u56FD\u969B\u5316:Korean:\uB124\uD06C\uB85C\uB2C8\uCE74",locale:"ko_kr"},{id:"NeverCloud",name:"\u30CD\u30D0\u30FC\u30AF\u30E9\u30A6\u30C9TRPG",className:"NeverCloud",superClassName:"Base",sortKey:"\u306D\u306F\u3042\u304F\u3089\u3046\u3068TRPG",locale:"ja_jp"},{id:"StratoShout:Korean",name:"\uC2A4\uD2B8\uB77C\uD1A0 \uC0E4\uC6B0\uD2B8",className:"StratoShout_Korean",superClassName:"StratoShout",sortKey:"\u56FD\u969B\u5316:Korean:\uC2A4\uD2B8\uB77C\uD1A0 \uC0E4\uC6B0\uD2B8",locale:"ko_kr"},{id:"StratoShout",name:"\u30B9\u30C8\u30E9\u30C8\u30B7\u30E3\u30A6\u30C8",className:"StratoShout",superClassName:"Base",sortKey:"\u3059\u3068\u3089\u3068\u3057\u3084\u3046\u3068",locale:"ja_jp"},{id:"BattleTech",name:"\u30D0\u30C8\u30EB\u30C6\u30C3\u30AF",className:"BattleTech",superClassName:"Base",sortKey:"\u306F\u3068\u308B\u3066\u3064\u304F",locale:"ja_jp"},{id:"DarkDaysDrive",name:"\u30C0\u30FC\u30AF\u30C7\u30A4\u30BA\u30C9\u30E9\u30A4\u30D6",className:"DarkDaysDrive",superClassName:"Base",sortKey:"\u305F\u3042\u304F\u3066\u3044\u3059\u3068\u3089\u3044\u3075",locale:"ja_jp"},{id:"NightWizard",name:"\u30CA\u30A4\u30C8\u30A6\u30A3\u30B6\u30FC\u30C9 The 2nd Edition",className:"NightWizard",superClassName:"Base",sortKey:"\u306A\u3044\u3068\u3046\u3044\u3055\u3042\u30682",locale:"ja_jp"},{id:"DarkSouls",name:"\u30C0\u30FC\u30AF\u30BD\u30A6\u30EBTRPG",className:"DarkSouls",superClassName:"Base",sortKey:"\u305F\u3042\u304F\u305D\u3046\u308BTRPG",locale:"ja_jp"},{id:"SwordWorld",name:"\u30BD\u30FC\u30C9\u30FB\u30EF\u30FC\u30EB\u30C9RPG",className:"SwordWorld",superClassName:"Base",sortKey:"\u305D\u304A\u3068\u308F\u3042\u308B\u3068",locale:"ja_jp"},{id:"Strave",name:"\u78A7\u7A7A\u306E\u30B9\u30C8\u30EC\u30A4\u30F4",className:"Strave",superClassName:"Base",sortKey:"\u3078\u304D\u304F\u3046\u306E\u3059\u3068\u308C\u3044\u3075",locale:"ja_jp"},{id:"DeadlineHeroes",name:"\u30C7\u30C3\u30C9\u30E9\u30A4\u30F3\u30D2\u30FC\u30ED\u30FC\u30BARPG",className:"DeadlineHeroes",superClassName:"Base",sortKey:"\u3066\u3064\u3068\u3089\u3044\u3093\u3072\u3044\u308D\u304A\u3059RPG",locale:"ja_jp"},{id:"HuntersMoon",name:"\u30CF\u30F3\u30BF\u30FC\u30BA\u30FB\u30E0\u30FC\u30F3",className:"HuntersMoon",superClassName:"Base",sortKey:"\u306F\u3093\u305F\u3042\u3059\u3080\u3046\u3093",locale:"ja_jp"},{id:"HunterTheReckoning5th",name:"Hunter: The Reckoning 5th Edition",className:"HunterTheReckoning5th",superClassName:"Base",sortKey:"\u306F\u3093\u3042\u305F\u3055\u308C\u3053\u306B\u3093\u304F5",locale:"ja_jp"},{id:"NightWizard3rd",name:"\u30CA\u30A4\u30C8\u30A6\u30A3\u30B6\u30FC\u30C9 The 3rd Edition",className:"NightWizard3rd",superClassName:"NightWizard",sortKey:"\u306A\u3044\u3068\u3046\u3044\u3055\u3042\u30683",locale:"ja_jp"},{id:"NightmareHunterDeep",name:"\u30CA\u30A4\u30C8\u30E1\u30A2\u30CF\u30F3\u30BF\u30FC=\u30C7\u30A3\u30FC\u30D7",className:"NightmareHunterDeep",superClassName:"Base",sortKey:"\u306A\u3044\u3068\u3081\u3042\u306F\u3093\u305F\u3042\u3066\u3044\u3044\u3075",locale:"ja_jp"},{id:"NinjaSlayer",name:"\u30CB\u30F3\u30B8\u30E3\u30B9\u30EC\u30A4\u30E4\u30FCTRPG",className:"NinjaSlayer",superClassName:"Base",sortKey:"\u306B\u3093\u3057\u3084\u3059\u308C\u3044\u3084\u3042RPG",locale:"ja_jp"},{id:"IfIfIf",name:"\u30A4\u30D5\u30FB\u30A4\u30D5\u30FB\u30A4\u30D5",className:"IfIfIf",superClassName:"Base",sortKey:"\u3044\u3075\u3044\u3075\u3044\u3075",locale:"ja_jp"},{id:"DemonParasite",name:"\u30C7\u30E2\u30F3\u30D1\u30E9\u30B5\u30A4\u30C8",className:"DemonParasite",superClassName:"Base",sortKey:"\u3066\u3082\u3093\u306F\u3089\u3055\u3044\u3068",locale:"ja_jp"},{id:"DesperateRun",name:"Desperate Run TRPG",className:"DesperateRun",superClassName:"Base",sortKey:"\u3066\u3059\u3078\u308C\u3044\u3068\u3089\u3093TRPG",locale:"ja_jp"},{id:"NjslyrBattle",name:"NJSLYRBATTLE",className:"NjslyrBattle",superClassName:"Base",sortKey:"\u306B\u3093\u3057\u3084\u3059\u308C\u3044\u3084\u3042\u306F\u3068\u308B",locale:"ja_jp"},{id:"DetatokoSaga",name:"\u3067\u305F\u3068\u3053\u30B5\u30FC\u30AC",className:"DetatokoSaga",superClassName:"Base",sortKey:"\u3066\u305F\u3068\u3053\u3055\u3042\u304B",locale:"ja_jp"},{id:"NobunagasBlackCastle",name:"\u4FE1\u9577\u306E\u9ED2\u3044\u57CE",className:"NobunagasBlackCastle",superClassName:"Base",sortKey:"\u306E\u3075\u306A\u304B\u306E\u304F\u308D\u3044\u3057\u308D",locale:"ja_jp"},{id:"BeastBindTrinity",name:"\u30D3\u30FC\u30B9\u30C8\u30D0\u30A4\u30F3\u30C9 \u30C8\u30EA\u30CB\u30C6\u30A3",className:"BeastBindTrinity",superClassName:"Base",sortKey:"\u3072\u3044\u3059\u3068\u306F\u3044\u3093\u3068\u3068\u308A\u306B\u3066\u3044",locale:"ja_jp"},{id:"Illusio",name:"\u6643\u5929\u306E\u30A4\u30EB\u30FC\u30B8\u30AA",className:"Illusio",superClassName:"Base",sortKey:"\u3053\u3046\u3066\u3093\u306E\u3044\u308B\u3046\u3057\u304A",locale:"ja_jp"},{id:"SwordWorld2.0",name:"\u30BD\u30FC\u30C9\u30FB\u30EF\u30FC\u30EB\u30C92.0",className:"SwordWorld2_0",superClassName:"SwordWorld",sortKey:"\u305D\u304A\u3068\u308F\u3042\u308B\u30682.0",locale:"ja_jp"},{id:"DetatokoSaga:Korean",name:"\uB370\uD0C0\uD1A0\uCF54 \uC0AC\uAC00",className:"DetatokoSaga_Korean",superClassName:"DetatokoSaga",sortKey:"\u56FD\u969B\u5316:Korean:\uB370\uD0C0\uD1A0\uCF54 \uC0AC\uAC00",locale:"ko_kr"},{id:"DiceOfTheDead",name:"\u30C0\u30A4\u30B9\u30FB\u30AA\u30D6\u30FB\u30B6\u30FB\u30C7\u30C3\u30C9",className:"DiceOfTheDead",superClassName:"Base",sortKey:"\u305F\u3044\u3059\u304A\u3075\u3055\u3066\u3064\u3068",locale:"ja_jp"},{id:"NSSQ",name:"SRS\u3058\u3083\u306A\u3044\u4E16\u754C\u6A39\u306E\u8FF7\u5BAETRPG",className:"NSSQ",superClassName:"Base",sortKey:"\u3048\u3059\u3042\u3042\u308B\u3048\u3059\u3057\u3084\u306A\u3044\u305B\u304B\u3044\u3057\u3086\u306E\u3081\u3044\u304D\u3086\u3046TRPG",locale:"ja_jp"},{id:"InfiniteBabeL",name:"\u5C11\u5E74\u306E\u305F\u3081\u306E\u5C11\u5973\u5C55\u721B\u4F1A\u7570\u805E Infinite BabeL",className:"InfiniteBabeL",superClassName:"ShoujoTenrankai",sortKey:"\u3057\u3088\u3046\u306D\u3093\u306E\u305F\u3081\u306E\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304B\u3044\u3044\u3075\u3093\u3044\u3093\u3075\u3044\u306B\u3064\u3068\u306F\u3078\u308B",locale:"ja_jp"},{id:"ShoujoTenrankai",name:"\u5C11\u5973\u5C55\u721B\u4F1ATRPG",className:"ShoujoTenrankai",superClassName:"Base",sortKey:"\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304B\u3044TRPG",locale:"ja_jp"},{id:"DoubleCross",name:"\u30C0\u30D6\u30EB\u30AF\u30ED\u30B92nd,3rd",className:"DoubleCross",superClassName:"Base",sortKey:"\u305F\u3075\u308B\u304F\u308D\u30592",locale:"ja_jp"},{id:"InfiniteFantasia",name:"\u7121\u9650\u306E\u30D5\u30A1\u30F3\u30BF\u30B8\u30A2",className:"InfiniteFantasia",superClassName:"Base",sortKey:"\u3080\u3051\u3093\u306E\u3075\u3042\u3093\u305F\u3057\u3042",locale:"ja_jp"},{id:"Insane",name:"\u30A4\u30F3\u30BB\u30A4\u30F3",className:"Insane",superClassName:"Base",sortKey:"\u3044\u3093\u305B\u3044\u3093",locale:"ja_jp"},{id:"OneWayHeroics",name:"\u7247\u9053\u52C7\u8005TRPG",className:"OneWayHeroics",superClassName:"Base",sortKey:"\u304B\u305F\u307F\u3061\u3086\u3046\u3057\u3084TRPG",locale:"ja_jp"},{id:"BeginningIdol",name:"\u30D3\u30AE\u30CB\u30F3\u30B0\u30A2\u30A4\u30C9\u30EB",className:"BeginningIdol",superClassName:"Base",sortKey:"\u3072\u304D\u306B\u3093\u304F\u3042\u3044\u3068\u308B",locale:"ja_jp"},{id:"Insane:Korean",name:"\uC778\uC138\uC778",className:"Insane_Korean",superClassName:"Insane",sortKey:"\u56FD\u969B\u5316:Korean:\uC778\uC138\uC778",locale:"ko_kr"},{id:"Irisbane",name:"\u77B3\u9038\u3089\u3055\u306C\u30A4\u30EA\u30B9\u30D9\u30A4\u30F3",className:"Irisbane",superClassName:"Base",sortKey:"\u3072\u3068\u307F\u305D\u3089\u3055\u306C\u3044\u308A\u3059\u3078\u3044\u3093",locale:"ja_jp"},{id:"SwordWorld:SimplifiedChinese",name:"\u5251\u4E16\u754C",className:"SwordWorld_SimplifiedChinese",superClassName:"SwordWorld",sortKey:"\u56FD\u969B\u5316:Simplified Chinese:\u5251\u4E16\u754C",locale:"zh_hans"},{id:"SwordWorld2.0:SimplifiedChinese",name:"\u5251\u4E16\u754C2.0",className:"SwordWorld2_0_SimplifiedChinese",superClassName:"SwordWorld2_0",sortKey:"\u56FD\u969B\u5316:Simplified Chinese:\u5251\u4E16\u754C2.0",locale:"zh_hans"},{id:"SwordWorld2.5:SimplifiedChinese",name:"\u5251\u4E16\u754C2.5",className:"SwordWorld2_5_SimplifiedChinese",superClassName:"SwordWorld2_5",sortKey:"\u56FD\u969B\u5316:Simplified Chinese:\u5251\u4E16\u754C2.5",locale:"zh_hans"},{id:"Nuekagami",name:"\u9D7A\u93E1",className:"Nuekagami",superClassName:"Base",sortKey:"\u306C\u3048\u304B\u304B\u307F",locale:"ja_jp"},{id:"TalesFromTheLoop",name:"\u30B6\u30FB\u30EB\u30FC\u30D7TRPG",className:"TalesFromTheLoop",superClassName:"Base",sortKey:"\u3055\u308B\u3046\u3075TRPG",locale:"ja_jp"},{id:"SwordWorld2.5",name:"\u30BD\u30FC\u30C9\u30FB\u30EF\u30FC\u30EB\u30C92.5",className:"SwordWorld2_5",superClassName:"SwordWorld2_0",sortKey:"\u305D\u304A\u3068\u308F\u3042\u308B\u30682.5",locale:"ja_jp"},{id:"DiceBot",name:"DiceBot",className:"DiceBot",superClassName:"Base",sortKey:"*\u305F\u3044\u3059\u307B\u3064\u3068",locale:"ja_jp"},{id:"IthaWenUa",name:"\u30A4\u30B5\u30FC\u30FB\u30A6\u30A7\u30F3\uFF1D\u30A2\u30FC",className:"IthaWenUa",superClassName:"Base",sortKey:"\u3044\u3055\u3042\u3046\u3048\u3093\u3042\u3042",locale:"ja_jp"},{id:"JamesBond",name:"\u30B8\u30A7\u30FC\u30E0\u30BA\u30FB\u30DC\u30F3\u30C9007",className:"JamesBond",superClassName:"Base",sortKey:"\u3057\u3048\u3048\u3080\u3059\u307B\u3093\u3068007",locale:"ja_jp"},{id:"JuinKansen",name:"\u546A\u5370\u611F\u67D3",className:"JuinKansen",superClassName:"Base",sortKey:"\u3057\u3086\u3044\u3093\u304B\u3093\u305B\u3093",locale:"ja_jp"},{id:"Kamigakari",name:"\u795E\u6211\u72E9",className:"Kamigakari",superClassName:"Base",sortKey:"\u304B\u307F\u304B\u304B\u308A",locale:"ja_jp"},{id:"DoubleCross:Korean",name:"\uB354\uBE14\uD06C\uB85C\uC2A42nd,3rd",className:"DoubleCross_Korean",superClassName:"DoubleCross",sortKey:"\u56FD\u969B\u5316:Korean:\uB354\uBE14\uD06C\uB85C\uC2A4",locale:"ko_kr"},{id:"Dracurouge",name:"\u30C9\u30E9\u30AF\u30EB\u30FC\u30B8\u30E5",className:"Dracurouge",superClassName:"Base",sortKey:"\u3068\u3089\u304F\u308B\u3046\u3057\u3086",locale:"ja_jp"},{id:"TokyoGhostResearch",name:"\u6771\u4EAC\u30B4\u30FC\u30B9\u30C8\u30EA\u30B5\u30FC\u30C1",className:"TokyoGhostResearch",superClassName:"Base",sortKey:"\u3068\u3046\u304D\u3088\u3046\u3053\u304A\u3059\u3068\u308A\u3055\u3042\u3061",locale:"ja_jp"},{id:"JekyllAndHyde",name:"\u30B8\u30AD\u30EB\u3068\u30CF\u30A4\u30C9\u3068\u30B0\u30EA\u30C8\u30B0\u30E9",className:"JekyllAndHyde",superClassName:"DesperateRun",sortKey:"\u3057\u304D\u308B\u3068\u306F\u3044\u3068\u3068\u304F\u308A\u3068\u304F\u3089",locale:"ja_jp"},{id:"TherapieSein",name:"\u30BB\u30E9\u30D5\u30A3\u30B6\u30A4\u30F3",className:"TherapieSein",superClassName:"Base",sortKey:"\u305B\u3089\u3075\u3044\u3055\u3044\u3093",locale:"ja_jp"},{id:"TokumeiTenkousei",name:"\u7279\u547D\u8EE2\u653B\u751F",className:"TokumeiTenkousei",superClassName:"Base",sortKey:"\u3068\u304F\u3081\u3044\u3066\u3093\u3053\u3046\u305B\u3044",locale:"ja_jp"},{id:"OracleEngine",name:"\u30AA\u30E9\u30AF\u30EB\u30A8\u30F3\u30B8\u30F3",className:"OracleEngine",superClassName:"Base",sortKey:"\u304A\u3089\u304F\u308B\u3048\u3093\u3057\u3093",locale:"ja_jp"},{id:"Torg",name:"\u30C8\u30FC\u30B0",className:"Torg",superClassName:"Base",sortKey:"\u3068\u304A\u304F",locale:"ja_jp"},{id:"Kamigakari:Korean",name:"\uCE74\uBBF8\uAC00\uCE74\uB9AC",className:"Kamigakari_Korean",superClassName:"Kamigakari",sortKey:"\u56FD\u969B\u5316:Korean:\uCE74\uBBF8\uAC00\uCE74\uB9AC",locale:"ko_kr"},{id:"KanColle",name:"\u8266\u3053\u308CRPG",className:"KanColle",superClassName:"Base",sortKey:"\u304B\u3093\u3053\u308CRPG",locale:"ja_jp"},{id:"TokyoNova",name:"\u30C8\u30FC\u30AD\u30E7\u30FCN\u25CEVA",className:"TokyoNova",superClassName:"Base",sortKey:"\u3068\u304A\u304D\u3088\u304A\u306E\u306F",locale:"ja_jp"},{id:"Karukami",name:"\u30AB\u30EB\u30AB\u30DF",className:"Karukami",superClassName:"Base",sortKey:"\u304B\u308B\u304B\u307F",locale:"ja_jp"},{id:"KemonoNoMori",name:"\u7378\u30CE\u68EE",className:"KemonoNoMori",superClassName:"Base",sortKey:"\u3051\u3082\u306E\u306E\u3082\u308A",locale:"ja_jp"},{id:"OrgaRain",name:"\u5728\u308A\u3066\u904D\u304F\u30AA\u30EB\u30AC\u30EC\u30A4\u30F3",className:"OrgaRain",superClassName:"Base",sortKey:"\u3042\u308A\u3066\u3042\u307E\u306D\u304F\u304A\u308B\u304B\u308C\u3044\u3093",locale:"ja_jp"},{id:"Oukahoushin3rd",name:"\u592E\u83EF\u5C01\u795ERPG \u7B2C\u4E09\u7248",className:"Oukahoushin3rd",superClassName:"Base",sortKey:"\u304A\u3046\u304B\u307B\u3046\u3057\u3093RPG3",locale:"ja_jp"},{id:"Paradiso",name:"\u30C1\u30A7\u30EC\u30B9\u30C6\u8272\u306E\u30D1\u30E9\u30C7\u30A3\u30FC\u30BE",className:"Paradiso",superClassName:"Base",sortKey:"\u3061\u3048\u308C\u3059\u3066\u3044\u308D\u306E\u306F\u3089\u3066\u3044\u3044\u305D",locale:"ja_jp"},{id:"KillDeathBusiness",name:"\u30AD\u30EB\u30C7\u30B9\u30D3\u30B8\u30CD\u30B9",className:"KillDeathBusiness",superClassName:"Base",sortKey:"\u304D\u308B\u3066\u3059\u3072\u3057\u306D\u3059",locale:"ja_jp"},{id:"Dracurouge:Korean",name:"\uB4DC\uB77C\uD06C\uB8E8\uC8FC",className:"Dracurouge_Korean",superClassName:"Dracurouge",sortKey:"\u56FD\u969B\u5316:Korean:\uB4DC\uB77C\uD06C\uB8E8\uC8FC",locale:"ko_kr"},{id:"DungeonsAndDragons",name:"\u30C0\u30F3\u30B8\u30E7\u30F3\u30BA\uFF06\u30C9\u30E9\u30B4\u30F3\u30BA",className:"DungeonsAndDragons",superClassName:"Base",sortKey:"\u305F\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u3059",locale:"ja_jp"},{id:"DungeonsAndDragons5",name:"\u30C0\u30F3\u30B8\u30E7\u30F3\u30BA\uFF06\u30C9\u30E9\u30B4\u30F3\u30BA\u7B2C5\u7248",className:"DungeonsAndDragons5",superClassName:"Base",sortKey:"\u305F\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u30595",locale:"ja_jp"},{id:"Torg1.5",name:"\u30C8\u30FC\u30B01.5\u7248",className:"Torg1_5",superClassName:"Torg",sortKey:"\u3068\u304A\u304F1.5",locale:"ja_jp"},{id:"TorgEternity",name:"\u30C8\u30FC\u30B0 \u30A8\u30BF\u30CB\u30C6\u30A3",className:"TorgEternity",superClassName:"Base",sortKey:"\u3068\u304A\u304F\u3048\u305F\u306B\u3066\u3044",locale:"ja_jp"},{id:"EarthDawn",name:"\u30A2\u30FC\u30B9\u30C9\u30FC\u30F3",className:"EarthDawn",superClassName:"Base",sortKey:"\u3042\u3042\u3059\u3068\u304A\u3093",locale:"ja_jp"},{id:"Paranoia",name:"\u30D1\u30E9\u30CE\u30A4\u30A2",className:"Paranoia",superClassName:"Base",sortKey:"\u306F\u3089\u306E\u3044\u3042",locale:"ja_jp"},{id:"ParanoiaRebooted",name:"\u30D1\u30E9\u30CE\u30A4\u30A2 \u30EA\u30D6\u30FC\u30C6\u30C3\u30C9",className:"ParanoiaRebooted",superClassName:"Base",sortKey:"\u306F\u3089\u306E\u3044\u3042\u308A\u3075\u3046\u3066\u3064\u3068",locale:"ja_jp"},{id:"ParasiteBlood",name:"\u30D1\u30E9\u30B5\u30A4\u30C8\u30D6\u30E9\u30C3\u30C9RPG",className:"ParasiteBlood",superClassName:"DemonParasite",sortKey:"\u306F\u3089\u3055\u3044\u3068\u3075\u3089\u3064\u3068RPG",locale:"ja_jp"},{id:"KillDeathBusiness:Korean",name:"Kill Death Business (\uD55C\uAD6D\uC5B4)",className:"KillDeathBusiness_Korean",superClassName:"KillDeathBusiness",sortKey:"\u56FD\u969B\u5316:Korean:Kill Death Business",locale:"ko_kr"},{id:"KurayamiCrying",name:"\u30AF\u30E9\u30E4\u30DF\u30AF\u30E9\u30A4\u30F3",className:"KurayamiCrying",superClassName:"Base",sortKey:"\u304F\u3089\u3084\u307F\u304F\u3089\u3044\u3093",locale:"ja_jp"},{id:"Peekaboo",name:"\u30D4\u30FC\u30AB\u30FC\u30D6\u30FC",className:"Peekaboo",superClassName:"Base",sortKey:"\u3072\u3044\u304B\u3042\u3075\u3046",locale:"ja_jp"},{id:"Kutulu",name:"Kutulu",className:"Kutulu",superClassName:"Base",sortKey:"\u304F\u3068\u3046\u308B\u3046",locale:"ja_jp"},{id:"Pathfinder",name:"Pathfinder",className:"Pathfinder",superClassName:"DungeonsAndDragons",sortKey:"\u306F\u3059\u3075\u3042\u3044\u3093\u305F\u3042",locale:"ja_jp"},{id:"PersonaO",name:"\u30DA\u30EB\u30BD\u30CATRPG-O",className:"PersonaO",superClassName:"Base",sortKey:"\u3078\u308B\u305D\u306ATRPGO",locale:"ja_jp"},{id:"Pendragon",name:"\u30DA\u30F3\u30C9\u30E9\u30B4\u30F3",className:"Pendragon",superClassName:"Base",sortKey:"\u3078\u3093\u3068\u3089\u3053\u3093",locale:"ja_jp"},{id:"LiveraDoll",name:"\u7D2B\u7E1E\u306E\u30EA\u30F4\u30E9\u30C9\u30FC\u30EB",className:"LiveraDoll",superClassName:"Base",sortKey:"\u3057\u3057\u307E\u306E\u308A\u3046\u3089\u3068\u304A\u308B",locale:"ja_jp"},{id:"PhantasmAdventure",name:"\u30D5\u30A1\u30F3\u30BF\u30BA\u30E0\u30FB\u30A2\u30C9\u30D9\u30F3\u30C1\u30E3\u30FC",className:"PhantasmAdventure",superClassName:"Base",sortKey:"\u3075\u3042\u3093\u305F\u3059\u3080\u3042\u3068\u3078\u3093\u3061\u3084\u3042",locale:"ja_jp"},{id:"Postman",name:"\u58CA\u308C\u305F\u4E16\u754C\u306E\u30DD\u30B9\u30C8\u30DE\u30F3",className:"Postman",superClassName:"Base",sortKey:"\u3053\u308F\u308C\u305F\u305B\u304B\u3044\u306E\u307B\u3059\u3068\u307E\u3093",locale:"ja_jp"},{id:"LogHorizon",name:"\u30ED\u30B0\u30FB\u30DB\u30E9\u30A4\u30BA\u30F3TRPG",className:"LogHorizon",superClassName:"Base",sortKey:"\u308D\u304F\u307B\u3089\u3044\u3059\u3093TRPG",locale:"ja_jp"},{id:"EarthDawn3",name:"\u30A2\u30FC\u30B9\u30C9\u30FC\u30F33\u7248",className:"EarthDawn3",superClassName:"EarthDawn",sortKey:"\u3042\u3042\u3059\u3068\u304A\u30933",locale:"ja_jp"},{id:"BeginningIdol:Korean",name:"\uBE44\uAE30\uB2DD \uC544\uC774\uB3CC",className:"BeginningIdol_Korean",superClassName:"BeginningIdol",sortKey:"\u56FD\u969B\u5316:Korean:\uBE44\uAE30\uB2DD \uC544\uC774\uB3CC",locale:"ko_kr"},{id:"BeginningIdol2022",name:"\u30D3\u30AE\u30CB\u30F3\u30B0\u30A2\u30A4\u30C9\u30EB\uFF082022\u5E74\u6539\u8A02\u7248\uFF09",className:"BeginningIdol2022",superClassName:"Base",sortKey:"\u3072\u304D\u306B\u3093\u304F\u3042\u3044\u3068\u308B2022",locale:"ja_jp"}]}});var sr=pe((jt,Kr)=>{Kr.exports={i18nList:[{baseClassName:"MagicaLogia",locales:["ja_jp","ko_kr","zh_hans"]},{baseClassName:"Fiasco",locales:["ja_jp","ko_kr"]},{baseClassName:"SwordWorld2_5",locales:["ja_jp","zh_hans"]},{baseClassName:"Nechronica",locales:["ja_jp","ko_kr"]},{baseClassName:"Dracurouge",locales:["ja_jp","ko_kr"]},{baseClassName:"StratoShout",locales:["ja_jp","ko_kr"]},{baseClassName:"Amadeus",locales:["ja_jp","ko_kr"]},{baseClassName:"Emoklore",locales:["ja_jp"]},{baseClassName:"DetatokoSaga",locales:["ja_jp","ko_kr"]},{baseClassName:"Kamigakari",locales:["ja_jp","ko_kr"]},{baseClassName:"Arianrhod",locales:["ja_jp"]},{baseClassName:"StellarKnights",locales:["ja_jp","ko_kr"]},{baseClassName:"FutariSousa",locales:["ja_jp","ko_kr"]},{baseClassName:"DoubleCross",locales:["ja_jp","ko_kr"]},{baseClassName:"Cthulhu",locales:["ja_jp","ko_kr","zh_hant","zh_hans"]},{baseClassName:"BeginningIdol",locales:["ja_jp","ko_kr"]},{baseClassName:"MonotoneMuseum",locales:["ja_jp","ko_kr"]},{baseClassName:"KillDeathBusiness",locales:["ja_jp","ko_kr"]},{baseClassName:"Insane",locales:["ja_jp","ko_kr"]},{baseClassName:"SwordWorld",locales:["ja_jp","zh_hans"]},{baseClassName:"LogHorizon",locales:["ja_jp","ko_kr"]},{baseClassName:"SwordWorld2_0",locales:["ja_jp","zh_hans"]}]}});var Le=pe(ye=>{"use strict";var Mr=ye&&ye.__extends||function(){var e=function(C,z){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(g[M]=y[M])},e(C,z)};return function(C,z){e(C,z);function g(){this.constructor=C}C.prototype=z===null?Object.create(z):(g.prototype=z.prototype,new g)}}(),Fr=ye&&ye.__awaiter||function(e,C,z,g){function y(M){return M instanceof z?M:new z(function(D){D(M)})}return new(z||(z=Promise))(function(M,D){function X(U){try{b(g.next(U))}catch(F){D(F)}}function j(U){try{b(g.throw(U))}catch(F){D(F)}}function b(U){U.done?M(U.value):y(U.value).then(X,j)}b((g=g.apply(e,C||[])).next())})},Lr=ye&&ye.__generator||function(e,C){var z={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},g,y,M,D;return D={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function X(b){return function(U){return j([b,U])}}function j(b){if(g)throw new TypeError("Generator is already executing.");for(;z;)try{if(g=1,y&&(M=b[0]&2?y.return:b[0]?y.throw||((M=y.return)&&M.call(y),0):y.next)&&!(M=M.call(y,b[1])).done)return M;switch(y=0,M&&(b=[b[0]&2,M.value]),b[0]){case 0:case 1:M=b;break;case 4:return z.label++,{value:b[1],done:!1};case 5:z.label++,y=b[1],b=[0];continue;case 7:b=z.ops.pop(),z.trys.pop();continue;default:if(M=z.trys,!(M=M.length>0&&M[M.length-1])&&(b[0]===6||b[0]===2)){z=0;continue}if(b[0]===3&&(!M||b[1]>M[0]&&b[1]<M[3])){z.label=b[1];break}if(b[0]===6&&z.label<M[1]){z.label=M[1],M=b;break}if(M&&z.label<M[2]){z.label=M[2],z.ops.push(b);break}M[2]&&z.ops.pop(),z.trys.pop();continue}b=C.call(e,z)}catch(U){b=[6,U],y=0}finally{g=M=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Fe=ye&&ye.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ye,"__esModule",{value:!0});ye.getGameSystemClass=void 0;var Ur=Fe(Ke()),Ae=Re(),Gr=ze(),Hr=Fe($r()),Wr=Fe(sr());function Me(e){var C;return C=function(z){Mr(g,z);function g(y,M){return z.call(this,y,M!=null?M:e.$new(y))||this}return g.eval=function(y){return Gr.parseResult(e.$eval(y))},g}(Ur.default),C.ID=e.$const_get("ID"),C.NAME=e.$const_get("NAME"),C.SORT_KEY=e.$const_get("SORT_KEY"),C.HELP_MESSAGE=e.$const_get("HELP_MESSAGE"),C.COMMAND_PATTERN=e.$command_pattern(),C}ye.getGameSystemClass=Me;var Yr=function(){function e(){}return e.prototype.getGameSystemIdByName=function(C){var z,g=(z=this.listAvailableGameSystems().find(function(y){return y.name===C}))===null||z===void 0?void 0:z.id;if(!g)throw new Error("GameSystem named "+C+" does not exists");return g},e.prototype.getGameSystemInfo=function(C){var z=this.listAvailableGameSystems().find(function(g){return g.id===C});if(!z)throw new Error("GameSystem is not found");return z},e.prototype.getGameSystemClass=function(C){var z=this.listLoadedGameSystems().find(function(g){return g.ID===C});if(!z)throw new Error("GameSystem "+C+" is not loaded");return z},e.prototype.getI18nInfos=function(C){var z=C.replace(/_[^0-9].*$/g,""),g=this.listAvailabletI18nInfoList().find(function(D){return D.baseClassName===z||D.baseClassName===C}),y=g?[g]:[],M=this.listAvailableGameSystems().find(function(D){return D.className===C});return M?Array.from(new Set(this.getI18nInfos(M.superClassName).concat(y))):y},e.prototype.listLoadedGameSystems=function(){var C,z,g;return(g=(z=(C=Ae.BCDice.GameSystem)===null||C===void 0?void 0:C.$constants())===null||z===void 0?void 0:z.map(function(y){return Me(Ae.BCDice.GameSystem[y])}))!==null&&g!==void 0?g:[]},e.prototype.listAvailableGameSystems=function(){return Hr.default.gameSystems},e.prototype.listAvailabletI18nInfoList=function(){return Wr.default.i18nList},e.prototype.dynamicLoad=function(C){var z;return Fr(this,void 0,void 0,function(){var g,y,M,D,X,j,b,U,F,J,H,B,K,k;return Lr(this,function(I){switch(I.label){case 0:if(g=this.getGameSystemInfo(C),y=(z=g==null?void 0:g.className)!==null&&z!==void 0?z:C,!y.match(/^[A-Z]\w*$/))throw new Error("Invalid id");M=this.getI18nInfos(y),D=0,X=M,I.label=1;case 1:if(!(D<X.length))return[3,6];j=X[D],b=j.locales.filter(function(V){return V===g.locale||V===Ae.I18n.$default_locale()}),U=0,F=b,I.label=2;case 2:return U<F.length?(J=F[U],K=(B=JSON).stringify,[4,this.dynamicImportI18n(j.baseClassName,J)]):[3,5];case 3:H=K.apply(B,[I.sent()]),Ae.I18n.$load_translation(H),I.label=4;case 4:return U++,[3,2];case 5:return D++,[3,1];case 6:return[4,this.dynamicImport(y)];case 7:if(I.sent(),k=Ae.BCDice.GameSystem.$const_get(y),!k)throw new Error("Failed to load game system");return[2,Me(k)]}})})},e.prototype.dynamicImportI18n=function(C,z){throw new Error("Not implemented")},e.prototype.dynamicImport=function(C){throw new Error("Not implemented")},e}();ye.default=Yr});var lr=pe(be=>{"use strict";var Xr=be&&be.__extends||function(){var e=function(C,z){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(g[M]=y[M])},e(C,z)};return function(C,z){e(C,z);function g(){this.constructor=C}C.prototype=z===null?Object.create(z):(g.prototype=z.prototype,new g)}}(),Vr=be&&be.__createBinding||(Object.create?function(e,C,z,g){g===void 0&&(g=z),Object.defineProperty(e,g,{enumerable:!0,get:function(){return C[z]}})}:function(e,C,z,g){g===void 0&&(g=z),e[g]=C[z]}),Jr=be&&be.__setModuleDefault||(Object.create?function(e,C){Object.defineProperty(e,"default",{enumerable:!0,value:C})}:function(e,C){e.default=C}),ar=be&&be.__importStar||function(e){if(e&&e.__esModule)return e;var C={};if(e!=null)for(var z in e)z!=="default"&&Object.prototype.hasOwnProperty.call(e,z)&&Vr(C,e,z);return Jr(C,e),C},ur=be&&be.__awaiter||function(e,C,z,g){function y(M){return M instanceof z?M:new z(function(D){D(M)})}return new(z||(z=Promise))(function(M,D){function X(U){try{b(g.next(U))}catch(F){D(F)}}function j(U){try{b(g.throw(U))}catch(F){D(F)}}function b(U){U.done?M(U.value):y(U.value).then(X,j)}b((g=g.apply(e,C||[])).next())})},or=be&&be.__generator||function(e,C){var z={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},g,y,M,D;return D={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function X(b){return function(U){return j([b,U])}}function j(b){if(g)throw new TypeError("Generator is already executing.");for(;z;)try{if(g=1,y&&(M=b[0]&2?y.return:b[0]?y.throw||((M=y.return)&&M.call(y),0):y.next)&&!(M=M.call(y,b[1])).done)return M;switch(y=0,M&&(b=[b[0]&2,M.value]),b[0]){case 0:case 1:M=b;break;case 4:return z.label++,{value:b[1],done:!1};case 5:z.label++,y=b[1],b=[0];continue;case 7:b=z.ops.pop(),z.trys.pop();continue;default:if(M=z.trys,!(M=M.length>0&&M[M.length-1])&&(b[0]===6||b[0]===2)){z=0;continue}if(b[0]===3&&(!M||b[1]>M[0]&&b[1]<M[3])){z.label=b[1];break}if(b[0]===6&&z.label<M[1]){z.label=M[1],M=b;break}if(M&&z.label<M[2]){z.label=M[2],z.ops.push(b);break}M[2]&&z.ops.pop(),z.trys.pop();continue}b=C.call(e,z)}catch(U){b=[6,U],y=0}finally{g=M=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Zr=be&&be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(be,"__esModule",{value:!0});var Qr=Zr(Le()),Or=function(e){Xr(C,e);function C(){return e!==null&&e.apply(this,arguments)||this}return C.prototype.dynamicImportI18n=function(z,g){return ur(this,void 0,void 0,function(){return or(this,function(y){switch(y.label){case 0:return[4,Promise.resolve().then(function(){return ar(Ie("../../lib/bcdice/i18n/"+z+"."+g+".json"))})];case 1:return[2,y.sent().default]}})})},C.prototype.dynamicImport=function(z){return ur(this,void 0,void 0,function(){return or(this,function(g){switch(g.label){case 0:return[4,Promise.resolve().then(function(){return ar(Ie("../../lib/bcdice/game_system/"+z))})];case 1:return g.sent(),[2]}})})},C}(Qr.default);be.default=Or});var cr=pe(()=>{Ee();Opal.queue(function(e){var C=e.module,z=e.klass,g=e.def,y=e.ensure_kwargs,M=e.truthy,D=e.send,X=e.eqeqeq,j=e.rb_plus,b=e.rb_minus,U=e.rb_times,F=e.neqeq,J=e.range,H=[],B=e.nil,K=e.$$$;return function(k,I){var V=C(k,"BCDice"),v=[V].concat(I);return function(x,w,T){var o=z(x,w,"UserDefinedDiceTable"),A=[o].concat(T),N=e.$r(A),L=o.$$prototype;return L.rows=L.type=L.text=B,function(S,c){return g(S,"$roll",function(m){var f=this;return f.$new(m).$roll()})}(e.get_singleton_class(o),A),g(o,"$initialize",function(c){var E=this;return E.text=c,E.rows=B}),g(o,"$roll",function(c){var E,m=this,f=B,h=B,R=B,d=B;return c=y(c),E=c.$$smap.randomizer,E==null&&(E=N("Randomizer").$new()),m.$parse(),f=m.$roll_index(E),!(M(m["$valid?"]())&&M(f))||(h=""+f+":",R=D(m.rows,"find",[],function(u){return u==null&&(u=B),u["$start_with?"](h)}),!M(R))?B:(d=R.$delete_prefix(h).$gsub("\\n",`
`).$strip(),D(N("Result").$new(),"tap",[],function l(u){var i,n=l.$$s==null?this:l.$$s;return n.name==null&&(n.name=B),u==null&&(u=B),u["$text="](""+n.name+"("+f+") \uFF1E "+d),u["$rands="](E.$rand_results()),i=[E.$detailed_rand_results()],D(u,"detailed_rands=",i),i[i.length-1]},{$$s:m}))},-1),g(o,"$valid?",function(){var c=this,E=B,m=B,f=B;return c.$parse(),E=D(c.rows,"all?",[],function(R){return R==null&&(R=B),/^\d+:/["$match?"](R)}),M(E)?(m=D(c.rows,"map",[],"to_i".$to_proc()).$uniq().$sort(),X(/^\d+D\d+$/,f=c.type)?c["$valid_d?"](m):X("D66",f)||X("D66N",f)?c["$valid_d66?"](m):X("D66A",f)||X("D66S",f)?c["$valid_d66_asc_sort?"](m):X("D66D",f)?c["$valid_d66_desc_sort?"](m):!1):!1}),o.$private(),g(o,"$roll_index",function(c){var E=this,m=B,f=B,h=B;if(M(m=/^(\d+)D(\d+)$/.$match(E.type)))return f=m["$[]"](1).$to_i(),h=m["$[]"](2).$to_i(),c.$roll_sum(f,h);switch(E.type){case"D66":case"D66N":return c.$roll_d66(K(N("D66SortType"),"NO_SORT"));case"D66A":case"D66S":return c.$roll_d66(K(N("D66SortType"),"ASC"));case"D66D":return c.$roll_d66(K(N("D66SortType"),"DESC"));default:return B}}),g(o,"$parse",function(){var c=this,E=B;return M(c.rows)?B:(E=D(D(c.text.$split(/\r?\n/),"map",[],"rstrip".$to_proc()),"reject",[],"empty?".$to_proc()),c.name=E.$shift(),c.type=E.$shift().$upcase(),c.rows=E)}),g(o,"$valid_d?",function(c){var E=this,m=B,f=B,h=B,R=B,d=B;return m=/^(\d+)D(\d+)$/.$match(E.type),f=m["$[]"](1).$to_i(),h=m["$[]"](2).$to_i(),R=j(b(U(f,h),f),1),F(c.$size(),R)?!1:M(d=c.$first()["$=="](f))?c.$last()["$=="](U(f,h)):d}),g(o,"$valid_d66?",function(c){var E=B;return F(c.$size(),36)?!1:(E=D(J(1,6,!1),"map",[],function(f){return f==null&&(f=B),D(J(1,6,!1),"map",[],function(R){return R==null&&(R=B),j(U(f,10),R)})}).$flatten(),c["$=="](E))}),g(o,"$valid_d66_asc_sort?",function(c){var E=B;return F(c.$size(),21)?!1:(E=D(J(1,6,!1),"map",[],function(f){return f==null&&(f=B),D(e.Range.$new(f,6,!1),"map",[],function(R){return R==null&&(R=B),j(U(f,10),R)})}).$flatten(),c["$=="](E))}),g(o,"$valid_d66_desc_sort?",function(c){var E=B;return F(c.$size(),21)?!1:(E=D(J(1,6,!1),"map",[],function(f){return f==null&&(f=B),D(e.Range.$new(f,6,!1),"map",[],function(R){return R==null&&(R=B),j(U(R,10),f)})}).$flatten().$sort(),c["$=="](E))})}(v[0],null,v)}(H[0],H)})});var fr=pe(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});cr();var _r=Re(),et=ze(),rt=function(){function e(C,z){this.internal=z!=null?z:_r.BCDice.UserDefinedDiceTable.$new(C)}return e.prototype.roll=function(C){var z=this.internal.$roll(C&&_r.Opal.hash({randomizer:C}));return et.parseResult(z)},e.prototype.validate=function(){return this.internal["$valid?"]()},e}();Ue.default=rt});var dr=pe(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});var tt=Re(),nt=tt.BCDice.VERSION;Ge.default=nt});var hr=pe(we=>{"use strict";var De=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(we,"__esModule",{value:!0});we.Version=we.UserDefinedDiceTable=we.DynamicLoader=we.Base=void 0;var it=Ke();Object.defineProperty(we,"Base",{enumerable:!0,get:function(){return De(it).default}});var $t=lr();Object.defineProperty(we,"DynamicLoader",{enumerable:!0,get:function(){return De($t).default}});var st=fr();Object.defineProperty(we,"UserDefinedDiceTable",{enumerable:!0,get:function(){return De(st).default}});var at=dr();Object.defineProperty(we,"Version",{enumerable:!0,get:function(){return De(at).default}})});var Nr=je(hr());var Se=je(Re());var mr={ja_jp:{SwordWorld:{critical:"\u81EA\u52D5\u7684\u6210\u529F",fumble:"\u81EA\u52D5\u7684\u5931\u6557",keynumber_exceeds:"\u30AD\u30FC\u30CA\u30F3\u30D0\u30FC\u306F%{keyMax}\u307E\u3067\u3067\u3059",infinite_critical:"C\u5024\u3092%{min_critical}\u4EE5\u4E0A\u306B\u3057\u3066\u304F\u3060\u3055\u3044",round_text:"%{reroll_count}\u56DE\u8EE2"}}};var vr={ja_jp:{SwordWorld2_0:{transcendent_critical_too_small:"(%{expression}) \uFF1E \u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u304C\u5C0F\u3055\u3059\u304E\u307E\u3059\u30023\u4EE5\u4E0A\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002",super_success:"\u8D85\u6210\u529F",GrowthTable:{name:"\u6210\u9577\u8868",type:"1D6",items:["\u5668\u7528\u5EA6","\u654F\u6377\u5EA6","\u7B4B\u529B","\u751F\u547D\u529B","\u77E5\u529B","\u7CBE\u795E\u529B"]},FumbleTable:{name:"\u9632\u5FA1\u30D5\u30A1\u30F3\u30D6\u30EB\u8868",type:"1D6",items:["\u3053\u306E\u8868\u30922\u56DE\u632F\u308A\u3001\u305D\u306E\u4E21\u65B9\u3092\u9069\u7528\u3059\u308B\u3002\uFF08\u540C\u3058\u51FA\u76EE\u306B\u3088\u308B\u5F71\u97FF\u306F\u7D2F\u7A4D\u3057\u306A\u3044\uFF09\u3002\u3053\u306E\u81EA\u52D5\u5931\u6557\u306B\u3088\u308A\u5F97\u3089\u308C\u308B\u7D4C\u9A13\u70B9\u306F\u3001+50\u70B9\u3055\u308C\u308B","\u30C0\u30E1\u30FC\u30B8\u306B\u3001\u653B\u6483\u8005\u3092\u5F37\u5316\u3057\u3066\u3044\u308B\u300C\u5263\u306E\u304B\u3051\u3089\u300D\u306E\u6570\u304C\u8FFD\u52A0\u3055\u308C\u308B","\u30C0\u30E1\u30FC\u30B8\u306B\u3001\u653B\u6483\u8005\u306E\u300C\u30EC\u30D9\u30EB\u300D\u304C\u8FFD\u52A0\u3055\u308C\u308B","\u30C0\u30E1\u30FC\u30B8\u6C7A\u5B9A\u30922\u56DE\u884C\u3044\u3001\u3088\u308A\u9AD8\u3044\u65B9\u3092\u63A1\u7528\u3059\u308B","\u5408\u7B97\u30C0\u30E1\u30FC\u30B8\u30922\u500D\u3059\u308B","\u9632\u8B77\u70B9\u7121\u52B9"]},TangleTable:{name:"\u7D61\u307F\u52B9\u679C\u8868",type:"1D6",items:["\u982D\u3084\u9854\uFF1A\u7259\u3084\u565B\u307F\u3064\u304D\u306A\u3069\u306B\u304A\u3051\u308B\u547D\u4E2D\u529B\u5224\u5B9A\u53CA\u3073\u3001\u9B54\u6CD5\u306E\u884C\u4F7F\u3084\u30D6\u30EC\u30B9\u306B-2\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B","\u6B66\u5668\u3084\u76FE\uFF1A\u6B66\u5668\u306E\u4F7F\u7528\u4E0D\u53EF\u3001\u53C8\u306F\u76FE\u306E\u56DE\u907F\u529B\u4FEE\u6B63\u53CA\u3073\u9632\u8B77\u70B9\u3092\u7121\u52B9\u5316\u3059\u308B","\u8155\u3084\u624B\uFF1A\u6B66\u5668\u3084\u722A\u306A\u3069\u306B\u304A\u3051\u308B\u547D\u4E2D\u529B\u5224\u5B9A\u306B-2\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3001\u76FE\u3092\u6301\u3064\u8155\u65B9\u306E\u8155\u306A\u3089\u305D\u306E\u76FE\u306E\u56DE\u907F\u529B\u4FEE\u6B63\u53CA\u3073\u9632\u8B77\u70B9\u3092\u7121\u52B9\u5316\u3059\u308B","\u811A\u3084\u8DB3\uFF1A\u79FB\u52D5\u4E0D\u53EF\u3001\u66F4\u306B\u56DE\u907F\u529B\u5224\u5B9A\u306B-2\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B \u203B\u4E21\u8DB3\u306B\u7D61\u3093\u3067\u3082\u7D2F\u7A4D\u3057\u306A\u3044","\u80F4\u4F53\uFF1A\u751F\u547D\u30FB\u7CBE\u795E\u62B5\u6297\u529B\u3092\u57FA\u6E96\u5024\u306B\u7528\u3044\u308B\u5224\u5B9A\u3092\u9664\u304D\u3001\u3042\u3089\u3086\u308B\u884C\u70BA\u5224\u5B9A\u306B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B","\u7279\u6B8A\uFF1A\u5C3B\u5C3E\u3084\u7FFC\u306A\u3069\u306B\u547D\u4E2D\u3002\u7D61\u3081\u3089\u308C\u305F\u90E8\u4F4D\u3092\u4F7F\u7528\u3059\u308B\u5224\u5B9A\u306B\u304A\u3044\u3066-2\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3001\u307E\u305F\u306F\u305D\u3053\u304C\u4F7F\u3048\u3066\u3044\u305F\u3053\u3068\u306B\u3088\u308B\u30DC\u30FC\u30CA\u30B9\u4FEE\u6B63\u3092\u5931\u3046 \u203B\u5B58\u5728\u3057\u306A\u3044\u5834\u5408\u306F\u6C7A\u3081\u76F4\u3057"]}}}};var gr={ja_jp:{SwordWorld2_5:{AbyssCurseTable:{name:"\u30A2\u30D3\u30B9\u30AB\u30FC\u30B9\u8868",items:[["\u300C\u81EA\u50B7\u306E\u300D\u3000\u88C5\u5099\u6642\u3000\u3053\u306E\u6B66\u5177\u3092\u88C5\u5099\u4E2D\u306B\u88C5\u5099\u8005\u304C\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u3092\u767A\u751F\u3055\u305B\u305F\u6642\u3001\u88C5\u5099\u8005\u306EHP\u304C5\u70B9\u6E1B\u5C11\u3059\u308B\u3002","\u300C\u5606\u304D\u306E\u300D\u3000\u88C5\u5099\u6642\u3000\u8FD1\u304F\u306B\u6575\u304C\u3044\u305F\u308A\u3001\u9577\u3044\u7DCA\u5F35\u72B6\u614B\u304C\u7D9A\u304F\u3068\u6D99\u304C\u6B62\u307E\u3089\u306A\u304F\u306A\u308B\u3002\u6226\u95D8\u4E2D\u306A\u3089\u300C\u5C04\u7A0B\uFF1A\u8853\u8005\uFF08\u81EA\u8EAB\uFF09\u300D\u300C\u5C04\u7A0B\uFF1A\u63A5\u89E6\u300D\u4EE5\u5916\u306E\u52B9\u679C\u3067\u5BFE\u8C61\u3092\u9078\u3079\u306A\u304F\u306A\u308B\u3002","\u300C\u512A\u3057\u304D\u300D\u3000\u88C5\u5099\u6642\u3000\u6575\u306B\u540C\u60C5\u3057\u3066\u3057\u307E\u3046\u3002\u6575\u5BFE\u3059\u308B\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u3092\u5BFE\u8C61\u306B\u3059\u308B\u5834\u5408\u3001\u5BFE\u8C61\u306EHP\u304C1\u70B9\u4EE5\u4E0A\u6E1B\u5C11\u3057\u3066\u3044\u308B\u306A\u3089\u547D\u4E2D\u529B\u5224\u5B9A\u3001\u9B54\u6CD5\u884C\u4F7F\u5224\u5B9A\u306B-2\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u5DEE\u5225\u306E\u300D\u3000\u88C5\u5099\u6642\u3000\u7279\u5B9A\u306E\u5206\u985E\u306B\u5BFE\u3057\u3066\u4E0E\u3048\u308B\u7269\u7406\u30C0\u30E1\u30FC\u30B8\u30FB\u9B54\u6CD5\u30C0\u30E1\u30FC\u30B8\u304C2\u70B9\u6E1B\u5C11\u3059\u308B\u3002\u5206\u985E\u306F\u300C\u5206\u985E\u6C7A\u5B9A\u8868\u300D\u3067\u7121\u4F5C\u70BA\u306B\u6C7A\u5B9A\u3059\u308B\u3002","\u300C\u8106\u5F31\u306A\u300D\u3000\u88C5\u5099\u6642\u3000\u9B54\u6CD5\u30C0\u30E1\u30FC\u30B8\u3092\u53D7\u3051\u308B\u305F\u3073\u3001\u305D\u306E\u30C0\u30E1\u30FC\u30B8\u304C+1\u70B9\u3055\u308C\u308B\u3002","\u300C\u7121\u8B00\u306A\u300D\u3000\u88C5\u5099\u6642\u3000\u9632\u8B77\u70B9\u304C2\u70B9\u6E1B\u5C11\u3059\u308B\uFF08\u6700\u4F4E0\uFF09\u3002"],["\u300C\u91CD\u3044\u300D\u3000\u88C5\u5099\u6642\u3000\u5F37\u5316\u3057\u305F\u6B66\u5177\u306E\u5FC5\u8981\u7B4B\u529B\u304C+2\u3055\u308C\u308B\u3002\u5A01\u529B\u3001\u9632\u8B77\u70B9\u306A\u3069\u306F\u5909\u5316\u306A\u3057\u3002","\u300C\u96E3\u3057\u3044\u300D\u3000\u88C5\u5099\u6642\u3000\u3044\u304B\u306A\u308B\u5A01\u529B\u8868\u4F7F\u7528\u6642\u3067\u3082\u3001\u2462\u2463\u6B04\u306E\u6570\u5024\u304C\u5A01\u529B\u306B\u95A2\u4FC2\u306A\u304F\u300C0\u300D\u306B\u306A\u308B\uFF08\u81EA\u52D5\u5931\u6557\u3067\u306F\u306A\u3044\uFF09\u3002","\u300C\u8EDF\u5F31\u306A\u300D\u3000\u88C5\u5099\u6642\u3000\u7CBE\u795E\u62B5\u6297\u529B\u5224\u5B9A\u306B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u75C5\u5F31\u306A\u300D\u3000\u88C5\u5099\u6642\u3000\u751F\u547D\u62B5\u6297\u529B\u5224\u5B9A\u306B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u904E\u654F\u306A\u300D\u3000\u88C5\u5099\u6642\u3000\u7279\u5B9A\u306E\u5C5E\u6027\u304B\u3089\u53D7\u3051\u308B\u7269\u7406\u30C0\u30E1\u30FC\u30B8\u3001\u9B54\u6CD5\u30C0\u30E1\u30FC\u30B8\u304C2\u70B9\u4E0A\u6607\u3059\u308B\u3002\u5C5E\u6027\u306F\u300C\u5C5E\u6027\u6C7A\u5B9A\u8868\u300D\u3067\u7121\u4F5C\u70BA\u306B\u6C7A\u5B9A\u3059\u308B\u3002","\u300C\u967D\u6C17\u306A\u300D\u3000\u88C5\u5099\u6642\u3000\u7CBE\u795E\u62B5\u6297\u5224\u5B9A\u306B\u5931\u6557\u3059\u308B\u305F\u3073\u3001\u7B11\u3044\u304C\u6B62\u307E\u3089\u306A\u304F\u306A\u308B\u3002\u6B21\u306E\u624B\u756A\u7D42\u4E86\u6642\u307E\u3067\u884C\u52D5\u5224\u5B9A\uFF08\u300E\u2160\u300F123\u9801\uFF09\u306B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002\u3053\u306E\u52B9\u679C\u306F\u7D2F\u7A4D\u3059\u308B\u3002"],["\u300C\u305F\u3069\u305F\u3069\u3057\u3044\u300D\u3000\u88C5\u5099\u6642\u3000\u8A71\u3092\u3059\u308B\u6642\u306B\u8A00\u8449\u306B\u8A70\u307E\u3063\u305F\u308A\u3001\u8A00\u3044\u9593\u9055\u3048\u305F\u308A\u3057\u3084\u3059\u304F\u306A\u308B\u3002\u9B54\u6CD5\u884C\u4F7F\u5224\u5B9A\u306B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u4EE3\u5F01\u3059\u308B\u300D\u3000\u88C5\u5099\u6642\u3000\u81EA\u8EAB\u306E\u4F1A\u8A71\u306F\u3001\u305D\u306E\u307E\u307E\u6B66\u5177\u304C\u9B54\u6CD5\u6587\u660E\u8A9E\u306E\u805E\u304D\u53D6\u308A\u3065\u3089\u3044\u58F0\u3067\u8A71\u3059\u3002\u88C5\u5099\u4E2D\u306F\u9B54\u6CD5\u6587\u660E\u8A9E\u4EE5\u5916\u306E\u8A00\u8A9E\u3067\u4F1A\u8A71\u306F\u884C\u3048\u305A\u3001\u5996\u7CBE\u9B54\u6CD5\u3001\u9B54\u52D5\u6A5F\u8853\u3092\u884C\u4F7F\u3067\u304D\u306A\u304F\u306A\u308B\u3002","\u300C\u65BD\u3057\u306F\u53D7\u3051\u306A\u3044\u300D\u3000\u88C5\u5099\u6642\u3000\u6226\u95D8\u4E2D\u3001\u300C\u62B5\u6297\uFF1A\u4EFB\u610F\u300D\u306E\u52B9\u679C\u3092\u53D7\u3051\u5165\u308C\u305F\u5834\u5408\u3001\u6B21\u306E\u624B\u756A\u958B\u59CB\u6642\u307E\u3067\u751F\u547D\u62B5\u6297\u529B\u3001\u7CBE\u795E\u62B5\u6297\u529B\u306B-2\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u6B7B\u306B\u8FD1\u3044\u300D\u3000\u643A\u884C\u6642\u3000\u5E38\u306B\u751F\u6B7B\u5224\u5B9A\u306B\u300C\u5192\u967A\u8005\u30EC\u30D9\u30EB\u300D\u3068\u540C\u3058\u5024\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u304A\u3057\u3083\u308C\u306A\u300D\u3000\u643A\u884C\u6642\u3000\u305D\u306E\u6B66\u5177\u3092\u5E38\u306B\u83EF\u7F8E\u306B\u98FE\u308A\u305F\u304F\u306A\u308B\u3002\u53CE\u5165\u3092\u5F97\u308B\u305F\u3073\u3001\u305D\u306E1\u5272\u4EE5\u4E0A\u3092\u3053\u306E\u6B66\u5177\u306E\u88C5\u98FE\u306B\u8CBB\u3084\u3055\u306A\u3051\u308C\u3070\u306A\u3089\u306A\u3044\uFF08\u52B9\u679C\u306A\u3069\u306B\u5909\u5316\u306F\u306A\u3044\uFF09\u3002","\u300C\u30DE\u30CA\u3092\u5438\u3046\u300D\u3000\u643A\u884C\u6642\u3000\u9B54\u6CD5\u3084\u7DF4\u6280\u306A\u3069\u3001\u81EA\u8EAB\u306E\u610F\u601D\u3067MP\u3092\u6D88\u8CBB\u3059\u308B\u52B9\u679C\u3092\u4F7F\u7528\u3059\u308B\u5834\u5408\u3001\u3059\u3079\u3066\u306EMP\u6D88\u8CBB\u304C1\u70B9\u4E0A\u6607\u3059\u308B\u3002"],["\u300C\u920D\u91CD\u306A\u300D\u3000\u643A\u884C\u6642\u3000\u79FB\u52D5\u529B\u304C\u534A\u5206\uFF08\u7AEF\u6570\u5207\u308A\u4E0A\u3052\uFF09\u306B\u306A\u308B\u3002","\u300C\u5B9A\u307E\u3089\u306A\u3044\u300D\u3000\u643A\u884C\u6642\u3000\u6226\u95D8\u4E2D\u306E\u624B\u756A\u958B\u59CB\u6642\u306B1d\u3057\u3001\u51FA\u76EE\u304C\u300C1\u300D\u306A\u3089\u300A\u30BF\u30FC\u30B2\u30C3\u30C6\u30A3\u30F3\u30B0\u300B\u3068\u305D\u308C\u3092\u524D\u63D0\u3068\u3057\u305F\u6226\u95D8\u7279\u6280\u3092\u7FD2\u5F97\u3057\u3066\u3044\u306A\u3044\u3082\u306E\u3068\u3057\u3066\u6271\u3046\u3002","\u300C\u932F\u4E71\u306E\u300D\u3000\u643A\u884C\u6642\u3000\u6226\u95D8\u4E2D\u306E\u624B\u756A\u958B\u59CB\u6642\u306B1d\u3057\u3001\u51FA\u76EE\u304C\u300C1\u300D\u306A\u3089\u8FD1\u63A5\u653B\u6483\u3092\u542B\u3080\u300C\u5C04\u7A0B\uFF1A\u63A5\u89E6\u300D\u306E\u5BFE\u8C61\u306B\u52B9\u679C\u3092\u4F7F\u7528\u3059\u308B\u969B\u3001\u5BFE\u8C61\u306F\u540C\u3058\u4F4D\u7F6E\uFF08\u30A8\u30EA\u30A2\u3001\u5EA7\u6A19\uFF09\u306E\u5168\u3066\u306E\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\uFF08\u6575\u5473\u65B9\u542B\u3080\uFF09\u304B\u3089\u7121\u4F5C\u70BA\u306B\u9078\u3070\u308C\u308B\u3002","\u300C\u8DB3\u7D61\u307F\u306E\u300D\u3000\u643A\u884C\u6642\u3000\u6226\u95D8\u4E2D\u306E\u624B\u756A\u958B\u59CB\u6642\u306B1d\u3057\u3001\u51FA\u76EE\u304C\u300C1\u300D\u306A\u3089\u305D\u306E\u5834\u3067\u5373\u5EA7\u306B\u8EE2\u5012\u3059\u308B\u3002\u624B\u756A\u4E2D\u306B\u306F\u8D77\u304D\u4E0A\u304C\u308C\u306A\u3044\u3002","\u300C\u6ED1\u308A\u843D\u3061\u308B\u300D\u3000\u643A\u884C\u6642\u3000\u6226\u95D8\u4E2D\u306E\u624B\u756A\u958B\u59CB\u6642\u306B1d\u3057\u3001\u51FA\u76EE\u304C\u300C1\u300D\u306A\u3089\u624B\u306B\u88C5\u5099\u307E\u305F\u306F\u4FDD\u6301\u3057\u3066\u3044\u308B\u3082\u306E\u3092\u3059\u3079\u3066\u305D\u306E\u5834\u306B\u843D\u3068\u3059\uFF08\u305D\u306E\u624B\u756A\u306E\u4E3B\u52D5\u4F5C\u3067\u62FE\u3046\u4E8B\u306F\u53EF\u80FD\uFF09\u3002","\u300C\u60AA\u81ED\u653E\u3064\u300D\u3000\u643A\u884C\u6642\u3000\u5F37\u3044\u60AA\u81ED\u3092\u653E\u3064\u3002\u6240\u6301\u3057\u3066\u3044\u308B\u3060\u3051\u3067\u4ED6\u306E\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u306B\u4E0D\u5FEB\u611F\u3092\u4E0E\u3048\u3001\u96A0\u5BC6\u5224\u5B9A\u306B-2\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002\u3055\u3089\u306B\u5192\u967A\u8005\u30E9\u30F3\u30AF\uFF08\u300E\u2161\u300F137\u9801\uFF09\u304C1\u6BB5\u968E\u4F4E\u3044\u3082\u306E\u3068\u3057\u3066\u6271\u308F\u308C\u308B\u3002"],["\u300C\u919C\u60AA\u306A\u300D\u3000\u643A\u884C\u6642\u3000\u6B66\u5177\u306E\u898B\u305F\u76EE\u304C\u60AA\u304F\u3001\u9B45\u529B\u304C\u306A\u3044\u3002\u58F2\u5374\u3059\u308B\u969B\u3001\u57FA\u672C\u53D6\u5F15\u4FA1\u683C\u306E4\u5206\u306E1\u306E\u4FA1\u683C\u3067\u58F2\u5374\u3059\u308B\u3002\u3055\u3089\u306B\u5192\u967A\u8005\u30E9\u30F3\u30AF\uFF08\u300E\u2161\u300F137\u9801\uFF09\u304C1\u6BB5\u968E\u4F4E\u3044\u3082\u306E\u3068\u3057\u3066\u6271\u308F\u308C\u308B\u3002","\u300C\u5538\u308B\u300D\u3000\u643A\u884C\u6642\u3000\u305D\u306E\u6B66\u5177\u304B\u3089\u5E38\u306B\u7FBD\u866B\u304C\u98DB\u3073\u4EA4\u3046\u3088\u3046\u306A\u97F3\u304C\u97FF\u304F\u3002\u96A0\u5BC6\u5224\u5B9A\u3001\u5371\u967A\u611F\u77E5\u5224\u5B9A\u306B-4\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u3075\u3084\u3051\u305F\u300D\u3000\u643A\u884C\u6642\u3000\u6C34\u3092\u5438\u3063\u305F\u3088\u3046\u306B\u3075\u3084\u3051\u305F\u8CEA\u611F\u3092\u3057\u3066\u3044\u308B\u3002\u8FFD\u52A0\u30C0\u30E1\u30FC\u30B8-1\uFF08\u6B66\u5668\uFF09\u3001\u9632\u8B77\u70B9-1\uFF08\u93A7\u3001\u76FE\uFF09\u3002\u75C5\u6C17\u5C5E\u6027\u306E\u52B9\u679C\u306B\u5BFE\u3059\u308B\u751F\u547D\u62B5\u6297\u529B\u3001\u7CBE\u795E\u62B5\u6297\u529B\u5224\u5B9A\u306B-4\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u53E4\u50B7\u306E\u300D\u3000\u643A\u884C\u6642\u3000HP\u3092\u56DE\u5FA9\u3059\u308B\u52B9\u679C\uFF08\u4F11\u606F\u306B\u3088\u308B\u56DE\u5FA9\u3092\u542B\u3080\uFF09\u3092\u53D7\u3051\u305F\u5834\u5408\u3001\u305D\u306E\u56DE\u5FA9\u91CF\u304C1\u70B9\u6E1B\u5C11\u3059\u308B\u3002","\u300C\u307E\u3070\u3086\u3044\u300D\u3000\u643A\u884C\u6642\u3000\u5149\u306A\u3069\u3092\u5F3E\u3044\u3066\u5F37\u304F\u8F1D\u304F\u3002\u81EA\u8EAB\u306F\u5E38\u306B\u8996\u754C\u304C\u60AA\u3044\u4E8B\u306B\u3088\u308B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u6804\u5149\u306A\u304D\u300D\u3000\u643A\u884C\u6642\u3000\u884C\u70BA\u5224\u5B9A\u3067\u81EA\u52D5\u6210\u529F\u3057\u305F\u969B\u3001\u81EA\u52D5\u6210\u529F\u3068\u306F\u6271\u308F\u305A\u30012d\u3092\u632F\u308A\u76F4\u3057\u3001\u305D\u306E\u5F8C\u306E\u51FA\u76EE\u306B\u5F93\u3046\u3002\u3053\u306E\u52B9\u679C\u306F1\u65E5\u306B1\u56DE\u306E\u307F\u767A\u63EE\u3055\u308C\u308B\u3002"],["\u300C\u6B63\u76F4\u8005\u306E\u300D\u3000\u643A\u884C\u6642\u3000\u5618\u3001\u65B9\u4FBF\u304C\u3059\u3050\u3070\u308C\u308B\u3088\u3046\u306B\u306A\u308B\u3002\u771F\u507D\u5224\u5B9A\u306E\u5BFE\u8C61\u3068\u306A\u308B\u5834\u5408\u3001-4\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u4E57\u308A\u7269\u9154\u3044\u306E\u300D\u3000\u643A\u884C\u6642\u3000\u63FA\u308C\u306B\u5F31\u304F\u306A\u308B\u3002\u81EA\u8EAB\u306E\u8DB3\u4EE5\u5916\u306E\u624B\u6BB5\u306710\u5206\u4EE5\u4E0A\u79FB\u52D5\u3057\u305F\u5F8C\u30011\u6642\u9593\u3001\u884C\u52D5\u5224\u5B9A\u306B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u78A7\u3092\u53AD\u3046\u300D\u3000\u643A\u884C\u6642\u3000\u81EA\u7136\u306E\u4E2D\u3067\u306F\u843D\u3061\u7740\u304B\u306A\u304F\u306A\u308B\u3002\u81EA\u7136\u74B0\u5883\uFF08\u300E\u2160\u300F108\u9801\uFF09\u3067\u306F\u884C\u52D5\u5224\u5B9A\u306B-1\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u6211\u6162\u3067\u304D\u306A\u3044\u300D\u3000\u643A\u884C\u6642\u3000\u30BB\u30C3\u30B7\u30E7\u30F3\u4E2D\u306B1\u65E5\u306E\u59CB\u307E\u308A\u3092\u8FCE\u3048\u308B\u305F\u3073\u3001\u8DA3\u5473\u3084\u55DC\u597D\u54C1\u306A\u3069\u306B\u300C\u5192\u967A\u8005\u30EC\u30D9\u30EB\xD710\u300D\u30AC\u30E1\u30EB\u3092\u51FA\u8CBB\u3057\u306A\u3051\u308C\u3070\u306A\u3089\u306A\u3044\u3002\u8DA3\u5473\u3084\u55DC\u597D\u54C1\u304C\u6D88\u8CBB\u3067\u304D\u306A\u3044\u74B0\u5883\u3067\u3042\u308C\u3070\u3001\u7FCC\u65E5\u306E\u671D\u307E\u3067\u6700\u5927HP\u3001\u6700\u5927MP\u304C\u300C\u5192\u967A\u8005\u30EC\u30D9\u30EB\u300D\u70B9\u6E1B\u5C11\u3059\u308B\u3002","\u300C\u3064\u304D\u307E\u3068\u3046\u300D\u3000\u643A\u884C\u6642\u3000\u3053\u306E\u6B66\u5177\u304C\u6C17\u304C\u3064\u3051\u3070\u8EAB\u306E\u56DE\u308A\u306B\u3042\u308B\u3002\u3053\u306E\u6B66\u5177\u4EE5\u5916\u3067\u306E\u547D\u4E2D\u529B\u5224\u5B9A\u3001\u9B54\u6CD5\u884C\u4F7F\u5224\u5B9A\uFF08\u6B66\u5668\uFF09\u3001\u56DE\u907F\u529B\u5224\u5B9A\uFF08\u93A7\u3001\u76FE\uFF09\u306B-4\u306E\u30DA\u30CA\u30EB\u30C6\u30A3\u4FEE\u6B63\u3092\u53D7\u3051\u308B\u3002","\u300C\u306E\u308D\u307E\u306A\u300D\u3000\u643A\u884C\u6642\u3000\u6226\u95D8\u958B\u59CB\u51E6\u7406\u306E\u300C\u6226\u95D8\u6E96\u5099\u300D\u3092\u3044\u3063\u3055\u3044\u884C\u3048\u306A\u304F\u306A\u308B\u3002"]]},AbyssCurseCategoryTable:{name:"\u30A2\u30D3\u30B9\u30AB\u30FC\u30B9\u5206\u985E\u6C7A\u5B9A\u8868",odd:["\u86EE\u65CF","\u52D5\u7269","\u690D\u7269","\u30A2\u30F3\u30C7\u30C3\u30C9","\u9B54\u6CD5\u751F\u7269","\u300C\u86EE\u65CF\u300D\u300C\u52D5\u7269\u300D\u300C\u690D\u7269\u300D\u300C\u30A2\u30F3\u30C7\u30C3\u30C9\u300D\u300C\u9B54\u6CD5\u751F\u7269\u300D\u304B\u3089\u4EFB\u610F"],even:["\u9B54\u52D5\u6A5F","\u5E7B\u7363","\u5996\u7CBE","\u9B54\u795E","\u4EBA\u65CF","\u300C\u9B54\u52D5\u6A5F\u300D\u300C\u5E7B\u7363\u300D\u300C\u5996\u7CBE\u300D\u300C\u9B54\u795E\u300D\u300C\u4EBA\u65CF\u300D\u304B\u3089\u4EFB\u610F"]},AbyssCurseAttrTable:{name:"\u30A2\u30D3\u30B9\u30AB\u30FC\u30B9\u5C5E\u6027\u6C7A\u5B9A\u8868",odd:["\u571F","\u6C34\u30FB\u6C37","\u708E","\u98A8","\u96F7","\u7D14\u7C8B\u30A8\u30CD\u30EB\u30AE\u30FC"],even:["\u65AD\u7A7A","\u885D\u6483","\u6BD2","\u75C5\u6C17","\u546A\u3044","\u7CBE\u795E\u52B9\u679C"]}}}};var pr={zh_hans:{SwordWorld:{critical:"\u81EA\u52A8\u6210\u529F",fumble:"\u81EA\u52A8\u5931\u8D25",keynumber_exceeds:"\u5A01\u529B\u6700\u5927\u4E3A%{keyMax}",infinite_critical:"\u8BF7\u8F93\u5165%{min_critical}\u4EE5\u4E0A\u7684C\u503C",round_text:"%{reroll_count}\u66B4\u51FB"}}};var br={zh_hans:{SwordWorld2_0:{transcendent_critical_too_small:"(%{expression}) \uFF1E \u66B4\u51FB\u503C\u8FC7\u5C0F\u3002\u8BF7\u8F93\u51653\u4EE5\u4E0A\u7684\u66B4\u51FB\u503C\u3002",super_success:"\u8D85\u6210\u529F",GrowthTable:{name:"\u6210\u957F\u8868",type:"1D6",items:["\u7075\u5DE7\u5EA6","\u654F\u6377\u5EA6","\u529B\u91CF","\u751F\u547D\u529B","\u667A\u529B","\u7CBE\u795E\u529B"]},FumbleTable:{name:"\u9632\u5FA1\u5927\u5931\u8D25\u8868",type:"1D6",items:["\u9AB0\u672C\u88682\u6B21\uFF0C\u9002\u7528\u4E24\u8FB9\u7684\u6548\u679C\u3002\uFF08\u540C\u51FA\u76EE\u5E26\u6765\u7684\u5F71\u54CD\u4E0D\u4F1A\u7D2F\u79EF\uFF09\u3002\u672C\u6B21\u81EA\u52A8\u5931\u8D25\u83B7\u5F97\u7684\u7ECF\u9A8C\u70B9+50\u70B9","\u4F24\u5BB3\u8FFD\u52A0\u5F3A\u5316\u653B\u51FB\u8005\u7684\u300C\u5251\u4E4B\u788E\u7247\u300D\u4E2A\u6570\u70B9","\u4F24\u5BB3\u8FFD\u52A0\u653B\u51FB\u8005\u7684\u300C\u7B49\u7EA7\u300D\u70B9","\u8FDB\u884C2\u6B21\u4F24\u5BB3\u51B3\u5B9A\uFF0C\u91C7\u7528\u66F4\u9AD8\u7684\u7ED3\u679C","\u5408\u7B97\u4F24\u5BB3\u53D8\u4E3A2\u500D","\u9632\u62A4\u70B9\u65E0\u6548"]},TangleTable:{name:"\u7F20\u7ED5\u6548\u679C\u8868",type:"1D6",items:["\u5934\u6216\u8138\uFF1A\u7528\u7259\u548C\u54AC\u7684\u653B\u51FB\u547D\u4E2D\u529B\u5224\u5B9A\uFF0C\u4EE5\u53CA\u9B54\u6CD5\u884C\u4F7F\u548C\u795D\u798F\u672F\u53D7\u5230-2\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u6B66\u5668\u6216\u76FE\uFF1A\u6B66\u5668\u4E0D\u80FD\u4F7F\u7528\uFF0C\u4E14\u76FE\u7684\u56DE\u907F\u529B\u4FEE\u6B63\u548C\u9632\u62A4\u70B9\u65E0\u6548","\u80F3\u818A\u6216\u624B\uFF1A\u6B66\u5668\u548C\u722A\u4E4B\u7C7B\u7684\u547D\u4E2D\u529B\u5224\u5B9A\u53D7\u5230-2\u7684\u60E9\u7F5A\u4FEE\u6B63\uFF0C\u5982\u679C\u6301\u76FE\u7684\u624B\u88AB\u7F20\u7ED5\u5219\u8BE5\u76FE\u7684\u56DE\u907F\u529B\u4FEE\u6B63\u4EE5\u53CA\u9632\u62A4\u70B9\u65E0\u6548","\u811A\uFF1A\u65E0\u6CD5\u79FB\u52A8\uFF0C\u4E14\u56DE\u907F\u529B\u5224\u5B9A\u53D7\u5230-2\u7684\u60E9\u7F5A\u4FEE\u6B63 \u203B\u4E24\u811A\u88AB\u7F20\u7ED5\u65F6\u6548\u679C\u4E0D\u7D2F\u79EF","\u8EAF\u5E72\uFF1A\u9664\u4F7F\u7528\u751F\u547D\u3001\u7CBE\u795E\u62B5\u6297\u529B\u4E3A\u57FA\u7840\u503C\u7684\u5224\u5B9A\u5916\uFF0C\u6240\u6709\u884C\u4E3A\u5224\u5B9A\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63","\u7279\u6B8A\uFF1A\u547D\u4E2D\u5C3E\u5DF4\u6216\u7FC5\u8180\u7B49\u90E8\u4F4D\u3002\u88AB\u7F20\u4E0A\u7684\u90E8\u4F4D\u4F7F\u7528\u7684\u5224\u5B9A\uFF0C\u53D7\u5230-2\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002\u4E14\u5931\u53BB\u8BE5\u90E8\u4F4D\u63D0\u4F9B\u7684\u52A0\u503C\u3002 \u203B\u4E0D\u5B58\u5728\u8FD9\u6837\u7684\u90E8\u4F4D\u65F6\u91CD\u65B0\u51B3\u5B9A"]}}}};var yr={zh_hans:{SwordWorld2_5:{AbyssCurseTable:{name:"\u5948\u843D\u8BC5\u5492\u8868",items:[["\u300C\u81EA\u4F24\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u8BE5\u6B66\u5177\u7684\u88C5\u5907\u8005\u9020\u6210\u66B4\u51FB\u65F6\uFF0C\u88C5\u5907\u8005\u7684HP\u51CF\u5C115\u70B9\u3002","\u300C\u60B2\u53F9\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u5468\u56F4\u6709\u654C\u4EBA\u65F6\uFF0C\u4F1A\u7D27\u5F20\u5230\u6CEA\u6D41\u4E0D\u6B62\u3002\u5728\u6218\u6597\u4E2D\u65E0\u6CD5\u9009\u53D6\u300C\u5C04\u7A0B\uFF1A\u65BD\u672F\u8005\u300D\u548C\u300C\u5C04\u7A0B\uFF1A\u63A5\u89E6\u300D\u4EE5\u5916\u7684\u6548\u679C\u5BF9\u8C61\u3002","\u300C\u4EC1\u6148\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u4F1A\u5BF9\u654C\u4EBA\u5FC3\u5B58\u601C\u60AF\u3002\u4EE5\u654C\u5BF9\u89D2\u8272\u4E3A\u5BF9\u8C61\u65F6\uFF0C\u5982\u679C\u5BF9\u8C61\u5DF2\u7ECF\u51CF\u5C11\u4E861\u70B9\u4EE5\u4E0A\u7684HP\uFF0C\u5219\u547D\u4E2D\u529B\u5224\u5B9A\u3001\u9B54\u6CD5\u884C\u4F7F\u5224\u5B9A\u53D7\u5230-2\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u5DEE\u522B\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u7ED9\u4E88\u7279\u5B9A\u5206\u7C7B\u89D2\u8272\u7684\u7269\u7406\u4F24\u5BB3\u30FB\u9B54\u6CD5\u4F24\u5BB3\u51CF\u5C112\u70B9\u3002\u5206\u7C7B\u7531\u300C\u5206\u7C7B\u51B3\u5B9A\u8868\u300D\u968F\u673A\u51B3\u5B9A\u3002","\u300C\u8106\u5F31\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u6BCF\u6B21\u53D7\u5230\u9B54\u6CD5\u4F24\u5BB3\u65F6\uFF0C\u8BE5\u4F24\u5BB3+1\u70B9\u3002","\u300C\u65E0\u8C0B\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u9632\u62A4\u70B9\u51CF\u5C112\u70B9\uFF08\u6700\u4F4E0\uFF09\u3002"],["\u300C\u6C89\u91CD\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u88AB\u5F3A\u5316\u7684\u6B66\u5177\u7684\u5FC5\u8981\u529B\u91CF+2\u3002\u5A01\u529B\u3001\u9632\u62A4\u70B9\u7B49\u4FDD\u6301\u4E0D\u53D8\u3002","\u300C\u96BE\u7528\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u4E0D\u7BA1\u4F7F\u7528\u54EA\u4E00\u884C\u5A01\u529B\u8868\uFF0C\u2462\u2463\u680F\u7684\u6570\u503C\u90FD\u4E0E\u5A01\u529B\u65E0\u5173\u5730\u53D8\u6210\u300C0\u300D\uFF08\u4E0D\u662F\u81EA\u52A8\u5931\u8D25\uFF09\u3002","\u300C\u8F6F\u5F31\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u7CBE\u795E\u62B5\u6297\u529B\u5224\u5B9A\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u75C5\u5F31\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u751F\u547D\u62B5\u6297\u529B\u5224\u5B9A\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u8FC7\u654F\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u53D7\u5230\u7279\u5B9A\u5C5E\u6027\u7684\u7269\u7406\u4F24\u5BB3\u3001\u9B54\u6CD5\u4F24\u5BB3\u4E0A\u53472\u70B9\u3002\u5C5E\u6027\u7531\u300C\u5C5E\u6027\u51B3\u5B9A\u8868\u300D\u968F\u673A\u51B3\u5B9A\u3002","\u300C\u5F00\u6717\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u6BCF\u6B21\u5728\u7CBE\u795E\u62B5\u6297\u5224\u5B9A\u4E2D\u5931\u8D25\u65F6\uFF0C\u5C31\u4F1A\u7B11\u4E2A\u4E0D\u505C\u3002\u76F4\u5230\u4E0B\u56DE\u5408\u7ED3\u675F\u65F6\u4E3A\u6B62\uFF0C\u884C\u52A8\u5224\u5B9A\uFF08\u300E\u2160\u300F123\u9875\uFF09\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002\u8FD9\u4E2A\u6548\u679C\u4F1A\u7D2F\u79EF\u3002"],["\u300C\u7ED3\u5DF4\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u8BF4\u8BDD\u65F6\u5BB9\u6613\u60F3\u4E0D\u5230\u8BCD\u6216\u8BF4\u9519\u3002\u9B54\u6CD5\u884C\u4F7F\u5224\u5B9A\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u4EE3\u8A00\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u81EA\u5DF1\u7684\u8BDD\u4F1A\u88AB\u6B66\u5177\u539F\u5C01\u4E0D\u52A8\u5730\u4EE5\u96BE\u4EE5\u542C\u6E05\u7684\u9B54\u6CD5\u6587\u660E\u8BED\u8BF4\u51FA\u3002\u88C5\u5907\u8FD9\u4E2A\u6B66\u5177\u65F6\u65E0\u6CD5\u4F7F\u7528\u9B54\u6CD5\u6587\u660E\u8BED\u4EE5\u5916\u7684\u8BED\u8A00\u5BF9\u8BDD\uFF0C\u65E0\u6CD5\u884C\u4F7F\u5996\u7CBE\u9B54\u6CD5\u3001\u9B54\u52A8\u673A\u672F\u3002","\u300C\u62D2\u7EDD\u65BD\u820D\u7684\u300D\u3000\u88C5\u5907\u65F6\u3000\u6218\u6597\u4E2D\uFF0C\u63A5\u53D7\u300C\u62B5\u6297\uFF1A\u4EFB\u610F\u300D\u7684\u6548\u679C\u65F6\uFF0C\u751F\u547D\u62B5\u6297\u529B\u3001\u7CBE\u795E\u62B5\u6297\u529B\u53D7\u5230-2\u7684\u60E9\u7F5A\u4FEE\u6B63\u76F4\u5230\u4E0B\u56DE\u5408\u5F00\u59CB\u3002","\u300C\u63A5\u8FD1\u6B7B\u4EA1\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u751F\u6B7B\u5224\u5B9A\u59CB\u7EC8\u53D7\u5230\u548C\u300C\u5192\u9669\u8005\u7B49\u7EA7\u300D\u76F8\u540C\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u65F6\u9AE6\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u59CB\u7EC8\u60F3\u628A\u8BE5\u6B66\u5177\u88C5\u70B9\u5F97\u534E\u7F8E\u3002\u6BCF\u6B21\u83B7\u5F97\u6536\u5165\u65F6\uFF0C\u5FC5\u987B\u82B1\u8D39\u6B64\u6536\u5165\u76841\u6210\u4EE5\u4E0A\u7528\u4E8E\u88C5\u9970\u6B66\u5177\uFF08\u6CA1\u6709\u6548\u679C\u4E4B\u7C7B\u7684\u53D8\u5316\uFF09\u3002","\u300C\u5438\u6536\u739B\u5A1C\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u9B54\u6CD5\u6216\u7EC3\u6280\u7B49\uFF0C\u4EE5\u81EA\u5DF1\u7684\u610F\u601D\u4F7F\u7528\u6D88\u8017MP\u7684\u6548\u679C\u65F6\uFF0C\u6240\u6709MP\u6D88\u8017\u4E0A\u53471\u70B9\u3002"],["\u300C\u8FDF\u949D\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u79FB\u52A8\u529B\u53D8\u4E3A\u4E00\u534A\uFF08\u5C0F\u6570\u8FDB\u4F4D\uFF09\u3002","\u300C\u4E0D\u51C6\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6218\u6597\u4E2D\u56DE\u5408\u5F00\u59CB\u65F6\u63B71d\uFF0C\u51FA\u76EE\u4E3A\u300C1\u300D\u5219\u300A\u76EE\u6807\u7784\u51C6\u300B\u53CA\u4EE5\u6B64\u4E3A\u524D\u63D0\u7684\u6218\u6597\u7279\u6280\u662F\u4E3A\u6CA1\u6709\u4E60\u5F97\u3002","\u300C\u9519\u4E71\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6218\u6597\u4E2D\u56DE\u5408\u5F00\u59CB\u65F6\u63B71d\uFF0C\u51FA\u76EE\u4E3A\u300C1\u300D\u5219\u4F7F\u7528\u5305\u542B\u8FD1\u8DDD\u79BB\u653B\u51FB\u5728\u5185\u7684\u300C\u5C04\u7A0B\uFF1A\u63A5\u89E6\u300D\u7684\u6548\u679C\u65F6\uFF0C\u5BF9\u8C61\u4ECE\u548C\u88C5\u5907\u8005\u540C\u4F4D\u7F6E\uFF08\u533A\u57DF\u3001\u5750\u6807\uFF09\u7684\u6240\u6709\u89D2\u8272\uFF08\u5305\u542B\u654C\u6211\uFF09\u4E2D\u968F\u673A\u9009\u62E9\u3002","\u300C\u7ECA\u811A\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6218\u6597\u4E2D\u56DE\u5408\u5F00\u59CB\u65F6\u63B71d\uFF0C\u51FA\u76EE\u4E3A\u300C1\u300D\u5219\u5F53\u573A\u6454\u5012\u3002\u56DE\u5408\u4E2D\u4E0D\u80FD\u7AD9\u8D77\u6765\u3002","\u300C\u6ED1\u843D\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6218\u6597\u4E2D\u56DE\u5408\u5F00\u59CB\u65F6\u63B71d\uFF0C\u51FA\u76EE\u4E3A\u300C1\u300D\u5219\u624B\u90E8\u88C5\u5907\u53CA\u62FF\u7740\u7684\u4E1C\u897F\u5168\u90E8\u6389\u5728\u539F\u5730\uFF08\u8BE5\u56DE\u5408\u53EF\u4EE5\u7528\u4E3B\u52A8\u4F5C\u6361\u8D77\uFF09\u3002","\u300C\u6563\u53D1\u6076\u81ED\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6563\u53D1\u5F3A\u70C8\u7684\u6076\u81ED\u3002\u53EA\u662F\u643A\u5E26\u7740\u5C31\u4F1A\u8BA9\u5176\u4ED6\u89D2\u8272\u611F\u5230\u4E0D\u9002\uFF0C\u9690\u853D\u5224\u5B9A\u53D7\u5230-2\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002\u4E14\u5192\u9669\u8005\u9636\u7EA7\uFF08\u300E\u2161\u300F137\u9875\uFF09\u89C6\u4E3A\u4F4E1\u7EA7\u3002"],["\u300C\u4E11\u6076\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6B66\u5177\u5916\u89C2\u4E11\u964B\uFF0C\u6BEB\u65E0\u9B45\u529B\u3002\u8D29\u5356\u8BE5\u6B66\u5177\u65F6\u53EA\u80FD\u5356\u5230\u57FA\u672C\u4EA4\u6613\u4EF7\u683C\u76844\u5206\u4E4B1\u3002\u4E14\u5192\u9669\u8005\u9636\u7EA7\uFF08\u300E\u2161\u300F137\u9875\uFF09\u89C6\u4E3A\u4F4E1\u7EA7\u3002","\u300C\u55E1\u9E23\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u8BE5\u6B66\u5177\u4E2D\u59CB\u7EC8\u54CD\u7740\u98DE\u866B\u98DE\u821E\u7684\u58F0\u97F3\u3002\u9690\u853D\u5224\u5B9A\u3001\u5371\u9669\u611F\u77E5\u5224\u5B9A\u53D7\u5230-4\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u6E7F\u8F6F\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6B66\u5177\u8D28\u611F\u50CF\u662F\u5438\u4E86\u6C34\u4E00\u6837\u8F6F\u584C\u584C\u7684\u3002\u8FFD\u52A0\u4F24\u5BB3-2\uFF08\u6B66\u5668\uFF09\u3001\u9632\u62A4\u70B9-1\uFF08\u94E0\u3001\u76FE\uFF09\u3002\u5BF9\u75BE\u75C5\u5C5E\u6027\u7684\u6548\u679C\u7684\u751F\u547D\u62B5\u6297\u529B\u3001\u7CBE\u795E\u62B5\u6297\u529B\u53D7\u5230-4\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u65E7\u4F24\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u53D7\u5230\u56DE\u590DHP\u7684\u6548\u679C\u65F6\uFF08\u5305\u542B\u7531\u4E8E\u4F11\u606F\u9020\u6210\u7684\u56DE\u590D\uFF09\uFF0C\u8BE5\u56DE\u590D\u91CF\u51CF\u5C111\u70B9\u3002","\u300C\u70AB\u76EE\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u901A\u8FC7\u53CD\u5C04\u5149\u8292\u7B49\u65B9\u5F0F\u53D1\u51FA\u5F3A\u70C8\u7684\u5149\u8F89\u3002\u81EA\u5DF1\u59CB\u7EC8\u7531\u4E8E\u89C6\u91CE\u4E0D\u826F\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u65E0\u8363\u5149\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u884C\u4E3A\u5224\u5B9A\u81EA\u52A8\u6210\u529F\u65F6\uFF0C\u89C6\u4E3A\u6CA1\u6709\u81EA\u52A8\u6210\u529F\uFF0C\u5E76\u91CD\u62952d\uFF0C\u91C7\u7528\u65B0\u7684\u51FA\u76EE\u3002\u8FD9\u4E2A\u6548\u679C1\u5929\u53EA\u751F\u65481\u6B21\u3002"],["\u300C\u6B63\u76F4\u8005\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u8C0E\u8A00\u548C\u624B\u6BB5\u53D8\u5F97\u5F88\u5BB9\u6613\u66B4\u9732\u3002\u6210\u4E3A\u771F\u4F2A\u5224\u5B9A\u7684\u5BF9\u8C61\u65F6\uFF0C\u53D7\u5230-4\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u6655\u52A8\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u5BF9\u6447\u6643\u7684\u62B5\u6297\u529B\u51CF\u5F31\u3002\u4EE5\u81EA\u5DF1\u6B65\u884C\u4E4B\u5916\u7684\u65B9\u5F0F\u79FB\u52A810\u5206\u949F\u4EE5\u4E0A\u540E\uFF0C1\u5C0F\u65F6\u5185\u884C\u52A8\u5224\u5B9A\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u538C\u6076\u78A7\u7EFF\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u5728\u81EA\u7136\u73AF\u5883\u4E2D\u4F1A\u53D8\u5F97\u65E0\u6CD5\u51B7\u9759\u3002\u5728\u81EA\u7136\u73AF\u5883\uFF08\u300E\u2160\u300F108\u9875\uFF09\u4E2D\u884C\u52A8\u5224\u5B9A\u53D7\u5230-1\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u65E0\u6CD5\u5FCD\u8010\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6E38\u620F\u4E2D\u6BCF\u6B211\u5929\u5F00\u59CB\u65F6\uFF0C\u5FC5\u987B\u82B1\u8D39\u300C\u5192\u967A\u8005\u7B49\u7EA7\xD710\u300D\u52A0\u7F8E\u5C14\u7528\u4E8E\u5174\u8DA3\u548C\u55DC\u597D\u54C1\u7B49\u7684\u652F\u51FA\u3002\u82E5\u5904\u4E8E\u65E0\u6CD5\u6D88\u8D39\u5174\u8DA3\u548C\u55DC\u597D\u54C1\u7684\u73AF\u5883\u4E2D\uFF0C\u76F4\u5230\u7B2C\u4E8C\u5929\u65E9\u4E0A\u4E3A\u6B62\uFF0CHP\u4E0A\u9650\u3001MP\u4E0A\u9650\u51CF\u5C11\u300C\u5192\u967A\u8005\u7B49\u7EA7\u300D\u70B9\u3002","\u300C\u9634\u9B42\u4E0D\u6563\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u8FD9\u4E2A\u6B66\u5177\u4E0D\u77E5\u4E0D\u89C9\u5C31\u4F1A\u51FA\u73B0\u5728\u8EAB\u8FB9\u3002\u4EE5\u8BE5\u6B66\u5177\u4EE5\u5916\u7684\u6B66\u5177\u8FDB\u884C\u7684\u547D\u4E2D\u529B\u5224\u5B9A\uFF08\u6B66\u5668\uFF09\u3001\u9B54\u6CD5\u884C\u4F7F\u5224\u5B9A\uFF08\u6B66\u5668\uFF09\u3001\u56DE\u907F\u529B\u5224\u5B9A\uFF08\u94E0\u3001\u76FE\uFF09\u4F1A\u53D7\u5230-4\u7684\u60E9\u7F5A\u4FEE\u6B63\u3002","\u300C\u6162\u541E\u541E\u7684\u300D\u3000\u643A\u5E26\u65F6\u3000\u6218\u6597\u5F00\u59CB\u65F6\u65E0\u6CD5\u8FDB\u884C\u300C\u6218\u6597\u51C6\u5907\u300D\u3002"]]},AbyssCurseCategoryTable:{name:"\u5948\u843D\u8BC5\u5492\u5206\u7C7B\u51B3\u5B9A\u8868",odd:["\u86EE\u65CF","\u52A8\u7269","\u690D\u7269","\u4E0D\u6B7B\u751F\u7269","\u9B54\u6CD5\u751F\u7269","\u5728\u300C\u86EE\u65CF\u300D\u300C\u52A8\u7269\u300D\u300C\u690D\u7269\u300D\u300C\u4E0D\u6B7B\u751F\u7269\u300D\u300C\u9B54\u6CD5\u751F\u7269\u300D\u4E2D\u4EFB\u9009\u4E00\u4E2A"],even:["\u9B54\u52A8\u673A","\u5E7B\u517D","\u5996\u7CBE","\u9B54\u795E","\u4EBA\u65CF","\u5728\u300C\u9B54\u52A8\u673A\u300D\u300C\u5E7B\u517D\u300D\u300C\u5996\u7CBE\u300D\u300C\u9B54\u795E\u300D\u300C\u4EBA\u65CF\u300D\u4E2D\u4EFB\u9009\u4E00\u4E2A"]},AbyssCurseAttrTable:{name:"\u5948\u843D\u8BC5\u5492\u5C5E\u6027\u51B3\u5B9A\u8868",odd:["\u571F","\u6C34\u30FB\u51B0","\u708E","\u98CE","\u96F7","\u7EAF\u80FD\u91CF"],even:["\u65AD\u7A7A","\u51B2\u51FB","\u6BD2","\u75BE\u75C5","\u8BC5\u5492","\u7CBE\u795E\u6548\u679C"]}}}};Se.I18n.$load_translation(JSON.stringify(mr));Se.I18n.$load_translation(JSON.stringify(vr));Se.I18n.$load_translation(JSON.stringify(gr));Se.I18n.$load_translation(JSON.stringify(pr));Se.I18n.$load_translation(JSON.stringify(br));Se.I18n.$load_translation(JSON.stringify(yr));Ee();Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var C=e.module,z=e.ensure_kwargs,g=e.truthy,y=e.thrower,M=e.def,D=[],X=e.nil,j=e.$$$;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"ArithmeticEvaluator"),k=[K].concat(B);return function(I,V){var v=[I].concat(V),x=e.$r(v);return M(I,"$eval",function(T,o){try{var A=y("eval_return"),N,L=X;return o=z(o),N=o.$$smap.round_type,N==null&&(N=j(x("RoundType"),"FLOOR")),g(T)&&g(L=x("Arithmetic").$eval(T,N))?L:0}catch(S){if(S===e.t_eval_return)return S.$v;throw S}},-2)}(e.get_singleton_class(K),k)}(J[0],J)}(D[0],D)};Opal.modules["i18n/backend/fallbacks"]=function(e){var C=e.module,z=e.class_variable_set,g=e.truthy,y=e.class_variable_get,M=e.def,D=e.send,X=e.send2,j=e.find_super,b=e.hash2,U=e.find_block_super,F=e.neqeq,J=e.thrower,H=e.return_val,B=[],K=e.nil,k=e.$$$;return function(I,V){var v=C(I,"I18n"),x=[v].concat(V);return z(x[0],"@@fallbacks",K),function(w,T){var o=[w].concat(T),A=e.$r(o);return M(w,"$fallbacks",function(){var L,S=K;return z(o[1],"@@fallbacks",g((L=o[1].$$cvars["@@fallbacks"],L!=null?"class variable":K))&&g(S=y(o[1],"@@fallbacks",!1))?S:k(k(A("I18n"),"Locale"),"Fallbacks").$new()),g(S=A("Thread").$current()["$[]"]("i18n_fallbacks"))?S:y(o[1],"@@fallbacks",!1)}),M(w,"$fallbacks=",function(L){var S;return z(o[1],"@@fallbacks",g(L["$is_a?"](A("Array")))?k(k(A("I18n"),"Locale"),"Fallbacks").$new(L):L),S=["i18n_fallbacks",y(o[1],"@@fallbacks",!1)],D(A("Thread").$current(),"[]=",S),S[S.length-1]})}(e.get_singleton_class(v),x),function(w,T){var o=C(w,"Backend"),A=[o].concat(T);return function(N,L){var S=C(N,"Fallbacks"),c=[S].concat(L),E=e.$r(c);return M(S,"$translate",function m(f,h,R){try{var d=J("return"),l=m.$$p||K,u=this,i=K,n=K;return m.$$p=null,R==null&&(R=E("EMPTY_HASH")),g(R.$fetch("fallback",!0))?g(R["$[]"]("fallback_in_progress"))?X(u,j(u,"translate",m,!1,!0),"translate",[f,h,R],l):(g(R["$[]"]("default"))&&(i=u["$extract_non_symbol_default!"](R)),n=R.$merge(b(["fallback_in_progress"],{fallback_in_progress:!0})),D(E("I18n").$fallbacks()["$[]"](f),"each",[],function t($){var r=t.$$s==null?this:t.$$s;$==null&&($=K);try{return D(r,"catch",["exception"],function a(){var s=a.$$s==null?this:a.$$s,p=K;if(p=X(s,U(s,"translate",a.$$def||t.$$def||m,!1,!1),"translate",[$,h,n],null),g(p["$nil?"]()))return K;F(f.$to_s(),$.$to_s())&&s.$on_fallback(f,$,h,R),d.$throw(p)},{$$s:r,$$ret:d})}catch(a){if(e.rescue(a,[k(E("I18n"),"InvalidLocale")]))try{return K}finally{e.pop_exception()}else throw a}},{$$s:u}),g(R["$key?"]("default"))&&g(R["$[]"]("default")["$nil?"]())?K:g(i)?X(u,j(u,"translate",m,!1,!0),"translate",[f,K,R.$merge(b(["default"],{default:i}))],null):u.$throw("exception",k(E("I18n"),"MissingTranslation").$new(f,h,R))):X(u,j(u,"translate",m,!1,!0),"translate",[f,h,R],l)}catch(t){if(t===d)return t.$v;throw t}},-3),M(S,"$extract_non_symbol_default!",function(f){var h=K,R=K;return h=[f["$[]"]("default")].$flatten(),R=D(h,"detect",[],function(l){return l==null&&(l=K),l["$is_a?"](E("Symbol"))["$!"]()}),g(R)&&f["$[]="]("default",h["$[]"](0,h.$index(R))),R}),M(S,"$exists?",function m(f,h,R){try{var d=J("return"),l=m.$$p||K,u=this;return m.$$p=null,R==null&&(R=E("EMPTY_HASH")),g(R.$fetch("fallback",!0))?(D(E("I18n").$fallbacks()["$[]"](f),"each",[],function i(n){var t=i.$$s==null?this:i.$$s;n==null&&(n=K);try{if(g(X(t,U(t,"exists?",i.$$def||m,!1,!1),"exists?",[n,h],null)))d.$throw(!0);else return K}catch($){if(e.rescue($,[k(E("I18n"),"InvalidLocale")]))try{return K}finally{e.pop_exception()}else throw $}},{$$s:u,$$ret:d}),!1):X(u,j(u,"exists?",m,!1,!0),"exists?",[f,h,R],l)}catch(i){if(i===d)return i.$v;throw i}},-3),S.$private(),M(S,"$on_fallback",H(K))}(A[0],A)}(x[0],x)}(B[0],B)};Opal.modules["bcdice/randomizer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.def,M=e.truthy,D=e.rb_gt,X=e.rb_plus,j=e.rb_le,b=e.send,U=e.rb_minus,F=e.eqeq,J=e.rb_times,H=e.eqeqeq,B=e.rb_ge,K=[],k=e.nil,I=e.$$$;return function(V,v){var x=C(V,"BCDice"),w=[x].concat(v),T=e.$r(w);return function(o,A,N){var L=z(o,A,"Randomizer"),S=[L].concat(N),c=e.$r(S),E=L.$$prototype;return E.rand_results=E.detailed_rand_results=k,g(S[0],"UPPER_LIMIT_DICE_TIMES",200),g(S[0],"UPPER_LIMIT_DICE_SIDES",1e4),g(S[0],"UPPER_LIMIT_RANDS",1e4),y(L,"$initialize",function(){var f=this;return f.rand_results=[],f.detailed_rand_results=[]}),L.$attr_reader("rand_results"),L.$attr_reader("detailed_rand_results"),g(S[0],"DetailedRandResult",c("Struct").$new("kind","sides","value")),y(L,"$roll_barabara",function(f,h){var R=this;return M(D(X(R.rand_results.$size(),f),c("UPPER_LIMIT_RANDS")))&&R.$raise(c("TooManyRandsError")),M(j(f,0))||M(D(f,c("UPPER_LIMIT_DICE_TIMES")))?[]:b(c("Array"),"new",[f],function d(){var l=d.$$s==null?this:d.$$s;return l.$roll_once(h)},{$$s:R})}),y(L,"$roll_sum",function(f,h){var R=this;return R.$roll_barabara(f,h).$sum()}),y(L,"$roll_once",function(f){var h=this,R=k;return M(j(f,0))||M(D(f,c("UPPER_LIMIT_DICE_SIDES")))?0:(R=h.$rand_inner(f),h.$push_to_detail("normal",f,R),R)}),y(L,"$roll_index",function(f){var h=this;return U(h.$roll_once(f),1)}),y(L,"$roll_tens_d10",function(){var f=this,h=k,R=k;return h=f.$rand_inner(10),F(h,10)&&(h=0),R=J(h,10),f.$push_to_detail("tens_d10",10,R),R}),y(L,"$roll_d9",function(){var f=this,h=k;return h=U(f.$rand_inner(10),1),f.$push_to_detail("d9",10,h),h}),y(L,"$roll_d66",function(f){var h=this,R=k,d=k;return R=b(c("Array"),"new",[2],function l(){var u=l.$$s==null?this:l.$$s;return u.$roll_once(6)},{$$s:h}),H(I(c("D66SortType"),"ASC"),d=f)?R["$sort!"]():H(I(c("D66SortType"),"DESC"),d)&&R["$sort!"]()["$reverse!"](),X(J(R["$[]"](0),10),R["$[]"](1))}),L.$private(),y(L,"$rand_inner",function(f){var h=this,R=k;return M(B(h.rand_results.$size(),c("UPPER_LIMIT_RANDS")))&&h.$raise(c("TooManyRandsError")),R=h.$random(f),h.rand_results["$<<"]([R,f]),R}),y(L,"$random",function(f){return X(c("Kernel").$rand(f),1)}),y(L,"$push_to_detail",function(f,h,R){var d=this,l=k;return l=c("DetailedRandResult").$new(f,h,R),d.detailed_rand_results.$push(l)})}(w[0],null,w),z(w[0],T("StandardError"),"TooManyRandsError"),k}(K[0],K)};Opal.modules["bcdice/dice_table/roll_result"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.truthy,M=e.return_val,D=[],X=e.nil;return function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"DiceTable"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"RollResult"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.table_name=T.value=T.body=X,g(v,"$initialize",function(A,N,L){var S=this;return S.table_name=A,S.value=N,S.body=L}),v.$attr_reader("table_name"),v.$attr_reader("value"),v.$attr_reader("body"),g(v,"$to_s",function(){var A=this;return""+A.table_name+"("+A.value+") \uFF1E "+A.body}),g(v,"$last_body",function(){var A=this;return y(A.body["$is_a?"](w("RollResult")))?A.body.$last_body():A.body}),g(v,"$empty?",M(!1))}(K[0],null,K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/dice_table/chain_table"]=function(e){var C=e.module,z=e.klass,g=e.truthy,y=e.def,M=e.rb_minus,D=[],X=e.nil;return function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"DiceTable"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"ChainTable"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.times=T.sides=T.items=T.name=X,y(v,"$initialize",function(A,N,L){var S=this,c=X;return S.name=A,S.items=L.$freeze(),c=/(\d+)D(\d+)/i.$match(N),g(c)||S.$raise(w("ArgumentError"),"Unexpected table type: "+N),S.times=c["$[]"](1).$to_i(),S.sides=c["$[]"](2).$to_i()}),y(v,"$roll",function(A){var N=this,L=X,S=X,c=X;return L=A.$roll_sum(N.times,N.sides),S=M(L,N.times),c=N.items["$[]"](S),g(c["$respond_to?"]("roll"))&&(c=c.$roll(A)),w("RollResult").$new(N.name,L,c)})}(K[0],null,K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.rb_plus,X=e.rb_times,j=e.rb_minus,b=[],U=e.nil;return function(F,J){var H=C(F,"BCDice"),B=[H].concat(J);return function(K,k){var I=C(K,"DiceTable"),V=[I].concat(k);return function(v,x,w){var T=z(v,x,"D66GridTable"),o=[T].concat(w),A=e.$r(o),N=T.$$prototype;return N.name=N.items=U,y(T,"$from_i18n",function(S,c){var E=this,m=U;return m=A("I18n").$t(S,g(["locale","raise"],{locale:c,raise:!0})),E.$new(m["$[]"]("name"),m["$[]"]("items"))}),M(T,"$initialize",function(S,c){var E=this;return E.name=S,E.items=c.$freeze()}),M(T,"$roll",function(S){var c=this,E=U,m=U,f=U,h=U,R=U;return E=S.$roll_once(6),m=S.$roll_once(6),f=D(X(E,10),m),h=j(E,1),R=j(m,1),A("RollResult").$new(c.name,f,c.items["$[]"](h)["$[]"](R))})}(V[0],null,V)}(B[0],B)}(b[0],b)};Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.top,X=[],j=e.nil;return D.$require("bcdice/dice_table/d66_grid_table"),function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"DiceTable"),k=[K].concat(B),I=e.$r(k);return function(V,v,x){var w=z(V,v,"D66HalfGridTable"),T=[w].concat(x),o=e.$r(T);return y(w,"$from_i18n",function(N,L){var S=this,c=j;return c=o("I18n").$t(N,g(["locale","raise"],{locale:L,raise:!0})),S.$new(c["$[]"]("name"),c["$[]"]("items_1_2_3"),c["$[]"]("items_4_5_6"))}),M(w,"$initialize",function(N,L,S){var c=this;return c.name=N,c.items=[L,L,L,S,S,S].$freeze()})}(k[0],I("D66GridTable"),k)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.top,X=[],j=e.nil;return D.$require("bcdice/dice_table/d66_grid_table"),function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"DiceTable"),k=[K].concat(B),I=e.$r(k);return function(V,v,x){var w=z(V,v,"D66OneThirdTable"),T=[w].concat(x),o=e.$r(T);return y(w,"$from_i18n",function(N,L){var S=this,c=j;return c=o("I18n").$t(N,g(["locale","raise"],{locale:L,raise:!0})),S.$new(c["$[]"]("name"),c["$[]"]("items_1_2"),c["$[]"]("items_3_4"),c["$[]"]("items_5_6"))}),M(w,"$initialize",function(N,L,S,c){var E=this;return E.name=N,E.items=[L,L,S,S,c,c].$freeze()})}(k[0],I("D66GridTable"),k)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/dice_table/d66_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.eqeqeq,X=e.rb_plus,j=e.rb_times,b=e.truthy,U=[],F=e.nil,J=e.$$$;return function(H,B){var K=C(H,"BCDice"),k=[K].concat(B);return function(I,V){var v=C(I,"DiceTable"),x=[v].concat(V);return function(w,T,o){var A=z(w,T,"D66Table"),N=[A].concat(o),L=e.$r(N),S=A.$$prototype;return S.sort_type=S.items=S.name=F,y(A,"$from_i18n",function(E,m){var f=this,h=F,R=F;return h=L("I18n").$t(E,g(["locale"],{locale:m})),R=L("D66SortType").$const_get(h["$[]"]("d66_sort_type")),f.$new(h["$[]"]("name"),R,h["$[]"]("items"))}),M(A,"$initialize",function(E,m,f){var h=this;return h.name=E,h.sort_type=m,h.items=f.$freeze()}),M(A,"$roll",function(E){var m=this,f=F,h=F,R=F,d=F;return f=E.$roll_barabara(2,6),D(J(L("D66SortType"),"ASC"),h=m.sort_type)?f["$sort!"]():D(J(L("D66SortType"),"DESC"),h)&&f["$sort!"]()["$reverse!"](),R=X(j(f["$[]"](0),10),f["$[]"](1)),d=b(h=m.items["$[]"](R))?h:m.items["$[]"](R.$to_s()),b(d["$respond_to?"]("roll"))&&(d=d.$roll(E)),L("RollResult").$new(m.name,R,d)}),M(A,"$choice",function(E){var m=this;return L("RollResult").$new(m.name,E,m.items["$[]"](E))})}(x[0],null,x)}(k[0],k)}(U[0],U)};Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.send,M=e.to_ary,D=e.rb_plus,X=e.rb_times,j=e.send2,b=e.find_super,U=e.def,F=e.top,J=[],H=e.nil;return F.$require("bcdice/dice_table/d66_table"),function(B,K){var k=C(B,"BCDice"),I=[k].concat(K);return function(V,v){var x=C(V,"DiceTable"),w=[x].concat(v),T=e.$r(w);return function(o,A){var N=z(o,A,"D66LeftRangeTable");return U(N,"$initialize",function L(S,c,E){var m=L.$$p||H,f=this,h=H;return L.$$p=null,h=g([],{}),y(E,"each",[],function(d){var l,u,i=H,n=H;return d==null&&(d=H),u=d,l=M(u),i=l[0]==null?H:l[0],n=l[1]==null?H:l[1],y(i,"each",[],function($){return $==null&&($=H),y(n,"each_with_index",[],function(a,s){var p,G=H;return a==null&&(a=H),s==null&&(s=H),G=D(X($,10),D(s,1)),p=[G,a],y(h,"[]=",p),p[p.length-1]})})}),j(f,b(f,"initialize",L,!1,!0),"initialize",[S,c,h],null)})}(w[0],T("D66Table"))}(I[0],I)}(J[0],J)};Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.def,D=e.truthy,X=e.rb_minus,j=e.rb_plus,b=e.rb_times,U=[],F=e.nil;return function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I){var V=C(k,"DiceTable"),v=[V].concat(I);return function(x,w,T){var o=z(x,w,"D66ParityTable"),A=[o].concat(T),N=e.$r(A),L=o.$$prototype;return L.odd=L.even=L.name=F,y(o,"$from_i18n",function(c,E){var m=this,f=F;return f=N("I18n").$t(c,g(["locale","raise"],{locale:E,raise:!0})),m.$new(f["$[]"]("name"),f["$[]"]("odd"),f["$[]"]("even"))}),M(o,"$initialize",function(c,E,m){var f=this;return f.name=c,f.odd=E.$freeze(),f.even=m.$freeze()}),M(o,"$roll",function(c){var E=this,m=F,f=F,h=F,R=F,d=F;return m=c.$roll_once(6),f=c.$roll_once(6),D(m["$odd?"]())?h=E.odd:h=E.even,R=h["$[]"](X(f,1)),d=j(b(m,10),f),N("RollResult").$new(E.name,d,R)})}(v[0],null,v)}(K[0],K)}(U[0],U)};Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.rb_plus,M=e.rb_times,D=e.send,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"DiceTable"),k=[K].concat(B);return function(I,V,v){var x=z(I,V,"D66RangeTable"),w=[x].concat(v),T=e.$r(w),o=x.$$prototype;return o.items=o.name=j,g(x,"$initialize",function(N,L){var S=this;return S.name=N,S.items=L.$freeze()}),g(x,"$roll",function(N){var L=this,S=j,c=j,E=j,m=j;return S=N.$roll_once(6),c=N.$roll_once(6),E=y(M(S,10),c),m=D(L.items,"find",[],function(h){return h==null&&(h=j),h["$[]"](0)["$include?"](E)}),T("RollResult").$new(L.name,E,m["$[]"](1))})}(k[0],null,k)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/dice_table/range_table"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.send,M=e.truthy,D=e.def,X=e.eqeqeq,j=e.rb_times,b=e.rb_plus,U=[],F=e.nil;return function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I){var V=C(k,"DiceTable"),v=[V].concat(I);return function(x,w,T){var o=z(x,w,"RangeTable"),A=[o].concat(T),N=e.$r(A),L=o.$$prototype;return L.name=L.items=L.num_of_dice=L.num_of_sides=L.formatter=F,g(A[0],"RollResult",y(N("Struct"),"new",["sum","values","content","formatted"],function S(){var c=S.$$s==null?this:S.$$s;return c.$alias_method("to_s","formatted")},{$$s:o})),g(A[0],"Item",N("Struct").$new("range","content")),g(A[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),g(A[0],"DEFAULT_FORMATTER",y(o,"lambda",[],function(c,E){return c==null&&(c=F),E==null&&(E=F),""+c.$name()+"("+E.$sum()+") \uFF1E "+E.$content()})),o.$attr_reader("name"),o.$attr_reader("num_of_dice"),o.$attr_reader("num_of_sides"),D(o,"$initialize",function S(c,E,m){var f=S.$$p||F,h=this,R=F,d=F;return S.$$p=null,h.name=c.$freeze(),h.formatter=M(R=f)?R:N("DEFAULT_FORMATTER"),d=N("DICE_ROLL_METHOD_RE").$match(E),M(d)||h.$raise(N("ArgumentError"),""+h.name+": invalid dice roll method: "+E),h.num_of_dice=d["$[]"](1).$to_i(),h.num_of_sides=d["$[]"](2).$to_i(),h.$store(m)}),D(o,"$fetch",function(c){var E=this,m=F;return m=y(E.items,"find",[],function(h){return h==null&&(h=F),h.$range()["$include?"](c)}),M(m)||E.$raise(N("RangeError"),""+E.name+": value is out of range: "+c),m}),D(o,"$roll",function(c){var E=this,m=F,f=F,h=F;return m=c.$roll_barabara(E.num_of_dice,E.num_of_sides),f=m.$sum(),h=N("RollResult").$new(f,m,E.$fetch(f).$content()),h["$formatted="](E.formatter["$[]"](E,h)),h}),o.$private(),D(o,"$store",function(c){var E=this,m=F,f=F;return m=y(c,"map",[],function h(R,d){var l=h.$$s==null?this:h.$$s;return R==null&&(R=F),d==null&&(d=F),[l.$coerce_to_int_range(R),d]},{$$s:E}),f=y(m,"sort_by",[],function(R,d){return R==null&&(R=F),d==null&&(d=F),R.$min()}),E.$assert_min_sum_is_covered(f),E.$assert_max_sum_is_covered(f),E.$assert_no_gap_or_overlap_in_ranges(f),E.items=y(f,"map",[],function(R,d){return R==null&&(R=F),d==null&&(d=F),N("Item").$new(R,d.$freeze()).$freeze()}).$freeze(),E}),D(o,"$coerce_to_int_range",function(c){var E=this,m=F;return X(N("Integer"),m=c)?N("Range").$new(c,c):X(N("Range"),m)&&M(c.$begin()["$is_a?"](N("Integer")))&&M(c.$end()["$is_a?"](N("Integer")))?c:E.$raise(N("TypeError"),""+E.name+": "+c+" ("+c.$class()+") must be an Integer or a Range with Integers ")}),D(o,"$assert_min_sum_is_covered",function(c){var E=this,m=F,f=F;return m=E.num_of_dice,f=c.$first()["$[]"](0),M(f["$include?"](m))||E.$raise(N("RangeError"),""+E.name+": min value ("+m+") is not covered: "+f),E}),D(o,"$assert_max_sum_is_covered",function(c){var E=this,m=F,f=F;return m=j(E.num_of_dice,E.num_of_sides),f=c.$last()["$[]"](0),M(f["$include?"](m))||E.$raise(N("RangeError"),""+E.name+": max value ("+m+") is not covered: "+f),E}),D(o,"$assert_no_gap_or_overlap_in_ranges",function(c){var E=this;return y(c,"each_cons",[2],function m(f,h){var R=m.$$s==null?this:m.$$s,d=F,l=F,u=F,i=F;return R.name==null&&(R.name=F),f==null&&(f=F),h==null&&(h=F),d=f["$[]"](0),l=h["$[]"](0),u=d.$max(),i=b(u,1),M(l["$include?"](u))&&R.$raise(N("RangeError"),""+R.name+": Range overlap: "+d+" and "+l),M(l["$include?"](i))?F:R.$raise(N("RangeError"),""+R.name+": Range gap: "+d+" and "+l)},{$$s:E}),E})}(v[0],null,v)}(K[0],K)}(U[0],U)};Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var C=e.module,z=e.klass,g=e.send,y=e.def,M=e.rb_minus,D=e.return_ivar,X=[],j=e.nil,b=e.$$$;return function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"DiceTable"),I=[k].concat(K);return function(V,v,x){var w=z(V,v,"SaiFicSkillTable"),T=[w].concat(x);return function(o,A,N){var L=z(o,A,"Category"),S=[L].concat(N),c=e.$r(S);return y(L,"$initialize",function(m,f,h,R){var d=this;return d.name=m,d.skills=g(f.$map(),"with_index",[2],function(u,i){return u==null&&(u=j),i==null&&(i=j),b(c("SaiFicSkillTable"),"Skill").$new(m,u,h,i,R)}),d.dice=h}),y(L,"$roll",function(m){var f=this;return f.$skills()["$[]"](M(m.$roll_sum(2,6),2))}),y(L,"$to_s",D("name")),L.$attr_reader("name","dice","skills")}(T[0],null,T)}(I[0],null,I)}(H[0],H)}(X[0],X)};Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.hash2,M=[],D=e.nil;return function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F,J){var H=C(F,"DiceTable"),B=[H].concat(J);return function(K,k,I){var V=z(K,k,"SaiFicSkillTable"),v=[V].concat(I);return function(x,w){var T=z(x,w,"Skill"),o=T.$$prototype;return o.s_format=o.category_dice=o.row_dice=o.category_name=o.name=D,g(T,"$initialize",function(N,L,S,c,E){var m=this;return m.category_name=N,m.name=L,m.category_dice=S,m.row_dice=c,m.s_format=E}),g(T,"$to_s",function(){var N=this;return N.$format(N.s_format,y(["category_dice","row_dice","category_name","skill_name"],{category_dice:N.category_dice,row_dice:N.row_dice,category_name:N.category_name,skill_name:N.name}))}),T.$attr_reader("category_name","name","category_dice","row_dice")}(v[0],null)}(B[0],null,B)}(U[0],U)}(M[0],M)};Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var C=e.module,z=e.klass,g=e.ensure_kwargs,y=e.hash2,M=e.send,D=e.hash,X=e.defs,j=e.const_set,b=e.to_ary,U=e.def,F=e.truthy,J=e.rb_minus,H=e.rb_plus,B=e.top,K=[],k=e.nil,I=e.$$$;return B.$require("bcdice/dice_table/sai_fic_skill_table/category"),B.$require("bcdice/dice_table/sai_fic_skill_table/skill"),function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"DiceTable"),N=[A].concat(o);return function(L,S,c){var E=z(L,S,"SaiFicSkillTable"),m=[E].concat(c),f=e.$r(m),h=E.$$prototype;return h.rtt=h.rtt_format=h.rct=h.rct_format=h.rttn=h.rttn_format=h.categories=k,X(E,"$from_i18n",function(d,l,u){var i,n,t,$=this,r=k,a=k,s=k;return u=g(u),i=u.$$smap.rtt,i==null&&(i=k),n=u.$$smap.rct,n==null&&(n=k),t=u.$$smap.rttn,t==null&&(t=k),r=f("I18n").$t("RTT",y(["locale","raise","default"],{locale:l,raise:!1,default:y([],{})})),a=r.$merge(f("I18n").$t(d,y(["locale","raise"],{locale:l,raise:!0}))),s=a["$[]"]("items"),a=M(a,"select",[],function(G,Z){return G==null&&(G=k),Z==null&&(Z=k),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](G)}),$.$new(s,e.to_hash(a).$merge(y(["rtt","rct","rttn"],{rtt:i,rct:n,rttn:t})))},-3),j(m[0],"DEFAULT_RTT","\u30E9\u30F3\u30C0\u30E0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uFF1E %<text>s"),j(m[0],"DEFAULT_RCT","\u30E9\u30F3\u30C0\u30E0\u5206\u91CE\u8868(%<category_dice>d) \uFF1E %<category_name>s"),j(m[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91CE\u30E9\u30F3\u30C0\u30E0\u7279\u6280\u8868(%<row_dice>d) \uFF1E %<text>s"),j(m[0],"DEFAULT_S","\u300A%<skill_name>s\uFF0F%<category_name>s%<row_dice>d\u300B"),U(E,"$initialize",function(d,l){var u,i,n,t,$,r,a,s=this;return l=g(l),u=l.$$smap.rtt,u==null&&(u=k),i=l.$$smap.rct,i==null&&(i=k),n=l.$$smap.rttn,n==null&&(n=k),t=l.$$smap.rtt_format,t==null&&(t=f("DEFAULT_RTT")),$=l.$$smap.rct_format,$==null&&($=f("DEFAULT_RCT")),r=l.$$smap.rttn_format,r==null&&(r=f("DEFAULT_RTTN")),a=l.$$smap.s_format,a==null&&(a=f("DEFAULT_S")),s.categories=M(d.$map(),"with_index",[1],function(G,Z){var ie,ne,se=k,O=k;return G==null&&(G=k),Z==null&&(Z=k),ne=G,ie=b(ne),se=ie[0]==null?k:ie[0],O=ie[1]==null?k:ie[1],I(f("SaiFicSkillTable"),"Category").$new(se,O,Z,a)},{$$has_top_level_mlhs_arg:!0}),s.rtt=u,s.rct=i,s.rttn=n.$to_a(),s.rtt_format=t,s.rct_format=$,s.rttn_format=r},-2),j(m[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),E.$attr_reader("categories"),U(E,"$roll_command",function(d,l){var u=this,i=k,n=k,t=k;return i=l,F(["RTT",u.rtt]["$include?"](i))?u.$format_skill(u.rtt_format,u.$roll_skill(d)):F(["RCT",u.rct]["$include?"](i))?(n=u.$roll_category(d),u.$format(u.rct_format,y(["category_dice","category_name"],{category_dice:n.$dice(),category_name:n.$name()}))):F(t=f("RTTN").$index(i))||F(t=u.rttn.$index(i))?u.$format_skill(u.rttn_format,u.categories["$[]"](t).$roll(d)):k}),U(E,"$roll_category",function(d){var l=this;return l.categories["$[]"](J(d.$roll_once(6),1))}),U(E,"$roll_skill",function(d){var l=this;return l.$roll_category(d).$roll(d)}),U(E,"$prefixes",function(){var d=this;return H(["RTT[1-6]?","RCT",d.rtt,d.rct],d.rttn).$compact()}),E.$private(),U(E,"$format_skill",function(d,l){var u=this;return u.$format(d,y(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:l.$category_dice(),row_dice:l.$row_dice(),category_name:l.$category_name(),skill_name:l.$name(),text:l.$to_s()}))})}(N[0],null,N)}(w[0],w)}(K[0],K)};Opal.modules["bcdice/dice_table/table"]=function(e){var C=e.module,z=e.klass,g=e.hash2,y=e.defs,M=e.truthy,D=e.def,X=e.rb_minus,j=[],b=e.nil;return function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"DiceTable"),I=[k].concat(K);return function(V,v,x){var w=z(V,v,"Table"),T=[w].concat(x),o=e.$r(T),A=w.$$prototype;return A.times=A.sides=A.name=A.items=b,y(w,"$from_i18n",function(L,S){var c=this,E=b;return E=o("I18n").$t(L,g(["locale"],{locale:S})),c.$new(E["$[]"]("name"),E["$[]"]("type"),E["$[]"]("items"))}),D(w,"$initialize",function(L,S,c){var E=this,m=b;return E.name=L,E.items=c.$freeze(),m=/(\d+)D(\d+)/i.$match(S),M(m)||E.$raise(o("ArgumentError"),"Unexpected table type: "+S),E.times=m["$[]"](1).$to_i(),E.sides=m["$[]"](2).$to_i()}),D(w,"$roll",function(L){var S=this,c=b;return c=L.$roll_sum(S.times,S.sides),S.$choice(c)}),D(w,"$choice",function(L){var S=this,c=b;return c=X(L,S.times),o("RollResult").$new(S.name,L,S.items["$[]"](c))})}(I[0],null,I)}(H[0],H)}(j[0],j)};Opal.modules["bcdice/dice_table"]=function(e){var C=e.top,z=e.nil;return C.$require("bcdice/dice_table/roll_result"),C.$require("bcdice/dice_table/chain_table"),C.$require("bcdice/dice_table/d66_grid_table"),C.$require("bcdice/dice_table/d66_half_grid_table"),C.$require("bcdice/dice_table/d66_one_third_table"),C.$require("bcdice/dice_table/d66_left_range_table"),C.$require("bcdice/dice_table/d66_parity_table"),C.$require("bcdice/dice_table/d66_range_table"),C.$require("bcdice/dice_table/d66_table"),C.$require("bcdice/dice_table/range_table"),C.$require("bcdice/dice_table/sai_fic_skill_table"),C.$require("bcdice/dice_table/table")};Opal.modules["bcdice/enum"]=function(e){var C=e.module,z=e.const_set,g=[],y=e.nil;return function(M,D){var X=C(M,"BCDice"),j=[X].concat(D);return function(b,U){var F=C(b,"D66SortType"),J=[F].concat(U);return z(J[0],"NO_SORT","no_sort"),z(J[0],"ASC","asc"),z(J[0],"DESC","desc")}(j[0],j),function(b,U){var F=C(b,"RoundType"),J=[F].concat(U);return z(J[0],"CEIL","ceil"),z(J[0],"FLOOR","floor"),z(J[0],"ROUND","round")}(j[0],j)}(g[0],g)};Opal.modules["bcdice/translate"]=function(e){var C=e.module,z=e.ensure_kwargs,g=e.kwrestargs,y=e.hash,M=e.hash2,D=e.def,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"Translate"),k=[K].concat(B),I=e.$r(k);return D(K,"$translate",function(v,x){var w,T=this;return T.locale==null&&(T.locale=j),x=z(x),w=g(x,{}),I("I18n").$translate(v,M(["locale","raise"],{locale:T.locale,raise:!0}).$merge(e.to_hash(w)))},-2)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/result"]=function(e){var C=e.module,z=e.klass,g=e.send,y=e.def,M=e.return_val,D=e.return_ivar,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B,K){var k=z(H,B,"Result"),I=[k].concat(K);return function(V,v){return y(V,"$success",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),N=[!0],g(A,"success=",N),N[N.length-1]})}),y(V,"$failure",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),N=[!0],g(A,"failure=",N),N[N.length-1]})}),y(V,"$critical",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),A["$critical="](!0),N=[!0],g(A,"success=",N),N[N.length-1]})}),y(V,"$fumble",function(w){var T=this;return g(T.$new(),"tap",[],function(A){var N;return A==null&&(A=j),A["$text="](w),A["$fumble="](!0),N=[!0],g(A,"failure=",N),N[N.length-1]})}),y(V,"$nothing",M("nothing"))}(e.get_singleton_class(k),I),y(k,"$initialize",function(v){var x=this;return v==null&&(v=j),x.text=v,x.rands=j,x.detailed_rands=j,x.secret=!1,x.success=!1,x.failure=!1,x.critical=!1,x.fumble=!1},-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),y(k,"$secret?",D("secret")),y(k,"$success?",D("success")),y(k,"$failure?",D("failure")),y(k,"$critical?",D("critical")),y(k,"$fumble?",D("fumble")),y(k,"$condition=",function(v){var x=this;return x.success=v,x.failure=v["$!"]()})}(J[0],null,J)}(X[0],X)};Opal.modules["racc/parser"]=function(e){var C=e.module,z=e.klass,g=e.truthy,y=e.const_set,M=e.defs,D=e.gvars,X=e.rb_lt,j=e.def,b=e.to_ary,U=e.send,F=e.neqeq,J=e.rb_plus,H=e.eqeq,B=e.rb_ge,K=e.rb_gt,k=e.rb_minus,I=e.rb_le,V=e.rb_times,v=e.assign_ivar_val,x,w=[],T=e.$r(w),o=e.nil,A=e.$$$;return function(N,L){var S=C(N,"Racc"),c=[S].concat(L),E=e.$r(c);return z(c[0],E("StandardError"),"ParseError"),o}(w[0],w),g((x=A("::","ParseError","skip_raise"))?"constant":o)||y(w[0],"ParseError",A(T("Racc"),"ParseError")),function(N,L){var S=C(N,"Racc"),c,E=[S].concat(L),m=e.$r(E);return g((c=m("Racc_No_Extensions","skip_raise"))?"constant":o)||y(E[0],"Racc_No_Extensions",!1),function(f,h,R){var d=z(f,h,"Parser"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.yydebug=i.racc_debug_out=i.racc_error_status=i.racc_t=i.racc_vstack=i.racc_val=i.racc_state=i.racc_tstack=o,y(l[0],"Racc_Runtime_Version","1.4.6"),y(l[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Runtime_Core_Version_R","1.4.6"),y(l[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),y(l[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),y(l[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),y(l[0],"Racc_Runtime_Core_Version",u("Racc_Runtime_Core_Version_R")),y(l[0],"Racc_Runtime_Core_Revision",u("Racc_Runtime_Core_Revision_R")),y(l[0],"Racc_Runtime_Type","ruby"),M(u("Parser"),"$racc_runtime_type",function(){return u("Racc_Runtime_Type")}),j(d,"$_racc_setup",function(){var t,$,r=this,a=o,s=o;return D.stderr==null&&(D.stderr=o),g(A(r.$class(),"Racc_debug_parser"))||(r.yydebug=!1),g((t=r.yydebug,t!=null&&t!==o?"instance-variable":o))||(r.yydebug=!1),g(r.yydebug)&&(g(($=r.racc_debug_out,$!=null&&$!==o?"instance-variable":o))||(r.racc_debug_out=D.stderr),r.racc_debug_out=g(a=r.racc_debug_out)?a:D.stderr),s=A(r.$class(),"Racc_arg"),g(X(s.$size(),14))&&s["$[]="](13,!0),s}),j(d,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=o,t.racc_val=o,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),j(d,"$do_parse",function(){var t=this;return t.$__send__(u("Racc_Main_Parsing_Routine"),t.$_racc_setup(),!1)}),j(d,"$next_token",function(){var t=this;return t.$raise(u("NotImplementedError"),""+t.$class()+"#next_token is not defined")}),j(d,"$_racc_do_parse_rb",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o;return a=t,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],ne=r[4]==null?o:r[4],ne=r[5]==null?o:r[5],ne=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],ne=r[8]==null?o:r[8],ne=r[9]==null?o:r[9],se=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],ne=r[12]==null?o:r[12],ne=r[13]==null?o:r[13],s.$_racc_init_sysvars(),O=oe=ue=o,U(s,"catch",["racc_end_parse"],function te(){var $e,re,P=te.$$s==null?this:te.$$s,W=o;for(P.racc_state==null&&(P.racc_state=o),P.racc_read_next==null&&(P.racc_read_next=o),P.racc_t==null&&(P.racc_t=o),P.yydebug==null&&(P.yydebug=o),P.racc_val==null&&(P.racc_val=o);g(!0);)for(g(ue=ie["$[]"](P.racc_state["$[]"](-1)))?(g(P.racc_read_next)&&F(P.racc_t,0)&&(re=P.$next_token(),$e=b(re),O=$e[0]==null?o:$e[0],P.racc_val=$e[1]==null?o:$e[1],g(O)?P.racc_t=g(W=se["$[]"](O))?W:1:P.racc_t=0,g(P.yydebug)&&P.$racc_read_token(P.racc_t,O,P.racc_val),P.racc_read_next=!1),ue=J(ue,P.racc_t),g(B(ue,0))&&g(oe=p["$[]"](ue))&&H(G["$[]"](ue),P.racc_state["$[]"](-1))||(oe=Z["$[]"](P.racc_state["$[]"](-1)))):oe=Z["$[]"](P.racc_state["$[]"](-1));g(oe=P.$_racc_evalact(oe,t)););},{$$s:s})}),j(d,"$yyparse",function(t,$){var r=this;return r.$__send__(u("Racc_YY_Parse_Method"),t,$,r.$_racc_setup(),!0)}),j(d,"$_racc_yyparse_rb",function(t,$,r,a){var s,p,G=this,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o;return p=r,s=b(p),Z=s[0]==null?o:s[0],ie=s[1]==null?o:s[1],ne=s[2]==null?o:s[2],se=s[3]==null?o:s[3],O=s[4]==null?o:s[4],O=s[5]==null?o:s[5],O=s[6]==null?o:s[6],O=s[7]==null?o:s[7],O=s[8]==null?o:s[8],O=s[9]==null?o:s[9],oe=s[10]==null?o:s[10],O=s[11]==null?o:s[11],O=s[12]==null?o:s[12],O=s[13]==null?o:s[13],G.$_racc_init_sysvars(),ue=o,te=o,U(G,"catch",["racc_end_parse"],function $e(){var re=$e.$$s==null?this:$e.$$s;for(re.racc_state==null&&(re.racc_state=o);!g(te=se["$[]"](re.racc_state["$[]"](-1)));)for(;g(ue=re.$_racc_evalact(ne["$[]"](re.racc_state["$[]"](-1)),r)););return U(t,"__send__",[$],function P(W,ee){var _=P.$$s==null?this:P.$$s,q=o,Y=o;for(_.racc_t==null&&(_.racc_t=o),_.racc_state==null&&(_.racc_state=o),_.racc_read_next==null&&(_.racc_read_next=o),W==null&&(W=o),ee==null&&(ee=o),g(W)?_.racc_t=g(q=oe["$[]"](W))?q:1:_.racc_t=0,_.racc_val=ee,_.racc_read_next=!1,te=J(te,_.racc_t),g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););for(;g(g(q=g(Y=(te=se["$[]"](_.racc_state["$[]"](-1)))["$!"]())?Y:_.racc_read_next["$!"]())?q:_.racc_t["$=="](0));)for(g(te)&&g(te=J(te,_.racc_t))&&g(B(te,0))&&g(ue=Z["$[]"](te))&&H(ie["$[]"](te),_.racc_state["$[]"](-1))||(ue=ne["$[]"](_.racc_state["$[]"](-1)));g(ue=_.$_racc_evalact(ue,r)););},{$$s:re})},{$$s:G})}),j(d,"$_racc_evalact",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o;if(a=$,r=b(a),p=r[0]==null?o:r[0],G=r[1]==null?o:r[1],Z=r[2]==null?o:r[2],ie=r[3]==null?o:r[3],Z=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],Z=r[6]==null?o:r[6],Z=r[7]==null?o:r[7],Z=r[8]==null?o:r[8],Z=r[9]==null?o:r[9],Z=r[10]==null?o:r[10],ne=r[11]==null?o:r[11],se=r[12]==null?o:r[12],Z=r[13]==null?o:r[13],Z=r[14]==null?o:r[14],g(K(t,0))&&g(X(t,ne)))g(K(s.racc_error_status,0))&&(H(s.racc_t,1)||(s.racc_error_status=k(s.racc_error_status,1))),s.racc_vstack.$push(s.racc_val),s.racc_state.$push(t),s.racc_read_next=!0,g(s.yydebug)&&(s.racc_tstack.$push(s.racc_t),s.$racc_shift(s.racc_t,s.racc_tstack,s.racc_vstack));else if(g(X(t,0))&&g(K(t,se["$-@"]()))){if(O=U(s,"catch",["racc_jump"],function ue(){var te=ue.$$s==null?this:ue.$$s;return te.racc_state==null&&(te.racc_state=o),te.racc_state.$push(te.$_racc_do_reduce($,t)),!1},{$$s:s}),g(O))switch(O){case 1:return s.racc_user_yyerror=!0,se["$-@"]();case 2:return ne;default:s.$raise("[Racc Bug] unknown jump code")}}else if(H(t,ne))g(s.yydebug)&&s.$racc_accept(),s.$throw("racc_end_parse",s.racc_vstack["$[]"](0));else if(H(t,se["$-@"]())){switch(s.racc_error_status){case 0:g($["$[]"](21))||s.$on_error(s.racc_t,s.racc_val,s.racc_vstack);break;case 3:H(s.racc_t,0)&&s.$throw("racc_end_parse",o),s.racc_read_next=!0;break;default:}for(s.racc_user_yyerror=!1,s.racc_error_status=3;g(!0)&&!(g(oe=ie["$[]"](s.racc_state["$[]"](-1)))&&(oe=J(oe,1),g(B(oe,0))&&g(t=p["$[]"](oe))&&H(G["$[]"](oe),s.racc_state["$[]"](-1))));)g(I(s.racc_state.$size(),1))&&s.$throw("racc_end_parse",o),s.racc_state.$pop(),s.racc_vstack.$pop(),g(s.yydebug)&&(s.racc_tstack.$pop(),s.$racc_e_pop(s.racc_state,s.racc_tstack,s.racc_vstack));return t}else s.$raise("[Racc Bug] unknown action "+t.$inspect());return g(s.yydebug)&&s.$racc_next_state(s.racc_state["$[]"](-1),s.racc_state),o}),j(d,"$_racc_do_reduce",function(t,$){var r,a,s=this,p=o,G=o,Z=o,ie=o,ne=o,se=o,O=o,oe=o,ue=o,te=o,$e=o,re=o,P=o,W=o,ee=o,_=o,q=o,Y=o,Q=o,ae=o;return a=t,r=b(a),p=r[0]==null?o:r[0],p=r[1]==null?o:r[1],p=r[2]==null?o:r[2],p=r[3]==null?o:r[3],G=r[4]==null?o:r[4],Z=r[5]==null?o:r[5],ie=r[6]==null?o:r[6],ne=r[7]==null?o:r[7],se=r[8]==null?o:r[8],O=r[9]==null?o:r[9],p=r[10]==null?o:r[10],p=r[11]==null?o:r[11],p=r[12]==null?o:r[12],oe=r[13]==null?o:r[13],ue=s.racc_state,te=s.racc_vstack,$e=s.racc_tstack,re=V($,-3),P=O["$[]"](re),W=O["$[]"](J(re,1)),ee=O["$[]"](J(re,2)),_=[],g(s.yydebug)&&(q=$e["$[]"](P["$-@"](),P)),Y=te["$[]"](P["$-@"](),P),g(s.yydebug)&&$e["$[]="](P["$-@"](),P,_),te["$[]="](P["$-@"](),P,_),ue["$[]="](P["$-@"](),P,_),g(oe)?te.$push(s.$__send__(ee,Y,te,Y["$[]"](0))):te.$push(s.$__send__(ee,Y,te)),$e.$push(W),g(s.yydebug)&&s.$racc_reduce(q,W,$e,te),Q=k(W,se),g(re=ne["$[]"](Q))&&(re=J(re,ue["$[]"](-1)),g(B(re,0))&&g(ae=G["$[]"](re))&&H(Z["$[]"](re),Q))?ae:ie["$[]"](Q)}),j(d,"$on_error",function(t,$,r){var a=this,s=o;return a.$raise(u("ParseError"),a.$sprintf(`
parse error on value %s (%s)`,$.$inspect(),g(s=a.$token_to_str(t))?s:"?"))}),j(d,"$yyerror",function(){var t=this;return t.$throw("racc_jump",1)}),j(d,"$yyaccept",function(){var t=this;return t.$throw("racc_jump",2)}),j(d,"$yyerrok",v("racc_error_status",0)),j(d,"$racc_read_token",function(t,$,r){var a=this;return a.racc_debug_out.$print("read    "),a.racc_debug_out.$print($.$inspect(),"(",a.$racc_token2str(t),") "),a.racc_debug_out.$puts(r.$inspect()),a.racc_debug_out.$puts()}),j(d,"$racc_shift",function(t,$,r){var a=this;return a.racc_debug_out.$puts("shift   "+a.$racc_token2str(t)),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_reduce",function(t,$,r,a){var s=this,p=o;return p=s.racc_debug_out,p.$print("reduce "),g(t["$empty?"]())?p.$print(" <none>"):U(t,"each",[],function G(Z){var ie=G.$$s==null?this:G.$$s;return Z==null&&(Z=o),p.$print(" ",ie.$racc_token2str(Z))},{$$s:s}),p.$puts(" --> "+s.$racc_token2str($)),s.$racc_print_stacks(r,a),s.racc_debug_out.$puts()}),j(d,"$racc_accept",function(){var t=this;return t.racc_debug_out.$puts("accept"),t.racc_debug_out.$puts()}),j(d,"$racc_e_pop",function(t,$,r){var a=this;return a.racc_debug_out.$puts("error recovering mode: pop token"),a.$racc_print_states(t),a.$racc_print_stacks($,r),a.racc_debug_out.$puts()}),j(d,"$racc_next_state",function(t,$){var r=this;return r.racc_debug_out.$puts("goto    "+t),r.$racc_print_states($),r.racc_debug_out.$puts()}),j(d,"$racc_print_stacks",function(t,$){var r=this,a=o;return a=r.racc_debug_out,a.$print("        ["),U(t,"each_index",[],function s(p){var G=s.$$s==null?this:s.$$s;return p==null&&(p=o),a.$print(" (",G.$racc_token2str(t["$[]"](p))," ",$["$[]"](p).$inspect(),")")},{$$s:r}),a.$puts(" ]")}),j(d,"$racc_print_states",function(t){var $=this,r=o;return r=$.racc_debug_out,r.$print("        ["),U(t,"each",[],function(s){return s==null&&(s=o),r.$print(" ",s)}),r.$puts(" ]")}),j(d,"$racc_token2str",function(t){var $=this,r=o;return g(r=A($.$class(),"Racc_token_to_s_table")["$[]"](t))?r:$.$raise("[Racc Bug] can't convert token "+t+" to string")}),j(d,"$token_to_str",function(t){var $=this;return A($.$class(),"Racc_token_to_s_table")["$[]"](t)})}(E[0],null,E)}(w[0],w)};Opal.modules["bcdice/arithmetic/node"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.thrower,M=e.return_ivar,D=e.send2,X=e.find_super,j=e.eqeq,b=e.const_set,U=e.eqeqeq,F=e.rb_divide,J=e.truthy,H=e.assign_ivar,B=e.alias,K=[],k=e.nil,I=e.$$$;return function(V,v){var x=C(V,"BCDice"),w=[x].concat(v);return function(T,o){var A=C(T,"Arithmetic"),N=[A].concat(o);return function(L,S){var c=C(L,"Node"),E=[c].concat(S),m=e.$r(E);return function(f,h){var R=z(f,h,"BinaryOp"),d=R.$$prototype;return d.lhs=d.rhs=d.op=k,g(R,"$initialize",function(u,i,n){var t=this;return t.lhs=u,t.op=i,t.rhs=n}),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this,t=k,$=k;return t=n.lhs.$eval(u),$=n.rhs.$eval(u),t.$send(n.op,$)}catch(r){if(r===e.t_eval_return)return r.$v;throw r}}),g(R,"$output",function(){var u=this;return""+u.lhs.$output()+u.op+u.rhs.$output()}),g(R,"$s_exp",function(){var u=this;return"("+u.$op_for_s_exp()+" "+u.lhs.$s_exp()+" "+u.rhs.$s_exp()+")"}),g(R,"$op_for_s_exp",M("op"))}(E[0],null),function(f,h,R){var d=z(f,h,"DivideBase"),l=[d].concat(R),u=e.$r(l),i=d.$$prototype;return i.lhs=i.rhs=i.op=k,g(d,"$initialize",function n(t,$){var r=n.$$p||k,a=this;return n.$$p=null,D(a,X(a,"initialize",n,!1,!0),"initialize",[t,"/",$],null)}),g(d,"$eval",function(t){try{var $=y("eval_return"),r=this,a=k,s=k;return a=r.lhs.$eval(t),s=r.rhs.$eval(t),j(s,0)&&r.$raise(u("ZeroDivisionError")),r.$divide_and_round(a,s,t)}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),g(d,"$output",function n(){var t=n.$$p||k,$=this;return n.$$p=null,""+D($,X($,"output",n,!1,!0),"output",[],t)+$.$rounding_method()}),d.$private(),g(d,"$rounding_method",function(){var t=this;return I(t.$class(),"ROUNDING_METHOD")}),g(d,"$op_for_s_exp",function(){var t=this;return""+t.op+t.$rounding_method()}),g(d,"$divide_and_round",function(t,$,r){var a=this;return a.$raise(u("NotImplementedError"))})}(E[0],m("BinaryOp"),E),function(f,h,R){var d=z(f,h,"DivideWithGameSystemDefault"),l=[d].concat(R),u=e.$r(l);return b(l[0],"ROUNDING_METHOD",""),d.$private(),g(d,"$divide_and_round",function(n,t,$){var r=k,a=k;return U(I(u("RoundType"),"CEIL"),r=$)?F(n.$to_f(),t).$ceil():U(I(u("RoundType"),"ROUND"),r)?(a=F(n.$to_f(),t),J(a["$negative?"]())?a.$abs().$round()["$-@"]():a.$round()):F(n,t).$floor()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithCeil"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","C"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i.$to_f(),n).$ceil()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithRound"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","R"),d.$private(),g(d,"$divide_and_round",function(i,n,t){var $=k;return $=F(i.$to_f(),n),J($["$negative?"]())?$.$abs().$round()["$-@"]():$.$round()})}(E[0],m("DivideBase"),E),function(f,h,R){var d=z(f,h,"DivideWithFloor"),l=[d].concat(R);return b(l[0],"ROUNDING_METHOD","F"),d.$private(),g(d,"$divide_and_round",function(i,n,t){return F(i,n).$floor()})}(E[0],m("DivideBase"),E),function(f,h){var R=z(f,h,"Negative"),d=R.$$prototype;return d.body=k,g(R,"$initialize",H("body")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.body.$eval(u)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"-"+u.body.$output()}),g(R,"$s_exp",function(){var u=this;return"(- "+u.body.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Parenthesis"),d=R.$$prototype;return d.expr=k,g(R,"$initialize",H("expr")),g(R,"$eval",function(u){try{var i=y("eval_return"),n=this;return n.expr.$eval(u)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),g(R,"$output",function(){var u=this;return"("+u.expr.$output()+")"}),g(R,"$s_exp",function(){var u=this;return"(Parenthesis "+u.expr.$s_exp()+")"})}(E[0],null),function(f,h){var R=z(f,h,"Number"),d=R.$$prototype;return d.value=k,g(R,"$initialize",H("value")),g(R,"$eval",M("value")),g(R,"$output",function(){var u=this;return u.value.$to_s()}),B(R,"s_exp","output")}(E[0],null)}(N[0],N)}(w[0],w)}(K[0],K)};Opal.modules.strscan=function(e){var C=e.klass,z=e.def,g=e.truthy,y=e.eqeqeq,M=e.Opal,D=e.return_ivar,X=e.send,j=e.alias,b=[],U=e.nil;return function(F,J,H){var B=C(F,J,"StringScanner"),K=[B].concat(H),k=e.$r(K),I=B.$$prototype;return I.pos=I.string=I.working=I.matched=I.prev_pos=I.match=U,B.$attr_reader("pos","matched"),z(B,"$initialize",function(v){var x=this;return x.string=v,x.pos=0,x.matched=U,x.working=v,x.match=[]}),B.$attr_reader("string"),z(B,"$beginning_of_line?",function(){var v=this;return v.pos===0||v.string.charAt(v.pos-1)===`
`}),z(B,"$scan",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:(x.prev_pos=x.pos,x.pos+=w[0].length,x.working=x.working.substring(w[0].length),x.matched=w[0],x.match=w,w[0])}),z(B,"$scan_until",function(v){var x=this;v=x.$anchor(v);for(var w=x.working,T=0;w.length!=T;++T){var o=v.exec(w.substr(T));if(o!==null){var A=T+o[0].length,N=w.substr(0,A);return x.matched=o[0],x.match=o,x.prev_pos=x.pos+T,x.pos+=A,x.working=w.substr(A),N}}return x.matched=U}),z(B,"$[]",function(v){var x=this,w=U;if(g(x.match["$empty?"]()))return U;y(k("Symbol"),w=v)?v=v.$to_s():y(k("String"),w)||(v=M["$coerce_to!"](v,k("Integer"),"to_int"));var T=x.match;return v<0&&(v+=T.length),v<0||v>=T.length||T[v]==null?U:T[v]}),z(B,"$check",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?x.matched=U:x.matched=w[0]}),z(B,"$check_until",function(v){var x=this,w=x.prev_pos,T=x.pos,o=x.working,A=x.$scan_until(v);return x.prev_pos=w,x.pos=T,x.working=o,A}),z(B,"$peek",function(v){var x=this;return x.working.substring(0,v)}),z(B,"$eos?",function(){var v=this;return v.working.length===0}),z(B,"$exist?",function(v){var x=this,w=v.exec(x.working);return w==null?U:w.index==0?0:w.index+1}),z(B,"$skip",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);if(w==null)return x.match=[],x.matched=U;var T=w[0],o=T.length;return x.matched=T,x.match=w,x.prev_pos=x.pos,x.pos+=o,x.working=x.working.substring(o),o}),z(B,"$skip_until",function(v){var x=this,w=x.$scan_until(v);return w===U?U:(x.matched=w.substr(-1),w.length)}),z(B,"$get_byte",function(){var v=this,x=U;return v.pos<v.string.length?(v.prev_pos=v.pos,v.pos+=1,x=v.matched=v.working.substring(0,1),v.working=v.working.substring(1)):v.matched=U,x}),z(B,"$match?",function(v){var x=this;v=x.$anchor(v);var w=v.exec(x.working);return w==null?U:(x.prev_pos=x.pos,w[0].length)}),z(B,"$pos=",function(v){var x=this;return v<0&&(v+=x.string.$length()),x.pos=v,x.working=x.string.slice(v)}),z(B,"$matched_size",function(){var v=this;return v.matched===U?U:v.matched.length}),z(B,"$post_match",function(){var v=this;return v.matched===U?U:v.string.substr(v.pos)}),z(B,"$pre_match",function(){var v=this;return v.matched===U?U:v.string.substr(0,v.prev_pos)}),z(B,"$reset",function(){var v=this;return v.working=v.string,v.matched=U,v.pos=0}),z(B,"$rest",D("working")),z(B,"$rest?",function(){var v=this;return v.working.length!==0}),z(B,"$rest_size",function(){var v=this;return v.$rest().$size()}),z(B,"$terminate",function(){var v,x=this;return x.match=U,v=[x.string.$length()],X(x,"pos=",v),v[v.length-1]}),z(B,"$unscan",function(){var v=this;return v.pos=v.prev_pos,v.prev_pos=U,v.match=U,v}),j(B,"bol?","beginning_of_line?"),j(B,"getch","get_byte"),B.$private(),z(B,"$anchor",function(v){var x=v.toString().match(/\/([^\/]+)$/);return x=x?x[1]:void 0,new RegExp("^(?:"+v.source+")",x)})}(b[0],null,b)};Opal.modules["bcdice/normalize"]=function(e){var C=e.module,z=e.eqeqeq,g=e.def,y=e.eqeq,M=[],D=e.nil;return function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F){var J=C(F,"Normalize");return J.$module_function(),g(J,"$comparison_operator",function(B){var K=D;return z(/<=|=</,K=B)?"<=":z(/>=|=>/,K)?">=":z(/<>|!=|=!/,K)?"!=":z(/</,K)?"<":z(/>/,K)?">":z(/=/,K)?"==":D}),g(J,"$target_number",function(B){return y(B,"?")?B:B.$to_i()})}(U[0])}(M[0],M)};Opal.modules["bcdice/command/lexer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.hash2,M=e.truthy,D=e.send,X=e.def,j=e.thrower,b=e.top,U=[],F=e.nil;return b.$require("strscan"),b.$require("bcdice/normalize"),function(J,H){var B=C(J,"BCDice"),K=[B].concat(H);return function(k,I){var V=C(k,"Command"),v=[V].concat(I);return function(x,w,T){var o=z(x,w,"Lexer"),A=[o].concat(T),N=e.$r(A),L=o.$$prototype;return L.scanner=L.notations=F,g(A[0],"SYMBOLS",y(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),X(o,"$initialize",function(c,E){var m,f,h=this,R=F;return c=M(R=(m=(f=c,f===F||f==null?F:f.$split(" ",2)),m===F||m==null?F:m.$first()))?R:"",h.scanner=N("StringScanner").$new(c),h.notations=D(E,"map",[],function(l){return l==null&&(l=F),M(l["$is_a?"](N("String")))?N("Regexp").$new(l):l})}),X(o,"$next_token",function(){try{var c=j("return"),E=this,m=F,f=F,h=F,R=F,d=F;return M(E.scanner["$eos?"]())?[!1,"$"]:(D(E.notations,"each",[],function l(u){var i=l.$$s==null?this:l.$$s,n=F;if(i.scanner==null&&(i.scanner=F),u==null&&(u=F),n=i.scanner.$scan(u),M(n))c.$throw(["NOTATION",n]);else return F},{$$s:E,$$ret:c}),M(m=E.scanner.$scan(/\d+/))?["NUMBER",m.$to_i()]:M(f=E.scanner.$scan(/[<>!=]+/))?(f=N("Normalize").$comparison_operator(f),h=M(f)?"CMP_OP":"ILLEGAL",[h,f]):(R=E.scanner.$getch().$upcase(),h=M(d=N("SYMBOLS")["$[]"](R))?d:R.$to_sym(),[h,R]))}catch(l){if(l===c)return l.$v;throw l}}),X(o,"$source",function(){var c=this;return c.scanner.$string()})}(v[0],null,v)}(K[0],K)}(U[0],U)};Opal.modules["bcdice/command/parsed"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.return_ivar,M=e.truthy,D=[],X=e.nil;return function(j,b){var U=C(j,"BCDice"),F=[U].concat(b);return function(J,H){var B=C(J,"Command"),K=[B].concat(H);return function(k,I,V){var v=z(k,I,"Parsed"),x=[v].concat(V),w=e.$r(x),T=v.$$prototype;return T.critical=T.fumble=T.dollar=T.modify_number=T.question_target=T.target_number=T.prefix_number=T.command=T.suffix_number=T.cmp_op=X,v.$attr_accessor("command"),v.$attr_accessor("prefix_number"),v.$attr_accessor("suffix_number"),v.$attr_accessor("critical"),v.$attr_accessor("fumble"),v.$attr_accessor("dollar"),v.$attr_accessor("modify_number"),v.$attr_accessor("cmp_op"),v.$attr_accessor("target_number"),v.$attr_writer("question_target"),g(v,"$initialize",function(){var A=this;return A.prefix_number=X,A.suffix_number=X,A.critical=X,A.fumble=X,A.dollar=X,A.cmp_op=X,A.target_number=X,A.question_target=!1}),g(v,"$question_target?",y("question_target")),g(v,"$to_s",function(A){var N=this,L=X,S=X,c=X,E=X,m=X;switch(A==null&&(A="after_command"),L=M(N.critical)?"@"+N.critical:X,S=M(N.fumble)?"#"+N.fumble:X,c=M(N.dollar)?"$"+N.dollar:X,E=w("Format").$modifier(N.modify_number),m=M(N.question_target)?"?":N.target_number,A){case"after_command":return[N.prefix_number,N.command,N.suffix_number,L,S,c,E,N.cmp_op,m].$join();case"after_modify_number":return[N.prefix_number,N.command,N.suffix_number,E,L,S,c,N.cmp_op,m].$join();case"after_target_number":return[N.prefix_number,N.command,N.suffix_number,E,N.cmp_op,m,L,S,c].$join();default:return X}},-1)}(K[0],null,K)}(F[0],F)}(D[0],D)};Opal.modules["bcdice/command/parser"]=function(e){var C=e.klass,z=e.module,g=e.slice,y=e.extract_kwargs,M=e.ensure_kwargs,D=e.get_kwarg,X=e.send2,j=e.find_super,b=e.def,U=e.send,F=e.eqeq,J=e.thrower,H=e.hash,B=e.const_set,K=e.truthy,k=e.to_ary,I=e.hash2,V=e.top,v=[],x=e.$r(v),w=e.nil,T=e.$$$;return V.$require("racc/parser.rb"),V.$require("bcdice/arithmetic/node"),V.$require("bcdice/command/lexer"),V.$require("bcdice/command/parsed"),C(T(x("BCDice"),"Command"),T(x("Racc"),"Parser"),"Parser"),function(o,A){var N=z(o,"BCDice"),L=[N].concat(A);return function(S,c){var E=z(S,"Command"),m=[E].concat(c),f=e.$r(m);return function(h,R,d){var l=C(h,R,"Parser"),u=[l].concat(d),i=e.$r(u),n=w,t=w,$=w,r=w,a=w,s=w,p=w,G=w,Z=w,ie=w,ne=w,se=w,O=w,oe=w,ue=l.$$prototype;return ue.notations=ue.lexer=ue.modifier=ue.suffix_number=ue.prefix_number=ue.need_suffix_number=ue.need_prefix_number=ue.critical=ue.fumble=ue.dollar=ue.allowed_cmp_op=ue.question_target=w,b(l,"$initialize",function te($e,re){var P,W,ee,_,q=te.$$p||w,Y=this;return te.$$p=null,P=g(arguments),W=y(P),W=M(W),ee=P,_=D(W,"round_type"),X(Y,j(Y,"initialize",te,!1,!0),"initialize",[],null),Y.notations=ee,Y.round_type=_,Y.prefix_number=!1,Y.suffix_number=!1,Y.need_prefix_number=!1,Y.need_suffix_number=!1,Y.modifier=!0,Y.critical=!1,Y.fumble=!1,Y.dollar=!1,Y.allowed_cmp_op=[w,">=",">","<=","<","==","!="],Y.question_target=!1},-2),b(l,"$disable_modifier",function(){var $e=this;return $e.modifier=!1,$e}),b(l,"$enable_prefix_number",function(){var $e=this;return $e.prefix_number=!0,$e}),b(l,"$enable_suffix_number",function(){var $e=this;return $e.suffix_number=!0,$e}),b(l,"$has_prefix_number",function(){var $e=this;return $e.prefix_number=!0,$e.need_prefix_number=!0,$e}),b(l,"$has_suffix_number",function(){var $e=this;return $e.suffix_number=!0,$e.need_suffix_number=!0,$e}),b(l,"$enable_critical",function(){var $e=this;return $e.critical=!0,$e}),b(l,"$enable_fumble",function(){var $e=this;return $e.fumble=!0,$e}),b(l,"$enable_dollar",function(){var $e=this;return $e.dollar=!0,$e}),b(l,"$restrict_cmp_op_to",function($e){var re,P,W=this;return re=g(arguments),P=re,W.allowed_cmp_op=P,W},-1),b(l,"$enable_question_target",function(){var $e=this;return $e.question_target=!0,$e}),b(l,"$parse",function($e){var re=this;try{return re.lexer=i("Lexer").$new($e,re.notations),re.$do_parse()}catch(P){if(e.rescue(P,[i("ParseError"),i("ZeroDivisionError")]))try{return w}finally{e.pop_exception()}else throw P}}),l.$private(),b(l,"$parsed",function($e,re,P,W){try{var ee=J("eval_return"),_=this;return U(i("Parsed").$new(),"tap",[],function q(Y){var Q,ae,le,ce,_e,fe,de,he=q.$$s==null?this:q.$$s;return he.round_type==null&&(he.round_type=w),Y==null&&(Y=w),Y["$command="]($e["$[]"]("command")),Y["$prefix_number="]((Q=$e["$[]"]("prefix"),Q===w||Q==null?w:Q.$eval(he.round_type))),Y["$suffix_number="]((ae=$e["$[]"]("suffix"),ae===w||ae==null?w:ae.$eval(he.round_type))),Y["$critical="]((le=re["$[]"]("critical"),le===w||le==null?w:le.$eval(he.round_type))),Y["$fumble="]((ce=re["$[]"]("fumble"),ce===w||ce==null?w:ce.$eval(he.round_type))),Y["$dollar="]((_e=re["$[]"]("dollar"),_e===w||_e==null?w:_e.$eval(he.round_type))),Y["$modify_number="](P.$eval(he.round_type)),Y["$cmp_op="](W["$[]"]("cmp_op")),F(W["$[]"]("target"),"?")?(Y["$question_target="](!0),fe=[0],U(Y,"target_number=",fe),fe[fe.length-1]):(Y["$question_target="](!1),fe=[(de=W["$[]"]("target"),de===w||de==null?w:de.$eval(he.round_type))],U(Y,"target_number=",fe),fe[fe.length-1])},{$$s:_})}catch(q){if(q===e.t_eval_return)return q.$v;throw q}}),b(l,"$next_token",function(){var $e=this;return $e.lexer.$next_token()}),n=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),t=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),$=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),r=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),a=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),s=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),p=[w,6,13,3,9,-1,27,-15,-10,-1,-38],G=[w,w,w,w,w,w,19,16,15,w,w],Z=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ie=35,ne=58,se=H(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),O=19,oe=!0,B(u[0],"Racc_arg",[n,t,r,$,a,s,G,p,O,Z,se,ne,ie,oe]),B(u[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),B(u[0],"Racc_debug_parser",!1),b(l,"$_reduce_1",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w,ae=w;return K(_.modifier)||_.$raise(i("ParseError")),ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],ae=W[3]==null?w:W[3],_.$parsed(q,Y,Q,ae)}),b(l,"$_reduce_2",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w,ae=w;return K(_.modifier)||_.$raise(i("ParseError")),ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],ae=W[3]==null?w:W[3],_.$parsed(q,Q,Y,ae)}),b(l,"$_reduce_3",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],_.$parsed(q,Y,T(T(i("Arithmetic"),"Node"),"Number").$new(0),Q)}),b(l,"$_reduce_4",function($e,re,P){var W=this;return K(W.prefix_number)&&K(W.suffix_number)||W.$raise(i("ParseError")),I(["command","prefix","suffix"],{command:$e["$[]"](1),prefix:$e["$[]"](0),suffix:$e["$[]"](2)})}),b(l,"$_reduce_5",function($e,re,P){var W=this;return K(W.prefix_number)||W.$raise(i("ParseError")),K(W.need_suffix_number)&&W.$raise(i("ParseError")),I(["command","prefix"],{command:$e["$[]"](1),prefix:$e["$[]"](0)})}),b(l,"$_reduce_6",function($e,re,P){var W=this;return K(W.suffix_number)||W.$raise(i("ParseError")),K(W.need_prefix_number)&&W.$raise(i("ParseError")),I(["command","suffix"],{command:$e["$[]"](0),suffix:$e["$[]"](1)})}),b(l,"$_reduce_7",function($e,re,P){var W=this;return(K(W.need_prefix_number)||K(W.need_suffix_number))&&W.$raise(i("ParseError")),I(["command"],{command:$e["$[]"](0)})}),b(l,"$_reduce_8",function($e,re,P){return I([],{})}),b(l,"$_reduce_9",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],K(_.critical)&&K(q["$[]"]("critical")["$nil?"]())||_.$raise(i("ParseError")),q["$[]="]("critical",Q),q}),b(l,"$_reduce_10",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],K(_.fumble)&&K(q["$[]"]("fumble")["$nil?"]())||_.$raise(i("ParseError")),q["$[]="]("fumble",Q),q}),b(l,"$_reduce_11",function($e,re,P){var W,ee,_=this,q=w,Y=w,Q=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],Q=W[2]==null?w:W[2],K(_.dollar)&&K(q["$[]"]("dollar")["$nil?"]())||_.$raise(i("ParseError")),q["$[]="]("dollar",Q),q}),b(l,"$_reduce_12",function($e,re,P){return $e["$[]"](1)}),b(l,"$_reduce_13",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"Negative").$new($e["$[]"](1))}),b(l,"$_reduce_14",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"+",$e["$[]"](2))}),b(l,"$_reduce_15",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"-",$e["$[]"](2))}),b(l,"$_reduce_16",function($e,re,P){var W=this;return K(W.allowed_cmp_op["$include?"](w))||W.$raise(i("ParseError")),I([],{})}),b(l,"$_reduce_17",function($e,re,P){var W,ee,_=this,q=w,Y=w;return ee=$e,W=k(ee),q=W[0]==null?w:W[0],Y=W[1]==null?w:W[1],K(_.allowed_cmp_op["$include?"](q))||_.$raise(i("ParseError")),I(["cmp_op","target"],{cmp_op:q,target:Y})}),b(l,"$_reduce_18",function($e,re,P){var W=this,ee=w;return ee=$e["$[]"](0),K(W.question_target)||W.$raise(i("ParseError")),K(W.allowed_cmp_op["$include?"](ee))||W.$raise(i("ParseError")),I(["cmp_op","target"],{cmp_op:ee,target:"?"})}),b(l,"$_reduce_19",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"+",$e["$[]"](2))}),b(l,"$_reduce_20",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"-",$e["$[]"](2))}),b(l,"$_reduce_22",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"BinaryOp").$new($e["$[]"](0),"*",$e["$[]"](2))}),b(l,"$_reduce_23",function($e,re,P){var W=w;return W=$e["$[]"](3),W.$new($e["$[]"](0),$e["$[]"](2))}),b(l,"$_reduce_25",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),b(l,"$_reduce_26",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithCeil")}),b(l,"$_reduce_27",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithCeil")}),b(l,"$_reduce_28",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithRound")}),b(l,"$_reduce_29",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"DivideWithFloor")}),b(l,"$_reduce_30",function($e,re,P){return $e["$[]"](1)}),b(l,"$_reduce_31",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"Negative").$new($e["$[]"](1))}),b(l,"$_reduce_33",function($e,re,P){return $e["$[]"](1)}),b(l,"$_reduce_34",function($e,re,P){return T(T(i("Arithmetic"),"Node"),"Number").$new($e["$[]"](0))}),b(l,"$_reduce_none",function($e,re,P){return $e["$[]"](0)})}(m[0],T(f("Racc"),"Parser"),m)}(L[0],L)}(v[0],v)};Opal.modules["bcdice/deprecated/checker"]=function(e){var C=e.module,z=e.send,g=e.eqeqeq,y=e.truthy,M=e.def,D=e.return_val,X=[],j=e.nil;return function(b,U){var F=C(b,"BCDice"),J=[F].concat(U);return function(H,B){var K=C(H,"Deprecated"),k=[K].concat(B);return function(I,V){var v=C(I,"Checker"),x=[v].concat(V),w=e.$r(x);return v.$private(),M(v,"$check_result_legacy",function(o,A,N,L){var S=this,c=j,E=j,m=j,f=j,h=j;return c=z(A,"map",[],"sides".$to_proc()),E=z(A,"map",[],"value".$to_proc()),m=E.$sum(),f=g([100],h=c)?S.$check_1D100(o,m,N,L):g([20],h)?S.$check_1D20(o,m,N,L):g([6,6],h)?S.$check_2D6(o,m,E,N,L):j,!(y(f["$nil?"]())||y(f["$empty?"]()))||(f=g([10],h=c.$uniq())?S.$check_nD10(o,m,E,N,L):g([6],h)?S.$check_nD6(o,m,E,N,L):j,!(y(f["$nil?"]())||y(f["$empty?"]())))?w("Result").$new(f.$delete_prefix(" \uFF1E ")):j}),M(v,"$check_1D100",D(j)),M(v,"$check_1D20",D(j)),M(v,"$check_nD10",D(j)),M(v,"$check_2D6",D(j)),M(v,"$check_nD6",D(j))}(k[0],k)}(J[0],J)}(X[0],X)};Opal.modules["bcdice/base"]=function(e){var C=e.module,z=e.klass,g=e.slice,y=e.rb_plus,M=e.truthy,D=e.def,X=e.regexp,j=e.send,b=e.thrower,U=e.return_ivar,F=e.assign_ivar_val,J=e.eqeqeq,H=e.eqeq,B=e.return_val,K=e.range,k=e.rb_minus,I=e.rb_divide,V=e.rb_times,v=e.rb_ge,x,w=e.top,T=[],o=e.$r(T),A=e.nil,N=e.$$$;return w.$require("i18n"),w.$require("i18n/backend/fallbacks"),w.$require("bcdice/randomizer"),w.$require("bcdice/dice_table"),w.$require("bcdice/enum"),w.$require("bcdice/translate"),w.$require("bcdice/result"),w.$require("bcdice/command/parser"),w.$require("bcdice/deprecated/checker"),function(L,S){var c=C(L,"BCDice"),E=[c].concat(S);return function(m,f,h){var R=z(m,f,"Base"),d=[R].concat(h),l=e.$r(d),u=R.$$prototype;return u.raw_input=u.randomizer=u.enabled_upcase_input=u.debug=A,function(i,n){var t=[i].concat(n),$=e.$r(t);return i.$attr_reader("prefixes"),D(i,"$register_prefix",function(a){var s,p,G=this,Z=A;return G.prefixes==null&&(G.prefixes=A),s=g(arguments),p=s,G.prefixes=y(M(Z=G.prefixes)?Z:[],p.$flatten())},-1),D(i,"$register_prefix_from_super_class",function(){var a=this;return a.$register_prefix(a.$superclass().$prefixes())}),D(i,"$prefixes_pattern",function(){var a=this,s=A;return a.prefixes_pattern==null&&(a.prefixes_pattern=A),a.prefixes==null&&(a.prefixes=A),a.prefixes_pattern=M(s=a.prefixes_pattern)?s:A,M(a.prefixes_pattern)?a.prefixes_pattern:(a.prefixes=M(s=a.prefixes)?s:[],a.prefixes.$freeze(),a.prefixes_pattern=(M(a.prefixes["$empty?"]())?/(?!)/:X(["^(S)?(",a.prefixes.$join("|"),")"],"i")).$freeze())}),D(i,"$command_pattern",function(){var a=this,s=A,p=A;return a.command_pattern==null&&(a.command_pattern=A),a.prefixes==null&&(a.prefixes=A),a.command_pattern=M(s=a.command_pattern)?s:A,M(a.command_pattern)?a.command_pattern:(a.prefixes=M(s=a.prefixes)?s:[],a.prefixes.$freeze(),p=y(j(N($("CommonCommand"),"COMMANDS"),"map",[],function(Z){return Z==null&&(Z=A),N(Z,"PREFIX_PATTERN").$source()}),a.prefixes),a.command_pattern=X(["^S?(",p.$join("|"),")"],"i").$freeze())}),D(i,"$eval",function(a){try{var s=b("eval_return"),p=this;return p.$new(a).$eval()}catch(G){if(G===e.t_eval_return)return G.$v;throw G}})}(e.get_singleton_class(R),d),R.$include(l("Translate")),R.$include(N(l("Deprecated"),"Checker")),D(R,"$initialize",function(n){var t=this;return t.raw_input=n,t.sort_add_dice=!1,t.sort_barabara_dice=!1,t.d66_sort_type=N(l("D66SortType"),"NO_SORT"),t.enabled_d9=!1,t.round_type=N(l("RoundType"),"FLOOR"),t.sides_implicit_d=6,t.upper_dice_reroll_threshold=A,t.reroll_dice_reroll_threshold=A,t.default_cmp_op=A,t.default_target_number=A,t.enabled_upcase_input=!0,t.locale="ja_jp",t.randomizer=N(l("BCDice"),"Randomizer").$new(),t.debug=!1}),R.$attr_accessor("randomizer"),R.$attr_reader("d66_sort_type"),R.$attr_reader("round_type"),R.$attr_reader("sides_implicit_d"),R.$attr_reader("upper_dice_reroll_threshold"),R.$attr_reader("reroll_dice_reroll_threshold"),R.$attr_reader("default_cmp_op"),R.$attr_reader("default_target_number"),D(R,"$sort_add_dice?",U("sort_add_dice")),D(R,"$sort_barabara_dice?",U("sort_barabara_dice")),D(R,"$enabled_d9?",U("enabled_d9")),D(R,"$enable_debug",F("debug",!0)),D(R,"$eval",function(){var n=this,t=A,$=A,r=A;return t=N(l("BCDice"),"Preprocessor").$process(n.raw_input,n),$=M(r=n.$dice_command(t))?r:n.$eval_common_command(n.raw_input),M($)?($["$rands="](n.randomizer.$rand_results()),$["$detailed_rands="](n.randomizer.$detailed_rand_results()),$):A}),D(R,"$change_text",function(n){return n}),D(R,"$check_result",function(n,t,$,r){var a=this,s=A,p=A,G=A,Z=A,ie=A;return s=a.$check_result_legacy(n,t,$,r),M(s)?s:(p=j(t,"map",[],"sides".$to_proc()),G=j(t,"map",[],"value".$to_proc()),Z=G.$sum(),s=J([100],ie=p)?a.$result_1d100(n,Z,$,r):J([20],ie)?a.$result_1d20(n,Z,$,r):J([6,6],ie)?a.$result_2d6(n,Z,G,$,r):A,H(s,l("Result").$nothing())?A:M(s)?s:(s=J([10],ie=p.$uniq())?a.$result_nd10(n,Z,G,$,r):J([6],ie)?a.$result_nd6(n,Z,G,$,r):A,H(s,l("Result").$nothing())?A:M(s)?s:a.$result_ndx(n,$,r)))}),D(R,"$grich_text",B(A)),R.$private(),D(R,"$eval_common_command",function(n){try{var t=b("eval_return"),$=b("return"),r=this;return n=r.$change_text(n),j(N(l("CommonCommand"),"COMMANDS"),"each",[],function a(s){var p=a.$$s==null?this:a.$$s,G=A;if(p.randomizer==null&&(p.randomizer=A),s==null&&(s=A),G=s.$eval(n,p,p.randomizer),M(G))$.$throw(G);else return A},{$$s:r,$$ret:$}),A}catch(a){if(a===e.t_eval_return||a===$)return a.$v;throw a}}),D(R,"$dice_command",function(n){var t=this,$=A,r=A,a=A,s=A;return M(t.enabled_upcase_input)&&(n=n.$upcase()),$=t.$class().$prefixes_pattern().$match(n),M($)?(r=$["$[]"](1)["$nil?"]()["$!"](),M(r)&&(n=n["$[]"](K(1,-1,!1))),a=t.$eval_game_system_specific_command(n),M(a["$is_a?"](l("Result")))?(a["$secret="](M(s=a["$secret?"]())?s:r),a):M(a["$nil?"]())||M(a["$empty?"]())||H(a,"1")?A:j(l("Result").$new(),"tap",[],function(G){var Z;return G==null&&(G=A),G["$text="](a.$to_s()),Z=[r],j(G,"secret=",Z),Z[Z.length-1]})):A}),D(R,"$eval_game_system_specific_command",B(A)),D(R,"$result_ndx",function(n,t,$){var r=this;return M($["$is_a?"](l("String")))?A:M(n.$send(t,$))?l("Result").$success(r.$translate("success")):l("Result").$failure(r.$translate("failure"))}),D(R,"$result_1d100",B(A)),D(R,"$result_1d20",B(A)),D(R,"$result_nd10",B(A)),D(R,"$result_2d6",B(A)),D(R,"$result_nd6",B(A)),D(R,"$get_table_by_2d6",function(n){var t=this;return t.$get_table_by_nD6(n,2)}),D(R,"$get_table_by_1d6",function(n){var t=this;return t.$get_table_by_nD6(n,1)}),D(R,"$get_table_by_nD6",function(n,t){var $=this;return $.$get_table_by_nDx(n,t,6)}),D(R,"$get_table_by_nDx",function(n,t,$){var r=this,a=A,s=A;return a=r.randomizer.$roll_sum(t,$),s=r.$get_table_value(n["$[]"](k(a,t))),M(s["$nil?"]())?["1",0]:[s,a]}),D(R,"$get_table_by_1d3",function(n){var t=this,$=A,r=A,a=A,s=A;return t.$debug("get_table_by_1d3"),$=1,r=t.randomizer.$roll_sum($,6),t.$debug("num",r),a=I(k(r,1),2).$to_i(),t.$debug("index",a),s=n["$[]"](a),M(s["$nil?"]())?["1",0]:[s,r]}),D(R,"$get_table_by_d66_swap",function(n){var t=this,$=A;return $=t.randomizer.$roll_d66(N(l("D66SortType"),"ASC")),[t.$get_table_by_number($,n),$]}),D(R,"$get_table_by_d66",function(n){var t=this,$=A,r=A,a=A,s=A,p=A;return $=t.randomizer.$roll_once(6),r=t.randomizer.$roll_once(6),a=y(V(k($,1),6),k(r,1)),s=n["$[]"](a),p=""+$+r,M(s["$nil?"]())?["1",p]:[s,p]}),D(R,"$get_table_by_number",function(n,t,$){try{var r=b("return"),a=this;return $==null&&($="1"),j(t,"each",[],function s(p){var G=s.$$s==null?this:s.$$s,Z=A;if(p==null&&(p=A),Z=p["$[]"](0),M(v(Z,n)))r.$throw(G.$get_table_value(p["$[]"](1)));else return A},{$$s:a,$$ret:r}),a.$get_table_value($)}catch(s){if(s===r)return s.$v;throw s}},-3),D(R,"$get_table_value",function(n){return M(n["$is_a?"](l("Proc")))?n.$call():n}),D(R,"$roll_tables",function(n,t){var $=this,r=A;return r=t["$[]"](n),M(r)?r.$roll($.randomizer).$to_s():A}),D(R,"$debug",function(n,t){var $,r,a=this,s=A,p=A;return $=g(arguments,1),r=$,M(a.debug)?(s=M(n["$is_a?"](l("String")))?n:n.$inspect(),M(r["$empty?"]())?a.$warn(s):(p=j(r,"map",[],function(Z){return Z==null&&(Z=A),M(Z["$is_a?"](l("String")))?'"'+Z+'"':Z.$inspect()}),a.$warn(""+s+": "+p.$join(", ")))):A},-2)}(E[0],null,E)}(T[0],T),N(N(o("I18n"),"Backend"),"Simple").$include(N(N(o("I18n"),"Backend"),"Fallbacks")),o("I18n").$load_path()["$<<"](o("Dir")["$[]"](o("File").$join("bcdice","../../i18n/**/*.yml"))),o("I18n")["$default_locale="]("ja_jp"),x=[["ja_jp"]],j(o("I18n").$fallbacks(),"defaults=",x),x[x.length-1]};Opal.modules["bcdice/game_system/sword_world/rating_lexer"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.hash2,M=e.truthy,D=e.def,X=e.top,j=[],b=e.nil;return X.$require("strscan"),function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"GameSystem"),I=[k].concat(K),V=e.$r(I);return function(v,x,w){var T=z(v,x,"SwordWorld"),o=[T].concat(w);return function(A,N,L){var S=z(A,N,"RatingLexer"),c=[S].concat(L),E=e.$r(c),m=S.$$prototype;return m.scanner=b,g(c[0],"SYMBOLS",y(["+","-","*","/","(",")","[","]","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),D(S,"$initialize",function(h){var R,d,l=this,u=b;return h=M(u=(R=(d=h,d===b||d==null?b:d.$split(" ",2)),R===b||R==null?b:R.$first()))?u:"",l.scanner=E("StringScanner").$new(h)}),D(S,"$next_token",function(){var h=this,R=b,d=b,l=b,u=b;return M(h.scanner["$eos?"]())?[!1,"$"]:M(R=h.scanner.$scan(/\d+/))?["NUMBER",R.$to_i()]:(d=h.scanner.$getch().$upcase(),l=M(u=E("SYMBOLS")["$[]"](d))?u:d.$to_sym(),[l,d])}),D(S,"$source",function(){var h=this;return h.scanner.$string()})}(o[0],null,o)}(I[0],V("Base"),I)}(H[0],H)}(j[0],j)};Opal.modules["bcdice/game_system/sword_world/rating_parsed"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.truthy,M=e.rb_le,D=e.rb_plus,X=e.rb_lt,j=e.neqeq,b=[],U=e.nil;return function(F,J){var H=C(F,"BCDice"),B=[H].concat(J);return function(K,k){var I=C(K,"GameSystem"),V=[I].concat(k),v=e.$r(V);return function(x,w,T){var o=z(x,w,"SwordWorld"),A=[o].concat(T);return function(N,L,S){var c=z(N,L,"RatingParsed"),E=[c].concat(S),m=e.$r(E),f=c.$$prototype;return f.modifier_after_half=f.semi_fixed_val=f.kept_modify=f.rate=f.greatest_fortune=f.modifier=U,c.$attr_accessor("rate"),c.$attr_accessor("critical"),c.$attr_accessor("kept_modify"),c.$attr_accessor("first_to"),c.$attr_accessor("first_modify"),c.$attr_accessor("rateup"),c.$attr_accessor("greatest_fortune"),c.$attr_accessor("semi_fixed_val"),c.$attr_accessor("tmp_fixed_val"),c.$attr_accessor("modifier"),c.$attr_accessor("modifier_after_half"),g(c,"$initialize",function(R,d){var l=this;return l.rate=R,l.modifier=d,l.critical=13,l.kept_modify=0,l.first_to=0,l.first_modify=0,l.greatest_fortune=!1,l.rateup=0,l.semi_fixed_val=0,l.tmp_fixed_val=0,l.modifier_after_half=U}),g(c,"$half",function(){var R=this;return R.modifier_after_half["$nil?"]()["$!"]()}),g(c,"$min_critical",function(){var R=this;return y(M(R.semi_fixed_val,1))?3:D(D(R.semi_fixed_val,R.kept_modify),2).$clamp(3,13)}),g(c,"$infinite_roll?",function(){var R=this;return X(R.$critical(),R.$min_critical())}),g(c,"$to_s",function(){var R=this,d=U;return d="KeyNo."+R.rate,y(X(R.$critical(),13))&&(d=D(d,"c["+R.$critical()+"]")),j(R.$first_modify(),0)&&(d=D(d,"m["+m("Format").$modifier(R.$first_modify())+"]")),j(R.$first_to(),0)&&(d=D(d,"m["+R.$first_to()+"]")),j(R.$rateup(),0)&&(d=D(d,"r["+R.$rateup()+"]")),y(R.greatest_fortune)&&(d=D(d,"gf")),j(R.$semi_fixed_val(),0)&&(d=D(d,"sf["+R.$semi_fixed_val()+"]")),j(R.$tmp_fixed_val(),0)&&(d=D(d,"tf["+R.$tmp_fixed_val()+"]")),j(R.$kept_modify(),0)&&(d=D(d,"a["+m("Format").$modifier(R.$kept_modify())+"]")),j(R.modifier,0)&&(d=D(d,m("Format").$modifier(R.modifier))),d})}(A[0],null,A)}(V[0],v("Base"),V)}(B[0],B)}(b[0],b)};Opal.modules["bcdice/game_system/sword_world/rating_options"]=function(e){var C=e.module,z=e.klass,g=e.truthy,y=e.def,M=[],D=e.nil;return function(X,j){var b=C(X,"BCDice"),U=[b].concat(j);return function(F,J){var H=C(F,"GameSystem"),B=[H].concat(J),K=e.$r(B);return function(k,I,V){var v=z(k,I,"SwordWorld"),x=[v].concat(V);return function(w,T){var o=z(w,T,"RatingOptions");return o.$attr_accessor("critical"),o.$attr_accessor("kept_modify"),o.$attr_accessor("first_to"),o.$attr_accessor("first_modify"),o.$attr_accessor("rateup"),o.$attr_accessor("greatest_fortune"),o.$attr_accessor("semi_fixed_val"),o.$attr_accessor("tmp_fixed_val"),o.$attr_accessor("modifier"),o.$attr_accessor("modifier_after_half"),y(o,"$settable_first_roll_adjust_option?",function(){var N=this,L=D;return g(L=N.$first_modify()["$nil?"]())?N.$first_to()["$nil?"]():L}),y(o,"$settable_non_2d_roll_option?",function(){var N=this,L=D,S=D;return g(L=g(S=N.$greatest_fortune()["$nil?"]())?N.$semi_fixed_val()["$nil?"]():S)?N.$tmp_fixed_val()["$nil?"]():L})}(x[0],null)}(B[0],K("Base"),B)}(U[0],U)}(M[0],M)};Opal.modules["bcdice/game_system/sword_world/rating_parser"]=function(e){var C=e.module,z=e.klass,g=e.ensure_kwargs,y=e.send2,M=e.find_super,D=e.def,X=e.send,j=e.truthy,b=e.not,U=e.thrower,F=e.hash,J=e.const_set,H=e.to_ary,B=e.eqeq,K=e.top,k=[],I=e.nil,V=e.$$$;return K.$require("racc/parser.rb"),K.$require("bcdice/arithmetic/node"),K.$require("bcdice/enum"),K.$require("bcdice/game_system/sword_world/rating_lexer"),K.$require("bcdice/game_system/sword_world/rating_parsed"),K.$require("bcdice/game_system/sword_world/rating_options"),function(v,x){var w=C(v,"BCDice"),T=[w].concat(x);return function(o,A){var N=C(o,"GameSystem"),L=[N].concat(A),S=e.$r(L);return function(c,E,m){var f=z(c,E,"SwordWorld"),h=[f].concat(m),R=e.$r(h);return function(d,l,u){var i=z(d,l,"RatingParser"),n=[i].concat(u),t=e.$r(n),$=I,r=I,a=I,s=I,p=I,G=I,Z=I,ie=I,ne=I,se=I,O=I,oe=I,ue=I,te=I,$e=i.$$prototype;return $e.lexer=$e.round_type=$e.version=I,D(i,"$initialize",function re(P){var W,ee,_=re.$$p||I,q=this;return re.$$p=null,P=g(P),W=P.$$smap.version,W==null&&(W="v1_0"),ee=P.$$smap.round_type,ee==null&&(ee=V(t("RoundType"),"CEIL")),y(q,M(q,"initialize",re,!1,!0),"initialize",[],null),q.version=W,q.round_type=ee},-1),D(i,"$set_debug",function(){var P=this;return P.yydebug=!0,P}),D(i,"$parse",function(P){var W=this;try{return W.lexer=t("RatingLexer").$new(P),W.$do_parse()}catch(ee){if(e.rescue(ee,[t("ParseError"),t("ZeroDivisionError")]))try{return I}finally{e.pop_exception()}else throw ee}}),i.$private(),D(i,"$parsed",function(P,W,ee){try{var _=U("eval_return"),q=this;return X(t("RatingParsed").$new(P,W),"tap",[],function Y(Q){var ae,le,ce,_e,fe,de,he,me,ge=Y.$$s==null?this:Y.$$s,ve=I;return ge.round_type==null&&(ge.round_type=I),Q==null&&(Q=I),Q["$kept_modify="](j(ve=(ae=ee.$kept_modify(),ae===I||ae==null?I:ae.$eval(ge.round_type)))?ve:0),Q["$first_to="](j(ve=ee.$first_to())?ve:0),Q["$first_modify="](j(ve=ee.$first_modify())?ve:0),Q["$rateup="](j(ve=(le=ee.$rateup(),le===I||le==null?I:le.$eval(ge.round_type)))?ve:0),b(ee.$greatest_fortune()["$nil?"]())&&Q["$greatest_fortune="](ee.$greatest_fortune()),Q["$semi_fixed_val="](j(ve=(ce=ee.$semi_fixed_val(),ce===I||ce==null?I:ce.$clamp(1,6)))?ve:0),Q["$tmp_fixed_val="](j(ve=(_e=ee.$tmp_fixed_val(),_e===I||_e==null?I:_e.$clamp(1,6)))?ve:0),Q["$modifier_after_half="]((fe=ee.$modifier_after_half(),fe===I||fe==null?I:fe.$eval(ge.round_type))),de=[j(ve=(he=(me=ee.$critical(),me===I||me==null?I:me.$eval(ge.round_type)),he===I||he==null?I:he.$clamp(0,13)))?ve:j(Q.$half())?13:10],X(Q,"critical=",de),de[de.length-1]},{$$s:q})}catch(Y){if(Y===e.t_eval_return)return Y.$v;throw Y}}),D(i,"$next_token",function(){var P=this;return P.lexer.$next_token()}),$=e.large_array_unpack("15,14,16,5,17,18,20,21,57,58,23,24,11,59,12,19,13,15,14,16,4,17,18,20,21,4,30,3,30,11,8,12,19,13,26,27,26,27,29,30,29,30,55,56,55,56,30,26,27,26,27,29,30,29,26,27,9,30,29,30,26,27,55,56,29,26,27,26,27,29,30,29,30,55,56,55,56,30,26,27,26,27,29,30,29,26,27,37,30,29,30,26,27,55,56,29,26,27,26,27,29,30,29,30,55,56,38,39,32,26,27,26,27,29,46,29,33,34,51,52,53,54"),r=e.large_array_unpack("6,6,6,1,6,6,6,6,49,49,10,10,6,49,6,6,6,22,22,22,3,22,22,22,22,0,11,0,12,22,4,22,22,22,11,11,12,12,11,14,12,15,41,41,43,43,19,14,14,15,15,14,20,15,19,19,5,21,19,23,20,20,44,44,20,21,21,23,23,21,24,23,26,45,45,50,50,27,24,24,26,26,24,29,26,27,27,16,55,27,56,29,29,62,62,29,55,55,56,56,55,57,56,58,63,63,17,18,13,57,57,58,58,57,25,58,13,13,33,34,38,39"),a=e.large_array_unpack("22,3,,17,28,56,-4,,,,0,24,26,106,37,39,80,99,100,44,50,55,13,57,68,97,70,75,,81,,,,116,117,,,,118,119,,30,,32,50,61,,,,-2,63,,,,,86,88,99,101,,,,81,92"),s=e.large_array_unpack("-33,-33,-4,-33,-33,-33,-1,-4,-3,64,-5,-33,-33,-33,-11,-33,-33,-33,-33,-33,-33,-33,-2,-33,-33,-33,-33,-33,-30,-33,-32,-7,-8,-33,-33,-12,-13,-14,-33,-33,-17,-18,-27,-19,-20,-21,-6,-28,-29,-33,-24,-9,-10,-15,-16,-33,-33,-33,-33,-31,-25,-26,-22,-23"),p=e.large_array_unpack("25,31,6,35,36,1,49,22,40,41,43,2,44,45,7,47,48,,50,,,,,,,,,,,,,,,,,,,,,,,,,,60,61,62,63"),G=e.large_array_unpack("5,5,3,5,5,1,7,3,5,6,6,2,6,6,2,5,5,,6,,,,,,,,,,,,,,,,,,,,,,,,,,5,5,6,6"),Z=[I,5,11,0,I,-11,-11,-23,I],ie=[I,I,I,I,10,42,I,I,28],ne=e.large_array_unpack("0,0,racc_error,2,22,_reduce_1,3,22,_reduce_2,2,23,_reduce_3,0,24,_reduce_4,2,24,_reduce_5,4,24,_reduce_6,3,24,_reduce_7,3,24,_reduce_8,4,24,_reduce_9,4,24,_reduce_10,2,24,_reduce_11,3,24,_reduce_12,3,24,_reduce_13,3,24,_reduce_14,4,24,_reduce_15,4,24,_reduce_16,3,24,_reduce_17,2,25,_reduce_18,2,25,_reduce_19,3,25,_reduce_20,3,25,_reduce_21,3,28,_reduce_22,3,28,_reduce_23,1,28,_reduce_none,3,27,_reduce_25,3,27,_reduce_26,1,27,_reduce_none,2,26,_reduce_28,2,26,_reduce_29,1,26,_reduce_none,3,29,_reduce_31,1,29,_reduce_32"),se=33,O=64,oe=F(!1,0,"error",1,"NUMBER",2,"K",3,"R",4,"H",5,"G",6,"F",7,"S",8,"T",9,"PLUS",10,"MINUS",11,"ASTERISK",12,"SLASH",13,"PARENL",14,"PARENR",15,"BRACKETL",16,"BRACKETR",17,"AT",18,"SHARP",19,"DOLLAR",20),ue=21,te=!0,J(n[0],"Racc_arg",[$,r,s,a,p,G,ie,Z,ue,ne,oe,O,se,te]),J(n[0],"Racc_token_to_s_table",["$end","error","NUMBER","K","R","H","G","F","S","T","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","BRACKETL","BRACKETR","AT","SHARP","DOLLAR","$start","expr","rate","option","modifier","unary","mul","add","term"]),J(n[0],"Racc_debug_parser",!1),D(i,"$_reduce_1",function(P,W,ee){try{var _=U("eval_return"),q,Y,Q=this,ae=I,le=I,ce=I,_e=I;return Y=P,q=H(Y),ae=q[0]==null?I:q[0],le=q[1]==null?I:q[1],ce=j(_e=le.$modifier())?_e:V(V(t("Arithmetic"),"Node"),"Number").$new(0),Q.$parsed(ae,ce.$eval(Q.round_type),le)}catch(fe){if(fe===e.t_eval_return)return fe.$v;throw fe}}),D(i,"$_reduce_2",function(P,W,ee){try{var _=U("eval_return"),q,Y,Q=this,ae=I,le=I,ce=I,_e=I,fe=I;return Y=P,q=H(Y),ae=q[0]==null?I:q[0],le=q[1]==null?I:q[1],ce=q[2]==null?I:q[2],j(_e=ce.$modifier_after_half())||ce["$modifier_after_half="](V(V(t("Arithmetic"),"Node"),"Number").$new(0)),fe=j(_e=ce.$modifier())?_e:V(V(t("Arithmetic"),"Node"),"Number").$new(0),Q.$parsed(le,fe.$eval(Q.round_type),ce)}catch(de){if(de===e.t_eval_return)return de.$v;throw de}}),D(i,"$_reduce_3",function(P,W,ee){return P["$[]"](1).$to_i()}),D(i,"$_reduce_4",function(P,W,ee){return t("RatingOptions").$new()}),D(i,"$_reduce_5",function(P,W,ee){var _,q,Y=this,Q=I,ae=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],j(Q.$modifier()["$nil?"]())||Y.$raise(t("ParseError")),Q["$modifier="](ae),Q}),D(i,"$_reduce_6",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],le=_[2]==null?I:_[2],ae=_[3]==null?I:_[3],j(Q.$critical()["$nil?"]())||Y.$raise(t("ParseError")),Q["$critical="](le),Q}),D(i,"$_reduce_7",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],le=_[2]==null?I:_[2],j(Q.$critical()["$nil?"]())||Y.$raise(t("ParseError")),Q["$critical="](le),Q}),D(i,"$_reduce_8",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],le=_[2]==null?I:_[2],j(Q["$settable_first_roll_adjust_option?"]())||Y.$raise(t("ParseError")),Q["$first_to="](le.$to_i()),Q}),D(i,"$_reduce_9",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],ae=_[2]==null?I:_[2],le=_[3]==null?I:_[3],j(Q["$settable_first_roll_adjust_option?"]())||Y.$raise(t("ParseError")),Q["$first_modify="](le.$to_i()),Q}),D(i,"$_reduce_10",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],ae=_[2]==null?I:_[2],le=_[3]==null?I:_[3],j(Q["$settable_first_roll_adjust_option?"]())||Y.$raise(t("ParseError")),Q["$first_modify="](le.$to_i()["$-@"]()),Q}),D(i,"$_reduce_11",function(P,W,ee){var _,q,Y=this,Q=I,ae=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],j(Q.$modifier_after_half()["$nil?"]())||Y.$raise(t("ParseError")),Q["$modifier_after_half="](V(V(t("Arithmetic"),"Node"),"Number").$new(0)),Q}),D(i,"$_reduce_12",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],le=_[2]==null?I:_[2],j(Q.$modifier_after_half()["$nil?"]())||Y.$raise(t("ParseError")),Q["$modifier_after_half="](le),Q}),D(i,"$_reduce_13",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],le=_[2]==null?I:_[2],j(["v2_5","v2_0"]["$include?"](Y.version))&&j(Q.$rateup()["$nil?"]())||Y.$raise(t("ParseError")),Q["$rateup="](le),Q}),D(i,"$_reduce_14",function(P,W,ee){var _,q,Y=this,Q=I,ae=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],ae=_[2]==null?I:_[2],j(["v2_5","v2_0"]["$include?"](Y.version))&&j(Q["$settable_non_2d_roll_option?"]())||Y.$raise(t("ParseError")),Q["$greatest_fortune="](!0),Q}),D(i,"$_reduce_15",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],ae=_[2]==null?I:_[2],le=_[3]==null?I:_[3],j(["v2_5","v2_0"]["$include?"](Y.version))&&j(Q["$settable_non_2d_roll_option?"]())||Y.$raise(t("ParseError")),Q["$semi_fixed_val="](le.$to_i()),Q}),D(i,"$_reduce_16",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],ae=_[2]==null?I:_[2],le=_[3]==null?I:_[3],j(["v2_5","v2_0"]["$include?"](Y.version))&&j(Q["$settable_non_2d_roll_option?"]())||Y.$raise(t("ParseError")),Q["$tmp_fixed_val="](le.$to_i()),Q}),D(i,"$_reduce_17",function(P,W,ee){var _,q,Y=this,Q=I,ae=I,le=I;return q=P,_=H(q),Q=_[0]==null?I:_[0],ae=_[1]==null?I:_[1],le=_[2]==null?I:_[2],B(Y.version,"v2_5")&&j(Q.$kept_modify()["$nil?"]())||Y.$raise(t("ParseError")),Q["$kept_modify="](le),Q}),D(i,"$_reduce_18",function(P,W,ee){return P["$[]"](1)}),D(i,"$_reduce_19",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"Negative").$new(P["$[]"](1))}),D(i,"$_reduce_20",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"BinaryOp").$new(P["$[]"](0),"+",P["$[]"](2))}),D(i,"$_reduce_21",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"BinaryOp").$new(P["$[]"](0),"-",P["$[]"](2))}),D(i,"$_reduce_22",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"BinaryOp").$new(P["$[]"](0),"+",P["$[]"](2))}),D(i,"$_reduce_23",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"BinaryOp").$new(P["$[]"](0),"-",P["$[]"](2))}),D(i,"$_reduce_25",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"BinaryOp").$new(P["$[]"](0),"*",P["$[]"](2))}),D(i,"$_reduce_26",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault").$new(P["$[]"](0),P["$[]"](2))}),D(i,"$_reduce_28",function(P,W,ee){return P["$[]"](1)}),D(i,"$_reduce_29",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"Negative").$new(P["$[]"](1))}),D(i,"$_reduce_31",function(P,W,ee){return P["$[]"](1)}),D(i,"$_reduce_32",function(P,W,ee){return V(V(t("Arithmetic"),"Node"),"Number").$new(P["$[]"](0))}),D(i,"$_reduce_none",function(P,W,ee){return P["$[]"](0)})}(h[0],V(R("Racc"),"Parser"),h)}(L[0],S("Base"),L)}(T[0],T)}(k[0],k)};Opal.modules["bcdice/game_system/SwordWorld"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.send2,M=e.find_super,D=e.def,X=e.truthy,j=e.rb_ge,b=e.rb_le,U=e.eqeq,F=e.neqeq,J=e.rb_minus,H=e.rb_gt,B=e.hash2,K=e.send,k=e.to_ary,I=e.rb_plus,V=e.rb_lt,v=e.rb_times,x=e.thrower,w=e.rb_divide,T=e.top,o=[],A=e.nil;return T.$require("bcdice/base"),T.$require("bcdice/game_system/sword_world/rating_parser"),function(N,L){var S=C(N,"BCDice"),c=[S].concat(L);return function(E,m){var f=C(E,"GameSystem"),h=[f].concat(m),R=e.$r(h);return function(d,l,u){var i=z(d,l,"SwordWorld"),n=[i].concat(u),t=e.$r(n),$=i.$$prototype;return $.rating_table=$.randomizer=A,g(n[0],"ID","SwordWorld"),g(n[0],"NAME","\u30BD\u30FC\u30C9\u30FB\u30EF\u30FC\u30EB\u30C9RPG"),g(n[0],"SORT_KEY","\u305D\u304A\u3068\u308F\u3042\u308B\u3068"),g(n[0],"HELP_MESSAGE",`\u30FBSW\u3000\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u3000(Kx[c]+m$f) (x:\u30AD\u30FC, c:\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024, m:\u30DC\u30FC\u30CA\u30B9, f:\u51FA\u76EE\u4FEE\u6B63)
`),i.$register_prefix("H?K"),D(i,"$initialize",function r(a){var s=r.$$p||A,p=this;return r.$$p=null,y(p,M(p,"initialize",r,!1,!0),"initialize",[a],null),p.rating_table=0}),D(i,"$result_2d6",function(a,s,p,G,Z){var ie=this;return X(j(s,12))?t("Result").$critical(ie.$translate("SwordWorld.critical")):X(b(s,2))?t("Result").$fumble(ie.$translate("SwordWorld.fumble")):F(G,">=")||U(Z,"?")?A:X(j(a,Z))?t("Result").$success(ie.$translate("success")):t("Result").$failure(ie.$translate("failure"))}),D(i,"$eval_game_system_specific_command",function(a){var s=this;return s.$rating(a)}),i.$private(),D(i,"$rating_parser",function(){return t("RatingParser").$new()}),D(i,"$rating",function(a){var s,p,G=this,Z=A,ie=A,ne=A,se=A,O=A,oe=A,ue=A,te=A,$e=A,re=A,P=A,W=A,ee=A,_=A,q=A,Y=A,Q=A;return G.$debug("rating string",a),Z=G.$rating_parser().$parse(a),X(Z)?(ie=G.$getSW2_0_RatingTable(),ne=J(ie.$length(),1),G.$debug("keyMax",ne),X(H(Z.$rate(),ne))?t("Result").$new(G.$translate("SwordWorld.keynumber_exceeds",B(["keyMax"],{keyMax:ne}))):X(Z["$infinite_roll?"]())?t("Result").$new(G.$translate("SwordWorld.infinite_critical",B(["min_critical"],{min_critical:Z.$min_critical()}))):(se=G.$getNewRates(ie),O=""+Z+" \uFF1E ",oe=[],ue=[],te=[],$e=0,re=0,P=0,W=0,ee=Z.$first_to(),_=Z.$first_modify(),function(){try{var ae=x("break");return K(G,"loop",[],function le(){var ce,_e,fe=le.$$s==null?this:le.$$s,de=A,he=A,me=A,ge=A;if(_e=fe.$rollDice(Z,W),ce=k(_e),de=ce[0]==null?A:ce[0],he=ce[1]==null?A:ce[1],$e=de,F(ee,0)?($e=de=ee,ee=0):F(_,0)&&($e=I($e,_),_=0),X(b(de,2))&&(oe["$<<"](de.$to_s()),ue["$<<"](he.$to_s()),te["$<<"]("**"),W=I(W,1),ae.$throw()),F(Z.$kept_modify(),0)&&F($e,2)&&($e=I($e,Z.$kept_modify())),X(V($e,2))&&($e=2),X(H($e,12))&&($e=12),me=[I(Z.$rate(),v(W,Z.$rateup())),ne].$min(),fe.$debug("currentKey",me),ge=se["$[]"]($e)["$[]"](me),fe.$debug("rateValue",ge),P=I(P,ge),re=I(re,$e),oe["$<<"]($e.$to_s()),ue["$<<"](he.$to_s()),te["$<<"](X(H($e,2))?ge:"**"),W=I(W,1),X(j($e,Z.$critical())))return A;ae.$throw()},{$$s:G})}catch(le){if(le===ae)return le.$v;throw le}}(),p=G.$getResultText(P,Z,ue,oe,te,re,W),s=k(p),q=s[0]==null?A:s[0],Y=s[1]==null?A:s[1],Q=s[2]==null?A:s[2],O=I(O,q),K(t("Result").$new(),"tap",[],function(le){var ce;return le==null&&(le=A),le["$text="](O),le["$critical="](Y),ce=[Q],K(le,"fumble=",ce),ce[ce.length-1]}))):(G.$debug("not matched"),"1")}),D(i,"$getSW2_0_RatingTable",function(){var a=A;return a=["*,0,0,0,1,2,2,3,3,4,4","*,0,0,0,1,2,3,3,3,4,4","*,0,0,0,1,2,3,4,4,4,4","*,0,0,1,1,2,3,4,4,4,5","*,0,0,1,2,2,3,4,4,5,5","*,0,1,1,2,2,3,4,5,5,5","*,0,1,1,2,3,3,4,5,5,5","*,0,1,1,2,3,4,4,5,5,6","*,0,1,2,2,3,4,4,5,6,6","*,0,1,2,3,3,4,4,5,6,7","*,1,1,2,3,3,4,5,5,6,7","*,1,2,2,3,3,4,5,6,6,7","*,1,2,2,3,4,4,5,6,6,7","*,1,2,3,3,4,4,5,6,7,7","*,1,2,3,4,4,4,5,6,7,8","*,1,2,3,4,4,5,5,6,7,8","*,1,2,3,4,4,5,6,7,7,8","*,1,2,3,4,5,5,6,7,7,8","*,1,2,3,4,5,6,6,7,7,8","*,1,2,3,4,5,6,7,7,8,9","*,1,2,3,4,5,6,7,8,9,10","*,1,2,3,4,6,6,7,8,9,10","*,1,2,3,5,6,6,7,8,9,10","*,2,2,3,5,6,7,7,8,9,10","*,2,3,4,5,6,7,7,8,9,10","*,2,3,4,5,6,7,8,8,9,10","*,2,3,4,5,6,8,8,9,9,10","*,2,3,4,6,6,8,8,9,9,10","*,2,3,4,6,6,8,9,9,10,10","*,2,3,4,6,7,8,9,9,10,10","*,2,4,4,6,7,8,9,10,10,10","*,2,4,5,6,7,8,9,10,10,11","*,3,4,5,6,7,8,10,10,10,11","*,3,4,5,6,8,8,10,10,10,11","*,3,4,5,6,8,9,10,10,11,11","*,3,4,5,7,8,9,10,10,11,12","*,3,5,5,7,8,9,10,11,11,12","*,3,5,6,7,8,9,10,11,12,12","*,3,5,6,7,8,10,10,11,12,13","*,4,5,6,7,8,10,11,11,12,13","*,4,5,6,7,9,10,11,11,12,13","*,4,6,6,7,9,10,11,12,12,13","*,4,6,7,7,9,10,11,12,13,13","*,4,6,7,8,9,10,11,12,13,14","*,4,6,7,8,10,10,11,12,13,14","*,4,6,7,9,10,10,11,12,13,14","*,4,6,7,9,10,10,12,13,13,14","*,4,6,7,9,10,11,12,13,13,15","*,4,6,7,9,10,12,12,13,13,15","*,4,6,7,10,10,12,12,13,14,15","*,4,6,8,10,10,12,12,13,15,15","*,5,7,8,10,10,12,12,13,15,15","*,5,7,8,10,11,12,12,13,15,15","*,5,7,9,10,11,12,12,14,15,15","*,5,7,9,10,11,12,13,14,15,16","*,5,7,10,10,11,12,13,14,16,16","*,5,8,10,10,11,12,13,15,16,16","*,5,8,10,11,11,12,13,15,16,17","*,5,8,10,11,12,12,13,15,16,17","*,5,9,10,11,12,12,14,15,16,17","*,5,9,10,11,12,13,14,15,16,18","*,5,9,10,11,12,13,14,16,17,18","*,5,9,10,11,13,13,14,16,17,18","*,5,9,10,11,13,13,15,17,17,18","*,5,9,10,11,13,14,15,17,17,18","*,5,9,10,12,13,14,15,17,18,18","*,5,9,10,12,13,15,15,17,18,19","*,5,9,10,12,13,15,16,17,19,19","*,5,9,10,12,14,15,16,17,19,19","*,5,9,10,12,14,16,16,17,19,19","*,5,9,10,12,14,16,17,18,19,19","*,5,9,10,13,14,16,17,18,19,20","*,5,9,10,13,15,16,17,18,19,20","*,5,9,10,13,15,16,17,19,20,21","*,6,9,10,13,15,16,18,19,20,21","*,6,9,10,13,16,16,18,19,20,21","*,6,9,10,13,16,17,18,19,20,21","*,6,9,10,13,16,17,18,20,21,22","*,6,9,10,13,16,17,19,20,22,23","*,6,9,10,13,16,18,19,20,22,23","*,6,9,10,13,16,18,20,21,22,23","*,6,9,10,13,17,18,20,21,22,23","*,6,9,10,14,17,18,20,21,22,24","*,6,9,11,14,17,18,20,21,23,24","*,6,9,11,14,17,19,20,21,23,24","*,6,9,11,14,17,19,21,22,23,24","*,7,10,11,14,17,19,21,22,23,25","*,7,10,12,14,17,19,21,22,24,25","*,7,10,12,14,18,19,21,22,24,25","*,7,10,12,15,18,19,21,22,24,26","*,7,10,12,15,18,19,21,23,25,26","*,7,11,13,15,18,19,21,23,25,26","*,7,11,13,15,18,20,21,23,25,27","*,8,11,13,15,18,20,22,23,25,27","*,8,11,13,16,18,20,22,23,25,28","*,8,11,14,16,18,20,22,23,26,28","*,8,11,14,16,19,20,22,23,26,28","*,8,12,14,16,19,20,22,24,26,28","*,8,12,15,16,19,20,22,24,27,28","*,8,12,15,17,19,20,22,24,27,29","*,8,12,15,18,19,20,22,24,27,30"],a}),D(i,"$getNewRates",function(a){var s,p,G=this,Z=A,ie=A,ne=A,se=A,O=A,oe=A,ue=A,te=A,$e=A,re=A,P=A,W=A;return Z=[],ie=[],ne=[],se=[],O=[],oe=[],ue=[],te=[],$e=[],re=[],P=[],K(a,"each",[],function(_){var q=A;return _==null&&(_=A),q=_.$split(/,/),P.$push(0),Z.$push(q["$[]"](1).$to_i()),ie.$push(q["$[]"](2).$to_i()),ne.$push(q["$[]"](3).$to_i()),se.$push(q["$[]"](4).$to_i()),O.$push(q["$[]"](5).$to_i()),oe.$push(q["$[]"](6).$to_i()),ue.$push(q["$[]"](7).$to_i()),te.$push(q["$[]"](8).$to_i()),$e.$push(q["$[]"](9).$to_i()),re.$push(q["$[]"](10).$to_i())}),U(G.rating_table,1)&&re["$[]="](31,(s=[32,(p=[33,10],K(re,"[]=",p),p[p.length-1])],K(re,"[]=",s),s[s.length-1])),W=[P,P,P,Z,ie,ne,se,O,oe,ue,te,$e,re],W}),D(i,"$rollDice",function(a,s){var p=this,G=A,Z=A,ie=A;return G=p.randomizer.$roll_barabara(2,6),Z=G.$sum(),ie=G.$join(","),[Z,ie]}),D(i,"$getResultText",function(a,s,p,G,Z,ie,ne){var se=this,O=A,oe=A,ue=A,te=A,$e=A;return O=[],O.$push("2D:["+p.$join(" ")+"]="+G.$join(",")),X(b(ie,2))?(O.$push(Z.$join(",")),O.$push(se.$translate("SwordWorld.fumble")),[O.$join(" \uFF1E "),!1,!0]):(X(H(Z.$size(),1))||F(s.$modifier(),0)?(oe=I(Z.$join(","),t("Format").$modifier(s.$modifier())),X(s.$half())&&(oe="("+oe+")/2",F(s.$modifier_after_half(),0)&&(oe=I(oe,t("Format").$modifier(s.$modifier_after_half())))),O.$push(oe)):X(s.$half())&&(oe=""+Z.$first()+"/2",F(s.$modifier_after_half(),0)&&(oe=I(oe,t("Format").$modifier(s.$modifier_after_half()))),O.$push(oe)),X(H(ne,1))&&(ue=se.$translate("SwordWorld.round_text",B(["reroll_count"],{reroll_count:J(ne,1)})),O.$push(ue)),te=I(a,s.$modifier()),X(s.$half())&&(te=w(te,2).$ceil(),F(s.$modifier_after_half(),0)&&(te=I(te,s.$modifier_after_half()))),$e=te.$to_s(),O.$push($e),[O.$join(" \uFF1E "),H(ne,1),!1])})}(h[0],R("Base"),h)}(c[0],c)}(o[0],o)};Opal.modules["bcdice/game_system/sword_world/transcendent_test"]=function(e){var C=e.module,z=e.klass,g=e.def,y=e.truthy,M=e.rb_lt,D=e.hash2,X=e.not,j=e.rb_ge,b=e.rb_plus,U=e.send,F=e.top,J=[],H=e.nil;return F.$require("bcdice/result"),F.$require("bcdice/translate"),function(B,K){var k=C(B,"BCDice"),I=[k].concat(K);return function(V,v){var x=C(V,"GameSystem"),w=[x].concat(v),T=e.$r(w);return function(o,A,N){var L=z(o,A,"SwordWorld2_0"),S=[L].concat(N);return function(c,E,m){var f=z(c,E,"TranscendentTest"),h=[f].concat(m),R=e.$r(h),d=f.$$prototype;return d.modifier=d.critical_value=d.expression=d.modifier_str=d.target=d.cmp_op=H,f.$include(R("Translate")),g(f,"$initialize",function(u,i,n,t,$){var r=this;return r.critical_value=u,r.modifier=i,r.cmp_op=n,r.target=t,r.locale=$,r.modifier_str=R("Format").$modifier(r.modifier),r.expression=r.$node_expression()}),g(f,"$execute",function(u){var i=this,n=H,t=H,$=H,r=H,a=H,s=H,p=H,G=H,Z=H;if(y(M(i.critical_value,3)))return i.$translate("SwordWorld2_0.transcendent_critical_too_small",D(["expression"],{expression:i.expression}));if(n=u.$roll_barabara(2,6),t=[n],$=n["$=="]([1,1]),r=n["$=="]([6,6]),X($)&&X(r))for(;y(j(i.$sum_of_dice(t.$last()),i.critical_value));)t.$push(u.$roll_barabara(2,6));return a=i.$sum_of_dice(t),s=b(a,i.modifier),p=i.$result_status(s,t.$length(),$,r),G=D(["success","failure","super_success","critical","fumble"],{success:i.$translate("success"),failure:i.$translate("failure"),super_success:i.$translate("SwordWorld2_0.super_success"),critical:i.$translate("SwordWorld.critical"),fumble:i.$translate("SwordWorld.fumble")}).$freeze()["$[]"](p),Z=["("+i.expression+")",""+i.$dice_str(t,a)+i.modifier_str,s,G].$compact(),U(R("Result").$new(),"tap",[],function(ne){var se;return ne==null&&(ne=H),ne["$text="](Z.$join(" \uFF1E ")),ne["$fumble="](p["$=="]("fumble")),ne["$critical="](p["$=="]("critical")),ne["$success="](["success","super_success","critical"]["$include?"](p)),se=[["failure","fumble"]["$include?"](p)],U(ne,"failure=",se),se[se.length-1]})}),f.$private(),g(f,"$node_expression",function(){var u=this,i=H;return i="2D6@"+u.critical_value+u.modifier_str,y(u.target)?""+i+u.cmp_op+u.target:i}),g(f,"$sum_of_dice",function(u){return u.$flatten().$sum()}),g(f,"$dice_str",function(u,i){var n=H;return n=U(u,"map",[],function($){return $==null&&($=H),"["+$.$join(",")+"]"}).$join(),""+i+n}),g(f,"$result_status",function(u,i,n,t){var $=this;return y($.target)?y(n)?"fumble":y(t)?"critical":y(u.$send($.cmp_op,$.target))?y(j(i,2))&&y(j(u,41))?"super_success":"success":"failure":"no_target"})}(S[0],null,S)}(w[0],T("SwordWorld"),w)}(I[0],I)}(J[0],J)};Opal.modules["bcdice/game_system/SwordWorld2_0"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.send2,M=e.find_super,D=e.def,X=e.eqeqeq,j=e.truthy,b=e.hash2,U=e.rb_gt,F=e.rb_plus,J=e.eqeq,H=e.rb_times,B=e.send,K=e.neqeq,k=e.top,I=[],V=e.nil,v=e.$$$;return k.$require("bcdice/arithmetic_evaluator"),k.$require("bcdice/game_system/SwordWorld"),k.$require("bcdice/game_system/sword_world/transcendent_test"),function(x,w){var T=C(x,"BCDice"),o=[T].concat(w);return function(A,N){var L=C(A,"GameSystem"),S=[L].concat(N),c=e.$r(S);return function(E,m,f){var h=z(E,m,"SwordWorld2_0"),R=[h].concat(f),d=e.$r(R),l=h.$$prototype;return l.locale=l.randomizer=V,g(R[0],"ID","SwordWorld2.0"),g(R[0],"NAME","\u30BD\u30FC\u30C9\u30FB\u30EF\u30FC\u30EB\u30C92.0"),g(R[0],"SORT_KEY","\u305D\u304A\u3068\u308F\u3042\u308B\u30682.0"),g(R[0],"HELP_MESSAGE",`\u81EA\u52D5\u7684\u6210\u529F\u3001\u6210\u529F\u3001\u5931\u6557\u3001\u81EA\u52D5\u7684\u5931\u6557\u306E\u81EA\u52D5\u5224\u5B9A\u3092\u884C\u3044\u307E\u3059\u3002

\u30FB\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u3000(Kx)
\u3000"K\u30AD\u30FC\u30CA\u30F3\u30D0\u30FC+\u30DC\u30FC\u30CA\u30B9"\u306E\u5F62\u3067\u8A18\u5165\u3057\u307E\u3059\u3002
\u3000\u30DC\u30FC\u30CA\u30B9\u306E\u90E8\u5206\u306B\u300CK20+K30\u300D\u306E\u3088\u3046\u306B\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u3092\u53D6\u308B\u3053\u3068\u306F\u51FA\u6765\u307E\u305B\u3093\u3002
\u3000\u307E\u305F\u3001\u30DC\u30FC\u30CA\u30B9\u306F\u8907\u6570\u53D6\u308B\u3053\u3068\u304C\u51FA\u6765\u307E\u3059\u3002
\u3000\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u3082\u30C0\u30A4\u30B9\u30ED\u30FC\u30EB\u3068\u540C\u69D8\u306B\u3001\u4ED6\u306E\u30D7\u30EC\u30A4\u30E4\u30FC\u306B\u96A0\u308C\u3066\u30ED\u30FC\u30EB\u3059\u308B\u3053\u3068\u3082\u53EF\u80FD\u3067\u3059\u3002
\u3000\u4F8B\uFF09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2

\u30FB\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u306E\u8A2D\u5B9A
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u306F"[\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024]"\u3067\u6307\u5B9A\u3057\u307E\u3059\u3002
\u3000\u6307\u5B9A\u3057\u306A\u3044\u5834\u5408\u306F\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u502410\u3068\u3057\u307E\u3059\u3002
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u51E6\u7406\u304C\u5FC5\u8981\u306A\u3044\u3068\u304D\u306F13\u306A\u3069\u3068\u3057\u3066\u304F\u3060\u3055\u3044\u3002(\u9632\u5FA1\u6642\u306A\u3069\u306E\u5BFE\u5FDC)
\u3000\u307E\u305F\u30BF\u30A4\u30D7\u306E\u8EFD\u6E1B\u5316\u306E\u305F\u3081\u306B\u672B\u5C3E\u306B\u300C@\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u300D\u3067\u3082\u51E6\u7406\u3059\u308B\u3088\u3046\u306B\u3057\u307E\u3057\u305F\u3002
\u3000\u4F8B\uFF09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9

\u30FB\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u306E\u534A\u6E1B (HKx, KxH+N)
\u3000\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u306E\u5148\u982D\u307E\u305F\u306F\u672B\u5C3E\u306B"H"\u3092\u3064\u3051\u308B\u3068\u3001\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u3092\u632F\u3063\u3066\u6700\u7D42\u7D50\u679C\u3092\u534A\u6E1B\u3055\u305B\u307E\u3059\u3002
\u3000\u672B\u5C3E\u306B\u3064\u3051\u305F\u5834\u5408\u3001\u76F4\u5F8C\u306B\u4FEE\u6B63\u3092\u3092\u3064\u3051\u308B\u3053\u3068\u3067\u3001\u534A\u6E1B\u5F8C\u306E\u52A0\u6E1B\u7B97\u3092\u884C\u3046\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002
\u3000\u3053\u306E\u969B\u3001\u8907\u6570\u306E\u9805\u306B\u3088\u308B\u4FEE\u6B63\u306B\u306F\u30AB\u30C3\u30B3\u3067\u56F2\u3046\u3053\u3068\u304C\u5FC5\u8981\u3067\u3059\uFF08\u30AB\u30C3\u30B3\u304C\u306A\u3044\u3068\u30D1\u30FC\u30B9\u306B\u5931\u6557\u3057\u307E\u3059\uFF09
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u3092\u6307\u5B9A\u3057\u306A\u3044\u5834\u5408\u3001\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u306A\u3057\u3068\u6271\u308F\u308C\u307E\u3059\u3002
\u3000\u4F8B\uFF09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H(1+1)

\u30FB\u30C0\u30A4\u30B9\u76EE\u306E\u4FEE\u6B63\uFF08\u904B\u547D\u5909\u8EE2\u3084\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u30EC\u30A4\u7528\uFF09
\u3000\u672B\u5C3E\u306B\u300C$\u4FEE\u6B63\u5024\u300D\u3067\u30C0\u30A4\u30B9\u76EE\u306B\u4FEE\u6B63\u304C\u304B\u304B\u308A\u307E\u3059\u3002
\u3000$\uFF0B\uFF11\u3068\u4FEE\u6B63\u8868\u8A18\u306A\u3089\u30C0\u30A4\u30B9\u76EE\u306B\uFF0B\u4FEE\u6B63\u3001\uFF04\uFF19\u306E\u3088\u3046\u306B\u56FA\u5B9A\u5024\u306A\u3089\u30C0\u30A4\u30B9\u76EE\u3092\u305D\u306E\u51FA\u76EE\u306B\u5DEE\u3057\u66FF\u3048\u3002
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u3057\u305F\u5834\u5408\u3067\u3082\u56FA\u5B9A\u5024\u3084\u4FEE\u6B63\u5024\u306E\u9069\u7528\u306F\u6700\u521D\u306E\u4E00\u56DE\u3060\u3051\u3067\u3059\u3002
\u3000\u4F8B\uFF09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9

\u30FB\u9996\u5207\u308A\u5200\u7528\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u4E0A\u6607 r10
\u3000\u4F8B\uFF09K20r10\u3000K30+24@8R10\u3000K40+24@8$12r10

\u30FB\u30B0\u30EC\u30A4\u30C6\u30B9\u30C8\u30D5\u30A9\u30FC\u30C1\u30E5\u30F3\u306F\u672B\u5C3E\u306B gf
\u3000\u4F8B\uFF09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r10gf

\u30FB\u5A01\u529B\u8868\u30921d+sf\u3067\u53C2\u7167 \u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5F8C\u3082\u7D99\u7D9A sf4
\u3000\u4F8B\uFF09k10sf4\u3000k0+5SF4@13\u3000k70+26sf3@9

\u30FB\u5A01\u529B\u8868\u30921d+tf\u3067\u53C2\u7167 \u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5F8C\u306F2d\u3067\u53C2\u7167 tf3
\u3000\u4F8B\uFF09k10tf3\u3000k0+5TF4@13\u3000k70+26tf3@9

\u30FB\u8D85\u8D8A\u5224\u5B9A\u7528\u306B2d6\u30ED\u30FC\u30EB\u306B 2D6@10 \u66F8\u5F0F\u3067\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u4ED8\u4E0E\u304C\u53EF\u80FD\u306B\u3002
\u3000\u4F8B\uFF092D6@10\u30002D6@10+11>=30

\u30FB\u6210\u9577\u3000(Gr)
\u3000\u672B\u5C3E\u306B\u6570\u5B57\u3092\u4ED8\u52A0\u3059\u308B\u3053\u3068\u3067\u3001\u8907\u6570\u56DE\u306E\u6210\u9577\u3092\u307E\u3068\u3081\u3066\u884C\u3048\u307E\u3059\u3002
\u3000\u4F8B\uFF09Gr3

\u30FB\u9632\u5FA1\u30D5\u30A1\u30F3\u30D6\u30EB\u8868\u3000(FT)
\u3000\u9632\u5FA1\u30D5\u30A1\u30F3\u30D6\u30EB\u8868\u3092\u51FA\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002

\u30FB\u7D61\u307F\u52B9\u679C\u8868\u3000(TT)
\u3000\u7D61\u307F\u52B9\u679C\u8868\u3092\u51FA\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002
`),h.$register_prefix("H?K","Gr","2D6?@\\d+","FT","TT"),D(h,"$initialize",function u(i){var n=u.$$p||V,t=this;return u.$$p=null,y(t,M(t,"initialize",u,!1,!0),"initialize",[i],null),t.rating_table=2}),D(h,"$eval_game_system_specific_command",function u(i){var n=u.$$p||V,t=this,$=V,r=V,a=V,s=V;return u.$$p=null,X(/^Gr(\d+)?/i,$=i)?j(i["$=~"](/^Gr(\d+)/i))?t.$growth(d("Regexp").$last_match(1).$to_i()):t.$growth():X(/^2D6?@\d+/i,$)?(r=v(d("Command"),"Parser").$new(/2D6?/i,b(["round_type"],{round_type:v(v(d("BCDice"),"RoundType"),"CEIL")})).$enable_critical().$restrict_cmp_op_to(V,">=",">"),a=r.$parse(i),j(a)?(s=d("TranscendentTest").$new(a.$critical(),a.$modify_number(),a.$cmp_op(),a.$target_number(),t.locale),s.$execute(t.randomizer)):V):X("FT",$)?t.$get_fumble_table():X("TT",$)?t.$get_tangle_table():y(t,M(t,"eval_game_system_specific_command",u,!1,!0),"eval_game_system_specific_command",[i],null)}),D(h,"$rating_parser",function(){return d("RatingParser").$new(b(["version"],{version:"v2_0"}))}),D(h,"$rollDice",function u(i,n){var t=u.$$p||V,$=this,r=V;return u.$$p=null,j(U(i.$semi_fixed_val(),0))?(r=$.randomizer.$roll_once(6),[F(r,i.$semi_fixed_val()),""+r+","+i.$semi_fixed_val()]):J(n,0)&&j(U(i.$tmp_fixed_val(),0))?(r=$.randomizer.$roll_once(6),[F(r,i.$tmp_fixed_val()),""+r+","+i.$tmp_fixed_val()]):j(i.$greatest_fortune())?(r=$.randomizer.$roll_once(6),[H(r,2),""+r+","+r]):y($,M($,"rollDice",u,!1,!0),"rollDice",[i,n],null)}),D(h,"$growth",function(i){var n=this;return i==null&&(i=1),B(e.Range.$new(1,i,!1),"map",[],function t(){var $=t.$$s==null?this:t.$$s;return $.$growth_step()},{$$s:n}).$join(" | ")},-1),D(h,"$growth_step",function(){var i=this,n=V,t=V,$=V;return n=v(d("DiceTable"),"Table").$from_i18n("SwordWorld2_0.GrowthTable",i.locale),t=n.$roll(i.randomizer),$=n.$roll(i.randomizer),K(t.$value(),$.$value())?"["+t.$value()+","+$.$value()+"]->("+t.$body()+" or "+$.$body()+")":"["+t.$value()+","+$.$value()+"]->("+t.$body()+")"}),D(h,"$get_fumble_table",function(){var i=this,n=V;return n=v(d("DiceTable"),"Table").$from_i18n("SwordWorld2_0.FumbleTable",i.locale),n.$roll(i.randomizer)}),D(h,"$get_tangle_table",function(){var i=this,n=V;return n=v(d("DiceTable"),"Table").$from_i18n("SwordWorld2_0.TangleTable",i.locale),n.$roll(i.randomizer)})}(S[0],c("SwordWorld"),S)}(o[0],o)}(I[0],I)};Opal.modules["bcdice/game_system/SwordWorld2_5"]=function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.eqeqeq,M=e.send,D=e.hash2,X=e.truthy,j=e.send2,b=e.find_super,U=e.def,F=e.range,J=e.rb_plus,H=e.top,B=[],K=e.nil,k=e.$$$;return H.$require("bcdice/game_system/SwordWorld2_0"),function(I,V){var v=C(I,"BCDice"),x=[v].concat(V);return function(w,T){var o=C(w,"GameSystem"),A=[o].concat(T),N=e.$r(A);return function(L,S,c){var E=z(L,S,"SwordWorld2_5"),m=[E].concat(c),f=e.$r(m),h=E.$$prototype;return h.randomizer=h.locale=K,g(m[0],"ID","SwordWorld2.5"),g(m[0],"NAME","\u30BD\u30FC\u30C9\u30FB\u30EF\u30FC\u30EB\u30C92.5"),g(m[0],"SORT_KEY","\u305D\u304A\u3068\u308F\u3042\u308B\u30682.5"),g(m[0],"HELP_MESSAGE",`\u81EA\u52D5\u7684\u6210\u529F\u3001\u6210\u529F\u3001\u5931\u6557\u3001\u81EA\u52D5\u7684\u5931\u6557\u306E\u81EA\u52D5\u5224\u5B9A\u3092\u884C\u3044\u307E\u3059\u3002

\u30FB\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u3000(Kx)
\u3000"K\u30AD\u30FC\u30CA\u30F3\u30D0\u30FC+\u30DC\u30FC\u30CA\u30B9"\u306E\u5F62\u3067\u8A18\u5165\u3057\u307E\u3059\u3002
\u3000\u30DC\u30FC\u30CA\u30B9\u306E\u90E8\u5206\u306B\u300CK20+K30\u300D\u306E\u3088\u3046\u306B\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u3092\u53D6\u308B\u3053\u3068\u306F\u51FA\u6765\u307E\u305B\u3093\u3002
\u3000\u307E\u305F\u3001\u30DC\u30FC\u30CA\u30B9\u306F\u8907\u6570\u53D6\u308B\u3053\u3068\u304C\u51FA\u6765\u307E\u3059\u3002
\u3000\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u3082\u30C0\u30A4\u30B9\u30ED\u30FC\u30EB\u3068\u540C\u69D8\u306B\u3001\u4ED6\u306E\u30D7\u30EC\u30A4\u30E4\u30FC\u306B\u96A0\u308C\u3066\u30ED\u30FC\u30EB\u3059\u308B\u3053\u3068\u3082\u53EF\u80FD\u3067\u3059\u3002
\u3000\u4F8B\uFF09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2

\u30FB\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u306E\u8A2D\u5B9A
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u306F"[\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024]"\u3067\u6307\u5B9A\u3057\u307E\u3059\u3002
\u3000\u6307\u5B9A\u3057\u306A\u3044\u5834\u5408\u306F\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u502410\u3068\u3057\u307E\u3059\u3002
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u51E6\u7406\u304C\u5FC5\u8981\u306A\u3044\u3068\u304D\u306F13\u306A\u3069\u3068\u3057\u3066\u304F\u3060\u3055\u3044\u3002(\u9632\u5FA1\u6642\u306A\u3069\u306E\u5BFE\u5FDC)
\u3000\u307E\u305F\u30BF\u30A4\u30D7\u306E\u8EFD\u6E1B\u5316\u306E\u305F\u3081\u306B\u672B\u5C3E\u306B\u300C@\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u300D\u3067\u3082\u51E6\u7406\u3059\u308B\u3088\u3046\u306B\u3057\u307E\u3057\u305F\u3002
\u3000\u4F8B\uFF09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9

\u30FB\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u306E\u534A\u6E1B (HKx, KxH+N)
\u3000\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u306E\u5148\u982D\u307E\u305F\u306F\u672B\u5C3E\u306B"H"\u3092\u3064\u3051\u308B\u3068\u3001\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u8868\u3092\u632F\u3063\u3066\u6700\u7D42\u7D50\u679C\u3092\u534A\u6E1B\u3055\u305B\u307E\u3059\u3002
\u3000\u672B\u5C3E\u306B\u3064\u3051\u305F\u5834\u5408\u3001\u76F4\u5F8C\u306B\u4FEE\u6B63\u3092\u3092\u3064\u3051\u308B\u3053\u3068\u3067\u3001\u534A\u6E1B\u5F8C\u306E\u52A0\u6E1B\u7B97\u3092\u884C\u3046\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002
\u3000\u3053\u306E\u969B\u3001\u8907\u6570\u306E\u9805\u306B\u3088\u308B\u4FEE\u6B63\u306B\u306F\u30AB\u30C3\u30B3\u3067\u56F2\u3046\u3053\u3068\u304C\u5FC5\u8981\u3067\u3059\uFF08\u30AB\u30C3\u30B3\u304C\u306A\u3044\u3068\u30D1\u30FC\u30B9\u306B\u5931\u6557\u3057\u307E\u3059\uFF09
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u3092\u6307\u5B9A\u3057\u306A\u3044\u5834\u5408\u3001\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u306A\u3057\u3068\u6271\u308F\u308C\u307E\u3059\u3002
\u3000\u4F8B\uFF09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H+(1+1)

\u30FB\u30C0\u30A4\u30B9\u76EE\u306E\u4FEE\u6B63\uFF08\u904B\u547D\u5909\u8EE2\u3084\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u30EC\u30A4\u7528\uFF09
\u3000\u672B\u5C3E\u306B\u300C$\u4FEE\u6B63\u5024\u300D\u3067\u30C0\u30A4\u30B9\u76EE\u306B\u4FEE\u6B63\u304C\u304B\u304B\u308A\u307E\u3059\u3002
\u3000$\uFF0B\uFF11\u3068\u4FEE\u6B63\u8868\u8A18\u306A\u3089\u30C0\u30A4\u30B9\u76EE\u306B\uFF0B\u4FEE\u6B63\u3001\uFF04\uFF19\u306E\u3088\u3046\u306B\u56FA\u5B9A\u5024\u306A\u3089\u30C0\u30A4\u30B9\u76EE\u3092\u305D\u306E\u51FA\u76EE\u306B\u5DEE\u3057\u66FF\u3048\u3002
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u3057\u305F\u5834\u5408\u3067\u3082\u56FA\u5B9A\u5024\u3084\u4FEE\u6B63\u5024\u306E\u9069\u7528\u306F\u6700\u521D\u306E\u4E00\u56DE\u3060\u3051\u3067\u3059\u3002
\u3000\u4F8B\uFF09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9

\u30FB\u30C0\u30A4\u30B9\u76EE\u306E\u4FEE\u6B63\uFF08\u5FC5\u6BBA\u653B\u6483\u7528\uFF09
\u3000\u300C\uFF03\u4FEE\u6B63\u5024\u300D\u3067\u30C0\u30A4\u30B9\u76EE\u306B\u4FEE\u6B63\u304C\u304B\u304B\u308A\u307E\u3059\u3002
\u3000\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u3057\u305F\u5834\u5408\u3067\u3082\u4FEE\u6B63\u5024\u306E\u9069\u7528\u306F\u7D99\u7D9A\u3055\u308C\u307E\u3059\u3002
\u3000\u4F8B\uFF09K20#1\u3000\u3000\u3000k10-5@9#2

\u30FB\u9996\u5207\u308A\u5200\u7528\u30EC\u30FC\u30C6\u30A3\u30F3\u30B0\u4E0A\u6607 r5
\u3000\u4F8B\uFF09K20r5\u3000K30+24@8R5\u3000K40+24@8$12r5

\u30FB\u30B0\u30EC\u30A4\u30C6\u30B9\u30C8\u30D5\u30A9\u30FC\u30C1\u30E5\u30F3\u306F\u672B\u5C3E\u306B gf
\u3000\u4F8B\uFF09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r5gf

\u30FB\u5A01\u529B\u8868\u30921d+sf\u3067\u53C2\u7167 \u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5F8C\u3082\u7D99\u7D9A sf4
\u3000\u4F8B\uFF09k10sf4\u3000k0+5sf4@13\u3000k70+26sf3@9

\u30FB\u5A01\u529B\u8868\u30921d+tf\u3067\u53C2\u7167 \u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5F8C\u306F2d\u3067\u53C2\u7167 tf3
\u3000\u4F8B\uFF09k10tf3\u3000k0+5tf4@13\u3000k70+26tf3@9

\u30FB\u8D85\u8D8A\u5224\u5B9A\u7528\u306B2d6\u30ED\u30FC\u30EB\u306B 2D6@10 \u66F8\u5F0F\u3067\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u4ED8\u4E0E\u304C\u53EF\u80FD\u306B\u3002
\u3000\u4F8B\uFF092D6@10\u30002D6@10+11>=30

\u30FB\u6210\u9577\u3000(Gr)
\u3000\u672B\u5C3E\u306B\u6570\u5B57\u3092\u4ED8\u52A0\u3059\u308B\u3053\u3068\u3067\u3001\u8907\u6570\u56DE\u306E\u6210\u9577\u3092\u307E\u3068\u3081\u3066\u884C\u3048\u307E\u3059\u3002
\u3000\u4F8B\uFF09Gr3

\u30FB\u9632\u5FA1\u30D5\u30A1\u30F3\u30D6\u30EB\u8868\u3000(FT)
\u3000\u9632\u5FA1\u30D5\u30A1\u30F3\u30D6\u30EB\u8868\u3092\u51FA\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002

\u30FB\u7D61\u307F\u52B9\u679C\u8868\u3000(TT)
\u3000\u7D61\u307F\u52B9\u679C\u8868\u3092\u51FA\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002

\u30FB\u30C9\u30EB\u30A4\u30C9\u306E\u7269\u7406\u9B54\u6CD5\u7528\u8868\u3000(Dru[2-6\u306E\u5024,7-9\u306E\u5024,10-12\u306E\u5024])
\u3000\u4F8B\uFF09Dru[0,3,6]+10-3

\u30FB\u30A2\u30D3\u30B9\u30AB\u30FC\u30B9\u8868\u3000(ABT)
\u3000\u30A2\u30D3\u30B9\u30AB\u30FC\u30B9\u8868\u3092\u51FA\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002
`),E.$register_prefix("H?K","Gr","2D6?@\\d+","FT","TT","Dru","ABT"),U(E,"$eval_game_system_specific_command",function R(d){var l=R.$$p||K,u=this,i=K,n=K,t=K,$=K;return R.$$p=null,y(/^dru\[(\d+),(\d+),(\d+)\]/i,i=d)?(n=M(f("Regexp").$last_match().$captures(),"map",[],"to_i".$to_proc()),t=k(f("Command"),"Parser").$new(/dru\[\d+,\d+,\d+\]/i,D(["round_type"],{round_type:k(k(f("BCDice"),"RoundType"),"CEIL")})),$=t.$parse(d),X($)?u.$druid_dice($,n):K):y("ABT",i)?u.$get_abyss_curse_table():j(u,b(u,"eval_game_system_specific_command",R,!1,!0),"eval_game_system_specific_command",[d],null)}),U(E,"$rating_parser",function(){return f("RatingParser").$new(D(["version"],{version:"v2_5"}))}),U(E,"$druid_dice",function(d,l){var u=this,i=K,n=K,t=K,$=K,r=K,a=K,s=K;return i=u.randomizer.$roll_barabara(2,6),n=i.$sum(),t=y(F(2,6,!1),$=n)?0:y(F(7,9,!1),$)?1:y(F(10,12,!1),$)?2:K,r=l["$[]"](t),a=J(r,d.$modify_number()),s=["("+d.$command().$capitalize()+f("Format").$modifier(d.$modify_number())+")","2D["+i.$join(",")+"]="+n,""+r+f("Format").$modifier(d.$modify_number()),a],s.$join(" \uFF1E ")}),U(E,"$get_abyss_curse_table",function(){var d=this,l=K,u=K,i=K,n=K;return l=k(f("DiceTable"),"D66GridTable").$from_i18n("SwordWorld2_5.AbyssCurseTable",d.locale).$roll(d.randomizer),u=y(14,i=l.$value())?k(f("DiceTable"),"D66ParityTable").$from_i18n("SwordWorld2_5.AbyssCurseCategoryTable",d.locale).$roll(d.randomizer).$to_s():y(25,i)?k(f("DiceTable"),"D66ParityTable").$from_i18n("SwordWorld2_5.AbyssCurseAttrTable",d.locale).$roll(d.randomizer).$to_s():K,n=[l.$to_s(),u].$compact(),n.$join(`
`)})}(A[0],N("SwordWorld2_0"),A)}(x[0],x)}(B[0],B)};Opal.queue(function(e){var C=e.module,z=e.klass,g=e.const_set,y=e.send2,M=e.find_super,D=e.def,X=e.top,j=[],b=e.nil;return X.$require("bcdice/game_system/SwordWorld2_5"),function(U,F){var J=C(U,"BCDice"),H=[J].concat(F);return function(B,K){var k=C(B,"GameSystem"),I=[k].concat(K),V=e.$r(I);return function(v,x,w){var T=z(v,x,"SwordWorld2_5_SimplifiedChinese"),o=[T].concat(w);return g(o[0],"ID","SwordWorld2.5:SimplifiedChinese"),g(o[0],"NAME","\u5251\u4E16\u754C2.5"),g(o[0],"SORT_KEY","\u56FD\u969B\u5316:Simplified Chinese:\u5251\u4E16\u754C2.5"),g(o[0],"HELP_MESSAGE",`\u81EA\u52A8\u6210\u529F\u3001\u6210\u529F\u3001\u5931\u8D25\u3001\u81EA\u52A8\u5931\u8D25\u4F1A\u81EA\u52A8\u5224\u5B9A\u3002

  \u30FB\u5A01\u529B\u8868\u3000(Kx)
  \u3000\u6307\u4EE4\u4E3A\u201CK\u5A01\u529B\u503C+\u52A0\u503C\u201D\u7684\u683C\u5F0F\u3002
  \u3000\u52A0\u503C\u7684\u90E8\u5206\u4E0D\u80FD\u662F\u50CF\u201CK20+K30\u201D\u8FD9\u6837\u7684\u5A01\u529B\u7684\u5199\u6CD5\u3002
  \u3000\u53E6\u5916\uFF0C\u52A0\u503C\u53EF\u4EE5\u6709\u591A\u4E2A\u3002
  \u3000\u5A01\u529B\u8868\u548C\u9AB0\u70B9\u4E00\u6837\uFF0C\u53EF\u4EE5\u5BF9\u5176\u4ED6\u73A9\u5BB6\u9690\u85CF\u3002
  \u3000\u4F8B\uFF09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2

  \u30FB\u66B4\u51FB\u503C\u7684\u8BBE\u5B9A
  \u3000\u66B4\u51FB\u503C\u901A\u8FC7\u201C[\u66B4\u51FB\u503C]\u201D\u6307\u5B9A\u3002
  \u3000\u6CA1\u6709\u6307\u5B9A\u66B4\u51FB\u503C\u65F6\u9ED8\u8BA4\u4E3A10\u3002
  \u3000\u5982\u679C\u4E0D\u9700\u8981\u53D1\u751F\u66B4\u51FB\uFF0C\u8BF7\u8BBE\u5B9A\u4E3A13\u3002\uFF08\u4F8B\u5982\u9632\u5FA1\u65F6\uFF09
  \u3000\u53E6\u5916\u4E5F\u53EF\u5199\u6210\u7ED3\u5C3E\u7684\u201C@\u66B4\u51FB\u503C\u201D\u7684\u5F62\u5F0F\u3002
  \u3000\u4F8B\uFF09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9

  \u30FB\u5A01\u529B\u8868\u7684\u51CF\u534A (HKx, KxH+N)
  \u3000\u5728\u5A01\u529B\u8868\u5F00\u5934\u6216\u672B\u5C3E\u52A0\u4E0A\u201CH\u201D\uFF0C\u9AB0\u5A01\u529B\u8868\u7684\u6700\u7EC8\u7ED3\u679C\u5C31\u4F1A\u51CF\u534A\u3002
  \u3000H\u5199\u5728\u5A01\u529B\u8868\u672B\u5C3E\u7684\u60C5\u51B5\u4E0B\u53EF\u4EE5\u5728\u540E\u9762\u76F4\u63A5\u8DDF\u7740\u4FEE\u6B63\uFF0C\u4F1A\u5728\u51CF\u534A\u540E\u8FDB\u884C\u52A0\u51CF\u8FD0\u7B97\u3002
  \u3000\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u591A\u4E2A\u4FEE\u6B63\u9700\u8981\u7528\u62EC\u53F7\u62EC\u8D77\u6765\uFF08\u5426\u5219\u4F1A\u89E3\u6790\u5931\u8D25\uFF09
  \u3000\u6CA1\u6709\u6307\u5B9A\u66B4\u51FB\u503C\u7684\u60C5\u51B5\u4E0B\uFF0C\u5219\u89C6\u4E3A\u6CA1\u6709\u66B4\u51FB\u503C\u3002
  \u3000\u4F8B\uFF09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H+(1+1)

  \u30FB\u9AB0\u5B50\u51FA\u76EE\u4FEE\u6B63\uFF08\u547D\u8FD0\u53D8\u8F6C\u6216\u91CD\u51FB\u5149\u8F89\u7528\uFF09
  \u3000\u5728\u6307\u4EE4\u672B\u5C3E\u6DFB\u52A0\u201C$\u4FEE\u6B63\u503C\u201D\u6765\u6539\u53D8\u9AB0\u5B50\u51FA\u76EE\u3002
  \u3000\u53EF\u4EE5\u4F7F\u7528$+1\u7684\u683C\u5F0F\u5728\u9AB0\u5B50\u51FA\u76EE\u4E0A+\u4FEE\u6B63\uFF0C\u6216\u4F7F\u7528$9\u7684\u683C\u5F0F\u628A\u9AB0\u5B50\u51FA\u76EE\u66FF\u6362\u4E3A\u56FA\u5B9A\u503C\u3002
  \u3000\u66B4\u51FB\u65F6\u53EA\u6709\u7B2C\u4E00\u6B21\u51FA\u76EE\u5E94\u7528\u8FD9\u4E2A\u4FEE\u6B63\u3002
  \u3000\u4F8B\uFF09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9

  \u30FB\u9AB0\u5B50\u51FA\u76EE\u4FEE\u6B63\uFF08\u5FC5\u6740\u653B\u51FB\u7528\uFF09
  \u3000\u5199\u6210\u201C#\u4FEE\u6B63\u503C\u201C\u7684\u683C\u5F0F\u6765\u589E\u52A0\u9AB0\u5B50\u51FA\u76EE\u3002
  \u3000\u66B4\u51FB\u65F6\u540E\u7EED\u9AB0\u5B50\u4E5F\u4F1A\u7EE7\u7EED\u5E94\u7528\u4FEE\u6B63\u503C\u3002
  \u3000\u4F8B\uFF09K20#1\u3000\u3000\u3000k10-5@9#2

  \u30FB\u5A01\u529B\u4E0A\u5347\uFF08\u65A9\u9996\u5200\u7528\uFF09 r5
  \u3000r\u540E\u8DDF\u4E0A\u5347\u503C\uFF0C\u66B4\u51FB\u540E\u5A01\u529B\u4E0A\u5347r\u540E\u6240\u586B\u5199\u7684\u4E0A\u5347\u503C\u70B9
  \u3000\u4F8B\uFF09K20r5\u3000K30+24@8R5\u3000K40+24@8$12r5

  \u30FB\u6781\u9650\u547D\u8FD0\u5728\u672B\u5C3E\u52A0\u4E0A gf
  \u3000\u4F8B\uFF09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r5gf

  \u30FB\u5A01\u529B\u8868\u4F7F\u75281d+\u56FA\u5B9A\u503C\u5BF9\u5E94 \u66B4\u51FB\u540E\u4ECD\u7EE7\u7EED sf4
  \u3000\u4F8B\uFF09k10sf4\u3000k0+5sf4@13\u3000k70+26sf3@9

  \u30FB\u5A01\u529B\u8868\u4F7F\u75281d+\u56FA\u5B9A\u503C\u5BF9\u5E94 \u66B4\u51FB\u540E\u53D8\u56DE\u4F7F\u75282d\u5BF9\u5E94 tf3
  \u3000\u4F8B\uFF09k10tf3\u3000k0+5tf4@13\u3000k70+26tf3@9

  \u30FB\u8D85\u8D8A\u5224\u5B9A\u75282d6\u53EF\u5199\u6210 2d6@10 \u7684\u683C\u5F0F\u52A0\u4E0A\u66B4\u51FB\u503C\u3002
  \u3000\u4F8B\uFF092D6@10\u30002D6@10+11>=30

  \u30FB\u6210\u957F\u3000(Gr)
  \u3000\u5728Gr\u540E\u9762\u52A0\u4E0A\u6570\u5B57\u53EF\u4EE5\u8FDB\u884C\u591A\u6B21\u6210\u957F\u3002
  \u3000\u4F8B\uFF09Gr3

  \u30FB\u9632\u5FA1\u5927\u5931\u8D25\u8868\u3000(FT)
  \u3000\u62BD\u53D6\u9632\u5FA1\u5927\u5931\u8D25\u8868\u3002

  \u30FB\u7F20\u7ED5\u6548\u679C\u8868\u3000(TT)
  \u3000\u62BD\u53D6\u7F20\u7ED5\u6548\u679C\u8868\u3002

  \u30FB\u5FB7\u9C81\u4F0A\u7528\u7269\u7406\u9B54\u6CD5\u8868 (Dru[2~6\u7684\u7ED3\u679C\uFF0C7~9\u7684\u7ED3\u679C\uFF0C10~12\u7684\u7ED3\u679C])
  \u3000\u4F8B\uFF09Dru[0,3,6]+10-3

  \u30FB\u5948\u843D\u8BC5\u5492\u8868\u3000(ABT)
  \u3000\u62BD\u53D6\u5948\u843D\u8BC5\u5492\u8868\u3002
`),T.$register_prefix_from_super_class(),D(T,"$initialize",function A(N){var L=A.$$p||b,S=this;return A.$$p=null,y(S,M(S,"initialize",A,!1,!0),"initialize",[N],null),S.locale="zh_hans"})}(I[0],V("SwordWorld2_5"),I)}(H[0],H)}(j[0],j)});var wr=je(Le()),Ce=class extends wr.default{dynamicImportI18n(C,z){return new Promise(g=>g({}))}dynamicImport(C){return new Promise(z=>z())}};function kr(e){let C=[],z=[];for(let y=0;y<e.length;y++)switch(e[y]){case"{":{C.push(y);break}case"}":{if(!C.length)throw new Error("\u5B58\u5728 } \u4F46\u627E\u4E0D\u5230\u5BF9\u5E94\u7684 {");let D=C.pop();D!==void 0&&z.push([D,y]);break}}if(C.length)throw new Error("\u53E5\u4E2D\u6709\u672A\u7ED3\u675F\u7684 {");let g=[];for(let y=0;y<z.length;y++){let M=z[y],D=!0;for(let X=0;X<z.length;X++){let j=z[X];if(M[0]>j[0]&&M[1]<j[1]){D=!1;break}}D&&g.push(M)}return g}var He,dt=new Ce;dt.dynamicLoad("SwordWorld2.5:SimplifiedChinese").then(e=>{He=e,vt()}).catch(e=>{console.error("JS\u63D2\u4EF6\u5251\u4E16\u754C2.5\u52A0\u8F7D\u5931\u8D25:"+e.toString())});var ht={"\uFF1E":">","<":"<","\uFF0C":","},mt=function(e,C,z){return e.replace(new RegExp(C,"gm"),z)},vt=()=>{let e=seal.ext.find("sw");e||(e=seal.ext.new("sw","\u6728\u843D","1.1.0"),seal.ext.register(e));let C=seal.ext.newCmdItemInfo();C.name="sw",C.help=`\u5251\u4E16\u754C\u9AB0\u70B9\uFF0C\u683C\u5F0F\u4E3A .sw <\u5F0F\u5B50>\uFF0C\u4EE5\u4E0B\u8BF4\u660E\u4E3A\u7CFB\u7EDF\u539F\u6587:

`+He.HELP_MESSAGE,C.solve=(z,g,y)=>{let M=y.getArgN(1);switch(M){case"help":case"":{let D=seal.ext.newCmdExecuteResult(!0);return D.showHelp=!0,D}case"ver":case"version":{seal.replyToSender(z,g,`BCDice Version ${Nr.Version}`);break}default:{let D="";M=y.cleanArgs;for(let[j,b]of Object.entries(ht))M=mt(M,j,b);if(M)try{let j=kr(M),b=M.length;for(let U=j.length-1;U>=0;U--){let F=j[U];D=seal.format(z,M.slice(F[0],F[1]+1))+M.slice(F[1]+1,b)+D,b=F[0]}D=M.slice(0,b)+D,console.log(">DiceText: "+D)}catch(j){return seal.replyToSender(z,g,"\u6267\u884C\u5931\u8D25\uFF0C\u53EF\u80FD\u662F\u5BF9 {} \u7684\u4F7F\u7528\u4E0D\u89C4\u8303: "+j.toString()),seal.ext.newCmdExecuteResult(!0)}let X=He.eval(D||"");X?seal.replyToSender(z,g,X.text):seal.replyToSender(z,g,"\u6267\u884C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u4F60\u7684\u5F0F\u5B50")}}return seal.ext.newCmdExecuteResult(!0)},e.cmdMap.sw=C};})();
